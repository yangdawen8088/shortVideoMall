{"version":3,"sources":["webpack:////Volumes/machard/HBuilderProject/goodshowuni/main.js","webpack:////Volumes/machard/HBuilderProject/goodshowuni/comps/toast/toast.js","webpack:////Volumes/machard/HBuilderProject/goodshowuni/App.vue?cc2d","webpack:////Volumes/machard/HBuilderProject/goodshowuni/App.vue?e7ad","webpack:////Volumes/machard/HBuilderProject/goodshowuni/App.vue","webpack:////Volumes/machard/HBuilderProject/goodshowuni/App.vue?0d82","webpack:///../../../../../HBuilderProject/goodshowuni/App.vue"],"names":["Vue","config","productionTip","prototype","systemInfo","App","uni","getSystemInfoSync","setUserInfo","user","setStorageSync","JSON","stringify","userInfo","phone","head_img","removeStorageSync","lastUserInfo","userjson","getStorageSync","parse","getUserInfo","console","log","login","getGlobalData","globalData","setGlobalData","data","Object","assign","getOpenId","success","openres","provider","res","request","url","method","js_code","code","header","infoRes","openid","fail","e","modalName","getWeixinUserInfo","nickName","postJson","system","systemName","model","deviceName","brand","deviceUUID","phoneModel","platform","systemVersion","localPhoneModel","terminal","uid","loginUid","avatarUrl","gender","deviceCode","path","complete","back","navigateBack","toPage","page","navigateTo","mpType","app","$mount","_compData","toastPannel","toastSuccess","self","setData","setTimeout","toastFilled","ToastPannel","pages","getCurrentPages","curPage","length","__page","module","exports"],"mappings":"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BAAgB,+JAAU;AAC1B,EAAE,yEAAM;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAYf;AACD;AACe,gF;;;;;;;;;;;;AClCf;AAAA;AAAA;AAAA;AAA0yB,CAAgB,60BAAG,EAAC,C;;;;;;;;;;;;;ACC9zB,qE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,6BAFA,CAEA;AACA;AACA;AACA,cADA;AAEA,uBAFA;;AAIA;AACA;;AAEA;AACA;AACA;AACA,0BADA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mDAFA,CAEA;AACA,yDAHA,CAGA;AACA;AACA;AACA;AACA;AACA;AACA,KAFA,MAEA;AACA;AACA;AACA;AACA,GARA,EAQA,CARA;AASA;AACA;AACA;;;;;AAKA;AACA,eADA;AAEA,gBAFA;AAGA,MAHA,gBAGA,GAHA,EAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAXA;AAYA,QAZA,oBAYA;AACA;AACA;AACA;AACA;AACA;AACA,GAlBA,G;;;AAqBA;AACA,0BADA;AAEA;AACA,uBADA;AAEA,kBAFA;AAGA,sBAHA;AAIA,4BAJA;AAKA,gBALA,CAKA;AALA,GAFA;;;;AAYA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAnBA,sBAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,KAFA;AAGA;AACA;AACA,KAFA;AAGA;AACA;AACA,KAFA;AAGA;AACA;AACA,KAFA;;AAIA;AACA;AACA,KAFA;AAGA;AACA;AACA,KAFA;;;AAKA;AACA;AACA,cADA,oBACA,OADA,EACA;AACA;;AAEA,OAJA;AAKA,iBALA,yBAKA;AACA;AACA,yBADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA,OAXA;AAYA,uBAZA,+BAYA;AACA;AACA;AACA;AACA;AACA,OAjBA;AAkBA,cAlBA,sBAkBA;AACA;AACA,wBADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA;AACA;AACA;AACA;AACA;AACA,OA7BA;AA8BA,qBA9BA,2BA8BA,OA9BA,EA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OA1CA;AA2CA,gBA3CA,sBA2CA,OA3CA,EA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA,4BAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,4BAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBArFA;;AAuFA,OApIA;;AAsIA,cAtIA,oBAsIA,OAtIA,EAsIA;AACA;AACA;AACA;AACA;AACA,OA3IA;;AA6IA,oBA7IA,0BA6IA,OA7IA,EA6IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OApJA;;AAsJA,oBAtJA,0BAsJA,OAtJA,EAsJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OA/JA;;AAiKA,kBAjKA,wBAiKA,OAjKA,EAiKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OA1KA;;AA4KA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAnLA,yBAmLA,OAnLA,EAmLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OA5LA;;AA8LA,oBA9LA,0BA8LA,OA9LA,EA8LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAvMA;;AAyMA,sBAzMA,4BAyMA,OAzMA,EAyMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAlNA;;AAoNA,mBApNA,yBAoNA,OApNA,EAoNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OA7NA;;AA+NA;AACA,aAhOA,mBAgOA,KAhOA,EAgOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DADA;AAEA,0BAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CADA;AAEA,0BAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,wBAFA;AAGA,0BAHA;;AAKA;AACA;AACA,OAjRA;;AAmRA;;AAEA;AACA;AACA;AACA;AACA,mCADA;AAEA,sBAFA;AAGA,qBAHA;AAIA,8BAJA;AAKA,mCALA;;AAOA;AACA,GApVA;AAqVA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,eAFA,uBAEA,EAFA,EAEA;AACA;AACA;AACA;AACA,OAFA;AAGA;AACA;AACA;AACA,iBADA,qBACA;AACA;AACA,qBADA,mBACA,GADA,EACA;AACA;AACA;AACA,eAJA;;AAMA,WARA;;AAUA;AACA,KApBA;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SANA;;AAQA,KA/BA,EAvWA,E","file":"common/main.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport App from './App'\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVue.config.productionTip = false\n\nVue.prototype.systemInfo = function(){\n\tif(!App.systemInfo){\n\t\tApp.systemInfo = uni.getSystemInfoSync();\n\t}\n\treturn App.systemInfo;\n}\nVue.prototype.setUserInfo = function(user){\n\tif(user){\n\t\tuni.setStorageSync(\"user\", JSON.stringify(user));\n\t\tApp.userInfo = user;\n\t\tuni.setStorageSync(\"lastUser\", JSON.stringify({phone:user.phone,head_img:user.head_img}));\n\t}else{\n\t\tuni.removeStorageSync(\"user\");\n\t\tApp.userInfo = null;\n\t}\n\t\n}\nVue.prototype.lastUserInfo = function(){\n\tlet userjson = uni.getStorageSync(\"lastUser\");\n\tif(userjson){\n\t\treturn JSON.parse(userjson);\n\t}else{\n\t\treturn {};\n\t}\n}\nVue.prototype.getUserInfo = function(){\n\tif(!App.userInfo){\n\t\t\n\t\n\t\tconst userjson = uni.getStorageSync(\"user\");\n\t\tconsole.log(\"userjson:\"+userjson);\n\t\tif(userjson){\n\t\t\tApp.login = true;\n\t\t\tApp.userInfo = JSON.parse(userjson);\n\t\t\t\n\t\t}else{\n\t\t\tApp.login = false;\n\t\t\tApp.userInfo = null;\n\t\t}\n\t\t\n\t}\n\tconsole.log(App.userInfo);\n\treturn App.userInfo;\n}\n\nVue.prototype.getGlobalData = function(){\n\tif(!App.globalData){\n\t\t\n\t\tApp.globalData = {};\n\t\t\n\t\t\n\t}\n\tconsole.log(App.globalData);\n\treturn App.globalData;\n}\n\nVue.prototype.setGlobalData = function(data){\n\tif(!App.globalData){\n\t\t\n\t\tApp.globalData = {};\n\t\t\n\t\t\n\t}\n\tApp.globalData = Object.assign(App.globalData, data);\n\tconsole.log(App.globalData);\n\treturn App.globalData;\n}\nVue.prototype.getOpenId = function(success){\n\t\n\n\n\n\n\n\n\n\t\n\tif(App.openres){\n\t\tsuccess(App.openres);\n\t\treturn;\n\t}\n\tuni.login({\n\t\tprovider:\"weixin\",\n\t\tsuccess:(res) => {\n\t\t\tconsole.log(res);\n\t\t\t\n\t\t\tuni.request({\n\t\t\t\turl: 'https://www.dpsoft.top/user_wx_openid.jsp', \n\t\t\t\tmethod:\"POST\",\n\t\t\t\tdata:{\n\t\t\t\t\tjs_code:res.code\n\t\t\t\t},\n\t\t\t\theader: {\n\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t},\n\t\t\t\tsuccess:(res) => {\n\t\t\t\t\tApp.openres = res.data.data;\n\t\t\t\t\tuni.getUserInfo({\n\t\t\t\t\t\tprovider:\"weixin\",\n\t\t\t\t\t\tsuccess:(infoRes) => {\n\t\t\t\t\t\t\tinfoRes.openid = res.data.data.openid;\n\t\t\t\t\t\t\tApp.openres = infoRes;\n\t\t\t\t\t\t\tif(success){\n\t\t\t\t\t\t\t\tsuccess(infoRes);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail(e) {\n\t\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\t\tApp.modalName = 'userinfo';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t})\n\t\n\n}\nVue.prototype.getWeixinUserInfo = function(config){\n\n\n\n\n\n\n\t// uni.authorize({\n\t// \tscope: 'scope.userInfo',\n\t// \tsuccess() {\n\t\t\tuni.getUserInfo({\n\t\t\t  provider: 'weixin',\n\t\t\t  success: function (infoRes) {\n\t\t\t\tconsole.log('用户昵称为：' + infoRes.userInfo.nickName);\n\t\t\t\t\n\t\t\t\tif(config.success){\n\t\t\t\t\tconfig.success(infoRes);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t  }\n\t\t\t});\n\t// \t},\n\t// \tfail(e){\n\t// \t\tconsole.log(e);\n\t// \t\tuni.hideLoading();\n\t// \t\tuni.showToast({\n\t// \t\t\ticon:\"none\",\n\t// \t\t\ttitle:JSON.stringify(e)\n\t// \t\t});\n\t// \t}\n\t// });\n\n}\n\nVue.prototype.postJson = function(config){\n\tlet data = config.data;\n\tlet system = this.systemInfo();\n\tdata.systemName = system.model;\n\tdata.deviceName = system.brand;\n\tif(!data.deviceName){\n\n\t\tdata.deviceName = \"小程序\";\n\n\n\n\n\t}\n\tdata.deviceUUID = \"unknow\";\n\tdata.phoneModel = system.platform;\n\tdata.systemVersion = system.system;\n\tdata.localPhoneModel = system.platform;\n\n\tdata.terminal = \"MP-WEIXIN\";\n\n\n\n\n\n\n\n\n\tif(this.getUserInfo()){\n\t\tlet uid = this.getUserInfo().uid;\n\t\tdata.loginUid = uid;\n\t\tif(!data.uid){\n\t\t\tdata.uid = uid;\n\t\t}\n\t}\n\t\n\tthis.getOpenId((res) => {\n\t\tif(res){\n\t\t\tdata.deviceUUID = res.openid;\n\t\t\tdata.deviceName = res.userInfo.nickName;\n\t\t\tdata.avatarUrl = res.userInfo.avatarUrl;\n\t\t\tdata.gender = res.userInfo.gender;\n\t\t\t\n\t\t}else{\n\t\t\tdata.deviceUUID = deviceCode();\n\t\t}\n\t\tconsole.log(data);\n\t\tuni.request({\n\t\t\t\turl: 'https://www.dpsoft.top'+config.path, \n\t\t\t\tmethod:\"POST\",\n\t\t\t\tdata: data,\n\t\t\t\theader: {\n\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t},\n\t\t\t\tsuccess: config.success,\n\t\t\t\tfail:config.fail,\n\t\t\t\tcomplete:config.complete\n\t\t});\n\t\t\n\t});\n\t\n\t\n}\nVue.prototype.back = function(){\n\tuni.navigateBack({\n\t\t\n\t});\n}\nVue.prototype.toPage = function(page){\n\tuni.navigateTo({\n\t\turl:page\n\t});\n}\nApp.mpType = 'app'\n\nconst app = new Vue({\n    ...App\n})\napp.$mount()","let _compData = {\n  '_toast_.isHide': false,// 控制组件显示隐藏\n  '_toast_.content': ''// 显示的内容\n}\nlet toastPannel = {\n  // toast显示的方法\n  toastSuccess: function (data) {\n    let self = this;\n    this.setData({ '_toast_.isHidescss': true, '_toast_.content': data });\n    setTimeout(function () {\n      self.setData({ '_toast_.isHidescss': false })//自定义方法，根据编辑需求\n    }, 2000)\n  },\n\n   toastFilled: function (data) {\n    let self = this;\n    this.setData({ '_toast_.isHidefil': true, '_toast_.content': data });\n    setTimeout(function () {\n      self.setData({ '_toast_.isHidefil': false })//自定义方法，根据编辑需求\n    }, 2000)\n  }\n}\n\nfunction ToastPannel() {//构造方法关联了当前页的方法及相关代码\n  // 拿到当前页面对象\n  let pages = getCurrentPages();\n  let curPage = pages[pages.length - 1];\n  this.__page = curPage;\n  // 小程序最新版把原型链干掉了。。。换种写法\n  Object.assign(curPage, toastPannel);\n  // 附加到page上，方便访问\n  curPage.toastPannel = this;\n  // 把组件的数据合并到页面的data对象中\n  curPage.setData(_compData);\n  return this;\n}\n\nmodule.exports = {\n  ToastPannel\n}","import mod from \"-!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin","var render, staticRenderFns\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Volumes/machard/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('40da4abe', component.options)\n    } else {\n      api.reload('40da4abe', component.options)\n    }\n    \n  }\n}\ncomponent.options.__file = \"HBuilderProject/goodshowuni/App.vue\"\nexport default component.exports","import mod from \"-!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"","<script>\n\timport Vue from 'vue'\nrequire(\"sdk/libs/strophe\");\nlet WebIM = require(\"utils/WebIM\")[\"default\"];\nlet msgStorage = require(\"comps/chat/msgstorage\");\nlet msgType = require(\"comps/chat/msgtype\");\nlet ToastPannel = require(\"./comps/toast/toast\");\nlet disp = require(\"utils/broadcast\");\n\nlet logout = false;\n\nfunction ack(receiveMsg) {\n  // 处理未读消息回执\n  var bodyId = receiveMsg.id;         // 需要发送已读回执的消息id\n  var ackMsg = new WebIM.message(\"read\", WebIM.conn.getUniqueId());\n  ackMsg.set({\n    id: bodyId,\n    to: receiveMsg.from\n  });\n  WebIM.conn.send(ackMsg.body);\n}\n\nfunction onMessageError(err) {\n  if (err.type === \"error\") {\n    uni.showToast({\n      title: err.errorText\n    });\n    return false;\n  }\n  return true;\n}\n\nfunction getCurrentRoute() {\n  let pages = getCurrentPages();\n  let currentPage = pages[pages.length - 1];\n  return currentPage.route;\n}\n\nfunction calcUnReadSpot(message) {\n  let myName = uni.getStorageSync(\"myUsername\");\n  let members = uni.getStorageSync(\"member\") || []; //好友\n  var listGroups = uni.getStorageSync('listGroup') || []; //群组\n  let allMembers = members.concat(listGroups)\n  let count = allMembers.reduce(function (result, curMember, idx) {\n    let chatMsgs;\n    if (curMember.roomId) {\n      chatMsgs = uni.getStorageSync(curMember.roomId + myName.toLowerCase()) || [];\n    } else {\n      chatMsgs = uni.getStorageSync(curMember.name.toLowerCase() + myName.toLowerCase()) || [];\n    }\n    return result + chatMsgs.length;\n  }, 0);\n  getApp().globalData.unReadMessageNum = count;\n  disp.fire(\"em.xmpp.unreadspot\", message);\n}\n\n\n\n\nVue.prototype.conn = {\n\t\tclosed: false,\n\t\tcurOpenOpt: {},\n\t\topen(opt) {\n\t\t  // uni.showLoading({\n\t\t  //   title: '正在初始化客户端...',\n\t\t  //   mask: true\n\t\t  // })\n\t\t  this.curOpenOpt = opt;\n\t\t  WebIM.conn.open(opt);\n\t\t  this.closed = false;\n\t\t},\n\t\treopen() {\n\t\t  if (this.closed) {\n\t\t\t//this.open(this.curOpenOpt);\n\t\t\tWebIM.conn.open(this.curOpenOpt);\n\t\t\tthis.closed = false;\n\t\t  }\n\t\t}\n\t  };\n\r\nexport default {\n  ToastPannel,\n  globalData: {\n    unReadMessageNum: 0,\n    userInfo: null,\n    saveFriendList: [],\n    saveGroupInvitedList: [],\n    isIPX: false //是否为iphone X\n  },\n\n  \n\n  // getPage(pageName){\n  // \tvar pages = getCurrentPages();\n  // \treturn pages.find(function(page){\n  // \t\treturn page.__route__ == pageName;\n  // \t});\n  // },\n\n  onLaunch() {\n    // 调用 API 从本地缓存中获取数据\n\tuni.createInnerAudioContext().obeyMuteSwitch = false;\n    // uni.setInnerAudioOption({ obeyMuteSwitch: false })\n    var me = this;\n    var logs = uni.getStorageSync(\"logs\") || [];\n    logs.unshift(Date.now());\n    uni.setStorageSync(\"logs\", logs);\n\n\n    // \n    disp.on(\"em.main.ready\", function () {\n      calcUnReadSpot();\n    });\n    disp.on(\"em.chatroom.leave\", function () {\n      calcUnReadSpot();\n    });\n    disp.on(\"em.chat.session.remove\", function () {\n      calcUnReadSpot();\n    });\n    disp.on('em.chat.audio.fileLoaded', function () {\n      calcUnReadSpot()\n    });\n\n    disp.on('em.main.deleteFriend', function () {\n      calcUnReadSpot()\n    });\n    disp.on('em.chat.audio.fileLoaded', function () {\n      calcUnReadSpot()\n    });\n\n\n    // \n    WebIM.conn.listen({\n      onOpened(message) {\n        WebIM.conn.setPresence();\n        \n      },\n      onReconnect() {\n        uni.showToast({\n          title: \"重连中...\",\n          icon: 'none',\n          duration: 2000\n        });\n      },\n      onSocketConnected() {\n        // uni.showToast({\n        //   title: \"socket连接成功\",\n        //   duration: 2000\n        // });\n      },\n      onClosed() {\n        uni.showToast({\n          title: \"网络已断开\",\n          icon: 'none',\n          duration: 2000\n        });\n        // uni.redirectTo({\n        //   url: \"../login/login\"\n        // });\n        me.conn.closed = true;\n        WebIM.conn.close();\n      },\n      onInviteMessage(message) {\n        me.globalData.saveGroupInvitedList.push(message);\n        disp.fire(\"em.xmpp.invite.joingroup\", message);\n        // uni.showModal({\n        // \ttitle: message.from + \" 已邀你入群 \" + message.roomid,\n        // \tsuccess(){\n        // \t\tdisp.fire(\"em.xmpp.invite.joingroup\", message);\n        // \t},\n        // \terror(){\n        // \t\tdisp.fire(\"em.xmpp.invite.joingroup\", message);\n        // \t}\n        // });\n      },\n      onPresence(message) {\n        //console.log(\"onPresence\", message);\n        switch (message.type) {\n          case \"unsubscribe\":\n            // pages[0].moveFriend(message);\n            break;\n          // 好友邀请列表\n          case \"subscribe\":\n            if (message.status === \"[resp:true]\") {\n\n            }\n            else {\n              // pages[0].handleFriendMsg(message);\n              for (let i = 0; i < me.globalData.saveFriendList.length; i++) {\n                if (me.globalData.saveFriendList[i].from === message.from) {\n                  me.globalData.saveFriendList[i] = message\n                  disp.fire(\"em.xmpp.subscribe\");\n                  return;\n                }\n              }\n              me.globalData.saveFriendList.push(message);\n              disp.fire(\"em.xmpp.subscribe\");\n            }\n            break;\n          case \"subscribed\":\n            uni.showToast({\n              title: \"添加成功\",\n              duration: 1000\n            });\n            disp.fire(\"em.xmpp.subscribed\");\n            break;\n          case \"unsubscribed\":\n            // uni.showToast({\n            // \ttitle: \"已拒绝\",\n            // \tduration: 1000\n            // });\n            break;\n          case \"memberJoinPublicGroupSuccess\":\n            uni.showToast({\n              title: \"已进群\",\n              duration: 1000\n            });\n            break;\n          // 好友列表\n          // case \"subscribed\":\n          // \tlet newFriendList = [];\n          // \tfor(let i = 0; i < me.globalData.saveFriendList.length; i++){\n          // \t\tif(me.globalData.saveFriendList[i].from != message.from){\n          // \t\t\tnewFriendList.push(me.globalData.saveFriendList[i]);\n          // \t\t}\n          // \t}\n          // \tme.globalData.saveFriendList = newFriendList;\n          // \tbreak;\n          // 删除好友\n          case \"unavailable\":\n            disp.fire(\"em.xmpp.contacts.remove\");\n            disp.fire(\"em.xmpp.group.leaveGroup\", message);\n            break;\n\n          case 'deleteGroupChat':\n            disp.fire(\"em.xmpp.invite.deleteGroup\", message);\n            break;\n\n          case \"leaveGroup\":\n            disp.fire(\"em.xmpp.group.leaveGroup\", message);\n            break;\n\n          case \"removedFromGroup\":\n            disp.fire(\"em.xmpp.group.leaveGroup\", message);\n            break;\n          // case \"joinChatRoomSuccess\":\n          // \tuni.showToast({\n          // \t\ttitle: \"JoinChatRoomSuccess\",\n          // \t});\n          // \tbreak;\n          // case \"memberJoinChatRoomSuccess\":\n          // \tuni.showToast({\n          // \t\ttitle: \"memberJoinChatRoomSuccess\",\n          // \t});\n          // \tbreak;\n          // case \"memberLeaveChatRoomSuccess\":\n          // \tuni.showToast({\n          // \t\ttitle: \"leaveChatRoomSuccess\",\n          // \t});\n          // \tbreak;\n\n          default:\n            break;\n        }\n      },\n\n      onRoster(message) {\n        // let pages = getCurrentPages();\n        // if(pages[0]){\n        // \tpages[0].onShow();\n        // }\n      },\n\n      onVideoMessage(message) {\n        console.log(\"onVideoMessage: \", message);\n        if (message) {\n          msgStorage.saveReceiveMsg(message, msgType.VIDEO);\n        }\n        calcUnReadSpot(message);\n        ack(message);\n      },\n\n      onAudioMessage(message) {\n        console.log(\"onAudioMessage\", message);\n        if (message) {\n          if (onMessageError(message)) {\n            msgStorage.saveReceiveMsg(message, msgType.AUDIO);\n          }\n          calcUnReadSpot(message);\n          ack(message);\n        }\n      },\n\n      onCmdMessage(message) {\n        console.log(\"onCmdMessage\", message);\n        if (message) {\n          if (onMessageError(message)) {\n            msgStorage.saveReceiveMsg(message, msgType.CMD);\n          }\n          calcUnReadSpot(message);\n          ack(message);\n        }\n      },\n\n      // onLocationMessage(message){\n      // \tconsole.log(\"Location message: \", message);\n      // \tif(message){\n      // \t\tmsgStorage.saveReceiveMsg(message, msgType.LOCATION);\n      // \t}\n      // },\n\n      onTextMessage(message) {\n        console.log(\"onTextMessage\", message);\n        if (message) {\n          if (onMessageError(message)) {\n            msgStorage.saveReceiveMsg(message, msgType.TEXT);\n          }\n          calcUnReadSpot(message);\n          ack(message);\n        }\n      },\n\n      onEmojiMessage(message) {\n        console.log(\"onEmojiMessage\", message);\n        if (message) {\n          if (onMessageError(message)) {\n            msgStorage.saveReceiveMsg(message, msgType.EMOJI);\n          }\n          calcUnReadSpot(message);\n          ack(message);\n        }\n      },\n\n      onPictureMessage(message) {\n        console.log(\"onPictureMessage\", message);\n        if (message) {\n          if (onMessageError(message)) {\n            msgStorage.saveReceiveMsg(message, msgType.IMAGE);\n          }\n          calcUnReadSpot(message);\n          ack(message);\n        }\n      },\n\n      onFileMessage(message) {\n        console.log('onFileMessage', message);\n        if (message) {\n          if (onMessageError(message)) {\n            msgStorage.saveReceiveMsg(message, msgType.FILE);\n          }\n          calcUnReadSpot(message);\n          ack(message);\n        }\n      },\n\n      // 各种异常\n      onError(error) {\n        console.log(error)\n        // 16: server-side close the websocket connection\n        if (error.type == WebIM.statusCode.WEBIM_CONNCTION_DISCONNECTED && !logout) {\n          if (WebIM.conn.autoReconnectNumTotal < WebIM.conn.autoReconnectNumMax) {\n            return;\n          }\n          uni.showToast({\n            title: \"server-side close the websocket connection\",\n            duration: 1000\n          });\n          // uni.redirectTo({\n          //   url: \"../login/login\"\n          // });\n          logout = true\n          return;\n        }\n        // 8: offline by multi login\n        if (error.type == WebIM.statusCode.WEBIM_CONNCTION_SERVER_ERROR) {\n          uni.showToast({\n            title: \"offline by multi login\",\n            duration: 1000\n          });\n          // uni.redirectTo({\n          //   url: \"../login/login\"\n          // });\n        }\n        if (error.type == WebIM.statusCode.WEBIM_CONNCTION_OPEN_ERROR) {\n          uni.hideLoading()\n          disp.fire(\"em.xmpp.error.passwordErr\");\n          // uni.showModal({\n          // \ttitle: \"用户名或密码错误\",\n          // \tconfirmText: \"OK\",\n          // \tshowCancel: false\n          // });\n        }\n        if (error.type == WebIM.statusCode.WEBIM_CONNCTION_AUTH_ERROR) {\n          uni.hideLoading()\n          disp.fire(\"em.xmpp.error.tokenErr\");\n        }\n        if (error.type == 'socket_error') {///sendMsgError\n          console.log('socket_errorsocket_error', error)\n          uni.showToast({\n            title: \"网络已断开\",\n            icon: 'none',\n            duration: 2000\n          });\n          disp.fire(\"em.xmpp.error.sendMsgErr\", error);\n        }\n      },\n    });\n    this.checkIsIPhoneX();\n\n    if (uni.getStorageSync(\"user\")){\n      var userjson = uni.getStorageSync(\"user\");\n      var user = JSON.parse(userjson);\n      this.conn.open({\n        apiUrl: WebIM.config.apiURL,\n        user: user.uid,\n        pwd: '111111',\n        grant_type: 'password',\n        appKey: WebIM.config.appkey\n      });\n    }\n  },\n  // onShow(){\n  // \tWebIM.conn.reconnect();\n  // },\n\n  // onHide(){\n\n  // \tWebIM.conn.close();\n  // \tWebIM.conn.stopHeartBeat();\n  // },\n\n  // onUnload(){\n  // \tWebIM.conn.close();\n  // \tWebIM.conn.stopHeartBeat();\n  // \tuni.redirectTo({\n  // \t\turl: \"../login/login?myName=\" + myName\n  // \t});\n  // },\n\n  methods:{\n\t\n\t  getUserInfo(cb) {\n\t\tvar me = this;\n\t\tif (this.globalData.userInfo) {\n\t\t  typeof cb == \"function\" && cb(this.globalData.userInfo);\n\t\t}\n\t\telse {\n\t\t  // 调用登录接口\n\t\t  uni.login({\n\t\t\tsuccess() {\n\t\t\t  uni.getUserInfo({\n\t\t\t\tsuccess(res) {\n\t\t\t\t  me.globalData.userInfo = res.userInfo;\n\t\t\t\t  typeof cb == \"function\" && cb(me.globalData.userInfo);\n\t\t\t\t}\n\t\t\t  });\n\t\t\t}\n\t\t  });\n\t\t}\n\t  },\n\t  checkIsIPhoneX: function () {\n\t\tconst me = this\n\t\tuni.getSystemInfo({\n\t\t  success: function (res) {\n\t\t\t// 根据 model 进行判断\n\t\t\tif (res.model && res.model.search('iPhone X') != -1) {\n\t\t\t  me.globalData.isIPX = true\n\t\t\t}\n\t\t  }\n\t\t})\n\t  }\n  }\n\r\n};\r\n</script>\r\n\r\n<style>\r\n/*每个页面公共css */ \n@import \"colorui/main.css\";\n@import \"colorui/icon.css\";\nbody {\n\t--gradualBlack: linear-gradient(0deg, #000000, #222222);\n}\n.bg-gradual-black{\n\tbackground-image: var(--gradualBlack);\n\t\n}\n.bg-gold-light{\n\tbackground-color: #e3c77f;\n}\n.bg-gold-dark{\n\tbackground-color: #b79846;\n}\n.text-gold-light{\n\tcolor:#e3c77f;\n}\n.text-gold-dark{\n\tcolor:#b79846;\n}\r\n</style>\n"],"sourceRoot":""}