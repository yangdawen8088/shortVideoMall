(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods"],{"0422":function(t,e,s){"use strict";var o=s("b074"),i=s.n(o);i.a},2553:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{system:this.systemInfo(),goodsImages:{},goodsImgHeightInit:300,scrollTo:"",goods:{},priceLabel:"",detaillist:[],stylelist:[],styleIndex:-1,promoteFlag:!1,promoteLabel:"",takeTypeArray:["门店消费","免邮","邮费"],price:0}},onShareAppMessage:function(t){var e="「好物短视频」"+this.goods.title;return{title:e,path:"/pages/goods/goods?goodsId="+this.goods.id}},onLoad:function(e){var s=this;t.showShareMenu({});var o=e.goodsId;this.init(o);var i=this.getUserInfo();i||t.$once("logon",function(t){s.init(o)})},methods:{init:function(t){var e=this;this.postJson({path:"/goods_new_detail.jsp",data:{goodsid:t},success:function(t){if(console.log(t.data),"ok"==t.data.status){e.$data.goods=t.data.data,e.promoteFlag=1==e.goods.promote,e.goods.price>e.goods.promote_price?e.priceLabel="¥"+e.goods.promote_price+" ~ ¥"+e.goods.max_price:e.priceLabel="¥"+e.goods.price+" ~ ¥"+e.goods.max_price,e.detaillist=e.goods.detail;var s=e.goods.style;for(var o in s){var i=s[o],a=i.styleName,l=i.goodsPrice,d=a+" ¥"+l,r=i.promotePrice;"undefined"!=typeof r&&null!=r&&(d=a+" ¥"+r),e.stylelist.push(d)}}}})},selectStyle:function(t){console.log("选择商品规格为",t.target.value),this.styleIndex=t.target.value;var e=this.goods.style[this.styleIndex];if(e.promotePrice){this.promoteFlag=!0;var s=e.promoteStarttime,o=e.promoteEndtime,i=Math.floor(Date().getTime()/1e3);i<s?(this.priceLabel="¥"+e.goodsPrice,this.promoteLabel=new Date(1e3*s).toLocaleDateString()+"开始",this.price=e.goodsPrice):i>o?(this.priceLabel="¥"+e.goodsPrice,this.promoteLabel="已结束",this.price=e.goodsPrice):(this.priceLabel="¥"+e.promotePrice,this.promoteLabel=new Date(1e3*o).toLocaleDateString()+"截止",this.price=e.promotePrice)}else this.priceLabel="¥"+e.goodsPrice,this.promoteFlag=!1,this.price=e.goodsPrice},buy:function(){var e=this;if(this.getUserInfo())this.styleIndex>-1?this.toPage("/pages/goods/goodsbuy?goodsId="+this.goods.id+"&styleName="+this.goods.style[this.styleIndex].styleName):(t.showToast({icon:"none",title:"请选择商品规格"}),this.scrollTo="title",setTimeout(function(){e.scrollTo=""},1e3));else{var s=encodeURIComponent("/pages/goods/goods?goodsId="+this.goods.id);this.toPage("/pages/login/login?page="+s)}},contactSeller:function(){var e=this;if(this.getUserInfo())t.showLoading({title:"加载中",mask:!0}),this.postJson({path:"/seller_user.jsp",data:{sellerUid:this.goods.uid,goods:this.goods},success:function(s){if("ok"==s.data.status){var o=s.data.data,i=e.getUserInfo(),a={myName:i.uid,your:e.goods.uid,sellerName:e.goods.seller,sellerHead:o.head_img,seller:o,me:i};t.navigateTo({url:"../chatroom/chatroom?username="+JSON.stringify(a)})}else t.showToast({icon:"none",title:s.data.msg})},complete:function(){t.hideLoading()}});else{var s=encodeURIComponent("/pages/goods/goods?goodsId="+this.goods.id);this.toPage("/pages/login/login?page="+s)}},goodsImageLoad:function(t){var e=t.target.id,s=t.target.height,o=t.target.width,i=690*this.system.windowWidth/750,a=s*i/o;this.goodsImages[e]={width:i,height:a},this.goodsImgHeightInit=a,console.log(goodsImages)}}};e.default=s}).call(this,s("543d")["default"])},"2c3b":function(t,e,s){"use strict";s.r(e);var o=s("db42"),i=s("3975");for(var a in i)"default"!==a&&function(t){s.d(e,t,function(){return i[t]})}(a);s("0422");var l=s("2877"),d=Object(l["a"])(i["default"],o["a"],o["b"],!1,null,null,null);e["default"]=d.exports},3975:function(t,e,s){"use strict";s.r(e);var o=s("2553"),i=s.n(o);for(var a in o)"default"!==a&&function(t){s.d(e,t,function(){return o[t]})}(a);e["default"]=i.a},"7cdf":function(t,e,s){"use strict";s("719a");var o=a(s("b0ce")),i=a(s("2c3b"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,o.default)(i.default))},b074:function(t,e,s){},db42:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"bg-white"},[s("view",{staticClass:"cuIcon-roundleftfill-copy",staticStyle:{position:"fixed",color:"rgba(100,100,100,0.7)",left:"30rpx","font-size":"70rpx","z-index":"99"},style:{top:t.system.statusBarHeight+"px"},attrs:{eventid:"51838730-0"},on:{tap:t.back}}),s("scroll-view",{staticClass:"padding bg-white solid-bottom",staticStyle:{"padding-top":"0","padding-bottom":"0"},style:{height:t.system.windowHeight+"px"},attrs:{"scroll-y":"true","scroll-into-view":t.scrollTo,"enable-back-to-top":""}},[s("view",{staticClass:"flex p-xs  mb-sm",style:{marginTop:t.system.statusBarHeight+30+"px"},attrs:{id:"title"}},[s("view",{staticClass:"flex-sub text-black",staticStyle:{"font-size":"40rpx","font-weight":"bold"}},[t._v(t._s(t.goods.title))])]),s("view",{staticClass:"flex justify-start"},[s("view",{staticClass:"padding-sm text-gold-dark",staticStyle:{"font-size":"46rpx","font-weight":"bold",display:"table-cell","vertical-align":"middle"}},[t._v(t._s(t.priceLabel))]),t.promoteFlag?s("view",{staticStyle:{display:"table-cell","vertical-align":"middle"}},[s("text",{staticClass:"bg-gold-dark",staticStyle:{padding:"5rpx 10rpx",color:"white","border-radius":"10rpx"}},[t._v("促销")])]):t._e(),t.promoteFlag?s("view",{staticStyle:{display:"table-cell","vertical-align":"middle"}},[s("text",{staticClass:"bg-gold-dark",staticStyle:{"font-size":"32rpx"}},[t._v(t._s(t.promoteLabel))])]):t._e()]),null!=t.goods.discount_text?s("view",{staticClass:"flex text-lg text-bold margin-bottom-sm"},[s("view",{staticClass:"flex-sub",staticStyle:{"padding-left":"0"}},[t._v(t._s(t.goods.discount_text))])]):t._e(),s("view",{staticClass:"flex text-lg text-bold margin-bottom-sm"},[s("view",{staticClass:"flex-sub",staticStyle:{"padding-left":"0"}},[t._v("商品规格:")]),s("view",{staticClass:"flex-treble",staticStyle:{"text-decoration":"underline"}},[s("picker",{attrs:{mode:"selector",value:t.styleIndex,range:t.stylelist,eventid:"51838730-1"},on:{change:t.selectStyle}},[t._v(t._s(t.styleIndex>-1?t.goods.style[t.styleIndex].styleName:"请选择"))])],1)]),s("view",{staticClass:"flex justify-start margin-bottom-sm align-center"},[s("image",{staticStyle:{height:"34rpx",width:"34rpx","border-radius":"10rpx"},attrs:{src:"/static/img/dian_small.png"}}),s("view",{staticClass:"text-lg text-bold text-gold-dark",staticStyle:{"margin-left":"10rpx"}},[t._v(t._s(t.goods.seller))])]),s("view",{staticClass:"flex text-lg text-bold margin-bottom-sm",staticStyle:{display:"table","vertical-align":"middle"}},[s("view",{staticStyle:{display:"table-cell","vertical-align":"middle",width:"30%"}},[t._v(t._s(t.takeTypeArray[t.goods.take_type])),2==t.goods.take_type?s("text",{staticClass:"text-price text-gold-dark"},[t._v(t._s(t.goods.post_fee))]):t._e()]),s("view",{staticStyle:{display:"table-cell","vertical-align":"middle"}},[s("image",{staticStyle:{height:"40rpx",width:"40rpx"},attrs:{src:"/static/img/small_location.png"}})]),s("view",{staticStyle:{display:"table-cell","font-size":"26rpx","vertical-align":"middle"}},[t._v(t._s(t.goods.location))])]),s("view",{staticStyle:{border:"solid 0.1rpx #666"}}),s("view",{staticStyle:{margin:"20rpx 0","padding-bottom":"100rpx"}},t._l(t.detaillist,function(e,o){return s("block",{key:o},["text"==e.type?s("text",[t._v(t._s(e.value))]):t._e(),"image"==e.type?s("image",{staticClass:"goods-img",staticStyle:{width:"100%"},style:{height:(t.goodsImages["goodsimg"+o]?t.goodsImages["goodsimg"+o].height:t.goodsImgHeightInit)+"px"},attrs:{id:"goodsimg"+o,src:e.value,eventid:"51838730-2-"+o},on:{load:t.goodsImageLoad}}):t._e()])}))]),s("view",{staticClass:"cu-bar bg-white tabbar border shop fixed ",staticStyle:{top:"unset",bottom:"0","z-index":"100"}},[s("view",{staticClass:"flex-sub submit cuIcon-messagefill text-white",staticStyle:{flex:"1","font-size":"60rpx","background-color":"#222222"},attrs:{eventid:"51838730-3"},on:{tap:t.contactSeller}}),s("view",{staticClass:"flex-treble bg-gold-dark submit text-white",attrs:{eventid:"51838730-4"},on:{tap:t.buy}},[t._v("购买")])])],1)},i=[];s.d(e,"a",function(){return o}),s.d(e,"b",function(){return i})}},[["7cdf","common/runtime","common/vendor"]]]);