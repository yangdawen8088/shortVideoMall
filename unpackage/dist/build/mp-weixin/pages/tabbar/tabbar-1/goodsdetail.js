(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/tabbar-1/goodsdetail"],{"47d0":function(t,e,a){"use strict";a.r(e);var i=a("85d3"),s=a("a01b");for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);var l=a("2877"),r=Object(l["a"])(s["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},"85d3":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",[a("view",{staticClass:"cuIcon-roundleftfill-copy",staticStyle:{position:"fixed",color:"rgba(100,100,100,0.7)",top:"30rpx",left:"30rpx","font-size":"50rpx","z-index":"99"},attrs:{eventid:"55832b36-0"},on:{tap:t.goback}}),a("view",{staticClass:"padding bg-white solid-bottom",staticStyle:{"padding-top":"100rpx"}},[a("view",{staticClass:"flex p-xs  mb-sm"},[a("view",{staticClass:"flex-sub text-black",staticStyle:{"font-size":"40rpx","font-weight":"bold"}},[t._v(t._s(t.goods.title))])]),a("view",{staticClass:"flex justify-start"},[a("view",{staticClass:"padding-sm",staticStyle:{"font-size":"46rpx","font-weight":"bold",color:"red",display:"table-cell","vertical-align":"middle"}},[t._v(t._s(t.priceLabel))]),t.promoteFlag?a("view",{staticStyle:{display:"table-cell","vertical-align":"middle"}},[a("text",{staticStyle:{padding:"5rpx 10rpx",color:"white","background-color":"red","border-radius":"10rpx"}},[t._v("促销")])]):t._e(),t.promoteFlag?a("view",{staticStyle:{display:"table-cell","vertical-align":"middle"}},[a("text",{staticStyle:{color:"red","font-size":"32rpx"}},[t._v(t._s(t.promoteLabel))])]):t._e()]),a("view",{staticClass:"flex text-lg text-bold margin-bottom-sm"},[a("view",{staticClass:"flex-sub",staticStyle:{"padding-left":"0"}},[t._v("商品规格:")]),a("view",{staticClass:"flex-treble",staticStyle:{"text-decoration":"underline"}},[a("picker",{attrs:{mode:"selector",value:t.styleIndex,range:t.stylelist,eventid:"55832b36-1"},on:{change:t.selectStyle}},[t._v(t._s(t.goods.style[t.styleIndex].styleName))])],1)]),a("view",{staticClass:"flex justify-start margin-bottom-sm"},[t._m(0),a("view",{staticClass:"text-lg text-bold text-blue"},[t._v(t._s(t.goods.seller))])]),a("view",{staticClass:"flex text-lg text-bold margin-bottom-sm",staticStyle:{display:"table","vertical-align":"middle"}},[a("view",{staticStyle:{display:"table-cell","vertical-align":"middle",width:"30%"}},[t._v("免费")]),t._m(1),a("view",{staticStyle:{display:"table-cell","font-size":"26rpx","vertical-align":"middle"}},[t._v(t._s(t.goods.location))])]),a("view",{staticStyle:{border:"solid 0.1rpx #666"}}),a("view",{staticStyle:{margin:"20rpx 0"}},t._l(t.detaillist,function(e,i){return a("block",{key:i},["text"==e.type?a("text",[t._v(t._s(e.value))]):t._e(),"image"==e.type?a("image",{attrs:{src:e.value}}):t._e()])}))]),t._m(2),t.tobuy?a("view",{staticStyle:{position:"fixed","z-index":"101",top:"0",left:"0",width:"100%",height:"100%"}},[a("view",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","background-color":"rgba(100,100,100,0.5)"},attrs:{eventid:"55832b36-2"},on:{tap:t.closeBuyLayer}}),a("view",{staticStyle:{position:"absolute",bottom:"0",width:"100%","max-height":"100%","background-color":"#fff"},attrs:{animation:t.tobuyAnimation}},[a("view",{staticClass:"cu-bar bg-red"},[a("view",{staticClass:"action",attrs:{eventid:"55832b36-3"},on:{tap:t.closeBuyLayer}},[a("text",{staticClass:"cuIcon-close"})]),a("view",{staticClass:"content text-bold"},[t._v("下单支付")])]),a("form",[a("view",{staticClass:"cu-form-group margin-top"},[a("view",{staticClass:"title"},[t._v("收货人")]),a("input",{attrs:{placeholder:"输入收货人姓名",name:"input"}})]),a("view",{staticClass:"cu-form-group"},[a("view",{staticClass:"title"},[t._v("手机号")]),a("input",{attrs:{placeholder:"输入收货人手机号",type:"tel",name:"input"}})]),a("view",{staticClass:"cu-form-group"},[a("view",{staticClass:"title"},[t._v("地址选择")]),a("picker",{attrs:{mode:"multiSelector",value:t.regionIndex,range:t.regionArray,eventid:"55832b36-4"},on:{change:t.selectRegion,columnchange:t.regionChange}},[a("view",{staticClass:"picker"},[t._v(t._s(t.regionArray[0][t.regionIndex[0]])+"，"+t._s(t.regionArray[1][t.regionIndex[1]])+"，"+t._s(t.regionArray[2][t.regionIndex[2]]))])])],1),a("view",{staticClass:"cu-form-group"},[a("textarea",{attrs:{maxlength:"-1",placeholder:"请输入详细地址"}})]),a("view",{staticClass:"cu-form-group align-start"},[a("view",{staticClass:"title"},[t._v("备注")]),a("textarea",{attrs:{maxlength:"-1",placeholder:"你想对卖家说什么"}})]),a("view",{staticClass:"cu-form-group"},[a("view",{staticClass:"title"},[t._v("商品价格")]),a("text",{staticClass:"text-red text-bold"},[t._v(t._s(t.priceLabel))])]),a("view",{staticClass:"cu-form-group"},[a("view",{staticClass:"title"},[t._v("购买数量")]),a("uni-number-box",{attrs:{min:0,max:9,mpcomid:"55832b36-0"}},[t._v(t._s(t.count))])],1),a("view",{staticClass:"cu-form-group"},[a("view",{staticClass:"title"},[t._v("运费")]),a("text",{staticClass:"text-red text-bold"},[t._v("¥"+t._s(t.goods.post_fee))])]),a("view",{staticClass:"text-center text-xxl padding text-bold text-price text-red"},[t._v(t._s(t.price*t.count+t.goods.post_fee))]),a("view",{staticClass:"padding flex flex-direction"},[a("button",{staticClass:"cu-btn bg-green margin-tb-sm lg"},[t._v("微信支付")])],1)])],1)]):t._e()])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticStyle:{"border-radius":"10rpx"}},[a("image",{staticStyle:{height:"40rpx",width:"40rpx"},attrs:{src:"../../../static/img/dian_small.png"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticStyle:{display:"table-cell","vertical-align":"middle"}},[a("image",{staticStyle:{height:"40rpx",width:"40rpx"},attrs:{src:"../../../static/img/small_location.png"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"cu-bar bg-white tabbar border shop fixed ",staticStyle:{top:"unset",bottom:"0","z-index":"100"}},[a("view",{staticClass:"flex-sub bg-green submit cuIcon-markfill",staticStyle:{flex:"1","font-size":"60rpx"}}),a("view",{staticClass:"flex-treble bg-red submit"},[t._v("购买")])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},a01b:function(t,e,a){"use strict";a.r(e);var i=a("cb58"),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=s.a},b8fc:function(t,e,a){"use strict";a("719a");var i=o(a("b0ce")),s=o(a("47d0"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(s.default))},cb58:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(a("b253"));function s(t){return t&&t.__esModule?t:{default:t}}var o={components:{uniNumberBox:i.default},data:function(){return{goods:{},priceLabel:"",detaillist:[],stylelist:[],styleIndex:0,promoteFlag:!1,promoteLabel:"",region:["广东省","广州市","海珠区"],regionArray:["请选择","请选择","请选择"],regionIndex:[0,0,0],regionData:[],price:0,count:1,tobuy:!0,tobuyAnimation:{}}},onLoad:function(e){var a=this;t.showToast({title:JSON.stringify(e)});var i=e.goodsId;t.request({url:"https://www.dpsoft.top/goods_new_detail.jsp",method:"POST",data:{goodsid:i},header:{"Content-Type":"application/json"},success:function(t){if(console.log(t.data),"ok"==t.data.status){a.$data.goods=t.data.data,a.promoteFlag=1==a.goods.promote,a.goods.price>a.goods.promote_price?a.priceLabel="¥"+a.goods.promote_price+" ~ ¥"+a.goods.max_price:a.priceLabel="¥"+a.goods.price+" ~ ¥"+a.goods.max_price,a.detaillist=a.goods.detail;var e=a.goods.style;for(var i in e){var s=e[i],o=s.styleName,l=s.goodsPrice,r=o+" ¥"+l,n=s.promotePrice;"undefined"!=typeof n&&null!=n&&(r=o+" ¥"+n),a.stylelist.push(r)}}}});var s=this,o={multiArray:this.regionArray,multiIndex:this.regionIndex,multiData:this.regionData},l="100000";t.request({url:"https://www.dpsoft.top/district.jsp",method:"POST",data:{code:l},header:{"Content-Type":"application/json"},success:function(t){if(console.log(t.data),"ok"==t.data.status){for(var e in o.multiData[0]=t.data.data,o.multiArray[0]=[],t.data.data){var a=t.data.data[e];o.multiArray[0].push(a.name)}o.multiIndex[1]=0,o.multiArray[1]=["请选择"],o.multiArray[2]=["请选择"],o.multiIndex[2]=0,s.regionArray=o.multiArray,s.regionIndex=o.multiIndex,s.regionData=o.multiData}}})},methods:{selectStyle:function(t){console.log("选择商品规格为",t.target.value),this.styleIndex=t.target.value;var e=this.goods.style[this.styleIndex];if(e.promotePrice){this.promoteFlag=!0;var a=e.promoteStarttime,i=e.promoteEndtime,s=Math.floor(Date().getTime()/1e3);s<a?(this.priceLabel="¥"+e.goodsPrice,this.promoteLabel=new Date(1e3*a).toLocaleDateString()+"开始",this.price=e.goodsPrice):s>i?(this.priceLabel="¥"+e.goodsPrice,this.promoteLabel="已结束",this.price=e.goodsPrice):(this.priceLabel="¥"+e.promotePrice,this.promoteLabel=new Date(1e3*i).toLocaleDateString()+"截止",this.price=e.promotePrice)}else this.priceLabel="¥"+e.goodsPrice,this.promoteFlag=!1,this.price=e.goodsPrice},RegionChange:function(t){this.region=t.detail.value},selectRegion:function(t){this.multiIndex=t.detail.value},regionChange:function(e){var a=this,i={multiArray:this.regionArray,multiIndex:this.regionIndex,multiData:this.regionData};switch(i.multiIndex[e.detail.column]=e.detail.value,e.detail.column){case 0:var s=i.multiData[0][i.multiIndex[0]].code;t.request({url:"https://www.dpsoft.top/district.jsp",method:"POST",data:{code:s},header:{"Content-Type":"application/json"},success:function(t){if(console.log(t.data),"ok"==t.data.status){for(var e in i.multiData[1]=t.data.data,i.multiArray[1]=[],t.data.data){var s=t.data.data[e];i.multiArray[1].push(s.name)}i.multiIndex[1]=0,i.multiArray[2]=["请选择"],i.multiIndex[2]=0,a.regionArray=i.multiArray,a.regionIndex=i.multiIndex,a.regionData=i.multiData}}});break;case 1:var o=i.multiData[1][i.multiIndex[1]].code;t.request({url:"https://www.dpsoft.top/district.jsp",method:"POST",data:{code:o},header:{"Content-Type":"application/json"},success:function(t){if(console.log(t.data),"ok"==t.data.status){for(var e in i.multiData[2]=t.data.data,i.multiArray[2]=[],t.data.data){var s=t.data.data[e];i.multiArray[2].push(s.name)}i.multiIndex[2]=0,a.regionArray=i.multiArray,a.regionIndex=i.multiIndex,a.regionData=i.multiData}}});break}},goback:function(){t.navigateBack({})},closeBuyLayer:function(){this.tobuy=!1;var e=t.createAnimation({duration:1e3,timingFunction:"ease-out"});this.tobuyAnimation=e.export()}}};e.default=o}).call(this,a("543d")["default"])}},[["b8fc","common/runtime","common/vendor"]]]);