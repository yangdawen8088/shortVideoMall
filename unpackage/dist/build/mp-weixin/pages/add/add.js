(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/add/add"],{"04c7":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{system:this.systemInfo(),location:{},locationName:"请选择",select:!1,videoPath:"",goods:{},videodesc:""}},onShow:function(){var e=t.getStorageSync("goods");e&&(this.goods=JSON.parse(e),t.removeStorage({key:"goods"}))},methods:{close:function(){t.switchTab({url:"/pages/video/main"})},chooseLocation:function(){var e=this;t.chooseLocation({success:function(t){console.log("位置名称："+t.name),console.log("详细地址："+t.address),console.log("纬度："+t.latitude),console.log("经度："+t.longitude),e.location=t,e.locationName=t.name}})},selectGoods:function(){this.select=!0},hideModal:function(){this.select=!1},selectVideo:function(){var e=this;t.chooseVideo({success:function(t){e.videoPath=t.tempFilePath}})},reselectVideo:function(){var e=this;t.showActionSheet({itemList:["重新选择"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮"),e.selectVideo()},fail:function(t){console.log(t.errMsg)}})},newgoods:function(){var e=this;t.navigateTo({url:"/pages/add/addform",success:function(){e.hideModal()}})},goodslist:function(e){var o=this,s=e.currentTarget.dataset.type;t.navigateTo({url:"/pages/add/goodslist?type="+s,success:function(){o.hideModal()}})},submit:function(){var e=this;this.goods.goodsTitle?this.videoPath.trim().length<=0?t.showToast({icon:"none",title:"请上传短视频"}):this.videodesc.trim().length<=0?t.showToast({icon:"none",title:"请填写推荐理由"}):this.location.name?(t.showLoading({title:"发布中",mask:!0}),t.uploadFile({url:"http://www.dpsoft.top/upload.jsp",filePath:this.videoPath,name:"file",success:function(o){console.log(o.data);var s=JSON.parse(o.data);if("ok"==s.status){var i=c.data,a="http://www.dpsoft.top/"+i,c={};c.videopath=a,c.goodsid=e.goods.goodsId,c.goodsimg=e.goods.goodsImg,c.goodsplatform=e.goods.platform,c.goodstitle=e.goods.goodsTitle,c.goodsprice=e.goods.goodsPrice,c.goodsnick=e.goods.goodsSeller,c.goodsarea=e.goods.goodsArea,c.goodsurl=e.goods.goodsUrl,c.videodesc=e.videodesc,c.locationname=e.location.name,c.locationaddr=e.location.address,c.locationlat=e.location.latitude,c.locationlng=e.location.longitude,c.coverImgUrl=e.goods.goodsImg,e.postJson({path:"video_publish.jsp",data:c,success:function(e){"ok"==e.data.status?t.navigateBack({}):t.showToast({icon:"none",title:c.msg})},complete:function(){t.hideLoading()}})}else t.hideLoading(),t.showToast({icon:"none",title:s.msg})},fail:function(e){t.hideLoading()}})):t.showToast({icon:"none",title:"请选择地理位置"}):t.showToast({icon:"none",title:"请选择商品"})}}};e.default=o}).call(this,o("543d")["default"])},1087:function(t,e,o){"use strict";o.r(e);var s=o("30a3"),i=o("73ba");for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);o("474b");var c=o("2877"),n=Object(c["a"])(i["default"],s["a"],s["b"],!1,null,null,null);e["default"]=n.exports},"30a3":function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{staticClass:"bg-gradual-pink",staticStyle:{position:"fixed",width:"100%",height:"100%"},style:{paddingTop:t.system.statusBarHeight+"px"}},[o("view",{staticClass:"cu-bar "},[o("view",{staticClass:"action",attrs:{eventid:"63b1f4be-0"},on:{tap:t.close}},[o("text",{staticClass:"cuIcon-back"})]),o("view",{staticClass:"content text-bold"},[t._v("推荐好物")])]),o("view",{staticClass:"cu-list menu bg-white"},[o("view",{staticClass:"grid text-center col-1"},[null==t.goods.goodsTitle?o("view",{staticClass:"padding-xl solids-bottom",attrs:{eventid:"63b1f4be-1"},on:{tap:t.selectGoods}},[o("text",{staticClass:"cuIcon-add ",staticStyle:{"font-size":"140rpx",display:"block","line-height":"0.8"}}),o("text",[t._v("添加商品")])]):t._e(),null!=t.goods.goodsTitle?o("view",{staticClass:"cu-item order text-left"},[o("view",{staticClass:"cu-avatar radius",style:{backgroundImage:"url("+t.goods.goodsImg+")"}}),o("view",{staticClass:"content"},[o("view",{staticClass:"text-grey goods-title"},[t._v(t._s(t.goods.goodsTitle))]),o("view",{staticClass:"text-gray text-sm goods-seller"},[o("text",{},[o("text",{staticClass:"cuIcon-shop text-red  margin-right-xs"}),t._v(t._s(t.goods.goodsSeller)),o("text",{staticClass:"fr"},[t._v(t._s(t.goods.goodsArea))])])]),o("view",{staticClass:"goods-action"},[o("text",{staticClass:"text-price text-red text-lg",staticStyle:{"font-size":"40rpx"}},[t._v(t._s(t.goods.goodsPrice))])])])]):t._e(),""==t.videoPath?o("view",{staticClass:"padding-xl solids-bottom",attrs:{eventid:"63b1f4be-2"},on:{tap:t.selectVideo}},[o("text",{staticClass:"cuIcon-add ",staticStyle:{"font-size":"140rpx",display:"block","line-height":"0.8"}}),o("text",[t._v("上传短视频")])]):t._e(),""!=t.videoPath?o("view",{staticClass:"solids-bottom"},[o("video",{staticStyle:{height:"500rpx",width:"100%"},attrs:{src:t.videoPath,objectFit:"contain",eventid:"63b1f4be-3"},on:{tap:t.reselectVideo}})]):t._e()]),o("view",{staticClass:"padding solid-bottom"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.videodesc,expression:"videodesc"}],staticClass:"text-xl",staticStyle:{height:"100rpx",width:"100%"},attrs:{maxlength:"-1",placeholder:"请输入推荐理由",eventid:"63b1f4be-4"},domProps:{value:t.videodesc},on:{input:function(e){e.target.composing||(t.videodesc=e.target.value)}}})]),o("view",{staticClass:"cu-item arrow",attrs:{eventid:"63b1f4be-5"},on:{tap:t.chooseLocation}},[t._m(0),o("view",{staticClass:"action"},[o("text",{staticClass:" text-sm"},[t._v(t._s(t.locationName))])])])]),o("view",{staticClass:"padding flex flex-direction"},[o("view",{staticClass:"text-yellow text-sm"},[t._v("工作人员将在24小时之内审核处理")]),o("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{eventid:"63b1f4be-6"},on:{tap:t.submit}},[t._v("发布")])],1),t.select?o("view",{staticClass:"cu-modal bottom-modal show"},[o("view",{staticStyle:{position:"absolute",width:"100%",height:"100%",top:"0"},attrs:{eventid:"63b1f4be-7"},on:{tap:t.hideModal}}),o("view",{staticClass:"cu-dialog bg-gradual-pink",staticStyle:{padding:"40rpx 0"}},[o("view",{staticClass:"cu-list grid col-4 no-border",staticStyle:{background:"none"}},[o("view",{staticClass:"cu-item",attrs:{eventid:"63b1f4be-8"},on:{tap:t.newgoods}},[o("view",{staticClass:"cuIcon-add",staticStyle:{"font-size":"80rpx"}}),o("text",{staticClass:"text-white",staticStyle:{color:"white"}},[t._v("录入商品")])]),o("view",{staticClass:"cu-item",attrs:{"data-type":"2",eventid:"63b1f4be-9"},on:{tap:t.goodslist}},[o("view",{staticClass:"cuIcon-apps",staticStyle:{"font-size":"80rpx"}}),o("text",{staticStyle:{color:"white"}},[t._v("已录入")])]),o("view",{staticClass:"cu-item",attrs:{"data-type":"3",eventid:"63b1f4be-10"},on:{tap:t.goodslist}},[o("view",{staticClass:"cuIcon-order",staticStyle:{"font-size":"80rpx"}}),o("text",{staticStyle:{color:"white"}},[t._v("我买过的")])]),o("view",{staticClass:"cu-item",attrs:{"data-type":"4",eventid:"63b1f4be-11"},on:{tap:t.goodslist}},[o("view",{staticClass:"cuIcon-choiceness",staticStyle:{"font-size":"80rpx"}}),o("text",{staticStyle:{color:"white"}},[t._v("历史选择")])])])])]):t._e()])},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{staticClass:"content"},[o("text",{},[t._v("地理位置")])])}];o.d(e,"a",function(){return s}),o.d(e,"b",function(){return i})},"474b":function(t,e,o){"use strict";var s=o("b22a"),i=o.n(s);i.a},"630c":function(t,e,o){"use strict";o("719a");var s=a(o("b0ce")),i=a(o("1087"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(i.default))},"73ba":function(t,e,o){"use strict";o.r(e);var s=o("04c7"),i=o.n(s);for(var a in s)"default"!==a&&function(t){o.d(e,t,function(){return s[t]})}(a);e["default"]=i.a},b22a:function(t,e,o){}},[["630c","common/runtime","common/vendor"]]]);