(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"1b5d":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{system:this.systemInfo(),user:this.getUserInfo(),order:{},goods:{},shipArray:["顺丰","申通","韵达","圆通","中通","天天","邮政","德邦","中铁","韵达"],modalName:"",reason:""}},onLoad:function(t){var e=this,s=t.code;this.postJson({path:"/order_detail.jsp",data:{code:s},success:function(t){"ok"==t.data.status&&(e.order=t.data.data.order,e.goods=t.data.data.goods,e.goods.stateLabel=e.getStateLabel(e.goods.status),e.refund=t.data.data.refund,e.order.createTimeLabel=new Date(e.order.create_time).toLocaleDateString())}})},methods:{getStateLabel:function(){if(!this.refund||1!=this.order.status&&2!=this.order.status){var t=["待支付","待发货","待确认","已完成","已退货","已取消"];return t[this.order.status]}return"退货申请中"},orderCancel:function(){var e=this;t.showLoading({title:"加载中"}),this.postJson({path:"/user_order_cancel.jsp",data:{code:this.order.code},success:function(s){t.hideLoading(),"ok"==s.data.status&&t.redirectTo({url:"/pages/order/order?code="+e.order.code})}})},orderSellerCancel:function(){var e=this;this.postJson({path:"/seller_order_cancel.jsp",data:{code:this.order.code},success:function(s){"ok"==s.data.status&&t.redirectTo({url:"/pages/order/order?code="+e.order.code})}})},confirm:function(){var e=this;t.showLoading({title:"加载中"}),this.postJson({path:"/user_order_confirm.jsp",data:{code:this.order.code},success:function(s){t.hideLoading(),"ok"==s.data.status&&t.redirectTo({url:"/pages/order/order?code="+e.order.code})}})},contactBuyer:function(){t.makePhoneCall({phoneNumber:this.order.phone})},contactSeller:function(){t.showLoading({title:"加载中",mask:!0}),this.postJson({path:"/seller_user.jsp",data:{sellerUid:this.goods.seller},success:function(e){if("ok"==e.data.status){var s=e.data.data;t.makePhoneCall({phoneNumber:s.phone})}else t.showToast({icon:"none",title:e.data.msg})},complete:function(){t.hideLoading()}})},orderRefund:function(){var e=this;!this.reason||this.reason.trim().length<=0?t.showToast({icon:"none",title:"请输入退货理由"}):(t.showLoading({title:"加载中"}),this.postJson({path:"/user_order_refund.jsp",data:{code:this.order.code,reason:this.reason},success:function(s){t.hideLoading(),"ok"==s.data.status&&t.redirectTo({url:"/pages/order/order?code="+e.order.code})}}))},refundPass:function(){var e=this;t.showLoading({title:"加载中"}),this.postJson({path:"/seller_order_refund_pass.jsp",data:{code:this.order.code},success:function(s){t.hideLoading(),"ok"==s.data.status&&t.redirectTo({url:"/pages/order/order?code="+e.order.code})}})},refundRefuse:function(){var e=this;!this.reason||this.reason.trim().length<=0?t.showToast({icon:"none",title:"请输入拒绝理由"}):(t.showLoading({title:"加载中"}),this.postJson({path:"/seller_order_refund_refuse.jsp",data:{code:this.order.code,reason:this.reason},success:function(s){t.hideLoading(),"ok"==s.data.status&&t.redirectTo({url:"/pages/order/order?code="+e.order.code})}}))},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=""}}};e.default=s}).call(this,s("543d")["default"])},3526:function(t,e,s){"use strict";var a=s("d28c"),i=s.n(a);i.a},8122:function(t,e,s){"use strict";s.r(e);var a=s("e8bf"),i=s("8678");for(var o in i)"default"!==o&&function(t){s.d(e,t,function(){return i[t]})}(o);s("3526");var c=s("2877"),n=Object(c["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=n.exports},8678:function(t,e,s){"use strict";s.r(e);var a=s("1b5d"),i=s.n(a);for(var o in a)"default"!==o&&function(t){s.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},d28c:function(t,e,s){},e8bf:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"order bg-gradual-pink",staticStyle:{position:"fixed",width:"100%",height:"100%"},style:{paddingTop:t.system.statusBarHeight+"px"}},[s("view",{staticClass:"cu-bar ",staticStyle:{position:"fixed","z-index":"1",width:"100%","background-color":"rgba(224,57,151,0)"}},[s("view",{staticClass:"action",attrs:{eventid:"2fbc4258-0"},on:{tap:t.back}},[s("text",{staticClass:"cuIcon-back"})]),s("view",{staticClass:"content text-bold"},[t._v("订单详情")])]),s("scroll-view",{staticStyle:{width:"100%",height:"100%","padding-top":"100rpx"},attrs:{"scroll-y":"true"}},[s("view",{staticClass:"cu-list menu sm-borde bg-white"},[s("view",{staticClass:"cu-item order"},[s("view",{staticClass:"cu-avatar radius",style:{backgroundImage:"url("+t.goods.img_title+")"}},[s("text",{staticClass:"goods-status"},[t._v(t._s(t.goods.stateLabel))])]),s("view",{staticClass:"content"},[s("view",{staticClass:"text-grey goods-title"},[t._v(t._s(t.goods.title))]),s("view",{staticClass:"text-gray text-sm goods-seller"},[s("text",{},[s("text",{staticClass:"cuIcon-shop text-red  margin-right-xs"}),t._v(t._s(t.goods.seller)),s("text",{staticClass:"fr"},[t._v(t._s(t.goods.area))])])]),s("view",{staticClass:"goods-action"},[s("text",{staticClass:"text-price text-red text-lg",staticStyle:{"font-size":"40rpx"}},[t._v(t._s(t.goods.price))])])])]),null!=t.order.ship_no?s("view",{staticClass:"cu-item arrow"},[s("view",{staticClass:"content"},[s("text",{},[t._v(t._s(t.shipArray[t.order.ship_type])+"运单号")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-sm"},[t._v(t._s(t.order.ship_no))])])]):t._e(),s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v("收货人")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-sm"},[t._v(t._s(t.order.receiver))])])]),s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v("联系电话")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-sm"},[t._v(t._s(t.order.phone))])])]),s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v("收货地址")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-sm"},[t._v(t._s(t.order.address))])])]),s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v("订单编号")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-sm"},[t._v(t._s(t.order.code))])])]),s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v("订单时间")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-sm"},[t._v(t._s(t.order.createTimeLabel))])])]),s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v("商品规格")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-sm"},[t._v(t._s(t.order.style))])])]),s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v("商品价格")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-price text-xl text-red"},[t._v(t._s(t.order.goods_price))])])]),s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v("购买数量")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-xl"},[t._v(t._s(t.order.number))])])]),t.order.take_type>0?s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v("邮寄费用")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-price text-xl text-red"},[t._v(t._s(t.order.post_fee))])])]):t._e(),null!=t.order.discount_label?s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v(t._s(t.order.discount_label))])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-price text-xl text-red"},[t._v(t._s(t.order.discount_amount))])])]):t._e(),s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v("支付金额")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-price text-xl text-red"},[t._v(t._s(t.order.amount))])])]),s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v("备注")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-sm"},[t._v(t._s(t.order.remark))])])]),null!=t.refund?s("block",[s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v("退货编号")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-sm"},[t._v(t._s(t.refund.refund_code))])])]),s("view",{staticClass:"cu-item"},[s("view",{staticClass:"content"},[s("text",{},[t._v("退货理由")])]),s("view",{staticClass:"action"},[s("text",{staticClass:" text-sm"},[t._v(t._s(t.refund.reason))])])])]):t._e(),s("view",{staticClass:"padding flex flex-direction"},[t.user.uid==t.order.uid?s("block",[s("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{eventid:"2fbc4258-1"},on:{tap:t.contactSeller}},[t._v("联系卖家")]),0==t.order.status?s("block",[s("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{eventid:"2fbc4258-2"},on:{tap:t.pay}},[t._v("继续支付")]),s("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{eventid:"2fbc4258-3"},on:{tap:t.orderCancel}},[t._v("取消订单")])],1):t._e(),1==t.order.status?s("block",[s("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{"data-target":"申请退货",eventid:"2fbc4258-4"},on:{tap:t.showModal}},[t._v("申请退货")])],1):t._e(),2==t.order.status?s("block",[s("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{eventid:"2fbc4258-5"},on:{tap:t.confirm}},[t._v("确认")]),s("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{"data-target":"申请退货",eventid:"2fbc4258-6"},on:{tap:t.showModal}},[t._v("申请退货")])],1):t._e()],1):t._e(),t.user.uid!=t.order.uid?s("block",[s("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{eventid:"2fbc4258-7"},on:{tap:t.contactBuyer}},[t._v("联系买家")]),1==t.order.status?s("block",[s("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{"data-target":"同意退货",eventid:"2fbc4258-8"},on:{tap:t.showModal}},[t._v("同意退货")]),s("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{"data-target":"拒绝退货",eventid:"2fbc4258-9"},on:{tap:t.showModal}},[t._v("拒绝退货")])],1):t._e(),2==t.order.status?s("block",[s("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{eventid:"2fbc4258-10"},on:{tap:t.orderSellerCancel}},[t._v("取消订单")])],1):t._e()],1):t._e()],1)],1)]),"申请退货"==t.modalName?s("view",{staticClass:"cu-modal show"},[s("view",{staticClass:"cu-dialog"},[s("view",{staticClass:"cu-bar bg-white justify-end"},[s("view",{staticClass:"content text-bold"},[t._v(t._s(t.modalName))]),s("view",{staticClass:"action",attrs:{eventid:"2fbc4258-11"},on:{tap:t.hideModal}},[s("text",{staticClass:"cuIcon-close text-red"})])]),s("view",{staticClass:"padding"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticClass:"text-xl text-black",staticStyle:{width:"100%",height:"200rpx"},attrs:{maxlength:"-1",placeholder:"请输入退货理由",eventid:"2fbc4258-12"},domProps:{value:t.reason},on:{input:function(e){e.target.composing||(t.reason=e.target.value)}}})]),s("view",{staticClass:"cu-bar bg-white justify-end"},[s("view",{staticClass:"action"},[s("button",{staticClass:"cu-btn line-pink text-pink",attrs:{eventid:"2fbc4258-13"},on:{tap:t.hideModal}},[t._v("取消")]),s("button",{staticClass:"cu-btn bg-pink margin-left",attrs:{eventid:"2fbc4258-14"},on:{tap:t.orderRefund}},[t._v("确定")])],1)])])]):t._e(),"拒绝退货"==t.modalName?s("view",{staticClass:"cu-modal show"},[s("view",{staticClass:"cu-dialog"},[s("view",{staticClass:"cu-bar bg-white justify-end"},[s("view",{staticClass:"content text-bold"},[t._v(t._s(t.modalName))]),s("view",{staticClass:"action",attrs:{eventid:"2fbc4258-15"},on:{tap:t.hideModal}},[s("text",{staticClass:"cuIcon-close text-red"})])]),s("view",{staticClass:"padding"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticClass:"text-xl text-black",staticStyle:{width:"100%",height:"200rpx"},attrs:{maxlength:"-1",placeholder:"请输入拒绝理由",eventid:"2fbc4258-16"},domProps:{value:t.reason},on:{input:function(e){e.target.composing||(t.reason=e.target.value)}}})]),s("view",{staticClass:"cu-bar bg-white justify-end"},[s("view",{staticClass:"action"},[s("button",{staticClass:"cu-btn line-pink text-pink",attrs:{eventid:"2fbc4258-17"},on:{tap:t.hideModal}},[t._v("取消")]),s("button",{staticClass:"cu-btn bg-pink margin-left",attrs:{eventid:"2fbc4258-18"},on:{tap:t.refundRefuse}},[t._v("确定")])],1)])])]):t._e(),"同意退货"==t.modalName?s("view",{staticClass:"cu-modal show"},[s("view",{staticClass:"cu-dialog"},[s("view",{staticClass:"cu-bar bg-white justify-end"},[s("view",{staticClass:"content text-bold"},[t._v(t._s(t.modalName))]),s("view",{staticClass:"action",attrs:{eventid:"2fbc4258-19"},on:{tap:t.hideModal}},[s("text",{staticClass:"cuIcon-close text-red"})])]),s("view",{staticClass:"padding-xl text-black text-xl"},[t._v("确定同意买家退货吗？")]),s("view",{staticClass:"cu-bar bg-white justify-end"},[s("view",{staticClass:"action"},[s("button",{staticClass:"cu-btn line-pink text-pink",attrs:{eventid:"2fbc4258-20"},on:{tap:t.hideModal}},[t._v("取消")]),s("button",{staticClass:"cu-btn bg-pink margin-left",attrs:{eventid:"2fbc4258-21"},on:{tap:t.refundPass}},[t._v("确定")])],1)])])]):t._e()],1)},i=[];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i})},ed66:function(t,e,s){"use strict";s("719a");var a=o(s("b0ce")),i=o(s("8122"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(i.default))}},[["ed66","common/runtime","common/vendor"]]]);