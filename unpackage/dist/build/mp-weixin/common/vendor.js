(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/vendor"],{"0fb0":function(e,t,n){"use strict";var r=n("31a7"),o=n.n(r);o.a},1286:function(e,t,n){"use strict";(function(){function e(e){this.array=void 0===e?[]:new Array(e)}e.prototype={length:function(){return this.array.length},at:function(e){return this.array[e]},set:function(e,t){this.array[e]=t},push:function(e){return this.array.push(e)},slice:function(e,t){return this.array=this.array.slice(e,t),this.array},concat:function(e){this.array=this.array.concat(e)},remove:function(e,t){t=void 0===t?1:t,this.array.splice(e,t)},join:function(e){return this.array.join(e)},clear:function(){this.array.length=0}};var n=function(){this._array_h=new e};n.prototype={_index:0,push:function(e){this._array_h.push(e)},pop:function(){var e=null;return this._array_h.length()&&(e=this._array_h.at(this._index),2*++this._index>=this._array_h.length()&&(this._array_h.slice(this._index),this._index=0)),e},head:function(){var e=null,t=this._array_h.length();return t&&(e=this._array_h.at(t-1)),e},tail:function(){var e=null,t=this._array_h.length();return t&&(e=this._array_h.at(this._index)),e},length:function(){return this._array_h.length()-this._index},empty:function(){return 0===this._array_h.length()},clear:function(){this._array_h.clear()}},t.Queue=n})()},2877:function(e,t,n){"use strict";function r(e,t,n,r,o,i,s,a){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},u._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",function(){return r})},"31a7":function(e,t,n){},"3a09":function(e,t,n){"use strict";var r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"·̀-ͯ\\u203F-⁀]"),i=new RegExp("^"+r.source+o.source+"*(?::"+r.source+o.source+"*)?$"),s=0,a=1,c=2,u=3,l=4,d=5,p=6,h=7;function f(){}function m(e,t,n,r,o){function i(e){if(e>65535){e-=65536;var t=55296+(e>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function s(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?i(parseInt(t.substr(1).replace("x","0x"))):(o.error("entity not found:"+e),e)}function a(t){if(t>m){var n=e.substring(m,t).replace(/&#?\w+;/g,s);p&&c(m),r.characters(n,0,t-m),m=t}}function c(t,n){while(t>=l&&(n=d.exec(e)))u=n.index,l=u+n[0].length,p.lineNumber++;p.columnNumber=t-u+1}var u=0,l=0,d=/.+(?:\r\n?|\n)|.*$/g,p=r.locator,h=[{currentNSMap:t}],f={},m=0;while(1){try{var N=e.indexOf("<",m);if(N<0){if(!e.substr(m).match(/^\s*$/)){var T=r.document,S=T.createTextNode(e.substr(m));T.appendChild(S),r.currentElement=S}return}switch(N>m&&a(N),e.charAt(N+1)){case"/":var I=e.indexOf(">",N+3),w=e.substring(N+2,I),C=h.pop(),A=C.localNSMap;if(C.tagName!=w&&o.fatalError("end tag name: "+w+" is not match the current start tagName:"+C.tagName),r.endElement(C.uri,C.localName,w),A)for(var R in A)r.endPrefixMapping(R);I++;break;case"?":p&&c(N),I=x(e,N,r);break;case"!":p&&c(N),I=E(e,N,r,o);break;default:p&&c(N);var M=new O,D=(I=g(e,N,M,s,o),M.length);if(p){if(D)for(var $=0;$<D;$++){var k=M[$];c(k.offset),k.offset=_(p,{})}c(I)}!M.closed&&b(e,I,M.tagName,f)&&(M.closed=!0,n.nbsp||o.warning("unclosed xml attribute")),y(M,r,h),"http://www.w3.org/1999/xhtml"!==M.uri||M.closed?I++:I=v(e,I,M.tagName,s,r)}}catch(B){o.error("element parse error: "+B),I=-1}I>m?m=I:a(Math.max(N,m)+1)}}function _(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function g(e,t,n,r,o){var i,f=++t,m=s;while(1){var _=e.charAt(f);switch(_){case"=":if(m===a)i=e.slice(t,f),m=u;else{if(m!==c)throw new Error("attribute equal must after attrName");m=u}break;case"'":case'"':if(m===u){if(t=f+1,f=e.indexOf(_,t),!(f>0))throw new Error("attribute value no end '"+_+"' match");g=e.slice(t,f).replace(/&#?\w+;/g,r),n.add(i,g,t-1),m=d}else{if(m!=l)throw new Error('attribute value must after "="');g=e.slice(t,f).replace(/&#?\w+;/g,r),n.add(i,g,t),o.warning('attribute "'+i+'" missed start quot('+_+")!!"),t=f+1,m=d}break;case"/":switch(m){case s:n.setTagName(e.slice(t,f));case d:case p:case h:m=h,n.closed=!0;case l:case a:case c:break;default:throw new Error("attribute invalid close char('/')")}break;case"":o.error("unexpected end of input");case">":switch(m){case s:n.setTagName(e.slice(t,f));case d:case p:case h:break;case l:case a:g=e.slice(t,f),"/"===g.slice(-1)&&(n.closed=!0,g=g.slice(0,-1));case c:m===c&&(g=i),m==l?(o.warning('attribute "'+g+'" missed quot(")!!'),n.add(i,g.replace(/&#?\w+;/g,r),t)):(o.warning('attribute "'+g+'" missed value!! "'+g+'" instead!!'),n.add(g,g,t));break;case u:throw new Error("attribute value missed!!")}return f;case"":_=" ";default:if(_<=" ")switch(m){case s:n.setTagName(e.slice(t,f)),m=p;break;case a:i=e.slice(t,f),m=c;break;case l:var g=e.slice(t,f).replace(/&#?\w+;/g,r);o.warning('attribute "'+g+'" missed quot(")!!'),n.add(i,g,t);case d:m=p;break}else switch(m){case c:o.warning('attribute "'+i+'" missed value!! "'+i+'" instead!!'),n.add(i,i,t),t=f,m=a;break;case d:o.warning('attribute space is required"'+i+'"!!');case p:m=a,t=f;break;case u:m=l,t=f;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}f++}}function y(e,t,n){var r=e.tagName,o=null,i=n[n.length-1].currentNSMap,s=e.length;while(s--){var a=e[s],c=a.qName,u=a.value,l=c.indexOf(":");if(l>0)var d=a.prefix=c.slice(0,l),p=c.slice(l+1),h="xmlns"===d&&p;else p=c,d=null,h="xmlns"===c&&"";a.localName=p,!1!==h&&(null==o&&(o={},N(i,i={})),i[h]=o[h]=u,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(h,u))}s=e.length;while(s--){a=e[s];d=a.prefix;d&&("xml"===d&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==d&&(a.uri=i[d]))}l=r.indexOf(":");l>0?(d=e.prefix=r.slice(0,l),p=e.localName=r.slice(l+1)):(d=null,p=e.localName=r);var f=e.uri=i[d||""];if(t.startElement(f,p,r,e),e.closed){if(t.endElement(f,p,r),o)for(d in o)t.endPrefixMapping(d)}else e.currentNSMap=i,e.localNSMap=o,n.push(e)}function v(e,t,n,r,o){if(/^(?:script|textarea)$/i.test(n)){var i=e.indexOf("</"+n+">",t),s=e.substring(t+1,i);if(/[&<]/.test(s))return/^script$/i.test(n)?(o.characters(s,0,s.length),i):(s=s.replace(/&#?\w+;/g,r),o.characters(s,0,s.length),i)}return t+1}function b(e,t,n,r){var o=r[n];return null==o&&(o=r[n]=e.lastIndexOf("</"+n+">")),o<t}function N(e,t){for(var n in e)t[n]=e[n]}function E(e,t,n,r){var o=e.charAt(t+2);switch(o){case"-":if("-"===e.charAt(t+3)){var i=e.indexOf("--\x3e",t+4);return i>t?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==e.substr(t+3,6)){i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var s=S(e,t),a=s.length;if(a>1&&/!doctype/i.test(s[0][0])){var c=s[1][0],u=a>3&&/^public$/i.test(s[2][0])&&s[3][0],l=a>4&&s[4][0],d=s[a-1];return n.startDTD(c,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),d.index+d[0].length}}return-1}function x(e,t,n){var r=e.indexOf("?>",t);if(r){var o=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(o){o[0].length;return n.processingInstruction(o[1],o[2]),r+2}return-1}return-1}function O(e){}function T(e,t){return e.__proto__=t,e}function S(e,t){var n,r=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;o.lastIndex=t,o.exec(e);while(n=o.exec(e))if(r.push(n),n[1])return r}f.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),N(t,t={}),m(e,t,n,r,this.errorHandler),r.endDocument()}},O.prototype={setTagName:function(e){if(!i.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!i.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getOffset:function(e){return this[e].offset},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},T({},T.prototype)instanceof T||(T=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=f},4345:function(e,t,n){"use strict";(function(){var e=0;t.code={WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR:e++,WEBIM_CONNCTION_OPEN_ERROR:e++,WEBIM_CONNCTION_AUTH_ERROR:e++,WEBIM_CONNCTION_OPEN_USERGRID_ERROR:e++,WEBIM_CONNCTION_ATTACH_ERROR:e++,WEBIM_CONNCTION_ATTACH_USERGRID_ERROR:e++,WEBIM_CONNCTION_REOPEN_ERROR:e++,WEBIM_CONNCTION_SERVER_CLOSE_ERROR:e++,WEBIM_CONNCTION_SERVER_ERROR:e++,WEBIM_CONNCTION_IQ_ERROR:e++,WEBIM_CONNCTION_PING_ERROR:e++,WEBIM_CONNCTION_NOTIFYVERSION_ERROR:e++,WEBIM_CONNCTION_GETROSTER_ERROR:e++,WEBIM_CONNCTION_CROSSDOMAIN_ERROR:e++,WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES:e++,WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR:e++,WEBIM_CONNCTION_DISCONNECTED:e++,WEBIM_CONNCTION_AJAX_ERROR:e++,WEBIM_CONNCTION_JOINROOM_ERROR:e++,WEBIM_CONNCTION_GETROOM_ERROR:e++,WEBIM_CONNCTION_GETROOMINFO_ERROR:e++,WEBIM_CONNCTION_GETROOMMEMBER_ERROR:e++,WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR:e++,WEBIM_CONNCTION_LOAD_CHATROOM_ERROR:e++,WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR:e++,WEBIM_CONNCTION_JOINCHATROOM_ERROR:e++,WEBIM_CONNCTION_QUITCHATROOM_ERROR:e++,WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR:e++,WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR:e++,WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR:e++,WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR:e++,WEBIM_CONNCTION_CALLBACK_INNER_ERROR:e++,WEBIM_CONNCTION_CLIENT_OFFLINE:e++,WEBIM_CONNCTION_CLIENT_LOGOUT:e++,WEBIM_UPLOADFILE_BROWSER_ERROR:100,WEBIM_UPLOADFILE_ERROR:101,WEBIM_UPLOADFILE_NO_LOGIN:102,WEBIM_UPLOADFILE_NO_FILE:103,WEBIM_DOWNLOADFILE_ERROR:200,WEBIM_DOWNLOADFILE_NO_LOGIN:201,WEBIM_DOWNLOADFILE_BROWSER_ERROR:202,WEBIM_MESSAGE_REC_TEXT:300,WEBIM_MESSAGE_REC_TEXT_ERROR:301,WEBIM_MESSAGE_REC_EMOTION:302,WEBIM_MESSAGE_REC_PHOTO:303,WEBIM_MESSAGE_REC_AUDIO:304,WEBIM_MESSAGE_REC_AUDIO_FILE:305,WEBIM_MESSAGE_REC_VEDIO:306,WEBIM_MESSAGE_REC_VEDIO_FILE:307,WEBIM_MESSAGE_REC_FILE:308,WEBIM_MESSAGE_SED_TEXT:309,WEBIM_MESSAGE_SED_EMOTION:310,WEBIM_MESSAGE_SED_PHOTO:311,WEBIM_MESSAGE_SED_AUDIO:312,WEBIM_MESSAGE_SED_AUDIO_FILE:313,WEBIM_MESSAGE_SED_VEDIO:314,WEBIM_MESSAGE_SED_VEDIO_FILE:315,WEBIM_MESSAGE_SED_FILE:316,STATUS_INIT:400,STATUS_DOLOGIN_USERGRID:401,STATUS_DOLOGIN_IM:402,STATUS_OPENED:403,STATUS_CLOSING:404,STATUS_CLOSED:405,STATUS_ERROR:406}})()},"4df4":function(e,t,n){"use strict";var r=n("c1a0");e.exports=new r},"518f":function(e,t,n){"use strict";var r=n("9f3c");(function(){var e=n("fe52").utils,o=function e(t,n){return this instanceof e?(this._msg={},"function"===typeof e[t]&&(e[t].prototype.setGroup=this.setGroup,this._msg=new e[t](n)),this._msg):new e(t)};function i(e){if(!(this instanceof i))return new i(e);this.msg=e}o.prototype.setGroup=function(e){this.body.group=e},o.read=function(e){this.id=e,this.type="read"},o.read.prototype.set=function(e){this.body={ackId:e.id,to:e.to}},o.txt=function(e){this.id=e,this.type="txt",this.body={}},o.txt.prototype.set=function(e){this.value=e.msg,this.body={id:this.id,from:e.from,to:e.to,msg:this.value,type:this.type,roomType:e.roomType,chatType:e.chatType,ext:e.ext||{},success:e.success,fail:e.fail},!e.roomType&&delete this.body.roomType},o.cmd=function(e){this.id=e,this.type="cmd",this.body={}},o.cmd.prototype.set=function(e){this.value="",this.body={to:e.to,from:e.from,action:e.action,msg:this.value,type:this.type,roomType:e.roomType,ext:e.ext||{}},!e.roomType&&delete this.body.roomType},o.location=function(e){this.id=e,this.type="loc",this.body={}},o.location.prototype.set=function(e){this.body={to:e.to,from:e.from,type:this.type,roomType:e.roomType,addr:e.addr,lat:e.lat,lng:e.lng,chatType:e.chatType,ext:e.ext||{}}},o.img=function(e){this.id=e,this.type="img",this.body={}},o.img.prototype.set=function(e){this.value=e.file,this.body={id:this.id,file:this.value,apiUrl:e.apiUrl,to:e.to,from:e.from,type:this.type,ext:e.ext||{},roomType:e.roomType,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,success:e.success,fail:e.fail,flashUpload:e.flashUpload,width:e.width,height:e.height,body:e.body},!e.roomType&&delete this.body.roomType},o.audio=function(e){this.id=e,this.type="audio",this.body={}},o.audio.prototype.set=function(t){t.file=t.file||e.getFileUrl(t.fileInputId),this.value=t.file,this.filename=t.filename||this.value.filename,this.body={id:this.id,file:this.value,filename:this.filename,apiUrl:t.apiUrl,accessToken:t.accessToken,to:t.to,from:t.from,type:this.type,ext:t.ext||{},length:t.length||0,roomType:t.roomType,file_length:t.file_length,onFileUploadError:t.onFileUploadError,onFileUploadComplete:t.onFileUploadComplete,success:t.success,fail:t.fail,flashUpload:t.flashUpload,body:t.body},!t.roomType&&delete this.body.roomType},o.file=function(e){this.id=e,this.type="file",this.body={}},o.file.prototype.set=function(t){t.file=t.file||e.getFileUrl(t.fileInputId),this.value=t.file,this.filename=t.filename||this.value.filename,this.body={id:this.id,file:this.value,filename:this.filename,apiUrl:t.apiUrl,to:t.to,from:t.from,type:this.type,ext:t.ext||{},roomType:t.roomType,onFileUploadError:t.onFileUploadError,onFileUploadComplete:t.onFileUploadComplete,success:t.success,fail:t.fail,flashUpload:t.flashUpload,body:t.body},!t.roomType&&delete this.body.roomType},o.video=function(e){this.id=e,this.type="file",this.body={}},o.video.prototype.set=function(t){t.file=t.file||e.getFileUrl(t.fileInputId),this.value=t.file,this.filename=t.filename||this.value.filename,this.body={id:this.id,file:this.value,filename:this.filename,apiUrl:t.apiUrl,to:t.to,from:t.from,type:this.type,ext:t.ext||{},roomType:t.roomType,onFileUploadError:t.onFileUploadError,onFileUploadComplete:t.onFileUploadComplete,success:t.success,fail:t.fail,flashUpload:t.flashUpload,body:t.body},!t.roomType&&delete this.body.roomType},i.prototype.send=function(t){var n=this,o=function(n){n.ext=n.ext||{},n.ext.weichat=n.ext.weichat||{},n.ext.weichat.originType=n.ext.weichat.originType||"webim";var o={from:t.context.userId||"",to:n.to,bodies:[n.body],ext:n.ext||{}},i=e.stringify(o),s=r.$msg({type:n.group||"chat",to:n.toJid,id:n.id,xmlns:"jabber:client"}).c("body").t(i);if(n.roomType&&s.up().c("roomtype",{xmlns:"easemob:x:roomtype",type:"chatroom"}),n.bodyId){s=r.$msg({from:t.context.jid||"",to:n.toJid,id:n.id,xmlns:"jabber:client"}).c("body").t(n.bodyId);var a={xmlns:"urn:xmpp:receipts",id:n.bodyId};s.up().c("delivery",a)}if(n.ackId){if(t.context.jid.indexOf(n.toJid)>=0)return;s=r.$msg({from:t.context.jid||"",to:n.toJid,id:n.id,xmlns:"jabber:client"}).c("body").t(n.ackId);var c={xmlns:"urn:xmpp:receipts",id:n.ackId};s.up().c("acked",c)}t.sendCommand(s.tree(),n.id)};if(n.msg.file){if(n.msg.body&&n.msg.body.url)return void o(n.msg);var i=n.msg.onFileUploadComplete,s=function(e){if(e.entities[0]["file-metadata"]){var t=e.entities[0]["file-metadata"]["content-length"];n.msg.file_length=t,n.msg.filetype=e.entities[0]["file-metadata"]["content-type"],t>204800&&(n.msg.thumbnail=!0)}n.msg.body={type:n.msg.type||"file",url:e.uri+"/"+e.entities[0].uuid,secret:e.entities[0]["share-secret"],filename:n.msg.file.filename||n.msg.filename,size:{width:n.msg.width||0,height:n.msg.height||0},length:n.msg.length||0,file_length:n.msg.file_length||0,filetype:n.msg.filetype},o(n.msg),i instanceof Function&&i(e,n.msg.id)};n.msg.onFileUploadComplete=s,e.uploadFile.call(t,n.msg)}else"img"===n.msg.type?o(n.msg):(n.msg.body={type:"chat"===n.msg.type?"txt":n.msg.type,msg:n.msg.msg},"cmd"===n.msg.type?n.msg.body.action=n.msg.action:"loc"===n.msg.type&&(n.msg.body.addr=n.msg.addr,n.msg.body.lat=n.msg.lat,n.msg.body.lng=n.msg.lng),o(n.msg))},t._msg=i,t.message=o})()},"543d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createApp=ht,t.createPage=vt,t.createComponent=bt,t.default=void 0;var r=o(n("f3d3"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return c(e)||a(e,t)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done);r=!0)if(n.push(s.value),t&&n.length===t)break}catch(c){o=!0,i=c}finally{try{r||null==a["return"]||a["return"]()}finally{if(o)throw i}}return n}function c(e){if(Array.isArray(e))return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return h(e)||p(e)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function h(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var f=Object.prototype.toString,m=Object.prototype.hasOwnProperty;function _(e){return"function"===typeof e}function g(e){return"string"===typeof e}function y(e){return"[object Object]"===f.call(e)}function v(e,t){return m.call(e,t)}function b(){}function N(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var E=/-(\w)/g,x=N(function(e){return e.replace(E,function(e,t){return t?t.toUpperCase():""})}),O=["invoke","success","fail","complete","returnValue"],T={},S={};function I(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?w(n):n}function w(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function C(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function A(e,t){Object.keys(t).forEach(function(n){-1!==O.indexOf(n)&&_(t[n])&&(e[n]=I(e[n],t[n]))})}function R(e,t){e&&t&&Object.keys(t).forEach(function(n){-1!==O.indexOf(n)&&_(t[n])&&C(e[n],t[n])})}function M(e,t){"string"===typeof e&&y(t)?A(S[e]||(S[e]={}),t):y(e)&&A(T,e)}function D(e,t){"string"===typeof e?y(t)?R(S[e],t):delete S[e]:y(e)&&R(T,e)}function $(e){return function(t){return e(t)||t}}function k(e){return!!e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof e.then}function B(e,t){for(var n=!1,r=0;r<e.length;r++){var o=e[r];if(n)n=Promise.then($(o));else{var i=o(t);if(k(i)&&(n=Promise.resolve(i)),!1===i)return{then:function(){}}}}return n||{then:function(e){return e(t)}}}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return["success","fail","complete"].forEach(function(n){if(Array.isArray(e[n])){var r=t[n];t[n]=function(t){B(e[n],t).then(function(e){return _(r)&&r(e)||e})}}}),t}function L(e,t){var n=[];Array.isArray(T.returnValue)&&n.push.apply(n,l(T.returnValue));var r=S[e];return r&&Array.isArray(r.returnValue)&&n.push.apply(n,l(r.returnValue)),n.forEach(function(e){t=e(t)||t}),t}function F(e){var t=Object.create(null);Object.keys(T).forEach(function(e){"returnValue"!==e&&(t[e]=T[e].slice())});var n=S[e];return n&&Object.keys(n).forEach(function(e){"returnValue"!==e&&(t[e]=(t[e]||[]).concat(n[e]))}),t}function U(e,t,n){for(var r=arguments.length,o=new Array(r>3?r-3:0),i=3;i<r;i++)o[i-3]=arguments[i];var s=F(e);if(s&&Object.keys(s).length){if(Array.isArray(s.invoke)){var a=B(s.invoke,n);return a.then(function(e){return t.apply(void 0,[j(s,e)].concat(o))})}return t.apply(void 0,[j(s,n)].concat(o))}return t.apply(void 0,[n].concat(o))}var P={returnValue:function(e){return k(e)?e.then(function(e){return e[1]}).catch(function(e){return e[0]}):e}},q=/^\$|interceptors|Interceptor$|getSubNVueById|requireNativePlugin|upx2px|hideKeyboard|canIUse|^create|Sync$|Manager$|base64ToArrayBuffer|arrayBufferToBase64/,H=/^create|Manager$/,W=/^on/;function G(e){return H.test(e)}function J(e){return q.test(e)}function V(e){return W.test(e)}function z(e){return e.then(function(e){return[null,e]}).catch(function(e){return[e]})}function X(e){return!(G(e)||J(e)||V(e))}function Q(e,t){return X(e)?function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return _(n.success)||_(n.fail)||_(n.complete)?L(e,U.apply(void 0,[e,t,n].concat(o))):L(e,z(new Promise(function(r,i){U.apply(void 0,[e,t,Object.assign({},n,{success:r,fail:i})].concat(o)),Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})})})))}:t}var K=1e-4,Y=750,Z=!1,ee=0,te=0;function ne(){var e=wx.getSystemInfoSync(),t=e.platform,n=e.pixelRatio,r=e.windowWidth;ee=r,te=n,Z="ios"===t}function re(e,t){if(0===ee&&ne(),e=Number(e),0===e)return 0;var n=e/Y*(t||ee);return n<0&&(n=-n),n=Math.floor(n+K),0===n?1!==te&&Z?.5:1:e<0?-n:n}var oe={promiseInterceptor:P},ie=Object.freeze({upx2px:re,interceptors:oe,addInterceptor:M,removeInterceptor:D}),se={args:function(e){var t=parseInt(e.current);if(!isNaN(t)){var n=e.urls;if(Array.isArray(n)){var r=n.length;if(r)return t<0?t=0:t>=r&&(t=r-1),t>0?(e.current=n[t],e.urls=n.filter(function(e,r){return!(r<t)||e!==n[t]})):e.current=n[0],{indicator:!1,loop:!1}}}}},ae={previewImage:se},ce=[],ue=[],le=["success","fail","cancel","complete"];function de(e,t,n){return function(r){return t(he(e,r,n))}}function pe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(y(t)){var i=!0===o?t:{};for(var s in _(n)&&(n=n(t,i)||{}),t)if(v(n,s)){var a=n[s];_(a)&&(a=a(t[s],t,i)),a?g(a)?i[a]=t[s]:y(a)&&(i[a.name?a.name:s]=a.value):console.warn("微信小程序 ".concat(e,"暂不支持").concat(s))}else-1!==le.indexOf(s)?i[s]=de(e,t[s],r):o||(i[s]=t[s]);return i}return _(t)&&(t=de(e,t,r)),t}function he(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return _(ae.returnValue)&&(t=ae.returnValue(e,t)),pe(e,t,n,{},r)}function fe(e,t){if(v(ae,e)){var n=ae[e];return n?function(t,r){var o=n;_(n)&&(o=n(t)),t=pe(e,t,o.args,o.returnValue);var i=[t];"undefined"!==typeof r&&i.push(r);var s=wx[o.name||e].apply(wx,i);return J(e)?he(e,s,o.returnValue,G(e)):s}:function(){console.error("微信小程序 暂不支持".concat(e))}}return t}var me=Object.create(null),_e=["subscribePush","unsubscribePush","onPush","offPush","share"];function ge(e){return function(t){var n=t.fail,r=t.complete,o={errMsg:"".concat(e,":fail:暂不支持 ").concat(e," 方法")};_(n)&&n(o),_(r)&&r(o)}}_e.forEach(function(e){me[e]=ge(e)});var ye={oauth:["weixin"],share:["weixin"],payment:["wxpay"],push:["weixin"]};function ve(e){var t=e.service,n=e.success,r=e.fail,o=e.complete,i=!1;ye[t]?(i={errMsg:"getProvider:ok",service:t,provider:ye[t]},_(n)&&n(i)):(i={errMsg:"getProvider:fail:服务["+t+"]不存在"},_(r)&&r(i)),_(o)&&o(i)}var be=Object.freeze({getProvider:ve}),Ne=function(){return"function"===typeof getUniEmitter?getUniEmitter:function(){return e||(e=new r.default),e};var e}();function Ee(e,t,n){return e[t].apply(e,n)}function xe(){return Ee(Ne(),"$on",Array.prototype.slice.call(arguments))}function Oe(){return Ee(Ne(),"$off",Array.prototype.slice.call(arguments))}function Te(){return Ee(Ne(),"$once",Array.prototype.slice.call(arguments))}function Se(){return Ee(Ne(),"$emit",Array.prototype.slice.call(arguments))}var Ie=Object.freeze({$on:xe,$off:Oe,$once:Te,$emit:Se}),we=Object.freeze({}),Ce=Page,Ae=Component,Re=/:/g,Me=N(function(e){return x(e.replace(Re,"-"))});function De(e){if(wx.canIUse("nextTick")){var t=e.triggerEvent;e.triggerEvent=function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.apply(e,[Me(n)].concat(o))}}}function $e(e,t){var n=t[e];t[e]=n?function(){De(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(this,t)}:function(){De(this)}}Page=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $e("onLoad",e),Ce(e)},Component=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $e("created",e),Ae(e)};var ke=["onPullDownRefresh","onReachBottom","onShareAppMessage","onPageScroll","onResize","onTabItemTap"];function Be(e,t){var n=e.$mp[e.mpType];t.forEach(function(t){v(n,t)&&(e[t]=n[t])})}function je(e,t){if(!t)return!0;if(r.default.options&&Array.isArray(r.default.options[e]))return!0;if(t=t.default||t,_(t))return!!_(t.extendOptions[e])||!!(t.super&&t.super.options&&Array.isArray(t.super.options[e]));if(_(t[e]))return!0;var n=t.mixins;return Array.isArray(n)?!!n.find(function(t){return je(e,t)}):void 0}function Le(e,t,n){t.forEach(function(t){je(t,n)&&(e[t]=function(e){return this.$vm&&this.$vm.__call_hook(t,e)})})}function Fe(e,t){var n;return t=t.default||t,_(t)?(n=t,t=n.extendOptions):n=e.extend(t),[n,t]}function Ue(e,t){if(Array.isArray(t)&&t.length){var n=Object.create(null);t.forEach(function(e){n[e]=!0}),e.$scopedSlots=e.$slots=n}}function Pe(e,t){e=(e||"").split(",");var n=e.length;1===n?t._$vueId=e[0]:2===n&&(t._$vueId=e[0],t._$vuePid=e[1])}function qe(e,t){var n=e.data||{},r=e.methods||{};if("function"===typeof n)try{n=n.call(t)}catch(o){Object({NODE_ENV:"production",VUE_APP_PLATFORM:"mp-weixin",BASE_URL:"/"}).VUE_APP_DEBUG&&console.warn("根据 Vue 的 data 函数初始化小程序 data 失败，请尽量确保 data 函数中不访问 vm 对象，否则可能影响首次数据渲染速度。",n)}else try{n=JSON.parse(JSON.stringify(n))}catch(o){}return y(n)||(n={}),Object.keys(r).forEach(function(e){-1!==t.__lifecycle_hooks__.indexOf(e)||v(n,e)||(n[e]=r[e])}),n}var He=[String,Number,Boolean,Object,Array,null];function We(e){return function(t,n){this.$vm&&(this.$vm[e]=t)}}function Ge(e,t){var n=e["behaviors"],r=e["extends"],o=e["mixins"],i=e["props"];i||(e["props"]=i=[]);var s=[];return Array.isArray(n)&&n.forEach(function(e){s.push(e.replace("uni://","wx".concat("://"))),"uni://form-field"===e&&(Array.isArray(i)?(i.push("name"),i.push("value")):(i["name"]={type:String,default:""},i["value"]={type:[String,Number,Boolean,Array,Object,Date],default:""}))}),y(r)&&r.props&&s.push(t({properties:Ve(r.props,!0)})),Array.isArray(o)&&o.forEach(function(e){y(e)&&e.props&&s.push(t({properties:Ve(e.props,!0)}))}),s}function Je(e,t,n,r){return Array.isArray(t)&&1===t.length?t[0]:t}function Ve(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r={};return t||(r.vueId={type:String,value:""},r.vueSlots={type:null,value:[],observer:function(e,t){var n=Object.create(null);e.forEach(function(e){n[e]=!0}),this.setData({$slots:n})}}),Array.isArray(e)?e.forEach(function(e){r[e]={type:null,observer:We(e)}}):y(e)&&Object.keys(e).forEach(function(t){var o=e[t];if(y(o)){var i=o["default"];_(i)&&(i=i()),o.type=Je(t,o.type,i,n),r[t]={type:-1!==He.indexOf(o.type)?o.type:null,value:i,observer:We(t)}}else{var s=Je(t,o,null,n);r[t]={type:-1!==He.indexOf(s)?s:null,observer:We(t)}}}),r}function ze(e){try{e.mp=JSON.parse(JSON.stringify(e))}catch(t){}return e.stopPropagation=b,e.preventDefault=b,e.target=e.target||{},v(e,"detail")||(e.detail={}),y(e.detail)&&(e.target=Object.assign({},e.target,e.detail)),e}function Xe(e,t){var n=e;return t.forEach(function(t){var r=t[0],o=t[2];if(r||"undefined"!==typeof o){var i=t[1],s=t[3],a=r?e.__get_value(r,n):n;Number.isInteger(a)?n=o:i?Array.isArray(a)?n=a.find(function(t){return e.__get_value(i,t)===o}):y(a)?n=Object.keys(a).find(function(t){return e.__get_value(i,a[t])===o}):console.error("v-for 暂不支持循环数据：",a):n=a[o],s&&(n=e.__get_value(s,n))}}),n}function Qe(e,t,n){var r={};return Array.isArray(t)&&t.length&&t.forEach(function(t,o){"string"===typeof t?t?"$event"===t?r["$"+o]=n:0===t.indexOf("$event.")?r["$"+o]=e.__get_value(t.replace("$event.",""),n):r["$"+o]=e.__get_value(t):r["$"+o]=e:r["$"+o]=Xe(e,t)}),r}function Ke(e){for(var t={},n=1;n<e.length;n++){var r=e[n];t[r[0]]=r[1]}return t}function Ye(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,s=!1;if(o&&(s=t.currentTarget&&t.currentTarget.dataset&&"wx"===t.currentTarget.dataset.comType,!n.length))return s?[t]:t.detail.__args__||t.detail;var a=Qe(e,r,t),c=[];return n.forEach(function(e){"$event"===e?"__set_model"!==i||o?o&&!s?c.push(t.detail.__args__[0]):c.push(t):c.push(t.target.value):Array.isArray(e)&&"o"===e[0]?c.push(Ke(e)):"string"===typeof e&&v(a,e)?c.push(a[e]):c.push(e)}),c}var Ze="~",et="^";function tt(e,t){return e===t||"regionchange"===t&&("begin"===e||"end"===e)}function nt(e){var t=this;e=ze(e);var n=(e.currentTarget||e.target).dataset;if(!n)return console.warn("事件信息不存在");var r=n.eventOpts||n["event-opts"];if(!r)return console.warn("事件信息不存在");var o=e.type;r.forEach(function(n){var r=n[0],i=n[1],s=r.charAt(0)===et;r=s?r.slice(1):r;var a=r.charAt(0)===Ze;r=a?r.slice(1):r,i&&tt(o,r)&&i.forEach(function(n){var r=n[0];if(r){var o=t.$vm;o.$options.generic&&o.$parent&&o.$parent.$parent&&(o=o.$parent.$parent);var i=o[r];if(!_(i))throw new Error(" _vm.".concat(r," is not a function"));if(a){if(i.once)return;i.once=!0}i.apply(o,Ye(t.$vm,e,n[1],n[2],s,r))}})})}var rt=["onShow","onHide","onError","onPageNotFound"];function ot(e,t){var n=t.mocks,o=t.initRefs;r.default.prototype.mpHost="mp-weixin",r.default.mixin({beforeCreate:function(){this.$options.mpType&&(this.mpType=this.$options.mpType,this.$mp=u({data:{}},this.mpType,this.$options.mpInstance),this.$scope=this.$options.mpInstance,delete this.$options.mpType,delete this.$options.mpInstance,"app"!==this.mpType&&(o(this),Be(this,n)))}});var i={onLaunch:function(t){this.$vm||(wx.canIUse("nextTick")||console.error("当前微信基础库版本过低，请将 微信开发者工具-详情-项目设置-调试基础库版本 更换为`2.3.0`以上"),this.$vm=e,this.$vm.$mp={app:this},this.$vm.$scope=this,this.$vm._isMounted=!0,this.$vm.__call_hook("mounted",t),this.$vm.__call_hook("onLaunch",t))}};return i.globalData=e.$options.globalData||{},Le(i,rt),i}var it=["__route__","__wxExparserNodeId__","__wxWebviewId__"];function st(e,t){var n=e.$children,r=n.find(function(e){return e.$scope._$vueId===t});if(r)return r;for(var o=n.length-1;o>=0;o--)if(r=st(n[o],t),r)return r}function at(e){return Behavior(e)}function ct(){return!!this.route}function ut(e){this.triggerEvent("__l",e)}function lt(e){var t=e.$scope;Object.defineProperty(e,"$refs",{get:function(){var e={},n=t.selectAllComponents(".vue-ref");n.forEach(function(t){var n=t.dataset.ref;e[n]=t.$vm||t});var r=t.selectAllComponents(".vue-ref-in-for");return r.forEach(function(t){var n=t.dataset.ref;e[n]||(e[n]=[]),e[n].push(t.$vm||t)}),e}})}function dt(e){var t,n=e.detail||e.value,r=n.vuePid,o=n.vueOptions;r&&(t=st(this.$vm,r)),t||(t=this.$vm),o.parent=t}function pt(e){return ot(e,{mocks:it,initRefs:lt})}function ht(e){return App(pt(e)),e}function ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isPage,o=t.initRelation,s=Fe(r.default,e),a=i(s,2),c=a[0],u=a[1],l={options:{multipleSlots:!0,addGlobalClass:!0},data:qe(u,r.default.prototype),behaviors:Ge(u,at),properties:Ve(u.props,!1,u.__file),lifetimes:{attached:function(){var e=this.properties,t={mpType:n.call(this)?"page":"component",mpInstance:this,propsData:e};Pe(e.vueId,this),o.call(this,{vuePid:this._$vuePid,vueOptions:t}),this.$vm=new c(t),Ue(this.$vm,e.vueSlots),this.$vm.$mount()},ready:function(){this.$vm&&(this.$vm._isMounted=!0,this.$vm.__call_hook("mounted"),this.$vm.__call_hook("onReady"))},detached:function(){this.$vm.$destroy()}},pageLifetimes:{show:function(e){this.$vm&&this.$vm.__call_hook("onPageShow",e)},hide:function(){this.$vm&&this.$vm.__call_hook("onPageHide")},resize:function(e){this.$vm&&this.$vm.__call_hook("onPageResize",e)}},methods:{__l:dt,__e:nt}};return n?l:[l,c]}function mt(e){return ft(e,{isPage:ct,initRelation:ut})}var _t=["onShow","onHide","onUnload"];function gt(e,t){var n=t.isPage,r=t.initRelation,o=mt(e,{isPage:n,initRelation:r});return Le(o.methods,_t,e),o.methods.onLoad=function(e){this.$vm.$mp.query=e,this.$vm.__call_hook("onLoad",e)},o}function yt(e){return gt(e,{isPage:ct,initRelation:ut})}function vt(e){return Component(yt(e))}function bt(e){return Component(mt(e))}_t.push.apply(_t,ke),ce.forEach(function(e){ae[e]=!1}),ue.forEach(function(e){var t=ae[e]&&ae[e].name?ae[e].name:e;wx.canIUse(t)||(ae[e]=!1)});var Nt={};"undefined"!==typeof Proxy?Nt=new Proxy({},{get:function(e,t){return ie[t]?ie[t]:we[t]?Q(t,we[t]):be[t]?Q(t,be[t]):me[t]?Q(t,me[t]):Ie[t]?Ie[t]:v(wx,t)||v(ae,t)?Q(t,fe(t,wx[t])):void 0}}):(Object.keys(ie).forEach(function(e){Nt[e]=ie[e]}),Object.keys(me).forEach(function(e){Nt[e]=Q(e,me[e])}),Object.keys(be).forEach(function(e){Nt[e]=Q(e,me[e])}),Object.keys(Ie).forEach(function(e){Nt[e]=Ie[e]}),Object.keys(we).forEach(function(e){Nt[e]=Q(e,we[e])}),Object.keys(wx).forEach(function(e){(v(wx,e)||v(ae,e))&&(Nt[e]=Q(e,fe(e,wx[e])))})),wx.createApp=ht,wx.createPage=vt,wx.createComponent=bt;var Et=Nt,xt=Et;t.default=xt},"5d90":function(e,t,n){"use strict";function r(e){this.options=e||{locator:{}}}function o(e,t,n){if(!e){if(t instanceof i)return t;e=t}var r={},o=e instanceof Function;function s(t){var i=e[t];!i&&o&&(i=2==e.length?function(n){e(t,n)}:e),r[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+a(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),r}function i(){this.cdata=!1}function s(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function c(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function u(e,t){e.currentElement?e.currentElement.appendChild(t):e.document.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new l,s=n.domBuilder||new i,a=n.errorHandler,c=n.locator,u=n.xmlns||{},d={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return c&&s.setDocumentLocator(c),r.errorHandler=o(a,s,c),r.domBuilder=n.domBuilder||s,/\/x?html?$/.test(t)&&(d.nbsp=" ",d.copy="©",u[""]="http://www.w3.org/1999/xhtml"),u.xml=u.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,u,d):r.errorHandler.error("invalid document source"),s.document},i.prototype={startDocument:function(){this.document=(new d).createDocument(null,null,null),this.locator&&(this.document.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var o=this.document,i=o.createElementNS(e,n||t),a=r.length;u(this,i),this.currentElement=i,this.locator&&s(this.locator,i);for(var c=0;c<a;c++){e=r.getURI(c);var l=r.getValue(c),d=(n=r.getQName(c),o.createAttributeNS(e,n));d.getOffset&&s(d.getOffset(1),d),d.value=d.nodeValue=l,i.setAttributeNode(d)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.document.createProcessingInstruction(e,t);this.locator&&s(this.locator,n),u(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=c.apply(this,arguments),this.currentElement&&e){if(this.cdata){var r=this.document.createCDATASection(e);this.currentElement.appendChild(r)}else{r=this.document.createTextNode(e);this.currentElement.appendChild(r)}this.locator&&s(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=c.apply(this,arguments);var r=this.document.createComment(e);this.locator&&s(this.locator,r),u(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.document.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(e,t,n);this.locator&&s(this.locator,o),u(this,o)}},warning:function(e){},error:function(e){},fatalError:function(e){throw e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){i.prototype[e]=function(){return null}});var l=n("3a09").XMLReader,d=t.DOMImplementation=n("e31c").DOMImplementation,p=t.XMLSerializer=n("e31c").XMLSerializer;t.DOMParser=r;var r={DOMImplementation:d,XMLSerializer:p,DOMParser:r};e.exports=r},"5ff1":function(e,t,n){"use strict";var r=s(n("9f3c")),o=s(n("e928")),i=s(n("83bd"));function s(e){return e&&e.__esModule?e:{default:e}}var a={},c=a.WebIM=o.default;a.WebIM.config=i.default,c.isDebug=function(e){function t(e){r.default.Strophe.log=function(e,t){},r.default.Strophe.Connection.prototype.rawOutput=e?function(e){try{console.log("%c"+e,"color: blue")}catch(t){console.log(t)}}:function(){}}e&&(c.config.isDebug=e.isDebug,t(c.config.isDebug))},c.config.autoSignIn=!1,c.config.autoSignIn&&(c.config.autoSignInName="lwz2",c.config.autoSignInPwd="1"),c.parseEmoji=function(e){if("undefined"===typeof c.Emoji||"undefined"===typeof c.Emoji.map)return e;var t=c.Emoji,n=null,r=[],o=[];for(var i in t.map)if(t.map.hasOwnProperty(i))while(e.indexOf(i)>-1)e=e.replace(i,"^"+t.map[i]+"^");for(var s=e.split("^"),a=(n=/^e.*g$/,0);a<s.length;a++)""!=s[a]&&r.push(s[a]);for(a=0;a<r.length;a++)if(n.test(r[a])){var u={};u.data=r[a],u.type="emoji",o.push(u)}else{u={};u.data=r[a],u.type="txt",o.push(u)}return o},c.time=function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),r=e.getSeconds(),o=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+(r<10?"0"+r:r);return o},c.Emoji={path:"/static/images/faces/",map:{"[):]":"ee_1.png","[:D]":"ee_2.png","[;)]":"ee_3.png","[:-o]":"ee_4.png","[:p]":"ee_5.png","[(H)]":"ee_6.png","[:@]":"ee_7.png","[:s]":"ee_8.png","[:$]":"ee_9.png","[:(]":"ee_10.png","[:'(]":"ee_11.png","[<o)]":"ee_12.png","[(a)]":"ee_13.png","[8o|]":"ee_14.png","[8-|]":"ee_15.png","[+o(]":"ee_16.png","[|-)]":"ee_17.png","[:|]":"ee_18.png","[*-)]":"ee_19.png","[:-#]":"ee_20.png","[^o)]":"ee_21.png","[:-*]":"ee_22.png","[8-)]":"ee_23.png","[del]":"btn_del.png","[(|)]":"ee_24.png","[(u)]":"ee_25.png","[(S)]":"ee_26.png","[(*)]":"ee_27.png","[(#)]":"ee_28.png","[(R)]":"ee_29.png","[({)]":"ee_30.png","[(})]":"ee_31.png","[(k)]":"ee_32.png","[(F)]":"ee_33.png","[(W)]":"ee_34.png","[(D)]":"ee_35.png"}},c.EmojiObj={path:"/static/images/faces/",map1:{"[):]":"ee_1.png","[:D]":"ee_2.png","[;)]":"ee_3.png","[:-o]":"ee_4.png","[:p]":"ee_5.png","[(H)]":"ee_6.png","[:@]":"ee_7.png"},map2:{"[:s]":"ee_8.png","[:$]":"ee_9.png","[:(]":"ee_10.png","[:'(]":"ee_11.png","[<o)]":"ee_12.png","[(a)]":"ee_13.png","[8o|]":"ee_14.png"},map3:{"[8-|]":"ee_15.png","[+o(]":"ee_16.png","[|-)]":"ee_17.png","[:|]":"ee_18.png","[*-)]":"ee_19.png","[:-#]":"ee_20.png","[del]":"del.png"},map4:{"[^o)]":"ee_21.png","[:-*]":"ee_22.png","[8-)]":"ee_23.png","[(|)]":"ee_24.png","[(u)]":"ee_25.png","[(S)]":"ee_26.png","[(*)]":"ee_27.png"},map5:{"[(#)]":"ee_28.png","[(R)]":"ee_29.png","[({)]":"ee_30.png","[(})]":"ee_31.png","[(k)]":"ee_32.png","[(F)]":"ee_33.png","[(W)]":"ee_34.png","[(D)]":"ee_35.png"},map6:{"[del]":"del.png"}},c.conn=new c.connection({isMultiLoginSessions:c.config.isMultiLoginSessions,https:"boolean"===typeof c.config.https?c.config.https:"https:"===location.protocol,url:c.config.xmppURL,apiUrl:c.config.apiURL,isAutoLogin:!0,heartBeatWait:c.config.heartBeatWait,autoReconnectNumMax:c.config.autoReconnectNumMax,autoReconnectInterval:c.config.autoReconnectInterval}),e.exports={default:c}},"719a":function(e,t,n){},"78bf":function(e,t,n){"use strict";n.r(t);var r=n("934b"),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);t["default"]=o.a},"83bd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={xmppURL:"wss://im-api.easemob.com/ws/",apiURL:"https://a1.easemob.com",appkey:"1109181216065516#gsv",https:!1,isMultiLoginSessions:!1,isWindowSDK:!1,isSandBox:!1,isDebug:!1,autoReconnectNumMax:15,autoReconnectInterval:2,isWebRTC:!1,isAutoLogin:!0},o=r;t.default=o},"934b":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={name:"UniNumberBox",props:{value:{type:[Number,String],default:1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:0}},watch:{value:function(e){this.inputValue=+e},inputValue:function(e,t){+e!==+t&&this.$emit("change",e)}},created:function(){this.inputValue=+this.value},methods:{_calcValue:function(e){if(!this.disabled){var t=this._getDecimalScale(),n=this.inputValue*t,r=this.step*t;"minus"===e?n-=r:"plus"===e&&(n+=r),n<this.min||n>this.max||(this.inputValue=n/t)}},_getDecimalScale:function(){var e=1;return~~this.step!==this.step&&(e=Math.pow(10,(this.step+"").split(".")[1].length)),e},_onBlur:function(e){var t=e.detail.value;t?(t=+t,t>this.max?t=this.max:t<this.min&&(t=this.min),this.inputValue=t):this.inputValue=0}}};t.default=r},"9f3c":function(e,t,n){"use strict";var r,o,i,s,a,c,u,l,d,p,h,f,m,_,g=!1,y=n("5d90"),v=y.DOMParser,b=(new v).parseFromString("<?xml version='1.0'?>\n","text/xml"),N=N||{};N.DOMParser=v;(function(y){if(function(e,t){o={id:"strophe-base64",exports:{},loaded:!1},r=function(){return t()}.call(o.exports,n,o.exports,o),o.loaded=!0,void 0!==r||(r=o.exports)}(0,function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t={encode:function(t){var n,r,o,i,s,a,c,u="",l=0;do{n=t.charCodeAt(l++),r=t.charCodeAt(l++),o=t.charCodeAt(l++),i=n>>2,s=(3&n)<<4|r>>4,a=(15&r)<<2|o>>6,c=63&o,isNaN(r)?(s=(3&n)<<4,a=c=64):isNaN(o)&&(c=64),u=u+e.charAt(i)+e.charAt(s)+e.charAt(a)+e.charAt(c)}while(l<t.length);return u},decode:function(t){var n,r,o,i,s,a,c,u="",l=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{i=e.indexOf(t.charAt(l++)),s=e.indexOf(t.charAt(l++)),a=e.indexOf(t.charAt(l++)),c=e.indexOf(t.charAt(l++)),n=i<<2|s>>4,r=(15&s)<<4|a>>2,o=(3&a)<<6|c,u+=String.fromCharCode(n),64!=a&&(u+=String.fromCharCode(r)),64!=c&&(u+=String.fromCharCode(o))}while(l<t.length);return u}};return t}),function(e,t){s={id:"strophe-sha1",exports:{},loaded:!1},i=function(){return t()}.call(s.exports,n,s.exports,s),s.loaded=!0,void 0!==i||(i=s.exports)}(0,function(){function e(e,r){e[r>>5]|=128<<24-r%32,e[15+(r+64>>9<<4)]=r;var s,a,c,u,l,d,p,h,f=new Array(80),m=1732584193,_=-271733879,g=-1732584194,y=271733878,v=-1009589776;for(s=0;s<e.length;s+=16){for(u=m,l=_,d=g,p=y,h=v,a=0;a<80;a++)f[a]=a<16?e[s+a]:i(f[a-3]^f[a-8]^f[a-14]^f[a-16],1),c=o(o(i(m,5),t(a,_,g,y)),o(o(v,f[a]),n(a))),v=y,y=g,g=i(_,30),_=m,m=c;m=o(m,u),_=o(_,l),g=o(g,d),y=o(y,p),v=o(v,h)}return[m,_,g,y,v]}function t(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function n(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function r(t,n){var r=s(t);r.length>16&&(r=e(r,8*t.length));for(var o=new Array(16),i=new Array(16),a=0;a<16;a++)o[a]=909522486^r[a],i[a]=1549556828^r[a];var c=e(o.concat(s(n)),512+8*n.length);return e(i.concat(c),672)}function o(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function i(e,t){return e<<t|e>>>32-t}function s(e){for(var t=[],n=255,r=0;r<8*e.length;r+=8)t[r>>5]|=(e.charCodeAt(r/8)&n)<<24-r%32;return t}function a(e){for(var t="",n=255,r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>24-r%32&n);return t}function c(e){for(var t,n,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",i=0;i<4*e.length;i+=3)for(t=(e[i>>2]>>8*(3-i%4)&255)<<16|(e[i+1>>2]>>8*(3-(i+1)%4)&255)<<8|e[i+2>>2]>>8*(3-(i+2)%4)&255,n=0;n<4;n++)8*i+6*n>32*e.length?o+="=":o+=r.charAt(t>>6*(3-n)&63);return o}return{b64_hmac_sha1:function(e,t){return c(r(e,t))},b64_sha1:function(t){return c(e(s(t),8*t.length))},binb2str:a,core_hmac_sha1:r,str_hmac_sha1:function(e,t){return a(r(e,t))},str_sha1:function(t){return a(e(s(t),8*t.length))}}}),function(e,t){c={id:"strophe-md5",exports:{},loaded:!1},a=function(){return t()}.call(c.exports,n,c.exports,c),c.loaded=!0,void 0!==a||(a=c.exports)}(0,function(e){var t=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n},n=function(e,t){return e<<t|e>>>32-t},r=function(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},o=function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t},i=function(e){for(var t="0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n},s=function(e,r,o,i,s,a){return t(n(t(t(r,e),t(i,a)),s),o)},a=function(e,t,n,r,o,i,a){return s(t&n|~t&r,e,t,o,i,a)},c=function(e,t,n,r,o,i,a){return s(t&r|n&~r,e,t,o,i,a)},u=function(e,t,n,r,o,i,a){return s(t^n^r,e,t,o,i,a)},l=function(e,t,n,r,o,i,a){return s(n^(t|~r),e,t,o,i,a)},d=function(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;for(var r,o,i,s,d=1732584193,p=-271733879,h=-1732584194,f=271733878,m=0;m<e.length;m+=16)r=d,o=p,i=h,s=f,d=a(d,p,h,f,e[m+0],7,-680876936),f=a(f,d,p,h,e[m+1],12,-389564586),h=a(h,f,d,p,e[m+2],17,606105819),p=a(p,h,f,d,e[m+3],22,-1044525330),d=a(d,p,h,f,e[m+4],7,-176418897),f=a(f,d,p,h,e[m+5],12,1200080426),h=a(h,f,d,p,e[m+6],17,-1473231341),p=a(p,h,f,d,e[m+7],22,-45705983),d=a(d,p,h,f,e[m+8],7,1770035416),f=a(f,d,p,h,e[m+9],12,-1958414417),h=a(h,f,d,p,e[m+10],17,-42063),p=a(p,h,f,d,e[m+11],22,-1990404162),d=a(d,p,h,f,e[m+12],7,1804603682),f=a(f,d,p,h,e[m+13],12,-40341101),h=a(h,f,d,p,e[m+14],17,-1502002290),p=a(p,h,f,d,e[m+15],22,1236535329),d=c(d,p,h,f,e[m+1],5,-165796510),f=c(f,d,p,h,e[m+6],9,-1069501632),h=c(h,f,d,p,e[m+11],14,643717713),p=c(p,h,f,d,e[m+0],20,-373897302),d=c(d,p,h,f,e[m+5],5,-701558691),f=c(f,d,p,h,e[m+10],9,38016083),h=c(h,f,d,p,e[m+15],14,-660478335),p=c(p,h,f,d,e[m+4],20,-405537848),d=c(d,p,h,f,e[m+9],5,568446438),f=c(f,d,p,h,e[m+14],9,-1019803690),h=c(h,f,d,p,e[m+3],14,-187363961),p=c(p,h,f,d,e[m+8],20,1163531501),d=c(d,p,h,f,e[m+13],5,-1444681467),f=c(f,d,p,h,e[m+2],9,-51403784),h=c(h,f,d,p,e[m+7],14,1735328473),p=c(p,h,f,d,e[m+12],20,-1926607734),d=u(d,p,h,f,e[m+5],4,-378558),f=u(f,d,p,h,e[m+8],11,-2022574463),h=u(h,f,d,p,e[m+11],16,1839030562),p=u(p,h,f,d,e[m+14],23,-35309556),d=u(d,p,h,f,e[m+1],4,-1530992060),f=u(f,d,p,h,e[m+4],11,1272893353),h=u(h,f,d,p,e[m+7],16,-155497632),p=u(p,h,f,d,e[m+10],23,-1094730640),d=u(d,p,h,f,e[m+13],4,681279174),f=u(f,d,p,h,e[m+0],11,-358537222),h=u(h,f,d,p,e[m+3],16,-722521979),p=u(p,h,f,d,e[m+6],23,76029189),d=u(d,p,h,f,e[m+9],4,-640364487),f=u(f,d,p,h,e[m+12],11,-421815835),h=u(h,f,d,p,e[m+15],16,530742520),p=u(p,h,f,d,e[m+2],23,-995338651),d=l(d,p,h,f,e[m+0],6,-198630844),f=l(f,d,p,h,e[m+7],10,1126891415),h=l(h,f,d,p,e[m+14],15,-1416354905),p=l(p,h,f,d,e[m+5],21,-57434055),d=l(d,p,h,f,e[m+12],6,1700485571),f=l(f,d,p,h,e[m+3],10,-1894986606),h=l(h,f,d,p,e[m+10],15,-1051523),p=l(p,h,f,d,e[m+1],21,-2054922799),d=l(d,p,h,f,e[m+8],6,1873313359),f=l(f,d,p,h,e[m+15],10,-30611744),h=l(h,f,d,p,e[m+6],15,-1560198380),p=l(p,h,f,d,e[m+13],21,1309151649),d=l(d,p,h,f,e[m+4],6,-145523070),f=l(f,d,p,h,e[m+11],10,-1120210379),h=l(h,f,d,p,e[m+2],15,718787259),p=l(p,h,f,d,e[m+9],21,-343485551),d=t(d,r),p=t(p,o),h=t(h,i),f=t(f,s);return[d,p,h,f]},p={hexdigest:function(e){return i(d(r(e),8*e.length))},hash:function(e){return o(d(r(e),8*e.length))}};return p}),function(e,t){l={id:"strophe-utils",exports:{},loaded:!1},u=function(){return t()}.call(l.exports,n,l.exports,l),l.loaded=!0,void 0!==u||(u=l.exports)}(0,function(){var e={utf16to8:function(e){var t,n,r="",o=e.length;for(t=0;t<o;t++)n=e.charCodeAt(t),n>=0&&n<=127?r+=e.charAt(t):n>2047?(r+=String.fromCharCode(224|n>>12&15),r+=String.fromCharCode(128|n>>6&63),r+=String.fromCharCode(128|n>>0&63)):(r+=String.fromCharCode(192|n>>6&31),r+=String.fromCharCode(128|n>>0&63));return r},addCookies:function(e){var t,n,r,o,i,s,a;for(t in e||{})i="",s="",a="",n=e[t],r="object"==typeof n,o=escape(unescape(r?n.value:n)),r&&(i=n.expires?";expires="+n.expires:"",s=n.domain?";domain="+n.domain:"",a=n.path?";path="+n.path:""),b.cookie=t+"="+o+i+s+a}};return e}),function(e,n){m=[],d=function(){return n()}.apply(t,m)}(0,function(){Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice,r=Array.prototype.concat,o=n.call(arguments,1);return function(){return t.apply(e||this,r.call(o,n.call(arguments,0)))}}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1})}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(null===this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!==typeof e)throw new TypeError(e+" is not a function");arguments.length>1&&(n=t),r=0;while(r<i){var s;r in o&&(s=o[r],e.call(n,s,r,o)),r++}}),function(e,n){m=[i,r,a,u,d],p=function(){return n.apply(this,arguments)}.apply(t,m)}(0,function(e,t,n,r,o){function i(e,t){return new o.Builder(e,t)}function s(e){return new o.Builder("message",e)}function a(e){return new o.Builder("iq",e)}function c(e){return new o.Builder("presence",e)}return o={VERSION:"1.2.9",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(e){for(var t=0;t<o.XHTML.tags.length;t++)if(e==o.XHTML.tags[t])return!0;return!1},validAttribute:function(e,t){if("undefined"!==typeof o.XHTML.attributes[e]&&o.XHTML.attributes[e].length>0)for(var n=0;n<o.XHTML.attributes[e].length;n++)if(t==o.XHTML.attributes[e][n])return!0;return!1},validCSS:function(e){for(var t=0;t<o.XHTML.css.length;t++)if(e==o.XHTML.css[t])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(e,t){o.NS[e]=t},forEachChild:function(e,t,n){var r,i;for(r=0;r<e.childNodes.length;r++)i=e.childNodes[r],i.nodeType!=o.ElementType.NORMAL||t&&!this.isTagEqual(i,t)||n(i)},isTagEqual:function(e,t){return e.tagName==t},_xmlGenerator:null,_makeGenerator:function(){var e;return void 0===b.implementation.createDocument||b.implementation.createDocument&&b.documentMode&&b.documentMode<10?(e=this._getIEXmlDom(),e.appendChild(e.createElement("strophe"))):e=b.implementation.createDocument("jabber:client","strophe",null),e},xmlGenerator:function(){return o._xmlGenerator||(o._xmlGenerator=o._makeGenerator()),o._xmlGenerator},_getIEXmlDom:function(){for(var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<t.length;n++){if(null!==e)break;try{e=new ActiveXObject(t[n])}catch(r){e=null}}return e},xmlElement:function(e){if(!e)return null;var t,n,r,i=o.xmlGenerator().createElement(e);for(t=1;t<arguments.length;t++){var s=arguments[t];if(s)if("string"==typeof s||"number"==typeof s)i.appendChild(o.xmlTextNode(s));else if("object"==typeof s&&"function"==typeof s.sort)for(n=0;n<s.length;n++){var a=s[n];"object"==typeof a&&"function"==typeof a.sort&&void 0!==a[1]&&null!==a[1]&&i.setAttribute(a[0],a[1])}else if("object"==typeof s)for(r in s)s.hasOwnProperty(r)&&void 0!==s[r]&&null!==s[r]&&i.setAttribute(r,s[r])}return i},xmlescape:function(e){return e=e.replace(/\&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/'/g,"&apos;"),e=e.replace(/"/g,"&quot;"),e},xmlunescape:function(e){return e=e.replace(/\&amp;/g,"&"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&apos;/g,"'"),e=e.replace(/&quot;/g,'"'),e},xmlTextNode:function(e){return o.xmlGenerator().createTextNode(e)},xmlHtmlNode:function(e){var t;if(N.DOMParser){var n=new v;t=n.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},getText:function(e){if(!e)return null;var t="";0===e.childNodes.length&&e.nodeType==o.ElementType.TEXT&&(t+=e.nodeValue);for(var n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeType==o.ElementType.TEXT&&(t+=e.childNodes[n].nodeValue);return o.xmlescape(t)},copyElement:function(e){var t,n;if(e.nodeType==o.ElementType.NORMAL){for(n=o.xmlElement(e.tagName),t=0;t<e.attributes.length;t++)n.setAttribute(e.attributes[t].nodeName,e.attributes[t].value);for(t=0;t<e.childNodes.length;t++)n.appendChild(o.copyElement(e.childNodes[t]))}else e.nodeType==o.ElementType.TEXT&&(n=o.xmlGenerator().createTextNode(e.nodeValue));return n},createHtml:function(e){var t,n,r,i,s,a,c,u,l,d,p;if(e.nodeType==o.ElementType.NORMAL)if(i=e.nodeName.toLowerCase(),o.XHTML.validTag(i))try{for(n=o.xmlElement(i),t=0;t<o.XHTML.attributes[i].length;t++)if(s=o.XHTML.attributes[i][t],a=e.getAttribute(s),"undefined"!=typeof a&&null!==a&&""!==a&&!1!==a&&0!==a)if("style"==s&&"object"==typeof a&&"undefined"!=typeof a.cssText&&(a=a.cssText),"style"==s){for(c=[],u=a.split(";"),r=0;r<u.length;r++)l=u[r].split(":"),d=l[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase(),o.XHTML.validCSS(d)&&(p=l[1].replace(/^\s*/,"").replace(/\s*$/,""),c.push(d+": "+p));c.length>0&&(a=c.join("; "),n.setAttribute(s,a))}else n.setAttribute(s,a);for(t=0;t<e.childNodes.length;t++)n.appendChild(o.createHtml(e.childNodes[t]))}catch(h){n=o.xmlTextNode("")}else for(n=o.xmlGenerator().createDocumentFragment(),t=0;t<e.childNodes.length;t++)n.appendChild(o.createHtml(e.childNodes[t]));else if(e.nodeType==o.ElementType.FRAGMENT)for(n=o.xmlGenerator().createDocumentFragment(),t=0;t<e.childNodes.length;t++)n.appendChild(o.createHtml(e.childNodes[t]));else e.nodeType==o.ElementType.TEXT&&(n=o.xmlTextNode(e.nodeValue));return n},escapeNode:function(e){return"string"!==typeof e?e:e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return"string"!==typeof e?e:e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(e){return e.indexOf("@")<0?null:e.split("@")[0]},getDomainFromJid:function(e){var t=o.getBareJidFromJid(e);if(t.indexOf("@")<0)return t;var n=t.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(e){var t=e.split("/");return t.length<2?null:(t.splice(0,1),t.join("/"))},getBareJidFromJid:function(e){return e?e.split("/")[0]:null},_handleError:function(e){"undefined"!==typeof e.stack&&o.fatal(e.stack),e.sourceURL?o.fatal("error: "+this.handler+" "+e.sourceURL+":"+e.line+" - "+e.name+": "+e.message):e.fileName?o.fatal("error: "+this.handler+" "+e.fileName+":"+e.lineNumber+" - "+e.name+": "+e.message):o.fatal("error: "+e.message)},log:function(e,t){},debug:function(e){this.log(this.LogLevel.DEBUG,e)},info:function(e){this.log(this.LogLevel.INFO,e)},warn:function(e){this.log(this.LogLevel.WARN,e)},error:function(e){this.log(this.LogLevel.ERROR,e)},fatal:function(e){this.log(this.LogLevel.FATAL,e)},serialize:function(e){var t;if(!e)return null;"function"===typeof e.tree&&(e=e.tree());var n,r,i=e.nodeName;for(e.getAttribute("_realname")&&(i=e.getAttribute("_realname")),t="<"+i,n=0;n<e.attributes.length;n++)"_realname"!=e.attributes[n].nodeName&&(t+=" "+e.attributes[n].nodeName+"='"+o.xmlescape(e.attributes[n].value)+"'");if(e.childNodes.length>0){for(t+=">",n=0;n<e.childNodes.length;n++)switch(r=e.childNodes[n],r.nodeType){case o.ElementType.NORMAL:t+=o.serialize(r);break;case o.ElementType.TEXT:t+=o.xmlescape(r.nodeValue);break;case o.ElementType.CDATA:t+="<![CDATA["+r.nodeValue+"]]>"}t+="</"+i+">"}else t+="/>";return t},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(e,t){o._connectionPlugins[e]=t}},o.Builder=function(e,t){"presence"!=e&&"message"!=e&&"iq"!=e||(t&&!t.xmlns?t.xmlns=o.NS.CLIENT:t||(t={xmlns:o.NS.CLIENT})),this.nodeTree=o.xmlElement(e,t),this.node=this.nodeTree},o.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return o.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},root:function(){return this.node=this.nodeTree,this},attrs:function(e){for(var t in e)e.hasOwnProperty(t)&&(void 0===e[t]?this.node.removeAttribute(t):this.node.setAttribute(t,e[t]));return this},c:function(e,t,n){var r=o.xmlElement(e,t,n);return this.node.appendChild(r),"string"!==typeof n&&"number"!==typeof n&&(this.node=r),this},cnode:function(e){var t,n=o.xmlGenerator();try{t=void 0!==n.importNode}catch(i){t=!1}var r=t?n.importNode(e,!0):o.copyElement(e);return this.node.appendChild(r),this.node=r,this},t:function(e){var t=o.xmlTextNode(e);return this.node.appendChild(t),this},h:function(e){var t=b.createElement("body");t.innerHTML=e;var n=o.createHtml(t);while(n.childNodes.length>0)this.node.appendChild(n.childNodes[0]);return this}},o.Handler=function(e,t,n,r,i,s,a){this.handler=e,this.ns=t,this.name=n,this.type=r,this.id=i,this.options=a||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBare&&(o.warn('The "matchBare" option is deprecated, use "matchBareFromJid" instead.'),this.options.matchBareFromJid=this.options.matchBare,delete this.options.matchBare),this.options.matchBareFromJid?this.from=s?o.getBareJidFromJid(s):null:this.from=s,this.user=!0},o.Handler.prototype={getNamespace:function(e){var t=e.getAttribute("xmlns");return t&&this.options.ignoreNamespaceFragment&&(t=t.split("#")[0]),t},namespaceMatch:function(e){var t=!1;if(!this.ns)return!0;var n=this;return o.forEachChild(e,null,function(e){n.getNamespace(e)===n.ns&&(t=!0)}),t=t||this.getNamespace(e)===this.ns,t},isMatch:function(e){var t=e.getAttribute("from");this.options.matchBareFromJid&&(t=o.getBareJidFromJid(t));var n=e.getAttribute("type");return!(!this.namespaceMatch(e)||this.name&&!o.isTagEqual(e,this.name)||this.type&&(Array.isArray(this.type)?-1==this.type.indexOf(n):n!=this.type)||this.id&&e.getAttribute("id")!=this.id||this.from&&t!=this.from)},run:function(e){var t=null;try{t=this.handler(e)}catch(n){throw o._handleError(n),n}return t},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},o.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},o.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},o.Connection=function(e,t){this.service=e,this.options=t||{};var n=this.options.protocol||"";for(var i in 0===e.indexOf("ws:")||0===e.indexOf("wss:")||0===n.indexOf("ws")?this._proto=new o.Websocket(this):this._proto=new o.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100),r.addCookies(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms),o._connectionPlugins)if(o._connectionPlugins.hasOwnProperty(i)){var s=o._connectionPlugins[i],a=function(){};a.prototype=s,this[i]=new a,this[i].init(this)}},o.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)});return"string"==typeof e||"number"==typeof e?t+":"+e:t+""},addProtocolErrorHandler:function(e,t,n){this.protocolErrorHandlers[e][t]=n},connect:function(e,t,n,r,i,s,a){this.jid=e,this.authzid=o.getBareJidFromJid(this.jid),this.authcid=a||o.getNodeFromJid(this.jid),this.pass=t,this.servtype="xmpp",this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=o.getDomainFromJid(this.jid),this._changeConnectStatus(o.Status.CONNECTING,null),this._proto._connect(r,i,s)},attach:function(e,t,n,r,i,s,a){if(!(this._proto instanceof o.Bosh))throw{name:"StropheSessionError",message:'The "attach" method can only be used with a BOSH connection.'};this._proto._attach(e,t,n,r,i,s,a)},restore:function(e,t,n,r,o){if(!this._sessionCachingSupported())throw{name:"StropheSessionError",message:'The "restore" method can only be used with a BOSH connection.'};this._proto._restore(e,t,n,r,o)},_sessionCachingSupported:function(){if(this._proto instanceof o.Bosh){if(!JSON)return!1;try{N.sessionStorage.setItem("_strophe_","_strophe_"),N.sessionStorage.removeItem("_strophe_")}catch(e){return!1}return!0}return!1},xmlInput:function(e){},xmlOutput:function(e){},rawInput:function(e){},rawOutput:function(e){},nextValidRid:function(e){},send:function(e,t){if(null!==e){if("function"===typeof e.sort)for(var n=0;n<e.length;n++)this._queueData(e[n]);else"function"===typeof e.tree?this._queueData(e.tree()):this._queueData(e);this._proto._send(t)}},flush:function(e){clearTimeout(this._idleTimeout),this._onIdle(e)},sendIQ:function(e,t,n,r){var i=null,s=this;"function"===typeof e.tree&&(e=e.tree());var a=e.getAttribute("id");a||(a=this.getUniqueId("sendIQ"),e.setAttribute("id",a));var c=e.getAttribute("to"),u=this.jid,l=this.addHandler(function(e){i&&s.deleteTimedHandler(i);var r=!1,a=e.getAttribute("from");if(a!==c&&(c||a!==o.getBareJidFromJid(u)&&a!==o.getDomainFromJid(u)&&a!==u)||(r=!0),!r)throw{name:"StropheError",message:"Got answer to IQ from wrong jid:"+a+"\nExpected jid: "+c};var l=e.getAttribute("type");if("result"==l)t&&t(e);else{if("error"!=l)throw{name:"StropheError",message:"Got bad IQ type of "+l};n&&n(e)}},null,"iq",["error","result"],a);return r&&(i=this.addTimedHandler(r,function(){return s.deleteHandler(l),n&&n(null),!1})),this.send(e),a},_queueData:function(e){if(null===e||!e.tagName||!e.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(e)},_sendRestart:function(){this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100)},addTimedHandler:function(e,t){var n=new o.TimedHandler(e,t);return this.addTimeds.push(n),n},deleteTimedHandler:function(e){this.removeTimeds.push(e)},addHandler:function(e,t,n,r,i,s,a){var c=new o.Handler(e,t,n,r,i,s,a);return this.addHandlers.push(c),c},deleteHandler:function(e){this.removeHandlers.push(e);var t=this.addHandlers.indexOf(e);t>=0&&this.addHandlers.splice(t,1)},registerSASLMechanisms:function(e){this.mechanisms={},e=e||[o.SASLAnonymous,o.SASLExternal,o.SASLMD5,o.SASLOAuthBearer,o.SASLPlain,o.SASLSHA1],e.forEach(this.registerSASLMechanism.bind(this))},registerSASLMechanism:function(e){this.mechanisms[e.prototype.name]=e},disconnect:function(e){if(this._changeConnectStatus(o.Status.DISCONNECTING,e),o.info("Disconnect was called because: "+e),this.connected){var t=!1;this.disconnecting=!0,this.authenticated&&(t=c({xmlns:o.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(t)}else o.info("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests()},_changeConnectStatus:function(e,t){for(var n in o._connectionPlugins)if(o._connectionPlugins.hasOwnProperty(n)){var r=this[n];if(r.statusChanged)try{r.statusChanged(e,t)}catch(i){o.error(n+" plugin caused an exception changing status: "+i)}}if(this.connect_callback)try{this.connect_callback(e,t)}catch(s){o._handleError(s),o.error("User connection callback caused an exception: "+s)}},_doDisconnect:function(e){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),o.info("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(o.Status.DISCONNECTED,e),this.connected=!1},_dataRecv:function(e,t){o.info("_dataRecv called");var n=this._proto._reqToData(e);if(null!==n){var r,i;this.xmlInput!==o.Connection.prototype.xmlInput&&(n.nodeName===this._proto.strip&&n.childNodes.length?this.xmlInput(n.childNodes[0]):this.xmlInput(n)),this.rawInput!==o.Connection.prototype.rawInput&&(t?this.rawInput(t):this.rawInput(o.serialize(n)));while(this.removeHandlers.length>0)i=this.removeHandlers.pop(),r=this.handlers.indexOf(i),r>=0&&this.handlers.splice(r,1);while(this.addHandlers.length>0)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())this._doDisconnect();else{var s,a,c=n.getAttribute("type");if(null!==c&&"terminate"==c){if(this.disconnecting)return;return s=n.getAttribute("condition"),a=n.getElementsByTagName("conflict"),null!==s?("remote-stream-error"==s&&a.length>0&&(s="conflict"),this._changeConnectStatus(o.Status.CONNFAIL,s)):this._changeConnectStatus(o.Status.CONNFAIL,"unknown"),void this._doDisconnect(s)}var u=this;o.forEachChild(n,null,function(e){var t,n;for(n=u.handlers,u.handlers=[],t=0;t<n.length;t++){var r=n[t];try{!r.isMatch(e)||!u.authenticated&&r.user?u.handlers.push(r):r.run(e)&&u.handlers.push(r)}catch(i){o.warn("Removing Strophe handlers due to uncaught exception: "+i.message)}}})}}},mechanisms:{},_connect_cb:function(e,t,n){var r;o.info("_connect_cb was called"),this.connected=!0;try{r=this._proto._reqToData(e)}catch(d){if("badformat"!=d)throw d;this._changeConnectStatus(o.Status.CONNFAIL,"bad-format"),this._doDisconnect("bad-format")}if(r){this.xmlInput!==o.Connection.prototype.xmlInput&&(r.nodeName===this._proto.strip&&r.childNodes.length?this.xmlInput(r.childNodes[0]):this.xmlInput(r)),this.rawInput!==o.Connection.prototype.rawInput&&(n?this.rawInput(n):this.rawInput(o.serialize(r)));var i,s=this._proto._connect_cb(r);if(s!==o.Status.CONNFAIL)if(i=r.getElementsByTagNameNS?r.getElementsByTagNameNS(o.NS.STREAM,"features").length>0:r.getElementsByTagName("stream:features").length>0||r.getElementsByTagName("features").length>0,i){var a,c,u=[],l=r.getElementsByTagName("mechanism");if(l.length>0)for(a=0;a<l.length;a++)c=o.getText(l[a]),this.mechanisms[c]&&u.push(this.mechanisms[c]);0!==u.length||0!==r.getElementsByTagName("auth").length?!1!==this.do_authentication&&this.authenticate(u):this._proto._no_auth_received(t)}else try{this._proto._no_auth_received(t)}catch(d){}}},sortMechanismsByPriority:function(e){var t,n,r,o;for(t=0;t<e.length-1;++t){for(r=t,n=t+1;n<e.length;++n)e[n].prototype.priority>e[r].prototype.priority&&(r=n);r!=t&&(o=e[t],e[t]=e[r],e[r]=o)}return e},_attemptSASLAuth:function(e){e=this.sortMechanismsByPriority(e||[]);var n=0,r=!1;for(n=0;n<e.length;++n)if(e[n].prototype.test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new e[n],this._sasl_mechanism.onStart(this);var s=i("auth",{xmlns:o.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var a=this._sasl_mechanism.onChallenge(this,null);s.t(t.encode(a))}this.send(s.tree()),r=!0;break}return r},_attemptLegacyAuth:function(){null===o.getNodeFromJid(this.jid)?(this._changeConnectStatus(o.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect("x-strophe-bad-non-anon-jid")):(this._changeConnectStatus(o.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(a({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:o.NS.AUTH}).c("username",{}).t(o.getNodeFromJid(this.jid)).tree()))},authenticate:function(e){this._attemptSASLAuth(e)||this._attemptLegacyAuth()},_sasl_challenge_cb:function(e){var n=t.decode(o.getText(e)),r=this._sasl_mechanism.onChallenge(this,n),s=i("response",{xmlns:o.NS.SASL});return""!==r&&s.t(t.encode(r)),this.send(s.tree()),!0},_auth1_cb:function(e){var t=a({type:"set",id:"_auth_2"}).c("query",{xmlns:o.NS.AUTH}).c("username",{}).t(o.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return o.getResourceFromJid(this.jid)||(this.jid=o.getBareJidFromJid(this.jid)+"/strophe"),t.up().c("resource",{}).t(o.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(t.tree()),!1},_sasl_success_cb:function(e){if(this._sasl_data["server-signature"]){var n,r=t.decode(o.getText(e)),i=/([a-z]+)=([^,]+)(,|$)/,s=r.match(i);if("v"==s[1]&&(n=s[2]),n!=this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}o.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var a=[],c=function(e,t){while(e.length)this.deleteHandler(e.pop());return this._sasl_auth1_cb.bind(this)(t),!1};return a.push(this._addSysHandler(function(e){c.bind(this)(a,e)}.bind(this),null,"stream:features",null,null)),a.push(this._addSysHandler(function(e){c.bind(this)(a,e)}.bind(this),o.NS.STREAM,"features",null,null)),this._sendRestart(),!1},_sasl_auth1_cb:function(e){var t,n;for(this.features=e,t=0;t<e.childNodes.length;t++)n=e.childNodes[t],"bind"==n.nodeName&&(this.do_bind=!0),"session"==n.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(o.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var r=o.getResourceFromJid(this.jid);return r?this.send(a({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:o.NS.BIND}).c("resource",{}).t(r).tree()):this.send(a({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:o.NS.BIND}).tree()),!1},_sasl_bind_cb:function(e){if("error"==e.getAttribute("type")){o.info("SASL binding failed.");var t,n=e.getElementsByTagName("conflict");return n.length>0&&(t="conflict"),this._changeConnectStatus(o.Status.AUTHFAIL,t),!1}var r,i=e.getElementsByTagName("bind");if(!(i.length>0))return o.info("SASL binding failed."),this._changeConnectStatus(o.Status.AUTHFAIL,null),!1;r=i[0].getElementsByTagName("jid"),r.length>0&&(this.jid=o.getText(r[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(a({type:"set",id:"_session_auth_2"}).c("session",{xmlns:o.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(o.Status.CONNECTED,null)))},_sasl_session_cb:function(e){if("result"==e.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(o.Status.CONNECTED,null);else if("error"==e.getAttribute("type"))return o.info("Session creation failed."),this._changeConnectStatus(o.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(e){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(o.Status.AUTHFAIL,null),!1},_auth2_cb:function(e){return"result"==e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(o.Status.CONNECTED,null)):"error"==e.getAttribute("type")&&(this._changeConnectStatus(o.Status.AUTHFAIL,null),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(e,t){var n=new o.TimedHandler(e,t);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(e,t,n,r,i){var s=new o.Handler(e,t,n,r,i);return s.user=!1,this.addHandlers.push(s),s},_onDisconnectTimeout:function(){return o.info("_onDisconnectTimeout was called"),this._changeConnectStatus(o.Status.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(e){var t,n,r,o;while(this.addTimeds.length>0)this.timedHandlers.push(this.addTimeds.pop());while(this.removeTimeds.length>0)n=this.removeTimeds.pop(),t=this.timedHandlers.indexOf(n),t>=0&&this.timedHandlers.splice(t,1);var i=(new Date).getTime();for(o=[],t=0;t<this.timedHandlers.length;t++)n=this.timedHandlers[t],!this.authenticated&&n.user||(r=n.lastCalled+n.period,r-i<=0?n.run()&&o.push(n):o.push(n));this.timedHandlers=o,clearTimeout(this._idleTimeout),this._proto._onIdle(e),this.connected&&(this._idleTimeout=setTimeout(function(){this._onIdle(e)}.bind(this),100))}},o.SASLMechanism=function(e,t,n){this.name=e,this.isClientFirst=t,this.priority=n},o.SASLMechanism.prototype={test:function(e){return!0},onStart:function(e){this._connection=e},onChallenge:function(e,t){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},o.SASLAnonymous=function(){},o.SASLAnonymous.prototype=new o.SASLMechanism("ANONYMOUS",!1,10),o.SASLAnonymous.prototype.test=function(e){return null===e.authcid},o.SASLPlain=function(){},o.SASLPlain.prototype=new o.SASLMechanism("PLAIN",!0,20),o.SASLPlain.prototype.test=function(e){return null!==e.authcid},o.SASLPlain.prototype.onChallenge=function(e){var t=e.authzid;return t+="\0",t+=e.authcid,t+="\0",t+=e.pass,r.utf16to8(t)},o.SASLSHA1=function(){},o.SASLSHA1.prototype=new o.SASLMechanism("SCRAM-SHA-1",!0,40),o.SASLSHA1.prototype.test=function(e){return null!==e.authcid},o.SASLSHA1.prototype.onChallenge=function(o,i,s){var a=s||n.hexdigest(1234567890*Math.random()),c="n="+r.utf16to8(o.authcid);return c+=",r=",c+=a,o._sasl_data.cnonce=a,o._sasl_data["client-first-message-bare"]=c,c="n,,"+c,this.onChallenge=function(n,o){var i,s,a,c,u,l,d,p,h,f,m,_,g="c=biws,",y=n._sasl_data["client-first-message-bare"]+","+o+",",v=n._sasl_data.cnonce,b=/([a-z]+)=([^,]+)(,|$)/;while(o.match(b)){var N=o.match(b);switch(o=o.replace(N[0],""),N[1]){case"r":i=N[2];break;case"s":s=N[2];break;case"i":a=N[2];break}}if(i.substr(0,v.length)!==v)return n._sasl_data={},n._sasl_failure_cb();for(g+="r="+i,y+=g,s=t.decode(s),s+="\0\0\0",h=r.utf16to8(n.pass),c=l=e.core_hmac_sha1(h,s),d=1;d<a;d++){for(u=e.core_hmac_sha1(h,e.binb2str(l)),p=0;p<5;p++)c[p]^=u[p];l=u}for(c=e.binb2str(c),f=e.core_hmac_sha1(c,"Client Key"),m=e.str_hmac_sha1(c,"Server Key"),_=e.core_hmac_sha1(e.str_sha1(e.binb2str(f)),y),n._sasl_data["server-signature"]=e.b64_hmac_sha1(m,y),p=0;p<5;p++)f[p]^=_[p];return g+=",p="+t.encode(e.binb2str(f)),g}.bind(this),c},o.SASLMD5=function(){},o.SASLMD5.prototype=new o.SASLMechanism("DIGEST-MD5",!1,30),o.SASLMD5.prototype.test=function(e){return null!==e.authcid},o.SASLMD5.prototype._quote=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},o.SASLMD5.prototype.onChallenge=function(e,t,o){var i,s=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,a=o||n.hexdigest(""+1234567890*Math.random()),c="",u=null,l="";while(t.match(s))switch(i=t.match(s),t=t.replace(i[0],""),i[2]=i[2].replace(/^"(.+)"$/,"$1"),i[1]){case"realm":c=i[2];break;case"nonce":l=i[2];break;case"qop":i[2];break;case"host":u=i[2];break}var d=e.servtype+"/"+e.domain;null!==u&&(d=d+"/"+u);var p=r.utf16to8(e.authcid+":"+c+":"+this._connection.pass),h=n.hash(p)+":"+l+":"+a,f="AUTHENTICATE:"+d,m="";return m+="charset=utf-8,",m+="username="+this._quote(r.utf16to8(e.authcid))+",",m+="realm="+this._quote(c)+",",m+="nonce="+this._quote(l)+",",m+="nc=00000001,",m+="cnonce="+this._quote(a)+",",m+="digest-uri="+this._quote(d)+",",m+="response="+n.hexdigest(n.hexdigest(h)+":"+l+":00000001:"+a+":auth:"+n.hexdigest(f))+",",m+="qop=auth",this.onChallenge=function(){return""},m},o.SASLOAuthBearer=function(){},o.SASLOAuthBearer.prototype=new o.SASLMechanism("OAUTHBEARER",!0,50),o.SASLOAuthBearer.prototype.test=function(e){return null!==e.authcid},o.SASLOAuthBearer.prototype.onChallenge=function(e){var t="n,a=";return t+=e.authzid,t+=",",t+="",t+="auth=Bearer ",t+=e.pass,t+="",t+="",r.utf16to8(t)},o.SASLExternal=function(){},o.SASLExternal.prototype=new o.SASLMechanism("EXTERNAL",!0,60),o.SASLExternal.prototype.onChallenge=function(e){return e.authcid===e.authzid?"":e.authzid},{Strophe:o,$build:i,$msg:s,$iq:a,$pres:c,SHA1:e,Base64:t,MD5:n}}),function(e,n){m=[p],h=function(e){return n(e.Strophe,e.$build)}.apply(t,m)}(0,function(e,t){return e.Request=function(t,n,r,o){this.id=++e._requestId,this.xmlData=t,this.data=e.serialize(t),this.origFunc=n,this.func=n,this.rid=r,this.date=NaN,this.sends=o||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var e=new Date;return(e-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var e=new Date;return(e-this.dead)/1e3},this.xhr=this._newXHR()},e.Request.prototype={getResponse:function(){var t=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(t=this.xhr.responseXML.documentElement,"parsererror"==t.tagName)throw e.error("invalid response received"),e.error("responseText: "+this.xhr.responseText),e.error("responseXML: "+e.serialize(this.xhr.responseXML)),"parsererror"}else if(this.xhr.responseText)throw e.error("invalid response received"),e.error("responseText: "+this.xhr.responseText),"badformat";return t},_newXHR:function(){var e=null;return N.XMLHttpRequest?(e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml; charset=utf-8")):N.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}},e.Bosh=function(e){this._conn=e,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this._requests=[]},e.Bosh.prototype={strip:null,_buildBody:function(){var n=t("body",{rid:this.rid++,xmlns:e.NS.HTTPBIND});return null!==this.sid&&n.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),n},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&N.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_connect:function(t,n,r){this.wait=t||this.wait,this.hold=n||this.hold,this.errors=0;var o=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":e.NS.BOSH});r&&o.attrs({route:r});var i=this._conn._connect_cb;this._requests.push(new e.Request(o.tree(),this._onRequestStateChange.bind(this,i.bind(this._conn)),o.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(t,n,r,o,i,s,a){this._conn.jid=t,this.sid=n,this.rid=r,this._conn.connect_callback=o,this._conn.domain=e.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=i||this.wait,this.hold=s||this.hold,this.window=a||this.window,this._conn._changeConnectStatus(e.Status.ATTACHED,null)},_restore:function(t,n,r,o,i){var s=JSON.parse(N.sessionStorage.getItem("strophe-bosh-session"));if(!("undefined"!==typeof s&&null!==s&&s.rid&&s.sid&&s.jid)||"undefined"!==typeof t&&null!==t&&e.getBareJidFromJid(s.jid)!=e.getBareJidFromJid(t))throw{name:"StropheSessionError",message:"_restore: no restoreable session."};this._conn.restored=!0,this._attach(s.jid,s.sid,s.rid,n,r,o,i)},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&N.sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):N.sessionStorage.removeItem("strophe-bosh-session")},_connect_cb:function(t){var n,r,o=t.getAttribute("type");if(null!==o&&"terminate"==o)return n=t.getAttribute("condition"),e.error("BOSH-Connection failed: "+n),r=t.getElementsByTagName("conflict"),null!==n?("remote-stream-error"==n&&r.length>0&&(n="conflict"),this._conn._changeConnectStatus(e.Status.CONNFAIL,n)):this._conn._changeConnectStatus(e.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(n),e.Status.CONNFAIL;this.sid||(this.sid=t.getAttribute("sid"));var i=t.getAttribute("requests");i&&(this.window=parseInt(i,10));var s=t.getAttribute("hold");s&&(this.hold=parseInt(s,10));var a=t.getAttribute("wait");a&&(this.wait=parseInt(a,10))},_disconnect:function(e){this._sendTerminate(e)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&N.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_emptyQueue:function(){return 0===this._requests.length},_callProtocolErrorHandlers:function(e){var t,n=this._getRequestStatus(e);t=this._conn.protocolErrorHandlers.HTTP[n],t&&t.call(this,n)},_hitError:function(t){this.errors++,e.warn("request errored, status: "+t+", number of errors: "+this.errors),this.errors>4&&this._conn._onDisconnectTimeout()},_no_auth_received:function(t){t=t?t.bind(this._conn):this._conn._connect_cb.bind(this._conn);var n=this._buildBody();this._requests.push(new e.Request(n.tree(),this._onRequestStateChange.bind(this,t.bind(this._conn)),n.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){var e;while(this._requests.length>0)e=this._requests.pop(),e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){}},_onIdle:function(){var t=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===t.length&&!this._conn.disconnecting&&(e.info("no requests during idle cycle, sending blank request"),t.push(null)),!this._conn.paused){if(this._requests.length<2&&t.length>0){for(var n=this._buildBody(),r=0;r<t.length;r++)null!==t[r]&&("restart"===t[r]?n.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":e.NS.BOSH}):n.cnode(t[r]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new e.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"))),this._throttledRequestHandler()}if(this._requests.length>0){var o=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(e.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),o>Math.floor(e.TIMEOUT*this.wait)&&(e.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(e.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}},_getRequestStatus:function(t,n){var r;if(4==t.xhr.readyState)try{r=t.xhr.status}catch(o){e.error("Caught an error while retrieving a request's status, reqStatus: "+r)}return"undefined"==typeof r&&(r="number"===typeof n?n:0),r},_onRequestStateChange:function(t,n){if(e.debug("request id "+n.id+"."+n.sends+" state changed to "+n.xhr.readyState),n.abort)n.abort=!1;else if(4===n.xhr.readyState){var r=this._getRequestStatus(n);if(this.disconnecting&&r>=400)return this._hitError(r),void this._callProtocolErrorHandlers(n);if((r>0&&r<500||n.sends>5)&&(this._removeRequest(n),e.debug("request id "+n.id+" should now be removed")),200==r){var o=this._requests[0]==n,i=this._requests[1]==n;(i||o&&this._requests.length>0&&this._requests[0].age()>Math.floor(e.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(Number(n.rid)+1),e.debug("request id "+n.id+"."+n.sends+" got 200"),t(n),this.errors=0}else 0===r||r>=400&&r<600||r>=12e3?(e.error("request id "+n.id+"."+n.sends+" error "+r+" happened"),this._hitError(r),this._callProtocolErrorHandlers(n),r>=400&&r<500&&(this._conn._changeConnectStatus(e.Status.DISCONNECTING,null),this._conn._doDisconnect())):e.error("request id "+n.id+"."+n.sends+" error "+r+" happened");r>0&&r<500&&!(n.sends>5)||this._throttledRequestHandler()}},_processRequest:function(t){var n=this,r=this._requests[t],o=this._getRequestStatus(r,-1);if(r.sends>this._conn.maxRetries)this._conn._onDisconnectTimeout();else{var i=r.age(),s=!isNaN(i)&&i>Math.floor(e.TIMEOUT*this.wait),a=null!==r.dead&&r.timeDead()>Math.floor(e.SECONDARY_TIMEOUT*this.wait),c=4==r.xhr.readyState&&(o<1||o>=500);if((s||a||c)&&(a&&e.error("Request "+this._requests[t].id+" timed out (secondary), restarting"),r.abort=!0,r.xhr.abort(),r.xhr.onreadystatechange=function(){},this._requests[t]=new e.Request(r.xmlData,r.origFunc,r.rid,r.sends),r=this._requests[t]),0===r.xhr.readyState){e.debug("request id "+r.id+"."+r.sends+" posting");try{var u=this._conn.options.contentType||"text/xml; charset=utf-8";r.xhr.open("POST",this._conn.service,!this._conn.options.sync),"undefined"!==typeof r.xhr.setRequestHeader&&r.xhr.setRequestHeader("Content-Type",u),this._conn.options.withCredentials&&(r.xhr.withCredentials=!0)}catch(p){return e.error("XHR open failed."),this._conn.connected||this._conn._changeConnectStatus(e.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var l=function(){if(r.date=new Date,n._conn.options.customHeaders){var e=n._conn.options.customHeaders;for(var t in e)e.hasOwnProperty(t)&&r.xhr.setRequestHeader(t,e[t])}r.xhr.send(r.data)};if(r.sends>1){var d=1e3*Math.min(Math.floor(e.TIMEOUT*this.wait),Math.pow(r.sends,3));setTimeout(function(){l()},d)}else l();r.sends++,this._conn.xmlOutput!==e.Connection.prototype.xmlOutput&&(r.xmlData.nodeName===this.strip&&r.xmlData.childNodes.length?this._conn.xmlOutput(r.xmlData.childNodes[0]):this._conn.xmlOutput(r.xmlData)),this._conn.rawOutput!==e.Connection.prototype.rawOutput&&this._conn.rawOutput(r.data)}else e.debug("_processRequest: "+(0===t?"first":"second")+" request has readyState of "+r.xhr.readyState)}},_removeRequest:function(t){var n;for(e.debug("removing request"),n=this._requests.length-1;n>=0;n--)t==this._requests[n]&&this._requests.splice(n,1);t.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(e){var t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)},_reqToData:function(e){try{return e.getResponse()}catch(t){if("parsererror"!=t)throw t;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(t){e.info("_sendTerminate was called");var n=this._buildBody().attrs({type:"terminate"});t&&n.cnode(t.tree());var r=new e.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"));this._requests.push(r),this._throttledRequestHandler()},_send:function(e){clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(function(){this._onIdle(e)}.bind(this._conn),100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?e.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):e.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}},e}),function(e,n){m=[p],f=function(e){return n(e.Strophe,e.$build)}.apply(t,m)}(0,function(e,t){var n=void 0;return e.Websocket=function(e){this._conn=e,this.strip="wrapper";var t=e.service;if(0!==t.indexOf("ws:")&&0!==t.indexOf("wss:")){var n="";"ws"===e.options.protocol&&"https:"!==N.location.protocol?n+="ws":n+="wss",n+="://"+N.location.host,0!==t.indexOf("/")?n+=N.location.pathname+t:n+=t,e.service=n}},e.Websocket.prototype={_buildStream:function(){return t("open",{xmlns:e.NS.FRAMING,to:this._conn.domain,version:"1.0"})},_check_streamerror:function(t,n){var r;if(r=t.getElementsByTagNameNS?t.getElementsByTagNameNS(e.NS.STREAM,"error"):t.getElementsByTagName("stream:error"),0===r.length)return!1;for(var o=r[0],i="",s="",a="urn:ietf:params:xml:ns:xmpp-streams",c=0;c<o.childNodes.length;c++){var u=o.childNodes[c];if(u.getAttribute("xmlns")!==a)break;"text"===u.nodeName?s=u.textContent:i=u.nodeName}var l="WebSocket stream error: ";return l+=i||"unknown",s&&(l+=" - "+i),e.error(l),this._conn._changeConnectStatus(n,i),this._conn._doDisconnect(),!0},_reset:function(){},_connect:function(){var e=!1,t=wx.getSystemInfoSync();"devtools"==t.platform?e=!1:"ios"==t.platform?e=!1:"android"==t.platform&&(e=!0);var r=this;function o(){n&&(console.log("有sockettask了。。。"),n.close(),n=void 0),setTimeout(function(){var t=wx.connectSocket({url:r._conn.service,fail:function(e){console.log("连接失败",e),-1!=e.errMsg.indexOf("suspend")&&o()},success:function(e){console.log("连接成功",e)}});n=t,n.onOpen(function(e){console.log("WebSocket 连接已打开！"),g=!0,r.socket.onopen.call(r)}),n.onMessage(function(e){r.socket.onmessage.call(r,e)}),n.onClose(function(e){console.log("WebSocket 连接已经关闭！"),g=!1,r._conn.connected=!0,r.socket.onclose.call(r),r._onSocketClose&&r._onSocketClose(e)}),n.onError(function(t){console.log("出错了 出错了"),e?(console.log("安卓"),g=!1,r._conn.connected=!0,r.socket.onclose.call(r),r._onSocketClose&&r._onSocketClose(t)):r.socket.onclose.call(r)})},1e3)}this.socket={onopen:this._onOpen,onmessage:this._connect_cb_wrapper,onerror:this._onError,onclose:this._onClose,send:function(e){wx.sendSocketMessage({data:e})}},o()},_connect_cb:function(t){var n=this._check_streamerror(t,e.Status.CONNFAIL);if(n)return e.Status.CONNFAIL},_handleStreamStart:function(t){var n=!1,r=t.getAttribute("xmlns");"string"!==typeof r?n="Missing xmlns in <open />":r!==e.NS.FRAMING&&(n="Wrong xmlns in <open />: "+r);var o=t.getAttribute("version");return"string"!==typeof o?n="Missing version in <open />":"1.0"!==o&&(n="Wrong version in <open />: "+o),!n||(this._conn._changeConnectStatus(e.Status.CONNFAIL,n),this._conn._doDisconnect(),!1)},_connect_cb_wrapper:function(t){if(0===t.data.indexOf("<open ")||0===t.data.indexOf("<?xml")){var n=t.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===n)return;var r=(new v).parseFromString(n,"text/xml").documentElement;this._conn.xmlInput(r),this._conn.rawInput(t.data),this._handleStreamStart(r)&&this._connect_cb(r)}else if(0===t.data.indexOf("<close ")){this._conn.rawInput(t.data),this._conn.xmlInput(t);var o=t.getAttribute("see-other-uri");o?(this._conn._changeConnectStatus(e.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=o,this._connect()):(this._conn._changeConnectStatus(e.Status.CONNFAIL,"Received closing stream"),this._conn._doDisconnect())}else{var i=this._streamWrap(t.data),s=(new v).parseFromString(i,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(s,null,t.data)}},_disconnect:function(n){if(console.log("_disconnect",this.socket.readyState,!!this.socket),this.socket){n&&this._conn.send(n);var r=t("close",{xmlns:e.NS.FRAMING});this._conn.xmlOutput(r);var o=e.serialize(r);this._conn.rawOutput(o);try{this.socket.send(o)}catch(i){e.info("Couldn't send <close /> tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){e.info("WebSockets _doDisconnect was called"),this._closeSocket&&this._closeSocket()},_streamWrap:function(e){return"<wrapper>"+e+"</wrapper>"},_emptyQueue:function(){return!0},_onClose:function(){this._conn.connected&&!this._conn.disconnecting?(e.error("Websocket closed unexpectedly"),this._conn._doDisconnect()):e.info("Websocket closed")},_no_auth_received:function(t){e.error("Server did not send any auth methods"),this._conn._changeConnectStatus(e.Status.CONNFAIL,"Server did not send any auth methods"),t&&(t=t.bind(this._conn),t()),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_abortAllRequests:function(){},_onError:function(e){wx.onSocketError(function(e){})},_onIdle:function(t){var n=this._conn._data;if(n.length>0&&!this._conn.paused){for(var r=0;r<n.length;r++){var o,i;if(null!==n[r])o="restart"===n[r]?this._buildStream().tree():n[r],i=e.serialize(o),this._conn.xmlOutput(o),this._conn.rawOutput(i),g?wx.sendSocketMessage({data:i,fail:function(){console.log("socjet发送失败"),t&&t("socket error")},success:function(){}}):(g=!1,t&&t("socket disconnnected"))}this._conn._data=[]}},_onMessage:function(t){var n,r,o='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(t.data===o)return this._conn.rawInput(o),this._conn.xmlInput(t),void(this._conn.disconnecting||this._conn._doDisconnect());if(0===t.data.search("<open ")){if(n=(new v).parseFromString(t.data,"text/xml").documentElement,!this._handleStreamStart(n))return}else r=this._streamWrap(t.data),n=(new v).parseFromString(r,"text/xml").documentElement;return this._check_streamerror(n,e.Status.ERROR)?void 0:this._conn.disconnecting&&"presence"===n.firstChild.nodeName&&"unavailable"===n.firstChild.getAttribute("type")?(this._conn.xmlInput(n),void this._conn.rawInput(e.serialize(n))):void this._conn._dataRecv(n,t.data)},_onOpen:function(){e.info("Websocket open");var t=this._buildStream();this._conn.xmlOutput(t.tree());var n=e.serialize(t);this._conn.rawOutput(n),wx.sendSocketMessage({data:n})},_reqToData:function(e){return e},_send:function(e){this._conn.flush(e)},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}},e}),function(n){m=[p,h,f],_=function(e){return e}.apply(t,m),void 0===_||(e.exports=_)}(),y){var E=y;"function"===typeof requirejs?requirejs(["./strophe"],function(e){E(e.Strophe,e.$build,e.$msg,e.$iq,e.$pres)}):Promise.resolve().then(function(){var e=[n("9f3c")];(function(e){E(e.Strophe,e.$build,e.$msg,e.$iq,e.$pres)}).apply(null,e)}).catch(n.oe)}}).bind(N)(function(e,t,n,r,o){})},b0ce:function(e,t,n){"use strict";n.r(t);var r=n("f3d3"),o=n.n(r);function i(e,t,n){var r,o=e.$options[t];if("onError"===t&&o&&(o=[o]),"function"===typeof o&&(o=[o]),o)for(var s=0,a=o.length;s<a;s++)r=o[s].call(e,n);return e._hasHookEvent&&e.$emit("hook:"+t),e.$children.length&&e.$children.forEach(function(e){return i(e,t,n)}),r}function s(e){return e.$vm.$root}t["default"]=function(e){return{data:{$root:{}},onLoad:function(t){var n=new o.a(e);this.$vm=n;var r=n.$root;r.__wxExparserNodeId__=this.__wxExparserNodeId__,r.__wxWebviewId__=this.__wxWebviewId__,r.$mp||(r.$mp={});var i=r.$mp;i.mpType="page",i.page=this,i.query=t,i.status="load",n.$mount()},handleProxy:function(e){var t=s(this);return t.$handleProxyWithVue(e)},onShow:function(){var e=s(this),t=e.$mp;t.status="show",i(e,"onShow"),e.$nextTick(function(){e._initDataToMP()})},onReady:function(){var e=s(this),t=e.$mp;t.status="ready",i(e,"onReady")},onHide:function(){var e=s(this),t=e.$mp;t.status="hide",i(e,"onHide")},onUnload:function(){var e=s(this);i(e,"onUnload"),e.$destroy()},onPullDownRefresh:function(){var e=s(this);i(e,"onPullDownRefresh")},onReachBottom:function(){var e=s(this);i(e,"onReachBottom")},onPageScroll:function(e){var t=s(this);i(t,"onPageScroll",e)},onTabItemTap:function(e){var t=s(this);i(t,"onTabItemTap",e)},onShareAppMessage:e.onShareAppMessage?function(e){var t=s(this);return i(t,"onShareAppMessage",e)}:null,onNavigationBarButtonTap:function(e){var t=s(this);i(t,"onNavigationBarButtonTap",e)},onNavigationBarSearchInputChanged:function(e){var t=s(this);i(t,"onNavigationBarSearchInputChanged",e)},onNavigationBarSearchInputConfirmed:function(e){var t=s(this);i(t,"onNavigationBarSearchInputConfirmed",e)},onNavigationBarSearchInputClicked:function(e){var t=s(this);i(t,"onNavigationBarSearchInputClicked",e)},onBackPress:function(e){var t=s(this);return i(t,"onBackPress",e)},$getAppWebview:function(e){return plus.webview.getWebviewById(""+this.__wxWebviewId__)}}}},b253:function(e,t,n){"use strict";n.r(t);var r=n("badb"),o=n("78bf");for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);n("0fb0");var s=n("2877"),a=Object(s["a"])(o["default"],r["a"],r["b"],!1,null,null,null);t["default"]=a.exports},b428:function(e,t,n){"use strict";e.exports={IMAGE:"img",TEXT:"txt",LOCATION:"location",VIDEO:"video",AUDIO:"audio",EMOJI:"emoji",FILE:"chat",chatType:{SINGLE_CHAT:"singleChat",CHAT_ROOM:"chatRoom"}}},badb:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:"uni-numbox"},[n("view",{staticClass:"uni-numbox__minus",class:{"uni-numbox--disabled":e.inputValue<=e.min||e.disabled},attrs:{eventid:"3c2b173a-0"},on:{click:function(t){e._calcValue("minus")}}},[e._v("-")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"uni-numbox__value",attrs:{disabled:e.disabled,type:"number",eventid:"3c2b173a-1"},domProps:{value:e.inputValue},on:{blur:e._onBlur,input:function(t){t.target.composing||(e.inputValue=t.target.value)}}}),n("view",{staticClass:"uni-numbox__plus",class:{"uni-numbox--disabled":e.inputValue>=e.max||e.disabled},attrs:{eventid:"3c2b173a-2"},on:{click:function(t){e._calcValue("plus")}}},[e._v("+")])])},o=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},c1a0:function(e,t,n){"use strict";var r=[],o=[];function i(){o.push(this),r.push({})}i.prototype={on:function(e,t){var n=r[o.indexOf(this)],i=n[e]=n[e]||[];~i.indexOf(t)||i.push(t)},off:function(e,t){var n=r[o.indexOf(this)],i=n[e]=n[e]||[],s=i.indexOf(t);~s&&i.splice(s,1)},fire:function(e){for(var t=r[o.indexOf(this)],n=t[e]=t[e]||[],i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];for(var c=0;c<n.length;c++)n[c].apply(null,s)}},e.exports=i},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},d04d:function(e,t,n){"use strict";var r=n("c1a0"),o=n("fbbc"),i=n("b428"),s=new r,a=n("4df4");s.saveReceiveMsg=function(e,t){var n;if(t==i.IMAGE)n={id:e.id,type:t,body:{id:e.id,from:e.from,to:e.to,type:e.type,ext:e.ext,chatType:e.type,toJid:"",body:{type:t,url:e.url,filename:e.filename,filetype:e.filetype,size:{width:e.width,height:e.height}}}};else if(t==i.TEXT||t==i.EMOJI)n={id:e.id,type:t,body:{id:e.id,from:e.from,to:e.to,type:e.type,ext:e.ext,chatType:e.type,toJid:"",body:{type:t,msg:e.data}},value:e.data};else if(t==i.FILE)n={id:e.id,type:t,body:{id:e.id,length:e.file_length,from:e.from,to:e.to,type:e.type,ext:e.ext,chatType:e.type,toJid:"",body:{type:t,url:e.url,filename:e.filename,msg:"当前不支持此格式消息展示"}},value:e.data};else{if(t!=i.AUDIO)return;n={id:e.id,type:t,accessToken:e.token||e.accessToken,body:{id:e.id,length:e.length,from:e.from,to:e.to,type:e.type,ext:e.ext,chatType:t,toJid:"",body:{type:t,url:e.url,filename:e.filename,filetype:e.filetype,from:e.from,to:e.to}}}}this.saveMsg(n,t,e)},s.saveMsg=function(e,t,n){var r,s=this,c=wx.getStorageSync("myUsername");r=n&&"groupchat"==n.type?n.to+c:e.body.from==c?e.body.to+c:e.body.from+c;var u=wx.getStorageSync(r)||[],l=o(e,t,c);function d(){wx.setStorage({key:r,data:u,success:function(){t!=i.AUDIO&&t!=i.VIDEO||a.fire("em.chat.audio.fileLoaded"),s.fire("newChatMsg",l,t,u,r)}})}t==i.AUDIO&&(l.msg.length=e.body.length,l.msg.token=e.accessToken),u.push(l),t==i.AUDIO&&(l.msg.token=e.accessToken),d()},e.exports=s},e31c:function(e,t,n){"use strict";function r(e,t){for(var n in e)t[n]=e[n]}function o(e,t){var n=e.prototype;if(Object.create){var o=Object.create(t.prototype);n.__proto__=o}if(!(n instanceof t)){var i=function(){};i.prototype=t.prototype,i=new i,r(n,i),e.prototype=n=i}n.constructor!=e&&(n.constructor=e)}var i="http://www.w3.org/1999/xhtml",s={},a=s.ELEMENT_NODE=1,c=s.ATTRIBUTE_NODE=2,u=s.TEXT_NODE=3,l=s.CDATA_SECTION_NODE=4,d=s.ENTITY_REFERENCE_NODE=5,p=s.ENTITY_NODE=6,h=s.PROCESSING_INSTRUCTION_NODE=7,f=s.COMMENT_NODE=8,m=s.DOCUMENT_NODE=9,_=s.DOCUMENT_TYPE_NODE=10,g=s.DOCUMENT_FRAGMENT_NODE=11,y=s.NOTATION_NODE=12,v={},b={},N=(v.INDEX_SIZE_ERR=(b[1]="Index size error",1),v.DOMSTRING_SIZE_ERR=(b[2]="DOMString size error",2),v.HIERARCHY_REQUEST_ERR=(b[3]="Hierarchy request error",3),v.WRONG_DOCUMENT_ERR=(b[4]="Wrong document",4),v.INVALID_CHARACTER_ERR=(b[5]="Invalid character",5),v.NO_DATA_ALLOWED_ERR=(b[6]="No data allowed",6),v.NO_MODIFICATION_ALLOWED_ERR=(b[7]="No modification allowed",7),v.NOT_FOUND_ERR=(b[8]="Not found",8)),E=(v.NOT_SUPPORTED_ERR=(b[9]="Not supported",9),v.INUSE_ATTRIBUTE_ERR=(b[10]="Attribute in use",10));v.INVALID_STATE_ERR=(b[11]="Invalid state",11),v.SYNTAX_ERR=(b[12]="Syntax error",12),v.INVALID_MODIFICATION_ERR=(b[13]="Invalid modification",13),v.NAMESPACE_ERR=(b[14]="Invalid namespace",14),v.INVALID_ACCESS_ERR=(b[15]="Invalid access",15);function x(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,b[e]),this.message=b[e],Error.captureStackTrace&&Error.captureStackTrace(this,x);return n.code=e,t&&(this.message=this.message+": "+t),n}function O(){}function T(e,t){this._node=e,this._refresh=t,S(this)}function S(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);oe(e,"length",n.length),r(n,e),e._inc=t}}function I(){}function w(e,t){var n=e.length;while(n--)if(e[n]===t)return n}function C(e,t,n,r){if(r?t[w(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var o=e.ownerDocument;o&&(r&&j(o,e,r),B(o,e,n))}}function A(e,t,n){var r=w(t,n);if(!(r>=0))throw x(N,new Error);var o=t.length-1;while(r<o)t[r]=t[++r];if(t.length=o,e){var i=e.ownerDocument;i&&(j(i,e,n),n.ownerElement=null)}}function R(e){if(this._features={},e)for(var t in e)this._features=e[t]}function M(){}function D(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function $(e,t){if(t(e))return!0;if(e=e.firstChild)do{if($(e,t))return!0}while(e=e.nextSibling)}function k(){}function B(e,t,n){e&&e._inc++;var r=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==r&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function j(e,t,n,r){e&&e._inc++;var o=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==o&&delete t._nsMap[n.prefix?n.localName:""]}function L(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{var o=t.firstChild,i=0;while(o)r[i++]=o,o=o.nextSibling;r.length=i}}}function F(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,L(e.ownerDocument,e),t}function U(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===g){var o=t.firstChild;if(null==o)return t;var i=t.lastChild}else o=i=t;var s=n?n.previousSibling:e.lastChild;o.previousSibling=s,i.nextSibling=n,s?s.nextSibling=o:e.firstChild=o,null==n?e.lastChild=i:n.previousSibling=i;do{o.parentNode=e}while(o!==i&&(o=o.nextSibling));return L(e.ownerDocument||e,e),t.nodeType==g&&(t.firstChild=t.lastChild=null),t}function P(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t);r=e.lastChild}r=e.lastChild;return t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,L(e.ownerDocument,e,t),t}function q(){this._nsMap={}}function H(){}function W(){}function G(){}function J(){}function V(){}function z(){}function X(){}function Q(){}function K(){}function Y(){}function Z(){}function ee(){}function te(e,t,n,r){switch(e.nodeType){case a:var o=e.attributes,s=o.length,p=e.firstChild,y=e.tagName;r=i===e.namespaceURI||r,t.push("<",y),n&&t.sort.apply(o,n);for(var v=0;v<s;v++)te(o.item(v),t,n,r);if(p||r&&!/^(?:meta|link|img|br|hr|input|button)$/i.test(y)){if(t.push(">"),r&&/^script$/i.test(y))p&&t.push(p.data);else while(p)te(p,t,n,r),p=p.nextSibling;t.push("</",y,">")}else t.push("/>");return;case m:case g:p=e.firstChild;while(p)te(p,t,n,r),p=p.nextSibling;return;case c:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,D),'"');case u:return t.push(e.data.replace(/[<&]/g,D));case l:return t.push("<![CDATA[",e.data,"]]>");case f:return t.push("\x3c!--",e.data,"--\x3e");case _:var b=e.publicId,N=e.systemId;if(t.push("<!DOCTYPE ",e.name),b)t.push(' PUBLIC "',b),N&&"."!=N&&t.push('" "',N),t.push('">');else if(N&&"."!=N)t.push(' SYSTEM "',N,'">');else{var E=e.internalSubset;E&&t.push(" [",E,"]"),t.push(">")}return;case h:return t.push("<?",e.target," ",e.data,"?>");case d:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ne(e,t,n){var r;switch(t.nodeType){case a:r=t.cloneNode(!1),r.ownerDocument=e;case g:break;case c:n=!0;break}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,n){var o=t.firstChild;while(o)r.appendChild(ne(e,o,n)),o=o.nextSibling}return r}function re(e,t,n){var r=new t.constructor;for(var o in t){var i=t[o];"object"!=typeof i&&i!=r[o]&&(r[o]=i)}switch(t.childNodes&&(r.childNodes=new O),r.ownerDocument=e,r.nodeType){case a:var s=t.attributes,u=r.attributes=new I,l=s.length;u._ownerElement=r;for(var d=0;d<l;d++)r.setAttributeNode(re(e,s.item(d),!0));break;case c:n=!0}if(n){var p=t.firstChild;while(p)r.appendChild(re(e,p,n)),p=p.nextSibling}return r}function oe(e,t,n){e[t]=n}x.prototype=Error.prototype,r(v,x),O.prototype={length:0,item:function(e){return this[e]||null},toString:function(){for(var e=[],t=0;t<this.length;t++)te(this[t],e);return e.join("")}},T.prototype.item=function(e){return S(this),this[e]},o(T,O),I.prototype={length:0,item:O.prototype.item,getNamedItem:function(e){var t=this.length;while(t--){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new x(E);var n=this.getNamedItem(e.nodeName);return C(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new x(E);return t=this.getNamedItemNS(e.namespaceURI,e.localName),C(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return A(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return A(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){var n=this.length;while(n--){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},R.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new k;if(r.implementation=this,r.childNodes=new O,r.doctype=n,n&&r.appendChild(n),t){var o=r.createElementNS(e,t);r.appendChild(o)}return r},createDocumentType:function(e,t,n){var r=new z;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},M.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return U(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return F(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return re(this.ownerDocument||this,this,e)},normalize:function(){var e=this.firstChild;while(e){var t=e.nextSibling;t&&t.nodeType==u&&e.nodeType==u?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){var t=this;while(t){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){var t=this;while(t){var n=t._nsMap;if(n&&e in n)return n[e];t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},r(s,M),r(s,M.prototype),k.prototype={nodeName:"#document",nodeType:m,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==g){var n=e.firstChild;while(n){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&1==e.nodeType&&(this.documentElement=e),U(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),F(this,e)},importNode:function(e,t){return ne(this,e,t)},getElementById:function(e){var t=null;return $(this.documentElement,function(n){if(1==n.nodeType&&n.getAttribute("id")==e)return t=n,!0}),t},createElement:function(e){var t=new q;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new O;var n=t.attributes=new I;return n._ownerElement=t,t},createDocumentFragment:function(){var e=new Y;return e.ownerDocument=this,e.childNodes=new O,e},createTextNode:function(e){var t=new G;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new J;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new V;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new Z;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new H;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new K;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new q,r=t.split(":"),o=n.attributes=new I;return n.childNodes=new O,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,o._ownerElement=n,n},createAttributeNS:function(e,t){var n=new H,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},o(k,M),q.prototype={nodeType:a,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===g?this.insertBefore(e,null):P(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new T(this,function(t){var n=[];return $(t,function(r){r===t||r.nodeType!=a||"*"!==e&&r.tagName!=e||n.push(r)}),n})},getElementsByTagNameNS:function(e,t){return new T(this,function(n){var r=[];return $(n,function(o){o===n||o.nodeType!==a||"*"!==e&&o.namespaceURI!==e||"*"!==t&&o.localName!=t||r.push(o)}),r})}},k.prototype.getElementsByTagName=q.prototype.getElementsByTagName,k.prototype.getElementsByTagNameNS=q.prototype.getElementsByTagNameNS,o(q,M),H.prototype.nodeType=c,o(H,M),W.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(b[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var r=this.data.substring(0,e),o=this.data.substring(e+t);n=r+n+o,this.nodeValue=this.data=n,this.length=n.length}},o(W,M),G.prototype={nodeName:"#text",nodeType:u,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},o(G,W),J.prototype={nodeName:"#comment",nodeType:f},o(J,W),V.prototype={nodeName:"#cdata-section",nodeType:l},o(V,W),z.prototype.nodeType=_,o(z,M),X.prototype.nodeType=y,o(X,M),Q.prototype.nodeType=p,o(Q,M),K.prototype.nodeType=d,o(K,M),Y.prototype.nodeName="#document-fragment",Y.prototype.nodeType=g,o(Y,M),Z.prototype.nodeType=h,o(Z,M),ee.prototype.serializeToString=function(e,t){return e.toString(t)},M.prototype.toString=function(e){var t=[];return te(this,t,e),t.join("")};try{if(Object.defineProperty){var ie=function e(t){switch(t.nodeType){case 1:case 11:var n=[];t=t.firstChild;while(t)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}};Object.defineProperty(T.prototype,"length",{get:function(){return S(this),this.$$length}}),Object.defineProperty(M.prototype,"textContent",{get:function(){return ie(this)},set:function(e){switch(this.nodeType){case 1:case 11:while(this.firstChild)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=value,this.nodeValue=e}}}),oe=function(e,t,n){e["$$"+t]=n}}}catch(se){}t.DOMImplementation=R,t.XMLSerializer=ee},e928:function(module,exports,__webpack_require__){"use strict";var _strophe=_interopRequireDefault(__webpack_require__("9f3c"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var WebIM={},Strophe=_strophe.default.Strophe;Strophe.log=function(e,t){};var xmldom=__webpack_require__("5d90"),DOMParser=xmldom.DOMParser,window={},_version="1.1.3",_code=__webpack_require__("4345").code,_utils=__webpack_require__("fe52").utils,_msg=__webpack_require__("518f"),_message=_msg._msg,_msgHash={},Queue=__webpack_require__("1286").Queue,location=window.location||{protocol:"https:"};function _listenNetwork(e,t){window.addEventListener?(window.addEventListener("online",e),window.addEventListener("offline",t)):window.attachEvent&&(document.body?(document.body.attachEvent("ononline",e),document.body.attachEvent("onoffline",t)):window.attachEvent("load",function(){document.body.attachEvent("ononline",e),document.body.attachEvent("onoffline",t)}))}function _parseRoom(e){var t=[],n=e.getElementsByTagName("item");if(n)for(var r=0;r<n.length;r++){var o=n[r],i=o.getAttribute("jid"),s=i.split("@")[0],a={jid:i,name:o.getAttribute("name"),roomId:s.split("_")[1]};t.push(a)}return t}function _parseRoomOccupants(e){var t=[],n=e.getElementsByTagName("item");if(n)for(var r=0;r<n.length;r++){var o=n[r],i={jid:o.getAttribute("jid"),name:o.getAttribute("name")};t.push(i)}return t}function _parseResponseMessage(msginfo){var parseMsgData={errorMsg:!0,data:[]},msgBodies=msginfo.getElementsByTagName("body");if(msgBodies){for(var i=0;i<msgBodies.length;i++){var msgBody=msgBodies[i],childNodes=msgBody.childNodes;if(childNodes&&childNodes.length>0){var childNode=msgBody.childNodes[0];if(childNode.nodeType==Strophe.ElementType.TEXT){var jsondata=childNode.wholeText||childNode.nodeValue;jsondata=jsondata.replace("\n","<br>");try{var data=JSON.parse(jsondata);parseMsgData.errorMsg=!1,parseMsgData.data=[data]}catch(e){}}}}var delayTags=msginfo.getElementsByTagName("delay");if(delayTags&&delayTags.length>0){var delayTag=delayTags[0],delayMsgTime=delayTag.getAttribute("stamp");delayMsgTime&&(parseMsgData.delayTimeStamp=delayMsgTime)}}else{var childrens=msginfo.childNodes;if(childrens&&childrens.length>0){var child=msginfo.childNodes[0];if(child.nodeType==Strophe.ElementType.TEXT)try{var _data=eval("("+child.nodeValue+")");parseMsgData.errorMsg=!1,parseMsgData.data=[_data]}catch(e){}}}return parseMsgData}function _parseNameFromJidFn(e,t){var n=e,r=n.indexOf("_");t=t||"",-1!==r&&(n=n.substring(r+1));var o=n.indexOf("@"+t);return-1!==o&&(n=n.substring(0,o)),n}function _parseFriend(e,t,n){var r=[],o=e.getElementsByTagName("item");if(o)for(var i=function(e){var n=[],i=o[e],s=i.getAttribute("jid");if(!s)return"continue";var a=i.getAttribute("subscription"),c={subscription:a,jid:s},u=i.getAttribute("ask");u&&(c.ask=u);var l=i.getAttribute("name");c.name=l||_parseNameFromJidFn(s),Strophe.forEachChild(i,"group",function(e){n.push(Strophe.getText(e))}),c.groups=n,r.push(c),t&&"from"==a&&t.subscribe({toJid:s}),t&&"to"==a&&t.subscribed({toJid:s})},s=0;s<o.length;s++)i(s);return r}function _parseMessageType(e){var t="normal",n=e.getElementsByTagName("received");if(n&&n.length>0&&"urn:xmpp:receipts"===n[0].namespaceURI)t="received";else{var r=e.getElementsByTagName("invite");r&&r.length>0&&(t="invite")}return t}function _handleMessageQueue(e){for(var t in _msgHash)Object.hasOwnProperty.call(_msgHash,t)&&_msgHash[t].send(e)}function _loginCallback(e,t,n){var r,o="conflict"===t;if(e==Strophe.Status.CONNFAIL)r={type:_code.WEBIM_CONNCTION_SERVER_CLOSE_ERROR,msg:t},o&&(r.conflict=!0),n.onError(r);else if(e==Strophe.Status.ATTACHED||e==Strophe.Status.CONNECTED){n.autoReconnectNumTotal=0,n.intervalId=setInterval(function(){n.handelSendQueue()},200);var i=function(e){var t=_parseMessageType(e);return"received"===t?(n.handleReceivedMessage(e),!0):"invite"===t?(n.handleInviteMessage(e),!0):(n.handleMessage(e),!0)},s=function(e){return n.handlePresence(e),!0},a=function(e){return n.handleIqRoster(e),!0},c=function(e){return n.handleIqPrivacy(e),!0},u=function(e){return n.handleIq(e),!0};n.addHandler(i,null,"message",null,null,null),n.addHandler(s,null,"presence",null,null,null),n.addHandler(a,"jabber:iq:roster","iq","set",null,null),n.addHandler(c,"jabber:iq:privacy","iq","set",null,null),n.addHandler(u,null,"iq",null,null,null),n.context.status=_code.STATUS_OPENED;var l=[_code.WEBIM_MESSAGE_REC_TEXT,_code.WEBIM_MESSAGE_REC_EMOJI],d=[_code.WEBIM_MESSAGE_SED_TEXT];_utils.isCanDownLoadFile&&(l.push(_code.WEBIM_MESSAGE_REC_PHOTO),l.push(_code.WEBIM_MESSAGE_REC_AUDIO_FILE)),_utils.isCanUploadFile&&(d.push(_code.WEBIM_MESSAGE_REC_PHOTO),d.push(_code.WEBIM_MESSAGE_REC_AUDIO_FILE)),n.notifyVersion(),n.retry&&_handleMessageQueue(n),n.heartBeat(),n.isAutoLogin&&n.setPresence(),n.onOpened({canReceive:l,canSend:d,accessToken:n.context.accessToken}),n.onSocketConnected()}else if(e==Strophe.Status.DISCONNECTING){if(n.isOpened()){if(n.autoReconnectNumTotal<n.autoReconnectNumMax)return 0==n.autoReconnectNumTotal&&n.onReconnect(),void n.reconnect();n.autoReconnectNumTotal==n.autoReconnectNumMax&&(console.log("Err 3"),r={type:_code.WEBIM_CONNCTION_DISCONNECTED},n.onError(r),n.context.status=_code.STATUS_CLOSED,n.clear(),n.onClosed()),n.stopHeartBeat()}n.context.status=_code.STATUS_CLOSING}else if(e==Strophe.Status.DISCONNECTED){if(n.isOpened()){if(n.autoReconnectNumTotal<n.autoReconnectNumMax)return 0==n.autoReconnectNumTotal&&n.onReconnect(),void n.reconnect();n.autoReconnectNumTotal==n.autoReconnectNumMax&&(n.context.status=_code.STATUS_CLOSED,n.clear(),n.onClosed(),n.stopHeartBeat()),console.log("Err 4"),r={type:_code.WEBIM_CONNCTION_DISCONNECTED},n.onError(r)}n.context.status=_code.STATUS_CLOSED}else e==Strophe.Status.AUTHFAIL?(r={type:_code.WEBIM_CONNCTION_AUTH_ERROR},o&&(r.conflict=!0),n.onError(r),n.clear(),n.stopHeartBeat(),wx.closeSocket()):e==Strophe.Status.ERROR&&(n.context.status=_code.STATUS_ERROR,r={type:_code.WEBIM_CONNCTION_SERVER_ERROR},o&&(r.conflict=!0),n.onError(r),n.stopHeartBeat())}function _login(e,t){var n=null,r=e.access_token||"";function o(e,n){console.log("connection stat change",e,n),_loginCallback(e,n,t)}""!=r?(t.context.accessToken=e.access_token,t.context.accessTokenExpires=e.expires_in,n=new Strophe.Connection(t.url,{inactivity:t.inactivity,maxRetries:t.maxRetries,pollingTime:t.pollingTime}),t.context.stropheConn=n,t.route?n.connect(t.context.jid,"$t$"+r,o,t.wait,t.hold,t.route):n.connect(t.context.jid,"$t$"+r,o,t.wait,t.hold)):t.onError({type:_code.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,data:e})}function _getJid(e,t){var n=e.toJid||"";if(""===n){var r=t.context.appKey||"",o=r+"_"+e.to+"@"+t.domain;e.resource&&(o=o+"/"+e.resource),n=o}return n}function _getJidByName(e,t){return _getJid({to:e},t)}function _validCheck(e,t){if(e=e||{},""==e.user)return t.onError({type:_code.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR}),!1;var n=e.user+""||"",r=e.appKey||"",o=r.split("#");if(2!==o.length)return t.onError({type:_code.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR}),!1;var i=o[0],s=o[1];if(!i)return t.onError({type:_code.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR}),!1;if(!s)return t.onError({type:_code.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR}),!1;var a=r+"_"+n.toLowerCase()+"@"+t.domain,c=e.resource||"webim";return t.isMultiLoginSessions&&(c+=n+(new Date).getTime()+Math.floor(1e6*Math.random().toFixed(6))),t.context.jid=a+"/"+c,t.context.userId=n,t.context.appKey=r,t.context.appName=s,t.context.orgName=i,!0}function _getXmppUrl(e,t){if(/^(ws|http)s?:\/\/?/.test(e))return e;var n={prefix:"http",base:"://"+e,suffix:"/http-bind/"};return t&&_utils.isSupportWss?(n.prefix="wss",n.suffix="/ws/"):t?n.prefix="https":window.WebSocket&&(n.prefix="ws",n.suffix="/ws/"),n.prefix+n.base+n.suffix}function connection(e){if(!(this instanceof connection))return new connection(e);e=e||{},this.isMultiLoginSessions=e.isMultiLoginSessions||!1,this.wait=e.wait||30,this.retry=e.retry||!1,this.https=e.https||"https:"===location.protocol,this.url=_getXmppUrl(e.url,this.https),this.hold=e.hold||1,this.route=e.route||null,this.domain=e.domain||"easemob.com",this.inactivity=e.inactivity||30,this.heartBeatWait=e.heartBeatWait||4500,this.maxRetries=e.maxRetries||5,this.isAutoLogin=!1!==e.isAutoLogin,this.pollingTime=e.pollingTime||800,this.stropheConn=!1,this.autoReconnectNumMax=e.autoReconnectNumMax||0,this.autoReconnectNumTotal=0,this.autoReconnectInterval=e.autoReconnectInterval||0,this.context={status:_code.STATUS_INIT},this.apiUrl=e.apiUrl||"",this.sendQueue=new Queue,this.intervalId=null,this.orgName="",this.appName="",this.token=""}function _parsePrivacy(e){var t=[],n=e.getElementsByTagName("item");if(n)for(var r=0;r<n.length;r++){var o=n[r],i=o.getAttribute("value"),s=o.getAttribute("order"),a=o.getAttribute("type");if(i){var c=_parseNameFromJidFn(i);t[c]={type:a,order:s,jid:i,name:c}}}return t}window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,window.XDomainRequest&&(XDomainRequest.prototype.oldsend=XDomainRequest.prototype.send,XDomainRequest.prototype.send=function(){XDomainRequest.prototype.oldsend.apply(this,arguments),this.readyState=2}),Strophe.Request.prototype._newXHR=function(){var e=_utils.xmlrequest(!0);return e.overrideMimeType&&e.overrideMimeType("text/xml"),e.onreadystatechange=this.func.bind(null,this),e},Strophe.Websocket.prototype._onSocketClose=function(e){},Strophe.Websocket.prototype._onMessage=function(e){var t,n;try{WebIM&&WebIM.config.isDebug&&(console.group("%crecv # ","color: green; font-size: large"),console.log("%c"+e.data,"color: green"),console.groupEnd())}catch(o){}if(0!==e.data.indexOf("<close ")){if(0===e.data.search("<open ")){if(t=(new DOMParser).parseFromString(e.data,"text/xml").documentElement,!this._handleStreamStart(t))return}else n=this._streamWrap(e.data),t=(new DOMParser).parseFromString(n,"text/xml").documentElement;if(!this._check_streamerror(t,Strophe.Status.ERROR))return this._conn.disconnecting&&"presence"===t.firstChild.nodeName&&"unavailable"===t.firstChild.getAttribute("type")?(this._conn.xmlInput(t),void this._conn.rawInput(Strophe.serialize(t))):void this._conn._dataRecv(t,e.data)}else{t=(new DOMParser).parseFromString(e.data,"text/xml").documentElement;var r=t.getAttribute("see-other-uri");r?(this._conn._changeConnectStatus(Strophe.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=r,this._connect()):this._conn._doDisconnect("receive <close> from server")}},connection.prototype.handelSendQueue=function(){var e=this.sendQueue.pop();null!==e&&this.sendReceiptsMessage(e)},connection.prototype.listen=function(e){e.url&&(this.url=_getXmppUrl(e.url,this.https)),this.onOpened=e.onOpened||_utils.emptyfn,this.onClosed=e.onClosed||_utils.emptyfn,this.onReconnect=e.onReconnect||_utils.emptyfn,this.onSocketConnected=e.onSocketConnected||_utils.emptyfn,this.onTextMessage=e.onTextMessage||_utils.emptyfn,this.onEmojiMessage=e.onEmojiMessage||_utils.emptyfn,this.onPictureMessage=e.onPictureMessage||_utils.emptyfn,this.onAudioMessage=e.onAudioMessage||_utils.emptyfn,this.onVideoMessage=e.onVideoMessage||_utils.emptyfn,this.onFileMessage=e.onFileMessage||_utils.emptyfn,this.onLocationMessage=e.onLocationMessage||_utils.emptyfn,this.onCmdMessage=e.onCmdMessage||_utils.emptyfn,this.onPresence=e.onPresence||_utils.emptyfn,this.onRoster=e.onRoster||_utils.emptyfn,this.onError=e.onError||_utils.emptyfn,this.onReceivedMessage=e.onReceivedMessage||_utils.emptyfn,this.onInviteMessage=e.onInviteMessage||_utils.emptyfn,this.onOffline=e.onOffline||_utils.emptyfn,this.onOnline=e.onOnline||_utils.emptyfn,this.onConfirmPop=e.onConfirmPop||_utils.emptyfn,this.onCreateGroup=e.onCreateGroup||_utils.emptyfn,this.onUpdateMyGroupList=e.onUpdateMyGroupList||_utils.emptyfn,this.onUpdateMyRoster=e.onUpdateMyRoster||_utils.emptyfn,this.onBlacklistUpdate=e.onBlacklistUpdate||_utils.emptyfn,_listenNetwork(this.onOnline,this.onOffline)},connection.prototype.heartBeatID=0,connection.prototype.heartBeat=function(){var e=this;this.stopHeartBeat(),this.heartBeatID=setInterval(function(){e.ping({toJid:e.domain,type:"normal"})},this.heartBeatWait)},connection.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatID)},connection.prototype.sendReceiptsMessage=function(e){var t=_strophe.default.$msg({from:this.context.jid||"",to:this.domain,id:e.id||""}).c("received",{xmlns:"urn:xmpp:receipts",id:e.id||""});this.sendCommand(t.tree())},connection.prototype.cacheReceiptsMessage=function(e){this.sendQueue.push(e)},connection.prototype.open=function(e){var t=this;if(console.log("open",this.isOpening()),this.isOpening()||this.isOpened())console.log("can't open [1]");else if(_validCheck(e,this))if(e.accessToken)e.access_token=e.accessToken,this.token=e.access_token,_login(e,t);else{var n=e.apiUrl,r=e.user,o=e.pwd||"",i=e.appKey,s=i.split("#"),a=s[0],c=s[1];this.orgName=a,this.appName=c,this.context.status=_code.STATUS_DOLOGIN_USERGRID;var u={grant_type:"password",username:r,password:o,timestamp:+new Date},l=_utils.stringify(u);_utils.ajax({url:n+"/"+a+"/"+c+"/token",data:l,success:d||_utils.emptyfn,error:p||_utils.emptyfn})}else console.log("can't open [2]");function d(e,n,r){t.context.status=_code.STATUS_DOLOGIN_IM,t.context.restTokenData=e,"404"!=e.statusCode&&"400"!=e.statusCode?_login(e.data,t):p({})}function p(e,n,r){t.clear(),e.error&&e.error_description?t.onError({type:_code.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,data:e,xhr:n}):t.onError({type:_code.WEBIM_CONNCTION_OPEN_ERROR,data:e,xhr:n})}},connection.prototype.attach=function(e){var t=this,n=_validCheck(e,this);if(n){e=e||{};var r=e.accessToken||"";if(""!=r){var o=e.sid||"";if(""!==o){var i=e.rid||"";if(""!==i){var s=new Strophe.Connection(this.url,{inactivity:this.inactivity,maxRetries:this.maxRetries,pollingTime:this.pollingTime,heartBeatWait:this.heartBeatWait});this.context.accessToken=r,this.context.stropheConn=s,this.context.status=_code.STATUS_DOLOGIN_IM;var a=function(e,n){_loginCallback(e,n,t)},c=this.context.jid,u=this.wait,l=this.hold,d=this.wind||5;s.attach(c,o,i,a,u,l,d)}else this.onError({type:_code.WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR})}else this.onError({type:_code.WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR})}else this.onError({type:_code.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR})}},connection.prototype.close=function(e){this.stopHeartBeat();var t=this.context.status;t!=_code.STATUS_INIT&&(this.isClosed()||this.isClosing()||(this.context.status=_code.STATUS_CLOSING,this.context.stropheConn.disconnect(e)))},connection.prototype.addHandler=function(e,t,n,r,o,i,s){this.context.stropheConn.addHandler(e,t,n,r,o,i,s)},connection.prototype.notifyVersion=function(e,t){var n=_strophe.default.$iq({from:this.context.jid||"",to:this.domain,type:"result"}).c("query",{xmlns:"jabber:iq:version"}).c("name").t("easemob").up().c("version").t(_version).up().c("os").t("webim");e=e||_utils.emptyfn;var r=t||this.onError,o=function(e){r({type:_code.WEBIM_CONNCTION_NOTIFYVERSION_ERROR,data:e})};this.context.stropheConn.sendIQ(n.tree(),e,o)},connection.prototype.handlePresence=function(e){if(!this.isClosed()){var t=e.getAttribute("from")||"",n=e.getAttribute("to")||"",r=e.getAttribute("type")||"",o=e.getAttribute("presence_type")||"",i=_parseNameFromJidFn(t),s=_parseNameFromJidFn(n),a=!1,c=!1,u=!1,l=!1,d={from:i,to:s,fromJid:t,toJid:n,type:r,chatroom:!!e.getElementsByTagName("roomtype").length},p=e.getElementsByTagName("show");if(p&&p.length>0){var h=p[0];d.show=Strophe.getText(h)}var f=e.getElementsByTagName("status");if(f&&f.length>0){var m=f[0];d.status=Strophe.getText(m),d.code=m.getAttribute("code")}var _=e.getElementsByTagName("priority");if(_&&_.length>0){var g=_[0];d.priority=Strophe.getText(g)}var y=e.getElementsByTagName("error");y&&y.length>0&&(y=y[0],d.error={code:y.getAttribute("code")});var v=e.getElementsByTagName("destroy");if(v&&v.length>0){v=v[0],d.destroy=!0;var b=v.getElementsByTagName("reason");b&&b.length>0&&(d.reason=Strophe.getText(b[0]))}var N=e.getElementsByTagName("item");if(N&&N.length>0){var E=N[0],x=E.getAttribute("role"),O=E.getAttribute("jid"),T=E.getAttribute("affiliation");if("none"==x&&O){var S=_parseNameFromJidFn(O),I=E.getElementsByTagName("actor")[0],w=I.getAttribute("nick");d.actor=w,d.kicked=S}"moderator"==x&&"201"==d.code&&"owner"===T&&(d.type="createGroupACK",a=!0)}var C=e.getElementsByTagName("x");if(C&&C.length>0){var A=C[0].getElementsByTagName("apply"),R=C[0].getElementsByTagName("accept"),M=C[0].getElementsByTagName("item"),D=C[0].getElementsByTagName("decline"),$=C[0].getElementsByTagName("add_admin"),k=C[0].getElementsByTagName("remove_admin"),B=C[0].getElementsByTagName("add_mute"),j=C[0].getElementsByTagName("remove_mute");if(A&&A.length>0){l=!0,d.toNick=A[0].getAttribute("toNick"),d.type="joinGroupNotifications";var L=A[0].getAttribute("to"),F=L.split("@")[0].split("_");F=F[F.length-1],d.gid=F}else if(R&&R.length>0)d.type="joinPublicGroupSuccess";else if(M&&M.length>0){var U=M[0].getAttribute("affiliation"),P=M[0].getAttribute("role");if("member"==U||"participant"==P){c=!0,d.mid=d.fromJid.split("/"),d.mid=d.mid[d.mid.length-1],d.type="memberJoinPublicGroupSuccess";var q=e.getElementsByTagName("roomtype");if(q&&q.length>0){var H=q[0].getAttribute("type");"chatroom"==H&&(d.type="memberJoinChatRoomSuccess")}}else if("none"==U||"none"==P){var W=e.getElementsByTagName("roomtype");if(W&&W.length>0){var G=W[0].getAttribute("type");"chatroom"==G&&(d.type="memberLeaveChatRoomSuccess")}}}else if(D&&D.length){u=!0;var J=D[0].getAttribute("fromNick"),V=_parseNameFromJidFn(D[0].getAttribute("from"));d.type="joinPublicGroupDeclined",d.owner=V,d.gid=J}else if($&&$.length>0){var z=_parseNameFromJidFn($[0].getAttribute("mucjid")),X=_parseNameFromJidFn($[0].getAttribute("from"));d.owner=X,d.gid=z,d.type="addAdmin"}else if(k&&k.length>0){var Q=_parseNameFromJidFn(k[0].getAttribute("mucjid")),K=_parseNameFromJidFn(k[0].getAttribute("from"));d.owner=K,d.gid=Q,d.type="removeAdmin"}else if(B&&B.length>0){var Y=_parseNameFromJidFn(B[0].getAttribute("mucjid")),Z=_parseNameFromJidFn(B[0].getAttribute("from"));d.owner=Z,d.gid=Y,d.type="addMute"}else if(j&&j.length>0){var ee=_parseNameFromJidFn(j[0].getAttribute("mucjid")),te=_parseNameFromJidFn(j[0].getAttribute("from"));d.owner=te,d.gid=ee,d.type="removeMute"}}if(d.chatroom){d.presence_type=o,d.original_type=d.type;var ne=t.slice(t.lastIndexOf("/")+1);ne===this.context.userId&&(""!==d.type||d.code?"unavailable"!==o&&"unavailable"!==d.type||(d.status?110==d.code?d.type="leaveChatRoom":d.error&&406==d.error.code&&(d.type="reachChatRoomCapacity"):d.type="leaveChatRoom"):d.type="joinChatRoomSuccess")}else if(d.presence_type=o,d.original_type=r,/subscribe/.test(d.type));else if(""!=r||d.status||d.error||a||l||c||u){if("unavailable"===o||"unavailable"===r)if(d.destroy)d.type="deleteGroupChat";else if(307==d.code||321==d.code){var re=e.getAttribute("nick");d.type=re?"removedFromGroup":"leaveGroup"}}else;"subscribe"==d.type&&d.from==d.to||this.onPresence(d,e)}},connection.prototype.handleIq=function(e){return!0},connection.prototype.handleIqPrivacy=function(e){var t=e.getElementsByTagName("list");0!=t.length&&this.getBlacklist()},connection.prototype.handleIqRoster=function(e){var t=e.getAttribute("id"),n=e.getAttribute("from")||"",r=this.context.jid,o=_strophe.default.$iq({type:"result",id:t,from:r});this.sendCommand(o.tree());var i=e.getElementsByTagName("query");if(i&&i.length>0){var s=i[0],a=_parseFriend(s,this,n);this.onRoster(a)}return!0},connection.prototype.handleMessage=function(e){if(!this.isClosed()){var t=e.getAttribute("id")||"";this.cacheReceiptsMessage({id:t});var n=_parseResponseMessage(e);if(n.errorMsg)this.handlePresence(e);else{var r=e.getElementsByTagName("error"),o="",i="",s=!1;if(r.length>0){s=!0,o=r[0].getAttribute("code");var a=r[0].getElementsByTagName("text");i=a[0].textContent||a[0].text}var c=n.data;for(var u in c)if(Object.hasOwnProperty.call(c,u)){var l=c[u];if(l.from&&l.to){var d=(l.from+"").toLowerCase(),p=(l.to+"").toLowerCase(),h=l.ext||{},f="",m=e.getElementsByTagName("roomtype");f=m.length?m[0].getAttribute("type")||"chat":e.getAttribute("type")||"chat";var _=l.bodies;if(_&&0!=_.length){var g=l.bodies[0],y=g.type;try{switch(y){case"txt":var v=g.msg,b=_utils.parseTextMessage(v,WebIM.Emoji);if(b.isemoji){var N={id:t,type:f,from:d,to:p,delay:n.delayTimeStamp,data:b.body,ext:h};!N.delay&&delete N.delay,N.error=s,N.errorText=i,N.errorCode=o,this.onEmojiMessage(N)}else{var E={id:t,type:f,from:d,to:p,delay:n.delayTimeStamp,data:v,ext:h};!E.delay&&delete E.delay,E.error=s,E.errorText=i,E.errorCode=o,this.onTextMessage(E)}break;case"img":var x=0,O=0;g.size&&(x=g.size.width,O=g.size.height);var T={id:t,type:f,from:d,to:p,url:g.url,secret:g.secret,filename:g.filename,thumb:g.thumb,thumb_secret:g.thumb_secret,file_length:g.file_length||"",width:x,height:O,filetype:g.filetype||"",accessToken:this.context.accessToken||"",ext:h,delay:n.delayTimeStamp};!T.delay&&delete T.delay,T.error=s,T.errorText=i,T.errorCode=o,this.onPictureMessage(T);break;case"audio":T={id:t,type:f,from:d,to:p,url:g.url,secret:g.secret,filename:g.filename,length:g.length||"",file_length:g.file_length||"",filetype:g.filetype||"",accessToken:this.context.accessToken||"",ext:h,delay:n.delayTimeStamp},!T.delay&&delete T.delay,T.error=s,T.errorText=i,T.errorCode=o,this.onAudioMessage(T);break;case"file":T={id:t,type:f,from:d,to:p,url:g.url,secret:g.secret,filename:g.filename,file_length:g.file_length,accessToken:this.context.accessToken||"",ext:h,delay:n.delayTimeStamp},!T.delay&&delete T.delay,T.error=s,T.errorText=i,T.errorCode=o,this.onFileMessage(T);break;case"loc":T={id:t,type:f,from:d,to:p,addr:g.addr,lat:g.lat,lng:g.lng,ext:h,delay:n.delayTimeStamp},!T.delay&&delete T.delay,T.error=s,T.errorText=i,T.errorCode=o,this.onLocationMessage(T);break;case"video":T={id:t,type:f,from:d,to:p,url:g.url,secret:g.secret,filename:g.filename,file_length:g.file_length,accessToken:this.context.accessToken||"",ext:h,delay:n.delayTimeStamp},!T.delay&&delete T.delay,T.error=s,T.errorText=i,T.errorCode=o,this.onVideoMessage(T);break;case"cmd":T={id:t,from:d,to:p,action:g.action,ext:h,delay:n.delayTimeStamp},!T.delay&&delete T.delay,T.error=s,T.errorText=i,T.errorCode=o,this.onCmdMessage(T);break;default:break}}catch(S){this.onError({type:_code.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:S})}}}}}}},connection.prototype.handleReceivedMessage=function(e){try{this.onReceivedMessage(e)}catch(o){this.onError({type:_code.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:o})}var t,n,r=e.getElementsByTagName("received");if(r.length>0&&(t=r[0].childNodes&&r[0].childNodes.length>0?r[0].childNodes[0].nodeValue:r[0].innerHTML||r[0].innerText,n=r[0].getAttribute("mid")),_msgHash[t]){try{_msgHash[t].msg.success instanceof Function&&_msgHash[t].msg.success(t,n)}catch(o){this.onError({type:_code.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:o})}delete _msgHash[t]}},connection.prototype.handleInviteMessage=function(e){var t=null,n=e.getElementsByTagName("invite"),r=e.getElementsByTagName("reason")[0],o=r.textContent,i=e.getAttribute("id")||"";if(this.sendReceiptsMessage({id:i}),n&&n.length>0){var s=n[0].getAttribute("from");t=_parseNameFromJidFn(s)}var a=e.getElementsByTagName("x"),c=null;if(a&&a.length>0)for(var u=0;u<a.length;u++)if("jabber:x:conference"===a[u].namespaceURI){var l=a[u].getAttribute("jid");c=_parseNameFromJidFn(l)}this.onInviteMessage({type:"invite",from:t,roomid:c,reason:o})},connection.prototype.sendCommand=function(e,t){var n=this;if(this.isOpened()){var r=function(e){var r={};r.mid=t,r.reason=e,n.onError({type:"socket_error",data:r})};this.context.stropheConn.send(e,r)}else console.log("Err 5"),this.onError({type:_code.WEBIM_CONNCTION_DISCONNECTED})},connection.prototype.getUniqueId=function(e){var t=new Date,n=new Date(2010,1,1),r=t.getTime()-n.getTime(),o=parseInt(r).toString(16);return"string"===typeof e||"number"===typeof e?e+"_"+o:"WEBIM_"+o},connection.prototype.send=function(e){if(WebIM.config.isWindowSDK)WebIM.doQuery(JSON.stringify({type:"sendMessage",to:e.to,message_type:e.type,msg:encodeURI(e.msg),chatType:e.chatType}),function(e){},function(e,t){});else if("[object Object]"===Object.prototype.toString.call(e)){var t=this.context.appKey||"",n=t+"_"+e.to+"@"+this.domain;e.group&&(n=t+"_"+e.to+"@conference."+this.domain),e.resource&&(n=n+"/"+e.resource),e.toJid=n,e.id=e.id||this.getUniqueId(),_msgHash[e.id]=new _message(e);try{_msgHash[e.id].send(this)}catch(r){console.log("发送失败")}}else"string"===typeof e&&_msgHash[e]&&_msgHash[e].send(this)},connection.prototype.addRoster=function(e){var t=_getJid(e,this),n=e.name||"",r=e.groups||"",o=_strophe.default.$iq({type:"set"});if(o.c("query",{xmlns:"jabber:iq:roster"}),o.c("item",{jid:t,name:n}),r)for(var i=0;i<r.length;i++)o.c("group").t(r[i]).up();var s=e.success||_utils.emptyfn,a=e.error||_utils.emptyfn;this.context.stropheConn.sendIQ(o.tree(),s,a)},connection.prototype.removeRoster=function(e){var t=_getJid(e,this),n=_strophe.default.$iq({type:"set"}).c("query",{xmlns:"jabber:iq:roster"}).c("item",{jid:t,subscription:"remove"}),r=e.success||_utils.emptyfn,o=e.error||_utils.emptyfn;this.context.stropheConn.sendIQ(n,r,o)},connection.prototype.getRoster=function(e){var t=_strophe.default.$iq({type:"get"}).c("query",{xmlns:"jabber:iq:roster"});e=e||{};var n=e.success||this.onRoster,r=e.error||this.onError;this.isOpened()?this.context.stropheConn.sendIQ(t.tree(),function(e){var t=[],r=e.getElementsByTagName("query");if(r&&r.length>0){var o=r[0];t=_parseFriend(o)}n(t,e)},function(e){r({type:_code.WEBIM_CONNCTION_GETROSTER_ERROR,data:e})}):r({type:_code.WEBIM_CONNCTION_DISCONNECTED})},connection.prototype.subscribe=function(e){var t=_getJid(e,this),n=_strophe.default.$pres({to:t,type:"subscribe"});e.message&&n.c("status").t(e.message).up(),e.nick&&n.c("nick",{xmlns:"http://jabber.org/protocol/nick"}).t(e.nick),this.sendCommand(n.tree())},connection.prototype.subscribed=function(e){var t=_getJid(e,this),n=_strophe.default.$pres({to:t,type:"subscribed"});e.message&&n.c("status").t(e.message).up(),this.sendCommand(n.tree())},connection.prototype.unsubscribe=function(e){var t=_getJid(e,this),n=_strophe.default.$pres({to:t,type:"unsubscribe"});e.message&&n.c("status").t(e.message),this.sendCommand(n.tree())},connection.prototype.unsubscribed=function(e){var t=_getJid(e,this),n=_strophe.default.$pres({to:t,type:"unsubscribed"});e.message&&n.c("status").t(e.message).up(),this.sendCommand(n.tree())},connection.prototype.createRoom=function(e){var t,n=e.success||_utils.emptyfn,r=e.error||_utils.emptyfn;return t=_strophe.default.$iq({to:e.roomName,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"}),this.context.stropheConn.sendIQ(t.tree(),n,r)},connection.prototype.listRooms=function(e){var t=_strophe.default.$iq({to:e.server||"conference."+this.domain,from:this.context.jid,type:"get"}).c("query",{xmlns:Strophe.NS.DISCO_ITEMS}),n=e.success||_utils.emptyfn,r=e.error||this.onError,o=function(e){var t=[];t=_parseRoom(e);try{n(t)}catch(o){r({type:_code.WEBIM_CONNCTION_GETROOM_ERROR,data:o})}},i=e.error||_utils.emptyfn,s=function(e){i({type:_code.WEBIM_CONNCTION_GETROOM_ERROR,data:e})};this.context.stropheConn.sendIQ(t.tree(),o,s)},connection.prototype.queryRoomMember=function(e){var t=[],n=_strophe.default.$iq({to:this.context.appKey+"_"+e.roomId+"@conference."+this.domain,type:"get"}).c("query",{xmlns:Strophe.NS.MUC+"#admin"}).c("item",{affiliation:"member"}),r=e.success||_utils.emptyfn,o=function(e){var n=e.getElementsByTagName("item");if(n)for(var o=0;o<n.length;o++){var i=n[o],s={jid:i.getAttribute("jid"),affiliation:"member"};t.push(s)}r(t)},i=e.error||_utils.emptyfn,s=function(e){i({type:_code.WEBIM_CONNCTION_GETROOMMEMBER_ERROR,data:e})};this.context.stropheConn.sendIQ(n.tree(),o,s)},connection.prototype.queryRoomInfo=function(e){var t=this.domain,n=_strophe.default.$iq({to:this.context.appKey+"_"+e.roomId+"@conference."+t,type:"get"}).c("query",{xmlns:Strophe.NS.DISCO_INFO}),r=e.success||_utils.emptyfn,o=[],i=function(e){var n="",i=e.getElementsByTagName("feature");switch(i&&(n=i[1].getAttribute("var")+"|"+i[3].getAttribute("var")+"|"+i[4].getAttribute("var")),n){case"muc_public|muc_membersonly|muc_notallowinvites":n="PUBLIC_JOIN_APPROVAL";break;case"muc_public|muc_open|muc_notallowinvites":n="PUBLIC_JOIN_OPEN";break;case"muc_hidden|muc_membersonly|muc_allowinvites":n="PRIVATE_MEMBER_INVITE";break;case"muc_hidden|muc_membersonly|muc_notallowinvites":n="PRIVATE_OWNER_INVITE";break;default:break}var s=e.getElementsByTagName("field"),a={};if(s){for(var c=0;c<s.length;c++){var u=s[c],l=u.getAttribute("var"),d=l.split("_")[1];switch(l){case"muc#roominfo_occupants":case"muc#roominfo_maxusers":case"muc#roominfo_affiliations":case"muc#roominfo_description":a[d]=u.textContent||u.text||"";break;case"muc#roominfo_owner":var p={jid:(u.textContent||u.text)+"@"+t,affiliation:"owner"};o.push(p),a[d]=u.textContent||u.text;break;default:break}}a.name=e.getElementsByTagName("identity")[0].getAttribute("name")}r(n,o,a)},s=e.error||_utils.emptyfn,a=function(e){s({type:_code.WEBIM_CONNCTION_GETROOMINFO_ERROR,data:e})};this.context.stropheConn.sendIQ(n.tree(),i,a)},connection.prototype.queryRoomOccupants=function(e){var t=e.success||_utils.emptyfn,n=function(e){var n=[];n=_parseRoomOccupants(e),t(n)},r=e.error||_utils.emptyfn,o=function(e){r({type:_code.WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR,data:e})},i={xmlns:Strophe.NS.DISCO_ITEMS},s=_strophe.default.$iq({from:this.context.jid,to:this.context.appKey+"_"+e.roomId+"@conference."+this.domain,type:"get"}).c("query",i);this.context.stropheConn.sendIQ(s.tree(),n,o)},connection.prototype.setUserSig=function(e){var t=_strophe.default.$pres({xmlns:"jabber:client"});e=e||"",t.c("status").t(e),this.sendCommand(t.tree())},connection.prototype.setPresence=function(e,t){var n=_strophe.default.$pres({xmlns:"jabber:client"});e&&(t?(n.c("show").t(e),n.up().c("status").t(t)):n.c("show").t(e)),this.sendCommand(n.tree())},connection.prototype.getPresence=function(){var e=_strophe.default.$pres({xmlns:"jabber:client"});this.sendCommand(e.tree())},connection.prototype.ping=function(e){e=e||{};var t=_getJid(e,this),n=_strophe.default.$iq({from:this.context.jid||"",to:t,type:"get"}).c("ping",{xmlns:"urn:xmpp:ping"}),r=e.success||_utils.emptyfn,o=e.error||this.onError,i=function(e){o({type:_code.WEBIM_CONNCTION_PING_ERROR,data:e})};this.isOpened()?this.context.stropheConn.sendIQ(n.tree(),r,i):o({type:_code.WEBIM_CONNCTION_DISCONNECTED})},connection.prototype.isOpened=function(){return this.context.status==_code.STATUS_OPENED},connection.prototype.isOpening=function(){var e=this.context.status;return e==_code.STATUS_DOLOGIN_USERGRID||e==_code.STATUS_DOLOGIN_IM},connection.prototype.isClosing=function(){return this.context.status==_code.STATUS_CLOSING},connection.prototype.isClosed=function(){return this.context.status==_code.STATUS_CLOSED},connection.prototype.clear=function(){var e=this.context.appKey;this.errorType!=WebIM.statusCode.WEBIM_CONNCTION_DISCONNECTED&&(this.context={status:_code.STATUS_INIT,appKey:e}),this.intervalId&&clearInterval(this.intervalId),this.errorType==WebIM.statusCode.WEBIM_CONNCTION_CLIENT_LOGOUT||this.errorType},connection.prototype.getChatRooms=function(e){var t=this,n=e.accessToken||this.context.accessToken;if(n){var r=this.apiUrl,o=this.context.appName,i=this.context.orgName;if(!o||!i)return void t.onError({type:_code.WEBIM_CONNCTION_AUTH_ERROR});var s=function(t,n){"function"===typeof e.success&&e.success(t)},a=function(e,n,r){e.error&&e.error_description&&t.onError({type:_code.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR,msg:e.error_description,data:e,xhr:n})},c={pagenum:parseInt(e.pagenum)||1,pagesize:parseInt(e.pagesize)||20},u={url:r+"/"+i+"/"+o+"/chatrooms",dataType:"json",type:"GET",header:{Authorization:"Bearer "+n},data:c,success:s||_utils.emptyfn,fail:a||_utils.emptyfn};wx.request(u)}else t.onError({type:_code.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR})},connection.prototype.joinChatRoom=function(e){var t=this.context.appKey+"_"+e.roomId+"@conference."+this.domain,n=t+"/"+this.context.userId,r=e.success||_utils.emptyfn,o=e.error||_utils.emptyfn,i=function(e){o({type:_code.WEBIM_CONNCTION_JOINCHATROOM_ERROR,data:e})},s=_strophe.default.$pres({from:this.context.jid,to:n});s.c("x",{xmlns:Strophe.NS.MUC+"#user"}).c("item",{affiliation:"member",role:"participant"}).up().up().c("roomtype",{xmlns:"easemob:x:roomtype",type:"chatroom"}),this.context.stropheConn.sendIQ(s.tree(),r,i)},connection.prototype.quitChatRoom=function(e){var t=this.context.appKey+"_"+e.roomId+"@conference."+this.domain,n=t+"/"+this.context.userId,r=e.success||_utils.emptyfn,o=e.error||_utils.emptyfn,i=function(e){o({type:_code.WEBIM_CONNCTION_QUITCHATROOM_ERROR,data:e})},s=_strophe.default.$pres({from:this.context.jid,to:n,type:"unavailable"});s.c("x",{xmlns:Strophe.NS.MUC+"#user"}).c("item",{affiliation:"none",role:"none"}).up().up().c("roomtype",{xmlns:"easemob:x:roomtype",type:"chatroom"}),this.context.stropheConn.sendIQ(s.tree(),r,i)},connection.prototype._onUpdateMyGroupList=function(e){this.onUpdateMyGroupList(e)},connection.prototype._onUpdateMyRoster=function(e){this.onUpdateMyRoster(e)},connection.prototype.reconnect=function(){var e=this;setTimeout(function(){_login(e.context.restTokenData&&e.context.restTokenData.data,e)},1e3*(0==this.autoReconnectNumTotal?0:this.autoReconnectInterval)),this.autoReconnectNumTotal++},connection.prototype.closed=function(){IM.api.init()},connection.prototype.listGroupMember=function(e){if(isNaN(e.pageNum)||e.pageNum<=0)throw new Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw new Error('The parameter "pageSize" should be a positive number');if(null===e.groupId&&"undefined"===typeof e.groupId)throw new Error('The parameter "groupId" should be added');var t=[],n=e.groupId;t.pagenum=e.pageNum,t.pagesize=e.pageSize;var r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+n+"/users",dataType:"json",type:"GET",data:t,headers:{Authorization:"Bearer "+this.context.accessToken,"Content-Type":"application/json"}};r.success=e.success||_utils.emptyfn,r.error=e.error||_utils.emptyfn,WebIM.utils.ajax(r)},connection.prototype.createGroupNew=function(e){e.data.invite_need_confirm=!1;var t={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups",dataType:"json",type:"POST",data:JSON.stringify(e.data),headers:{Authorization:"Bearer "+this.context.accessToken,"Content-Type":"application/json"}};t.success=function(t){e.success(t),this.onCreateGroup(t)}.bind(this),t.error=e.error||_utils.emptyfn,WebIM.utils.ajax(t)},connection.prototype.getGroupInfo=function(e){var t={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+e.groupId,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+this.context.accessToken,"Content-Type":"application/json"}};t.success=e.success||_utils.emptyfn,t.error=e.error||_utils.emptyfn,WebIM.utils.ajax(t)},connection.prototype.dissolveGroup=function(e){var t=e.groupId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"?version=v3",type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.context.accessToken,"Content-Type":"application/json"}};n.success=e.success||_utils.emptyfn,n.error=e.error||_utils.emptyfn,WebIM.utils.ajax(n)},connection.prototype.getBlacklist=function(e){e=e||{};var t=_strophe.default.$iq({type:"get"}),n=e.success||_utils.emptyfn,r=e.error||_utils.emptyfn,o=this;t.c("query",{xmlns:"jabber:iq:privacy"}).c("list",{name:"special"}),this.context.stropheConn.sendIQ(t.tree(),function(e){o.onBlacklistUpdate(_parsePrivacy(e)),n()},function(){o.onBlacklistUpdate([]),r()})},connection.prototype.addToBlackList=function(e){for(var t=_strophe.default.$iq({type:"set"}),n=e.list||{},r=e.success||_utils.emptyfn,o=e.error||_utils.emptyfn,i=t.c("query",{xmlns:"jabber:iq:privacy"}).c("list",{name:"special"}),s=Object.keys(n),a=s.length,c=2,u=0;u<a;u++){var l=n[s[u]],d=l.type||"jid",p=l.jid;i=i.c("item",{action:"deny",order:c++,type:d,value:p}).c("message"),u!==a-1&&(i=i.up().up())}this.context.stropheConn.sendIQ(i.tree(),r,o)},connection.prototype.removeFromBlackList=function(e){for(var t=_strophe.default.$iq({type:"set"}),n=e.list||{},r=e.success||_utils.emptyfn,o=e.error||_utils.emptyfn,i=t.c("query",{xmlns:"jabber:iq:privacy"}).c("list",{name:"special"}),s=Object.keys(n),a=s.length,c=0;c<a;c++){var u=n[s[c]],l=u.type||"jid",d=u.jid,p=u.order;i=i.c("item",{action:"deny",order:p,type:l,value:d}).c("message"),c!==a-1&&(i=i.up().up())}this.context.stropheConn.sendIQ(i.tree(),r,o)},connection.prototype._getGroupJid=function(e){var t=this.context.appKey||"";return t+"_"+e+"@conference."+this.domain},connection.prototype.addToGroupBlackList=function(e){var t=e.success||_utils.emptyfn,n=e.error||_utils.emptyfn,r=_getJid(e,this),o="admin",i=this._getGroupJid(e.roomId),s=_strophe.default.$iq({type:"set",to:i});s.c("query",{xmlns:"http://jabber.org/protocol/muc#"+o}).c("item",{affiliation:"outcast",jid:r}),this.context.stropheConn.sendIQ(s.tree(),t,n)},connection.prototype.getGroupBlacklist=function(e){var t=e.success||_utils.emptyfn,n=e.error||_utils.emptyfn,r="admin",o=this._getGroupJid(e.roomId),i=_strophe.default.$iq({type:"get",to:o});function s(e){var t={},n=e.getElementsByTagName("item");if(n)for(var r=0;r<n.length;r++){var o=n[r],i=o.getAttribute("jid"),s=o.getAttribute("affiliation"),a=o.getAttribute("nick");if(i){var c=_parseNameFromJidFn(i);t[c]={jid:i,affiliation:s,nick:a,name:c}}}return t}i.c("query",{xmlns:"http://jabber.org/protocol/muc#"+r}).c("item",{affiliation:"outcast"}),this.context.stropheConn.sendIQ(i.tree(),function(e){t(s(e))},function(){n()})},connection.prototype.removeGroupMemberFromBlacklist=function(e){var t=e.success||_utils.emptyfn,n=e.error||_utils.emptyfn,r=_getJid(e,this),o="admin",i=this._getGroupJid(e.roomId),s=_strophe.default.$iq({type:"set",to:i});s.c("query",{xmlns:"http://jabber.org/protocol/muc#"+o}).c("item",{affiliation:"member",jid:r}),this.context.stropheConn.sendIQ(s.tree(),function(e){t()},function(){n()})},connection.prototype.changeGroupSubject=function(e){var t=e.success||_utils.emptyfn,n=e.error||_utils.emptyfn,r="owner",o=this._getGroupJid(e.roomId),i=_strophe.default.$iq({type:"set",to:o});i.c("query",{xmlns:"http://jabber.org/protocol/muc#"+r}).c("x",{type:"submit",xmlns:"jabber:x:data"}).c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up().c("field",{var:"muc#roomconfig_roomname"}).c("value").t(e.subject).up().up().c("field",{var:"muc#roomconfig_roomdesc"}).c("value").t(e.description),this.context.stropheConn.sendIQ(i.tree(),function(e){t()},function(){n()})},connection.prototype.destroyGroup=function(e){var t=e.success||_utils.emptyfn,n=e.error||_utils.emptyfn,r="owner",o=this._getGroupJid(e.roomId),i=_strophe.default.$iq({type:"set",to:o});i.c("query",{xmlns:"http://jabber.org/protocol/muc#"+r}).c("destroy"),this.context.stropheConn.sendIQ(i.tree(),function(e){t()},function(){n()})},connection.prototype.leaveGroupBySelf=function(e){var t=this,n=e.success||_utils.emptyfn,r=e.error||_utils.emptyfn,o=_getJid(e,this),i="admin",s=this._getGroupJid(e.roomId),a=_strophe.default.$iq({type:"set",to:s});a.c("query",{xmlns:"http://jabber.org/protocol/muc#"+i}).c("item",{affiliation:"none",jid:o}),this.context.stropheConn.sendIQ(a.tree(),function(e){n(e);var r=_strophe.default.$pres({type:"unavailable",to:s+"/"+t.context.userId});t.sendCommand(r.tree())},function(e){r(e)})},connection.prototype.addGroupMembers=function(e){for(var t=e.success||_utils.emptyfn,n=e.error||_utils.emptyfn,r=e.list||[],o="admin",i=this._getGroupJid(e.roomId),s=_strophe.default.$iq({type:"set",to:i}),a=s.c("query",{xmlns:"http://jabber.org/protocol/muc#"+o}),c=r.length,u=0;u<c;u++){var l=r[u],d=_getJidByName(l,this);a=a.c("item",{affiliation:"member",jid:d}).up();var p=_strophe.default.$msg({to:i}).c("x",{xmlns:"http://jabber.org/protocol/muc#user"}).c("invite",{to:d}).c("reason").t(e.reason||"");this.sendCommand(p.tree())}this.context.stropheConn.sendIQ(s.tree(),function(e){t(e)},function(e){n(e)})},connection.prototype.acceptInviteFromGroup=function(e){e.success=function(){},this.addGroupMembers(e)},connection.prototype.rejectInviteFromGroup=function(e){},WebIM.connection=connection,WebIM.utils=_utils,WebIM.statusCode=_code,WebIM.message=_msg.message,WebIM.doQuery=function(e,t,n){"undefined"!==typeof window.cefQuery&&window.cefQuery({request:e,persistent:!1,onSuccess:t,onFailure:n})},module.exports=WebIM},f3d3:function(e,t,n){(function(t){try{t||(t={}),t.process=t.process||{},t.process.env=t.process.env||{},t.App=t.App||App,t.Page=t.Page||Page,t.Component=t.Component||Component,t.getApp=t.getApp||getApp}catch(n){}(function(t,n){e.exports=n()})(0,function(){"use strict";function e(t,n,r,o){if(r!==o&&void 0!==r)if(null==r||null==o||typeof r!==typeof o)t[n]=r;else if(Array.isArray(r)&&Array.isArray(o))if(r.length===o.length)for(var i=0,s=r.length;i<s;++i)e(t,n+"["+i+"]",r[i],o[i]);else t[n]=r;else if("object"===typeof r&&"object"===typeof o){var a=Object.keys(r),c=Object.keys(o);if(a.length!==c.length)t[n]=r;else{var u=Object.create(null);for(i=0,s=a.length;i<s;++i)u[a[i]]=!0,u[c[i]]=!0;if(Object.keys(u).length!==a.length)t[n]=r;else for(i=0,s=a.length;i<s;++i){var l=a[i];e(t,n+"."+l,r[l],o[l])}}}else r!==o&&(t[n]=r)}function r(t,n){for(var r=Object.keys(t),o={},i=0,s=r.length;i<s;++i){for(var a=r[i],c=a.split("."),u=n[c[0]],l=1,d=c.length;l<d&&void 0!==u;++l)u=u[c[l]];e(o,a,t[a],u)}return o}function o(e){return void 0===e||null===e}function i(e){return void 0!==e&&null!==e}function s(e){return!0===e}function a(e){return!1===e}function c(e){return"string"===typeof e||"number"===typeof e}function u(e){return null!==e&&"object"===typeof e}var l=Object.prototype.toString;function d(e){return"[object Object]"===l.call(e)}function p(e){return"[object RegExp]"===l.call(e)}function h(e){var t=parseFloat(e);return t>=0&&Math.floor(t)===t&&isFinite(e)}function f(e){return null==e?"":"object"===typeof e?JSON.stringify(e,null,2):String(e)}function m(e){var t=parseFloat(e);return isNaN(t)?e:t}function _(e,t){for(var n=Object.create(null),r=e.split(","),o=0;o<r.length;o++)n[r[o]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}_("slot,component",!0);var g=_("key,ref,slot,is");function y(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var v=Object.prototype.hasOwnProperty;function b(e,t){return v.call(e,t)}function N(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var E=/-(\w)/g,x=N(function(e){return e.replace(E,function(e,t){return t?t.toUpperCase():""})}),O=N(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),T=/([^-])([A-Z])/g,S=N(function(e){return e.replace(T,"$1-$2").replace(T,"$1-$2").toLowerCase()});function I(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function w(e,t){t=t||0;var n=e.length-t,r=new Array(n);while(n--)r[n]=e[n+t];return r}function C(e,t){for(var n in t)e[n]=t[n];return e}function A(e){for(var t={},n=0;n<e.length;n++)e[n]&&C(t,e[n]);return t}function R(e,t,n){}var M=function(e,t,n){return!1},D=function(e){return e};function $(e,t){var r=u(e),o=u(t);if(!r||!o)return!r&&!o&&String(e)===String(t);try{return JSON.stringify(e)===JSON.stringify(t)}catch(n){return e===t}}function k(e,t){for(var n=0;n<e.length;n++)if($(e[n],t))return n;return-1}function B(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var j="data-server-rendered",L=["component","directive","filter"],F=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","onLaunch","onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","onPageScroll","onTabItemTap","attached","ready","moved","detached","onUniNViewMessage","onNavigationBarButtonTap","onBackPress"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:M,isReservedAttr:M,isUnknownElement:M,getTagNamespace:R,parsePlatformTagName:D,mustUseProp:M,_lifecycleHooks:F},P=Object.freeze({});function q(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function H(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var W=/[^\w.$]/;function G(e){if(!W.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var J=R;function V(e,t,n){if(U.errorHandler)U.errorHandler.call(null,e,t,n);else{if(!Q||"undefined"===typeof console)throw e;console.error(e)}}var z,X="__proto__"in{},Q="undefined"!==typeof window,K=["mpvue-runtime"].join(),Y=(K&&/msie|trident/.test(K),K&&K.indexOf("msie 9.0"),K&&K.indexOf("edge/")>0),Z=(K&&K.indexOf("android"),K&&/iphone|ipad|ipod|ios/.test(K)),ee=(K&&/chrome\/\d+/.test(K),{}.watch);if(Q)try{var te={};Object.defineProperty(te,"passive",{get:function(){!0}}),window.addEventListener("test-passive",null,te)}catch(n){}var ne=function(){return void 0===z&&(z=!Q&&"undefined"!==typeof t&&"server"===t["process"].env.VUE_ENV),z},re=Q&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function oe(e){return"function"===typeof e&&/native code/.test(e.toString())}var ie,se="undefined"!==typeof Symbol&&oe(Symbol)&&"undefined"!==typeof Reflect&&oe(Reflect.ownKeys),ae=function(){var e,t=[],r=!1;function o(){r=!1;var e=t.slice(0);t.length=0;for(var n=0;n<e.length;n++)e[n]()}if("undefined"!==typeof Promise&&oe(Promise)){var i=Promise.resolve(),s=function(e){console.error(e)};e=function(){i.then(o).catch(s),Z&&setTimeout(R)}}else e=function(){setTimeout(o,0)};return function(o,i){var s;if(t.push(function(){if(o)try{o.call(i)}catch(n){V(n,i,"nextTick")}else s&&s(i)}),r||(r=!0,e()),!o&&"undefined"!==typeof Promise)return new Promise(function(e,t){s=e})}}();ie="undefined"!==typeof Set&&oe(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ce=0,ue=function(){this.id=ce++,this.subs=[]};ue.prototype.addSub=function(e){this.subs.push(e)},ue.prototype.removeSub=function(e){y(this.subs,e)},ue.prototype.depend=function(){ue.target&&ue.target.addDep(this)},ue.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},ue.target=null;var le=[];function de(e){ue.target&&le.push(ue.target),ue.target=e}function pe(){ue.target=le.pop()}var he=Array.prototype,fe=Object.create(he);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=he[e];H(fe,e,function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var o,i=t.apply(this,n),s=this.__ob__;switch(e){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2);break}return o&&s.observeArray(o),s.dep.notify(),i})});var me=Object.getOwnPropertyNames(fe),_e={shouldConvert:!0},ge=function(e){if(this.value=e,this.dep=new ue,this.vmCount=0,H(e,"__ob__",this),Array.isArray(e)){var t=X?ye:ve;t(e,fe,me),this.observeArray(e)}else this.walk(e)};function ye(e,t,n){e.__proto__=t}function ve(e,t,n){for(var r=0,o=n.length;r<o;r++){var i=n[r];H(e,i,t[i])}}function be(e,t){var n;if(u(e))return b(e,"__ob__")&&e.__ob__ instanceof ge?n=e.__ob__:_e.shouldConvert&&!ne()&&(Array.isArray(e)||d(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new ge(e)),t&&n&&n.vmCount++,n}function Ne(e,t,n,r,o){var i=new ue,s=Object.getOwnPropertyDescriptor(e,t);if(!s||!1!==s.configurable){var a=s&&s.get,c=s&&s.set,u=!o&&be(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=a?a.call(e):n;return ue.target&&(i.depend(),u&&u.dep.depend(),Array.isArray(t)&&Oe(t)),t},set:function(t){var r=a?a.call(e):n;t===r||t!==t&&r!==r||(c?c.call(e,t):n=t,u=!o&&be(t),i.notify())}})}}function Ee(e,t,n){if(Array.isArray(e)&&h(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(b(e,t))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(Ne(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function xe(e,t){if(Array.isArray(e)&&h(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||b(e,t)&&(delete e[t],n&&n.dep.notify())}}function Oe(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Oe(t)}ge.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)Ne(e,t[n],e[t[n]])},ge.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)be(e[t])};var Te=U.optionMergeStrategies;function Se(e,t){if(!t)return e;for(var n,r,o,i=Object.keys(t),s=0;s<i.length;s++)n=i[s],r=e[n],o=t[n],b(e,n)?d(r)&&d(o)&&Se(r,o):Ee(e,n,o);return e}function Ie(e,t,n){return n?e||t?function(){var r="function"===typeof t?t.call(n):t,o="function"===typeof e?e.call(n):void 0;return r?Se(r,o):o}:void 0:t?e?function(){return Se("function"===typeof t?t.call(this):t,e.call(this))}:t:e}function we(e,t){return t?e?e.concat(t):Array.isArray(t)?t:[t]:e}function Ce(e,t){var n=Object.create(e||null);return t?C(n,t):n}Te.data=function(e,t,n){return n?Ie(e,t,n):t&&"function"!==typeof t?e:Ie.call(this,e,t)},F.forEach(function(e){Te[e]=we}),L.forEach(function(e){Te[e+"s"]=Ce}),Te.watch=function(e,t){if(e===ee&&(e=void 0),t===ee&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var n={};for(var r in C(n,e),t){var o=n[r],i=t[r];o&&!Array.isArray(o)&&(o=[o]),n[r]=o?o.concat(i):Array.isArray(i)?i:[i]}return n},Te.props=Te.methods=Te.inject=Te.computed=function(e,t){if(!t)return Object.create(e||null);if(!e)return t;var n=Object.create(null);return C(n,e),C(n,t),n},Te.provide=Ie;var Ae=function(e,t){return void 0===t?e:t};function Re(e){var t=e.props;if(t){var n,r,o,i={};if(Array.isArray(t)){n=t.length;while(n--)r=t[n],"string"===typeof r&&(o=x(r),i[o]={type:null})}else if(d(t))for(var s in t)r=t[s],o=x(s),i[o]=d(r)?r:{type:r};e.props=i}}function Me(e){var t=e.inject;if(Array.isArray(t))for(var n=e.inject={},r=0;r<t.length;r++)n[t[r]]=t[r]}function De(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"===typeof r&&(t[n]={bind:r,update:r})}}function $e(e,t,n){"function"===typeof t&&(t=t.options),Re(t),Me(t),De(t);var r=t.extends;if(r&&(e=$e(e,r,n)),t.mixins)for(var o=0,i=t.mixins.length;o<i;o++)e=$e(e,t.mixins[o],n);var s,a={};for(s in e)c(s);for(s in t)b(e,s)||c(s);function c(r){var o=Te[r]||Ae;a[r]=o(e[r],t[r],n,r)}return a}function ke(e,t,n,r){if("string"===typeof n){var o=e[t];if(b(o,n))return o[n];var i=x(n);if(b(o,i))return o[i];var s=O(i);if(b(o,s))return o[s];var a=o[n]||o[i]||o[s];return a}}function Be(e,t,n,r){var o=t[e],i=!b(n,e),s=n[e];if(Fe(Boolean,o.type)&&(i&&!b(o,"default")?s=!1:Fe(String,o.type)||""!==s&&s!==S(e)||(s=!0)),void 0===s){s=je(r,o,e);var a=_e.shouldConvert;_e.shouldConvert=!0,be(s),_e.shouldConvert=a}return s}function je(e,t,n){if(b(t,"default")){var r=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"===typeof r&&"Function"!==Le(t.type)?r.call(e):r}}function Le(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function Fe(e,t){if(!Array.isArray(t))return Le(t)===Le(e);for(var n=0,r=t.length;n<r;n++)if(Le(t[n])===Le(e))return!0;return!1}var Ue=function(e,t,n,r,o,i,s,a){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=o,this.ns=void 0,this.context=i,this.functionalContext=void 0,this.key=t&&t.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Pe={child:{}};Pe.child.get=function(){return this.componentInstance},Object.defineProperties(Ue.prototype,Pe);var qe=function(e){void 0===e&&(e="");var t=new Ue;return t.text=e,t.isComment=!0,t};function He(e){return new Ue(void 0,void 0,void 0,String(e))}function We(e){var t=new Ue(e.tag,e.data,e.children,e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.isCloned=!0,t}function Ge(e){for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[r]=We(e[r]);return n}var Je,Ve=N(function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var r="!"===e.charAt(0);return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}});function ze(e){function t(){var e=arguments,n=t.fns;if(!Array.isArray(n))return n.apply(null,arguments);for(var r=n.slice(),o=0;o<r.length;o++)r[o].apply(null,e)}return t.fns=e,t}function Xe(e,t,n,r,i){var s,a,c,u;for(s in e)a=e[s],c=t[s],u=Ve(s),o(a)||(o(c)?(o(a.fns)&&(a=e[s]=ze(a)),n(u.name,a,u.once,u.capture,u.passive)):a!==c&&(c.fns=a,e[s]=c));for(s in t)o(e[s])&&(u=Ve(s),r(u.name,t[s],u.capture))}function Qe(e,t,n){var r=t.options.props;if(!o(r)){var s={},a=e.attrs,c=e.props;if(i(a)||i(c))for(var u in r){var l=S(u);Ke(s,c,u,l,!0)||Ke(s,a,u,l,!1)}return s}}function Ke(e,t,n,r,o){if(i(t)){if(b(t,n))return e[n]=t[n],o||delete t[n],!0;if(b(t,r))return e[n]=t[r],o||delete t[r],!0}return!1}function Ye(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function Ze(e){return c(e)?[He(e)]:Array.isArray(e)?tt(e):void 0}function et(e){return i(e)&&i(e.text)&&a(e.isComment)}function tt(e,t){var n,r,a,u=[];for(n=0;n<e.length;n++)r=e[n],o(r)||"boolean"===typeof r||(a=u[u.length-1],Array.isArray(r)?u.push.apply(u,tt(r,(t||"")+"_"+n)):c(r)?et(a)?a.text+=String(r):""!==r&&u.push(He(r)):et(r)&&et(a)?u[u.length-1]=He(a.text+r.text):(s(e._isVList)&&i(r.tag)&&o(r.key)&&i(t)&&(r.key="__vlist"+t+"_"+n+"__"),u.push(r)));return u}function nt(e,t){return e.__esModule&&e.default&&(e=e.default),u(e)?t.extend(e):e}function rt(e,t,n,r,o){var i=qe();return i.asyncFactory=e,i.asyncMeta={data:t,context:n,children:r,tag:o},i}function ot(e,t,n){if(s(e.error)&&i(e.errorComp))return e.errorComp;if(i(e.resolved))return e.resolved;if(s(e.loading)&&i(e.loadingComp))return e.loadingComp;if(!i(e.contexts)){var r=e.contexts=[n],a=!0,c=function(){for(var e=0,t=r.length;e<t;e++)r[e].$forceUpdate()},l=B(function(n){e.resolved=nt(n,t),a||c()}),d=B(function(t){i(e.errorComp)&&(e.error=!0,c())}),p=e(l,d);return u(p)&&("function"===typeof p.then?o(e.resolved)&&p.then(l,d):i(p.component)&&"function"===typeof p.component.then&&(p.component.then(l,d),i(p.error)&&(e.errorComp=nt(p.error,t)),i(p.loading)&&(e.loadingComp=nt(p.loading,t),0===p.delay?e.loading=!0:setTimeout(function(){o(e.resolved)&&o(e.error)&&(e.loading=!0,c())},p.delay||200)),i(p.timeout)&&setTimeout(function(){o(e.resolved)&&d(null)},p.timeout))),a=!1,e.loading?e.loadingComp:e.resolved}e.contexts.push(n)}function it(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(i(n)&&i(n.componentOptions))return n}}function st(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&ut(e,t)}function at(e,t,n){n?Je.$once(e,t):Je.$on(e,t)}function ct(e,t){Je.$off(e,t)}function ut(e,t,n){Je=e,Xe(t,n||{},at,ct,e)}function lt(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this,o=this;if(Array.isArray(e))for(var i=0,s=e.length;i<s;i++)r.$on(e[i],n);else(o._events[e]||(o._events[e]=[])).push(n),t.test(e)&&(o._hasHookEvent=!0);return o},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this,r=this;if(!arguments.length)return r._events=Object.create(null),r;if(Array.isArray(e)){for(var o=0,i=e.length;o<i;o++)n.$off(e[o],t);return r}var s,a=r._events[e];if(!a)return r;if(1===arguments.length)return r._events[e]=null,r;var c=a.length;while(c--)if(s=a[c],s===t||s.fn===t){a.splice(c,1);break}return r},e.prototype.$emit=function(e){var t=this,r=t._events[e];if(r){r=r.length>1?w(r):r;for(var o=w(arguments,1),i=0,s=r.length;i<s;i++)try{r[i].apply(t,o)}catch(n){V(n,t,'event handler for "'+e+'"')}}return t}}function dt(e,t){var n={};if(!e)return n;for(var r=[],o=0,i=e.length;o<i;o++){var s=e[o];if(s.context!==t&&s.functionalContext!==t||!s.data||null==s.data.slot)r.push(s);else{var a=s.data.slot,c=n[a]||(n[a]=[]);"template"===s.tag?c.push.apply(c,s.children):c.push(s)}}return r.every(pt)||(n.default=r),n}function pt(e){return e.isComment||" "===e.text}function ht(e,t){t=t||{};for(var n=0;n<e.length;n++)Array.isArray(e[n])?ht(e[n],t):t[e[n].key]=e[n].fn;return t}var ft=null;function mt(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function _t(e){e.prototype._update=function(e,t){var n=this;n._isMounted&&Et(n,"beforeUpdate");var r=n.$el,o=n._vnode,i=ft;ft=n,n._vnode=e,o?n.$el=n.__patch__(o,e):(n.$el=n.__patch__(n.$el,e,t,!1,n.$options._parentElm,n.$options._refElm),n.$options._parentElm=n.$options._refElm=null),ft=i,r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Et(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||y(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Et(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null)}}}function gt(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=qe),Et(e,"beforeMount"),r=function(){e._update(e._render(),n)},e._watcher=new Bt(e,r,R),n=!1,null==e.$vnode&&(e._isMounted=!0,Et(e,"mounted")),e}function yt(e,t,n,r,o){var i=!!(o||e.$options._renderChildren||r.data.scopedSlots||e.$scopedSlots!==P);if(e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r),e.$options._renderChildren=o,e.$attrs=r.data&&r.data.attrs,e.$listeners=n,t&&e.$options.props){_e.shouldConvert=!1;for(var s=e._props,a=e.$options._propKeys||[],c=0;c<a.length;c++){var u=a[c];s[u]=Be(u,e.$options.props,t,e)}_e.shouldConvert=!0,e.$options.propsData=t}if(n){var l=e.$options._parentListeners;e.$options._parentListeners=n,ut(e,n,l)}i&&(e.$slots=dt(o,r.context),e.$forceUpdate())}function vt(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function bt(e,t){if(t){if(e._directInactive=!1,vt(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)bt(e.$children[n]);Et(e,"activated")}}function Nt(e,t){if((!t||(e._directInactive=!0,!vt(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Nt(e.$children[n]);Et(e,"deactivated")}}function Et(e,t){var r=e.$options[t];if(r)for(var o=0,i=r.length;o<i;o++)try{r[o].call(e)}catch(n){V(n,e,t+" hook")}e._hasHookEvent&&e.$emit("hook:"+t)}var xt=[],Ot=[],Tt={},St=!1,It=!1,wt=0;function Ct(){wt=xt.length=Ot.length=0,Tt={},St=It=!1}function At(){var e,t;for(It=!0,xt.sort(function(e,t){return e.id-t.id}),wt=0;wt<xt.length;wt++)e=xt[wt],t=e.id,Tt[t]=null,e.run();var n=Ot.slice(),r=xt.slice();Ct(),Dt(n),Rt(r),re&&U.devtools&&re.emit("flush")}function Rt(e){var t=e.length;while(t--){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&Et(r,"updated")}}function Mt(e){e._inactive=!1,Ot.push(e)}function Dt(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,bt(e[t],!0)}function $t(e){var t=e.id;if(null==Tt[t]){if(Tt[t]=!0,It){var n=xt.length-1;while(n>wt&&xt[n].id>e.id)n--;xt.splice(n+1,0,e)}else xt.push(e);St||(St=!0,ae(At))}}var kt=0,Bt=function(e,t,n,r){this.vm=e,e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++kt,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ie,this.newDepIds=new ie,this.expression="","function"===typeof t?this.getter=t:(this.getter=G(t),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};Bt.prototype.get=function(){var e;de(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(n){if(!this.user)throw n;V(n,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&Lt(e),pe(),this.cleanupDeps()}return e},Bt.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Bt.prototype.cleanupDeps=function(){var e=this,t=this.deps.length;while(t--){var n=e.deps[t];e.newDepIds.has(n.id)||n.removeSub(e)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},Bt.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():$t(this)},Bt.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||u(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(n){V(n,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},Bt.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Bt.prototype.depend=function(){var e=this,t=this.deps.length;while(t--)e.deps[t].depend()},Bt.prototype.teardown=function(){var e=this;if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);var t=this.deps.length;while(t--)e.deps[t].removeSub(e);this.active=!1}};var jt=new ie;function Lt(e){jt.clear(),Ft(e,jt)}function Ft(e,t){var n,r,o=Array.isArray(e);if((o||u(e))&&Object.isExtensible(e)){if(e.__ob__){var i=e.__ob__.dep.id;if(t.has(i))return;t.add(i)}if(o){n=e.length;while(n--)Ft(e[n],t)}else{r=Object.keys(e),n=r.length;while(n--)Ft(e[r[n]],t)}}}var Ut={enumerable:!0,configurable:!0,get:R,set:R};function Pt(e,t,n){Ut.get=function(){return this[t][n]},Ut.set=function(e){this[t][n]=e},Object.defineProperty(e,n,Ut)}function qt(e){e._watchers=[];var t=e.$options;t.props&&Ht(e,t.props),t.methods&&Qt(e,t.methods),t.data?Wt(e):be(e._data={},!0),t.computed&&Vt(e,t.computed),t.watch&&t.watch!==ee&&Kt(e,t.watch)}function Ht(e,t){var n=e.$options.propsData||{},r=e._props={},o=e.$options._propKeys=[],i=!e.$parent;_e.shouldConvert=i;var s=function(i){o.push(i);var s=Be(i,t,n,e);Ne(r,i,s),i in e||Pt(e,"_props",i)};for(var a in t)s(a);_e.shouldConvert=!0}function Wt(e){var t=e.$options.data;t=e._data="function"===typeof t?Gt(t,e):t||{},d(t)||(t={});var n=Object.keys(t),r=e.$options.props,o=(e.$options.methods,n.length);while(o--){var i=n[o];r&&b(r,i)||q(i)||Pt(e,"_data",i)}be(t,!0)}function Gt(e,t){try{return e.call(t)}catch(n){return V(n,t,"data()"),{}}}var Jt={lazy:!0};function Vt(e,t){var n=e._computedWatchers=Object.create(null);for(var r in t){var o=t[r],i="function"===typeof o?o:o.get;n[r]=new Bt(e,i,R,Jt),r in e||zt(e,r,o)}}function zt(e,t,n){"function"===typeof n?(Ut.get=Xt(t),Ut.set=R):(Ut.get=n.get?!1!==n.cache?Xt(t):n.get:R,Ut.set=n.set?n.set:R),Object.defineProperty(e,t,Ut)}function Xt(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),ue.target&&t.depend(),t.value}}function Qt(e,t){e.$options.props;for(var n in t)e[n]=null==t[n]?R:I(t[n],e)}function Kt(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var o=0;o<r.length;o++)Yt(e,n,r[o]);else Yt(e,n,r)}}function Yt(e,t,n,r){return d(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,r)}function Zt(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Ee,e.prototype.$delete=xe,e.prototype.$watch=function(e,t,n){var r=this;if(d(t))return Yt(r,e,t,n);n=n||{},n.user=!0;var o=new Bt(r,e,t,n);return n.immediate&&t.call(r,o.value),function(){o.teardown()}}}function en(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function tn(e){var t=nn(e.$options.inject,e);t&&(_e.shouldConvert=!1,Object.keys(t).forEach(function(n){Ne(e,n,t[n])}),_e.shouldConvert=!0)}function nn(e,t){if(e){for(var n=Object.create(null),r=se?Reflect.ownKeys(e):Object.keys(e),o=0;o<r.length;o++){var i=r[o],s=e[i],a=t;while(a){if(a._provided&&s in a._provided){n[i]=a._provided[s];break}a=a.$parent}0}return n}}function rn(e,t,n,r,o){var s={},a=e.options.props;if(i(a))for(var c in a)s[c]=Be(c,a,t||{});else i(n.attrs)&&on(s,n.attrs),i(n.props)&&on(s,n.props);var u=Object.create(r),l=function(e,t,n,r){return mn(u,e,t,n,r,!0)},d=e.options.render.call(null,l,{data:n,props:s,children:o,parent:r,listeners:n.on||{},injections:nn(e.options.inject,r),slots:function(){return dt(o,r)}});return d instanceof Ue&&(d.functionalContext=r,d.functionalOptions=e.options,n.slot&&((d.data||(d.data={})).slot=n.slot)),d}function on(e,t){for(var n in t)e[x(n)]=t[n]}var sn={init:function(e,t,n,r){if(!e.componentInstance||e.componentInstance._isDestroyed){var o=e.componentInstance=un(e,ft,n,r);o.$mount(t?e.elm:void 0,t)}else if(e.data.keepAlive){var i=e;sn.prepatch(i,i)}},prepatch:function(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;yt(r,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,Et(n,"mounted")),e.data.keepAlive&&(t._isMounted?Mt(n):bt(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Nt(t,!0):t.$destroy())}},an=Object.keys(sn);function cn(e,t,n,r,a){if(!o(e)){var c=n.$options._base;if(u(e)&&(e=c.extend(e)),"function"===typeof e){var l;if(o(e.cid)&&(l=e,e=ot(l,c,n),void 0===e))return rt(l,t,n,r,a);t=t||{},Dn(e),i(t.model)&&pn(e.options,t);var d=Qe(t,e,a);if(s(e.options.functional))return rn(e,d,t,n,r);var p=t.on;if(s(e.options.abstract)){var h=t.slot;t={},h&&(t.slot=h)}ln(t);var f=e.options.name||a,m=new Ue("vue-component-"+e.cid+(f?"-"+f:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:d,listeners:p,tag:a,children:r},l);return m}}}function un(e,t,n,r){var o=e.componentOptions,s={_isComponent:!0,parent:t,propsData:o.propsData,_componentTag:o.tag,_parentVnode:e,_parentListeners:o.listeners,_renderChildren:o.children,_parentElm:n||null,_refElm:r||null},a=e.data.inlineTemplate;return i(a)&&(s.render=a.render,s.staticRenderFns=a.staticRenderFns),new o.Ctor(s)}function ln(e){e.hook||(e.hook={});for(var t=0;t<an.length;t++){var n=an[t],r=e.hook[n],o=sn[n];e.hook[n]=r?dn(o,r):o}}function dn(e,t){return function(n,r,o,i){e(n,r,o,i),t(n,r,o,i)}}function pn(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.props||(t.props={}))[n]=t.model.value;var o=t.on||(t.on={});i(o[r])?o[r]=[t.model.callback].concat(o[r]):o[r]=t.model.callback}var hn=1,fn=2;function mn(e,t,n,r,o,i){return(Array.isArray(n)||c(n))&&(o=r,r=n,n=void 0),s(i)&&(o=fn),_n(e,t,n,r,o)}function _n(e,t,n,r,o){if(i(n)&&i(n.__ob__))return qe();if(i(n)&&i(n.is)&&(t=n.is),!t)return qe();var s,a,c;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===fn?r=Ze(r):o===hn&&(r=Ye(r)),"string"===typeof t)?(a=U.getTagNamespace(t),s=U.isReservedTag(t)?new Ue(U.parsePlatformTagName(t),n,r,void 0,void 0,e):i(c=ke(e.$options,"components",t))?cn(c,n,e,r,t):new Ue(t,n,r,void 0,void 0,e)):s=cn(t,n,e,r);return i(s)?(a&&gn(s,a),s):qe()}function gn(e,t){if(e.ns=t,"foreignObject"!==e.tag&&i(e.children))for(var n=0,r=e.children.length;n<r;n++){var s=e.children[n];i(s.tag)&&o(s.ns)&&gn(s,t)}}function yn(e,t){var n,r,o,s,a;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),r=0,o=e.length;r<o;r++)n[r]=t(e[r],r);else if("number"===typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(u(e))for(s=Object.keys(e),n=new Array(s.length),r=0,o=s.length;r<o;r++)a=s[r],n[r]=t(e[a],a,r);return i(n)&&(n._isVList=!0),n}function vn(e,t,n,r){var o=this.$scopedSlots[e];if(o)return n=n||{},r&&(n=C(C({},r),n)),o(n)||t;var i=this.$slots[e];return i||t}function bn(e){return ke(this.$options,"filters",e,!0)||D}function Nn(e,t,n){var r=U.keyCodes[t]||n;return Array.isArray(r)?-1===r.indexOf(e):r!==e}function En(e,t,n,r,o){if(n)if(u(n)){var i;Array.isArray(n)&&(n=A(n));var s=function(s){if("class"===s||"style"===s||g(s))i=e;else{var a=e.attrs&&e.attrs.type;i=r||U.mustUseProp(t,a,s)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}if(!(s in i)&&(i[s]=n[s],o)){var c=e.on||(e.on={});c["update:"+s]=function(e){n[s]=e}}};for(var a in n)s(a)}else;return e}function xn(e,t){var n=this._staticTrees[e];return n&&!t?Array.isArray(n)?Ge(n):We(n):(n=this._staticTrees[e]=this.$options.staticRenderFns[e].call(this._renderProxy),Tn(n,"__static__"+e,!1),n)}function On(e,t,n){return Tn(e,"__once__"+t+(n?"_"+n:""),!0),e}function Tn(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!==typeof e[r]&&Sn(e[r],t+"_"+r,n);else Sn(e,t,n)}function Sn(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function In(e,t){if(t)if(d(t)){var n=e.on=e.on?C({},e.on):{};for(var r in t){var o=n[r],i=t[r];n[r]=o?[].concat(i,o):i}}else;return e}function wn(e){e._vnode=null,e._staticTrees=null;var t=e.$vnode=e.$options._parentVnode,n=t&&t.context;e.$slots=dt(e.$options._renderChildren,n),e.$scopedSlots=P,e._c=function(t,n,r,o){return mn(e,t,n,r,o,!1)},e.$createElement=function(t,n,r,o){return mn(e,t,n,r,o,!0)};var r=t&&t.data;Ne(e,"$attrs",r&&r.attrs,null,!0),Ne(e,"$listeners",r&&r.on,null,!0)}function Cn(e){e.prototype.$nextTick=function(e){return ae(e,this)},e.prototype._render=function(){var e,t=this,r=t.$options,o=r.render,i=r.staticRenderFns,s=r._parentVnode;if(t._isMounted)for(var a in t.$slots)t.$slots[a]=Ge(t.$slots[a]);t.$scopedSlots=s&&s.data.scopedSlots||P,i&&!t._staticTrees&&(t._staticTrees=[]),t.$vnode=s;try{e=o.call(t._renderProxy,t.$createElement)}catch(n){V(n,t,"render function"),e=t._vnode}return e instanceof Ue||(e=qe()),e.parent=s,e},e.prototype._o=On,e.prototype._n=m,e.prototype._s=f,e.prototype._l=yn,e.prototype._t=vn,e.prototype._q=$,e.prototype._i=k,e.prototype._m=xn,e.prototype._f=bn,e.prototype._k=Nn,e.prototype._b=En,e.prototype._v=He,e.prototype._e=qe,e.prototype._u=ht,e.prototype._g=In}var An=0;function Rn(e){e.prototype._init=function(e){var t=this;t._uid=An++,t._isVue=!0,e&&e._isComponent?Mn(t,e):t.$options=$e(Dn(t.constructor),e||{},t),t._renderProxy=t,t._self=t,mt(t),st(t),wn(t),Et(t,"beforeCreate"),tn(t),qt(t),en(t),Et(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function Mn(e,t){var n=e.$options=Object.create(e.constructor.options);n.parent=t.parent,n.propsData=t.propsData,n._parentVnode=t._parentVnode,n._parentListeners=t._parentListeners,n._renderChildren=t._renderChildren,n._componentTag=t._componentTag,n._parentElm=t._parentElm,n._refElm=t._refElm,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function Dn(e){var t=e.options;if(e.super){var n=Dn(e.super),r=e.superOptions;if(n!==r){e.superOptions=n;var o=$n(e);o&&C(e.extendOptions,o),t=e.options=$e(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function $n(e){var t,n=e.options,r=e.extendOptions,o=e.sealedOptions;for(var i in n)n[i]!==o[i]&&(t||(t={}),t[i]=kn(n[i],r[i],o[i]));return t}function kn(e,t,n){if(Array.isArray(e)){var r=[];n=Array.isArray(n)?n:[n],t=Array.isArray(t)?t:[t];for(var o=0;o<e.length;o++)(t.indexOf(e[o])>=0||n.indexOf(e[o])<0)&&r.push(e[o]);return r}return e}function Bn(e){this._init(e)}function jn(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=w(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}function Ln(e){e.mixin=function(e){return this.options=$e(this.options,e),this}}function Fn(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,o=e._Ctor||(e._Ctor={});if(o[r])return o[r];var i=e.name||n.options.name,s=function(e){this._init(e)};return s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.cid=t++,s.options=$e(n.options,e),s["super"]=n,s.options.props&&Un(s),s.options.computed&&Pn(s),s.extend=n.extend,s.mixin=n.mixin,s.use=n.use,L.forEach(function(e){s[e]=n[e]}),i&&(s.options.components[i]=s),s.superOptions=n.options,s.extendOptions=e,s.sealedOptions=C({},s.options),o[r]=s,s}}function Un(e){var t=e.options.props;for(var n in t)Pt(e.prototype,"_props",n)}function Pn(e){var t=e.options.computed;for(var n in t)zt(e.prototype,n,t[n])}function qn(e){L.forEach(function(t){e[t]=function(e,n){return n?("component"===t&&d(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}})}Rn(Bn),Zt(Bn),lt(Bn),_t(Bn),Cn(Bn);var Hn=[String,RegExp,Array];function Wn(e){return e&&(e.Ctor.options.name||e.tag)}function Gn(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!p(e)&&e.test(t)}function Jn(e,t,n){for(var r in e){var o=e[r];if(o){var i=Wn(o.componentOptions);i&&!n(i)&&(o!==t&&Vn(o),e[r]=null)}}}function Vn(e){e&&e.componentInstance.$destroy()}var zn={name:"keep-alive",abstract:!0,props:{include:Hn,exclude:Hn},created:function(){this.cache=Object.create(null)},destroyed:function(){var e=this;for(var t in e.cache)Vn(e.cache[t])},watch:{include:function(e){Jn(this.cache,this._vnode,function(t){return Gn(e,t)})},exclude:function(e){Jn(this.cache,this._vnode,function(t){return!Gn(e,t)})}},render:function(){var e=it(this.$slots.default),t=e&&e.componentOptions;if(t){var n=Wn(t);if(n&&(this.include&&!Gn(this.include,n)||this.exclude&&Gn(this.exclude,n)))return e;var r=null==e.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):e.key;this.cache[r]?e.componentInstance=this.cache[r].componentInstance:this.cache[r]=e,e.data.keepAlive=!0}return e}},Xn={KeepAlive:zn};function Qn(e){var t={get:function(){return U}};Object.defineProperty(e,"config",t),e.util={warn:J,extend:C,mergeOptions:$e,defineReactive:Ne},e.set=Ee,e.delete=xe,e.nextTick=ae,e.options=Object.create(null),L.forEach(function(t){e.options[t+"s"]=Object.create(null)}),e.options._base=e,C(e.options.components,Xn),jn(e),Ln(e),Fn(e),qn(e)}Qn(Bn),Object.defineProperty(Bn.prototype,"$isServer",{get:ne}),Object.defineProperty(Bn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Bn.version="2.4.1",Bn.mpvueVersion="1.0.12";var Kn=_("template,script,style,element,content,slot,link,meta,svg,view,a,div,img,image,text,span,richtext,input,switch,textarea,spinner,select,slider,slider-neighbor,indicator,trisition,trisition-group,canvas,list,cell,header,loading,loading-indicator,refresh,scrollable,scroller,video,web,embed,tabbar,tabheader,datepicker,timepicker,marquee,countdown",!0),Yn=_("style,class");_("web,spinner,switch,video,textarea,canvas,indicator,marquee,countdown",!0),_("embed,img,image,input,link,meta",!0);function Zn(){}function er(){}function tr(){}function nr(e){return e&&e.$attrs?e.$attrs["mpcomid"]:"0"}var rr={tap:["tap","click"],touchstart:["touchstart"],touchmove:["touchmove"],touchcancel:["touchcancel"],touchend:["touchend"],longtap:["longtap"],input:["input"],blur:["change","blur"],submit:["submit"],focus:["focus"],scrolltoupper:["scrolltoupper"],scrolltolower:["scrolltolower"],scroll:["scroll"]},or={};function ir(e,t){return or}function sr(e,t){return or}function ar(e){return or}function cr(e){return or}function ur(e,t,n){}function lr(e,t){}function dr(e,t){}function pr(e){return or}function hr(e){return or}function fr(e){return"div"}function mr(e,t){return or}function _r(e,t,n){return or}var gr=Object.freeze({createElement:ir,createElementNS:sr,createTextNode:ar,createComment:cr,insertBefore:ur,removeChild:lr,appendChild:dr,parentNode:pr,nextSibling:hr,tagName:fr,setTextContent:mr,setAttribute:_r}),yr={create:function(e,t){vr(t)},update:function(e,t){e.data.ref!==t.data.ref&&(vr(e,!0),vr(t))},destroy:function(e){vr(e,!0)}};function vr(e,t){var n=e.data.ref;if(n){var r=e.context,o=e.componentInstance||e.elm,i=r.$refs;t?Array.isArray(i[n])?y(i[n],o):i[n]===o&&(i[n]=void 0):e.data.refInFor?Array.isArray(i[n])?i[n].indexOf(o)<0&&i[n].push(o):i[n]=[o]:i[n]=o}}var br=new Ue("",{},[]),Nr=["create","activate","update","remove","destroy"];function Er(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&i(e.data)===i(t.data)&&xr(e,t)||s(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&o(t.asyncFactory.error))}function xr(e,t){if("input"!==e.tag)return!0;var n,r=i(n=e.data)&&i(n=n.attrs)&&n.type,o=i(n=t.data)&&i(n=n.attrs)&&n.type;return r===o}function Or(e,t,n){var r,o,s={};for(r=t;r<=n;++r)o=e[r].key,i(o)&&(s[o]=r);return s}function Tr(e){var t,n,r={},a=e.modules,u=e.nodeOps;for(t=0;t<Nr.length;++t)for(r[Nr[t]]=[],n=0;n<a.length;++n)i(a[n][Nr[t]])&&r[Nr[t]].push(a[n][Nr[t]]);function l(e){return new Ue(u.tagName(e).toLowerCase(),{},[],void 0,e)}function d(e,t){function n(){0===--n.listeners&&p(e)}return n.listeners=t,n}function p(e){var t=u.parentNode(e);i(t)&&u.removeChild(t,e)}function h(e,t,n,r,o){if(e.isRootInsert=!o,!f(e,t,n,r)){var a=e.data,c=e.children,l=e.tag;i(l)?(e.elm=e.ns?u.createElementNS(e.ns,l):u.createElement(l,e),E(e),v(e,c,t),i(a)&&N(e,t),y(n,e.elm,r)):s(e.isComment)?(e.elm=u.createComment(e.text),y(n,e.elm,r)):(e.elm=u.createTextNode(e.text),y(n,e.elm,r))}}function f(e,t,n,r){var o=e.data;if(i(o)){var a=i(e.componentInstance)&&o.keepAlive;if(i(o=o.hook)&&i(o=o.init)&&o(e,!1,n,r),i(e.componentInstance))return m(e,t),s(a)&&g(e,t,n,r),!0}}function m(e,t){i(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,b(e)?(N(e,t),E(e)):(vr(e),t.push(e))}function g(e,t,n,o){var s,a=e;while(a.componentInstance)if(a=a.componentInstance._vnode,i(s=a.data)&&i(s=s.transition)){for(s=0;s<r.activate.length;++s)r.activate[s](br,a);t.push(a);break}y(n,e.elm,o)}function y(e,t,n){i(e)&&(i(n)?n.parentNode===e&&u.insertBefore(e,t,n):u.appendChild(e,t))}function v(e,t,n){if(Array.isArray(t))for(var r=0;r<t.length;++r)h(t[r],n,e.elm,null,!0);else c(e.text)&&u.appendChild(e.elm,u.createTextNode(e.text))}function b(e){while(e.componentInstance)e=e.componentInstance._vnode;return i(e.tag)}function N(e,n){for(var o=0;o<r.create.length;++o)r.create[o](br,e);t=e.data.hook,i(t)&&(i(t.create)&&t.create(br,e),i(t.insert)&&n.push(e))}function E(e){var t,n=e;while(n)i(t=n.context)&&i(t=t.$options._scopeId)&&u.setAttribute(e.elm,t,""),n=n.parent;i(t=ft)&&t!==e.context&&i(t=t.$options._scopeId)&&u.setAttribute(e.elm,t,"")}function x(e,t,n,r,o,i){for(;r<=o;++r)h(n[r],i,e,t)}function O(e){var t,n,o=e.data;if(i(o))for(i(t=o.hook)&&i(t=t.destroy)&&t(e),t=0;t<r.destroy.length;++t)r.destroy[t](e);if(i(t=e.children))for(n=0;n<e.children.length;++n)O(e.children[n])}function T(e,t,n,r){for(;n<=r;++n){var o=t[n];i(o)&&(i(o.tag)?(S(o),O(o)):p(o.elm))}}function S(e,t){if(i(t)||i(e.data)){var n,o=r.remove.length+1;for(i(t)?t.listeners+=o:t=d(e.elm,o),i(n=e.componentInstance)&&i(n=n._vnode)&&i(n.data)&&S(n,t),n=0;n<r.remove.length;++n)r.remove[n](e,t);i(n=e.data.hook)&&i(n=n.remove)?n(e,t):t()}else p(e.elm)}function I(e,t,n,r,s){var a,c,l,d,p=0,f=0,m=t.length-1,_=t[0],g=t[m],y=n.length-1,v=n[0],b=n[y],N=!s;while(p<=m&&f<=y)o(_)?_=t[++p]:o(g)?g=t[--m]:Er(_,v)?(w(_,v,r),_=t[++p],v=n[++f]):Er(g,b)?(w(g,b,r),g=t[--m],b=n[--y]):Er(_,b)?(w(_,b,r),N&&u.insertBefore(e,_.elm,u.nextSibling(g.elm)),_=t[++p],b=n[--y]):Er(g,v)?(w(g,v,r),N&&u.insertBefore(e,g.elm,_.elm),g=t[--m],v=n[++f]):(o(a)&&(a=Or(t,p,m)),c=i(v.key)?a[v.key]:null,o(c)?(h(v,r,e,_.elm),v=n[++f]):(l=t[c],Er(l,v)?(w(l,v,r),t[c]=void 0,N&&u.insertBefore(e,l.elm,_.elm),v=n[++f]):(h(v,r,e,_.elm),v=n[++f])));p>m?(d=o(n[y+1])?null:n[y+1].elm,x(e,d,n,f,y,r)):f>y&&T(e,t,p,m)}function w(e,t,n,a){if(e!==t){var c=t.elm=e.elm;if(s(e.isAsyncPlaceholder))i(t.asyncFactory.resolved)?R(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(s(t.isStatic)&&s(e.isStatic)&&t.key===e.key&&(s(t.isCloned)||s(t.isOnce)))t.componentInstance=e.componentInstance;else{var l,d=t.data;i(d)&&i(l=d.hook)&&i(l=l.prepatch)&&l(e,t);var p=e.children,h=t.children;if(i(d)&&b(t)){for(l=0;l<r.update.length;++l)r.update[l](e,t);i(l=d.hook)&&i(l=l.update)&&l(e,t)}o(t.text)?i(p)&&i(h)?p!==h&&I(c,p,h,n,a):i(h)?(i(e.text)&&u.setTextContent(c,""),x(c,null,h,0,h.length-1,n)):i(p)?T(c,p,0,p.length-1):i(e.text)&&u.setTextContent(c,""):e.text!==t.text&&u.setTextContent(c,t.text),i(d)&&i(l=d.hook)&&i(l=l.postpatch)&&l(e,t)}}}function C(e,t,n){if(s(n)&&i(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var A=_("attrs,style,class,staticClass,staticStyle,key");function R(e,n,r){if(s(n.isComment)&&i(n.asyncFactory))return n.elm=e,n.isAsyncPlaceholder=!0,!0;n.elm=e;var o=n.tag,a=n.data,c=n.children;if(i(a)&&(i(t=a.hook)&&i(t=t.init)&&t(n,!0),i(t=n.componentInstance)))return m(n,r),!0;if(i(o)){if(i(c))if(e.hasChildNodes()){for(var u=!0,l=e.firstChild,d=0;d<c.length;d++){if(!l||!R(l,c[d],r)){u=!1;break}l=l.nextSibling}if(!u||l)return!1}else v(n,c,r);if(i(a))for(var p in a)if(!A(p)){N(n,r);break}}else e.data!==n.text&&(e.data=n.text);return!0}return function(e,t,n,a,c,d){if(!o(t)){var p=!1,f=[];if(o(e))p=!0,h(t,f,c,d);else{var m=i(e.nodeType);if(!m&&Er(e,t))w(e,t,f,a);else{if(m){if(1===e.nodeType&&e.hasAttribute(j)&&(e.removeAttribute(j),n=!0),s(n)&&R(e,t,f))return C(t,f,!0),e;e=l(e)}var _=e.elm,g=u.parentNode(_);if(h(t,f,_._leaveCb?null:g,u.nextSibling(_)),i(t.parent)){var y=t.parent;while(y)y.elm=t.elm,y=y.parent;if(b(t))for(var v=0;v<r.create.length;++v)r.create[v](br,t.parent)}i(g)?T(g,[e],0,0):i(e.tag)&&O(e)}}return C(t,f,p),t.elm}i(e)&&O(e)}}var Sr=[yr],Ir=Tr({nodeOps:gr,modules:Sr});function wr(){Ir.apply(this,arguments),this.$updateDataToMP()}function Cr(e,t,r){var o,i=e.$options[t];if("onError"===t&&i&&(i=[i]),i)for(var s=0,a=i.length;s<a;s++)try{o=i[s].call(e,r)}catch(n){V(n,e,t+" hook")}return e._hasHookEvent&&e.$emit("hook:"+t),e.$children.length&&e.$children.forEach(function(e){return Cr(e,t,r)}),o}function Ar(e,t){var n=t.$mp;e&&e.globalData&&(n.appOptions=e.globalData.appOptions)}function Rr(e,t,n){if(e){var r,o,i;if(Array.isArray(e)){r=e.length;while(r--)o=e[r],"string"===typeof o&&(i=x(o),t[i]={type:null})}else if(d(e))for(var s in e)o=e[s],i=x(s),t[i]=d(o)?o:{type:o};for(var a in t)if(t.hasOwnProperty(a)){var c=t[a];c.default&&(c.value=c.default);var u=c.observer;c.observer=function(e,t){n[i]=e,"function"===typeof u&&u.call(n,e,t)}}return t}}function Mr(e){var t=e.$options.properties,n=e.$options.props,r={};return Rr(t,r,e),Rr(n,r,e),r}function Dr(e){var t=e._mpProps={},n=Object.keys(e.$options.properties||{});n.forEach(function(n){n in e||(Pt(e,"_mpProps",n),t[n]=void 0)}),be(t,!0)}function $r(e,n){var r=this.$root;r.$mp||(r.$mp={});var o=r.$mp;if(o.status)return"app"===e?Cr(this,"onLaunch",o.appOptions):(this.__wxWebviewId__=r.__wxWebviewId__,this.__wxExparserNodeId__=r.__wxExparserNodeId__,Cr(this,"onLoad",o.query)),n();if(o.mpType=e,o.status="register","app"===e)t.App({globalData:{appOptions:{}},handleProxy:function(e){return r.$handleProxyWithVue(e)},onLaunch:function(e){void 0===e&&(e={}),o.app=this,o.status="launch",this.globalData.appOptions=o.appOptions=e,Cr(r,"onLaunch",e),n()},onShow:function(e){void 0===e&&(e={}),o.status="show",this.globalData.appOptions=o.appOptions=e,Cr(r,"onShow",e)},onHide:function(){o.status="hide",Cr(r,"onHide")},onError:function(e){Cr(r,"onError",e)},onUniNViewMessage:function(e){Cr(r,"onUniNViewMessage",e)}});else if("component"===e)Dr(r),t.Component({properties:Mr(r),data:{$root:{}},methods:{handleProxy:function(e){return r.$handleProxyWithVue(e)}},created:function(){o.status="created",o.page=this},attached:function(){o.status="attached",Cr(r,"attached")},ready:function(){o.status="ready",Cr(r,"ready"),n(),r.$nextTick(function(){r._initDataToMP()})},moved:function(){Cr(r,"moved")},detached:function(){o.status="detached",Cr(r,"detached")}});else{var i=t.getApp();t.Page({data:{$root:{}},handleProxy:function(e){return r.$handleProxyWithVue(e)},onLoad:function(e){r.__wxWebviewId__=this.__wxWebviewId__,r.__wxExparserNodeId__=this.__wxExparserNodeId__,o.page=this,o.query=e,o.status="load",Ar(i,r),r.$options&&"function"===typeof r.$options.data&&Object.assign(r.$data,r.$options.data()),Cr(r,"onLoad",e)},onShow:function(){r.__wxWebviewId__=this.__wxWebviewId__,r.__wxExparserNodeId__=this.__wxExparserNodeId__,o.page=this,o.status="show",Cr(r,"onShow"),r.$nextTick(function(){r._initDataToMP()})},onReady:function(){o.status="ready",Cr(r,"onReady"),n()},onHide:function(){o.status="hide",Cr(r,"onHide")},onUnload:function(){o.status="unload",Cr(r,"onUnload"),o.page=null},onPullDownRefresh:function(){Cr(r,"onPullDownRefresh")},onReachBottom:function(){Cr(r,"onReachBottom")},onShareAppMessage:r.$options.onShareAppMessage?function(e){return Cr(r,"onShareAppMessage",e)}:null,onPageScroll:function(e){Cr(r,"onPageScroll",e)},onTabItemTap:function(e){Cr(r,"onTabItemTap",e)}})}}function kr(e){var t=[].concat(Object.keys(e._data||{}),Object.keys(e._props||{}),Object.keys(e._mpProps||{}),Object.keys(e._computedWatchers||{}));return t.reduce(function(t,n){return t[n]=e[n],t},{})}function Br(e,t){void 0===t&&(t=[]);var n=e||{},r=n.$parent;return r?(t.unshift(nr(r)),r.$parent?Br(r,t):t):t}function jr(e){var t=Br(e).join(","),n=t+(t?",":"")+nr(e),r=Object.assign(kr(e),{$k:n,$kk:n+",",$p:t}),o="$root."+n,i={};return i[o]=r,i}function Lr(e,t){void 0===t&&(t={});var n=e.$children;return n&&n.length&&n.forEach(function(e){return Lr(e,t)}),Object.assign(t,jr(e))}function Fr(e,t,n){var r,o,i,s=null,a=0;function c(){a=!1===n.leading?0:Date.now(),s=null,i=e.apply(r,o),s||(r=o=null)}return n||(n={}),function(u,l){var d=Date.now();a||!1!==n.leading||(a=d);var p=t-(d-a);return r=this,o=o?[u,Object.assign(o[1],l)]:[u,l],p<=0||p>t?(clearTimeout(s),s=null,a=d,i=e.apply(r,o),s||(r=o=null)):s||!1===n.trailing||(s=setTimeout(c,p)),i}}var Ur=Fr(function(e,t){e&&e(t)},50);function Pr(e){var t=e.$root,n=t.$mp||{},r=n.mpType;void 0===r&&(r="");var o=n.page;if("app"!==r&&o&&"function"===typeof o.setData)return o}function qr(){var e=Pr(this);if(e){var t=JSON.parse(JSON.stringify(jr(this)));Ur(e.setData.bind(e),r(t,e.data))}}function Hr(){var e=Pr(this);if(e){var t=Lr(this.$root);e.setData(JSON.parse(JSON.stringify(t)))}}function Wr(e,t){void 0===t&&(t=[]);var n=t.slice(1);return n.length?n.reduce(function(e,t){for(var n=e.$children.length,r=0;r<n;r++){var o=e.$children[r],i=nr(o);if(i===t)return e=o,e}return e},e):e}function Gr(e,t,n){void 0===n&&(n=[]);var r=[];if(!e||!e.tag)return r;var o=e||{},i=o.data;void 0===i&&(i={});var s=o.children;void 0===s&&(s=[]);var a=o.componentInstance;a?Object.keys(a.$slots).forEach(function(e){var o=a.$slots[e],i=Array.isArray(o)?o:[o];i.forEach(function(e){r=r.concat(Gr(e,t,n))})}):s.forEach(function(e){r=r.concat(Gr(e,t,n))});var c=i.attrs,u=i.on;return c&&u&&c["eventid"]===t?(n.forEach(function(e){var t=u[e];"function"===typeof t?r.push(t):Array.isArray(t)&&(r=r.concat(t))}),r):r}function Jr(e){var t=e.type,n=e.timeStamp,r=e.touches,o=e.detail;void 0===o&&(o={});var i=e.target;void 0===i&&(i={});var s=e.currentTarget;void 0===s&&(s={});var a=o.x,c=o.y,u={mp:e,type:t,timeStamp:n,x:a,y:c,target:Object.assign({},i,o),detail:o,currentTarget:s,stopPropagation:R,preventDefault:R};return r&&r.length&&(Object.assign(u,r[0]),u.touches=r),u}function Vr(e){var t=this.$root,n=e.type,r=e.target;void 0===r&&(r={});var o=e.currentTarget,i=o||r,s=i.dataset;void 0===s&&(s={});var a=s.comkey;void 0===a&&(a="");var c=s.eventid,u=Wr(t,a.split(","));if(u){var l=rr[n]||[n],d=Gr(u._vnode,c,l);if(d.length){var p=Jr(e);if(1===d.length){var h=d[0](p);return h}d.forEach(function(e){return e(p)})}}}return Bn.config.mustUseProp=Zn,Bn.config.isReservedTag=Kn,Bn.config.isReservedAttr=Yn,Bn.config.getTagNamespace=er,Bn.config.isUnknownElement=tr,Bn.prototype.__patch__=wr,Bn.prototype.$mount=function(e,t){var n=this,r=this.$options;if(r&&(r.render||r.mpType)){var o=r.mpType;return void 0===o&&(o="page"),this._initMP(o,function(){return gt(n,void 0,void 0)})}return gt(this,void 0,void 0)},Bn.prototype._initMP=$r,Bn.prototype.$updateDataToMP=qr,Bn.prototype._initDataToMP=Hr,Bn.prototype.$handleProxyWithVue=Vr,Bn})}).call(this,n("c8ba"))},fbbc:function(e,t,n){"use strict";var r=n("5ff1")["default"],o=n("b428");e.exports=function(e,t,n){var i=r.time(),s={info:{from:e.body.from,to:e.body.to},username:e.body.from==n?e.body.to:e.body.from,yourname:e.body.from,msg:{type:t,url:e.body.body.url,data:a(e,t)},style:e.body.from==n?"self":"",time:i,mid:e.type+e.id,chatType:e.body.chatType};return t==o.IMAGE?s.msg.size={width:e.body.body.size.width,height:e.body.body.size.height}:t==o.AUDIO?s.msg.length=e.body.length:t==o.FILE&&(s.msg.data=[{data:"[当前不支持此格式消息展示]",type:"txt"}],s.msg.type="txt"),s;function a(e,t){return t==o.TEXT?r.parseEmoji(e.value.replace(/\n/gm,"")):t==o.EMOJI?e.value:t==o.IMAGE||t==o.VIDEO||t==o.AUDIO?e.body.body.url:t==o.FILE?e.body.body.msg:""}}},fe52:function(e,t,n){"use strict";(function(){var e=function(){},r=n("4345").code,o=10485760,i=!1,s="undefined"!==typeof FormData,a="undefined"!==typeof Blob,c=i.setRequestHeader||!1,u=i.overrideMimeType||!1,l=c&&s,d=l||!1,p=c&&(a||u);Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!==typeof o&&("function"!==typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,s,a=[];for(i in o)e.call(o,i)&&a.push(i);if(t)for(s=0;s<r;s++)e.call(o,n[s])&&a.push(n[s]);return a}}());var h={hasFormData:s,hasBlob:a,emptyfn:e,isCanSetRequestHeader:c,hasOverrideMimeType:u,isCanUploadFileAsync:l,isCanUploadFile:d,isCanDownLoadFile:p,isSupportWss:!0,hasFlash:!1,xmlrequest:!1,stringify:function(e){if("undefined"!==typeof JSON&&JSON.stringify)return JSON.stringify(e);var t="",n=[];return r(e);function r(e){var o=!1;for(var i in"[object Array]"===Object.prototype.toString.call(e)?(n.push("]","["),o=!0):"[object Object]"===Object.prototype.toString.call(e)&&n.push("}","{"),e)"[object Null]"===Object.prototype.toString.call(e[i])?e[i]="null":"[object Undefined]"===Object.prototype.toString.call(e[i])&&(e[i]="undefined"),e[i]&&"object"===typeof e[i]?t+=","+(o?"":'"'+i+'":'+(o?'"':""))+r(e[i]):t+=',"'+(o?"":i+'":"')+e[i]+'"';return""!=t&&(t=t.slice(1)),n.pop()+t+n.pop()}},registerUser:function(t){var n=t.orgName||"",o=t.appName||"",i=t.appKey||"",s=t.success||e,a=t.error||e;if(!n&&!o&&i){var c=i.split("#");2===c.length&&(n=c[0],o=c[1])}if(!n&&!o)return a({type:r.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR}),!1;var u=t.apiUrl,l=u+"/"+n+"/"+o+"/users",d={username:t.username,password:t.password,nickname:t.nickname||""},p=h.stringify(d);return t={url:l,data:p,success:s,error:a},h.ajax(t)},login:function(t){t=t||{};var n=t.success||e,o=t.error||e,i=t.appKey||"",s=i.split("#");if(2!==s.length)return o({type:r.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR}),!1;var a=s[0],c=s[1],u=t.user||"",l=t.pwd||"",d=t.apiUrl,p={grant_type:"password",username:u,password:l,timestamp:+new Date},f=h.stringify(p);return t={url:d+"/"+a+"/"+c+"/token",data:f,success:n,error:o},h.ajax(t)},getFileUrl:function(e){var t={url:"",filename:"",filetype:"",data:""},n="string"===typeof e?document.getElementById(e):e;if(!h.isCanUploadFileAsync||!n)return t;try{if(window.URL.createObjectURL){var r=n.files;if(r.length>0){var o=r.item(0);t.data=o,t.url=window.URL.createObjectURL(o),t.filename=o.name||""}}var i=t.filename.lastIndexOf(".");return-1!=i&&(t.filetype=t.filename.substring(i+1).toLowerCase()),t}catch(s){throw s}},getFileSize:function(e){var t=document.getElementById(e),n=0;return t&&t.files&&t.files.length>0&&(n=t.files[0].size),n},trim:function(e){return e="string"===typeof e?e:"",e.trim?e.trim():e.replace(/^\s|\s$/g,"")},parseEmoji:function(e){if("undefined"===typeof WebIM.Emoji||"undefined"===typeof WebIM.Emoji.map)return e;var t=WebIM.Emoji;for(var n in t.map)if(t.map.hasOwnProperty(n))while(e.indexOf(n)>-1)e=e.replace(n,'<image class="emoji" src="'+t.path+t.map[n]+'" /></image>');return e},parseLink:function(e){var t=/(https?:\/\/|www\.)([a-zA-Z0-9-]+(\.[a-zA-Z0-9]+)+)(:[0-9]{2,4})?\/?((\.[:_0-9a-zA-Z-]+)|[:_0-9a-zA-Z-]*\/?)*\??[:_#@*&%0-9a-zA-Z-\/=]*/gm;return e=e.replace(t,function(e){var t=/^https?/gm.test(e);return"<a href='"+(t?e:"//"+e)+"' target='_blank'>"+e+"</a>"}),e},parseJSON:function(e){if(window.JSON&&window.JSON.parse)return window.JSON.parse(e+"");var t,n=null,r=h.trim(e+"");return r&&!h.trim(r.replace(/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g,function(e,r,o,i){return t&&r&&(n=0),0===n?e:(t=o||r,n+=!i-!o,"")}))?Function("return "+r)():Function("Invalid JSON: "+e)()},parseUploadResponse:function(e){return e.indexOf("callback")>-1?e.slice(9,-1):e},parseDownloadResponse:function(e){return e&&e.type&&"application/json"===e.type||Object.prototype.toString.call(e).indexOf("Blob")<0?this.url+"?token=":window.URL.createObjectURL(e)},uploadFile:function(t){t=t||{},t.onFileUploadProgress=t.onFileUploadProgress||e,t.onFileUploadComplete=t.onFileUploadComplete||e,t.onFileUploadError=t.onFileUploadError||e,t.onFileUploadCanceled=t.onFileUploadCanceled||e;var n=t.accessToken||this.context.accessToken;if(n){var i,s,a,c=t.appKey||this.context.appKey||"";if(c&&(a=c.split("#"),i=a[0],s=a[1]),i||s){var u=t.apiUrl,l=u+"/"+i+"/"+s+"/chatfiles";if(h.isCanUploadFileAsync){var d=t.file.data?t.file.data.size:void 0;if(d>o)t.onFileUploadError({type:r.WEBIM_UPLOADFILE_ERROR,id:t.id});else if(d<=0)t.onFileUploadError({type:r.WEBIM_UPLOADFILE_ERROR,id:t.id});else{var p=h.xmlrequest(),f=function(e){t.onFileUploadError({type:r.WEBIM_UPLOADFILE_ERROR,id:t.id,xhr:p})};p.upload&&p.upload.addEventListener("progress",t.onFileUploadProgress,!1),p.addEventListener?(p.addEventListener("abort",t.onFileUploadCanceled,!1),p.addEventListener("load",function(e){try{var n=h.parseJSON(p.responseText);try{t.onFileUploadComplete(n)}catch(e){t.onFileUploadError({type:r.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:e})}}catch(e){t.onFileUploadError({type:r.WEBIM_UPLOADFILE_ERROR,data:p.responseText,id:t.id,xhr:p})}},!1),p.addEventListener("error",f,!1)):p.onreadystatechange&&(p.onreadystatechange=function(){if(4===p.readyState)if(200===ajax.status)try{var e=h.parseJSON(p.responseText);t.onFileUploadComplete(e)}catch(n){t.onFileUploadError({type:r.WEBIM_UPLOADFILE_ERROR,data:p.responseText,id:t.id,xhr:p})}else t.onFileUploadError({type:r.WEBIM_UPLOADFILE_ERROR,data:p.responseText,id:t.id,xhr:p});else p.abort(),t.onFileUploadCanceled()}),p.open("POST",l),p.setRequestHeader("restrict-access","true"),p.setRequestHeader("Accept","*/*"),p.setRequestHeader("Authorization","Bearer "+n);var m=new FormData;m.append("file",t.file.data),p.send(m)}}else h.hasFlash&&"function"===typeof t.flashUpload?t.flashUpload&&t.flashUpload(l,t):t.onFileUploadError({type:r.WEBIM_UPLOADFILE_BROWSER_ERROR,id:t.id})}else t.onFileUploadError({type:r.WEBIM_UPLOADFILE_ERROR,id:t.id})}else t.onFileUploadError({type:r.WEBIM_UPLOADFILE_NO_LOGIN,id:t.id})},download:function(t){t.onFileDownloadComplete=t.onFileDownloadComplete||e,t.onFileDownloadError=t.onFileDownloadError||e;var n=t.accessToken||this.context.accessToken,o=h.xmlrequest();if(n){var i=function(e){t.onFileDownloadError({type:r.WEBIM_DOWNLOADFILE_ERROR,id:t.id,xhr:o})};if(h.isCanDownLoadFile){"addEventListener"in o?(o.addEventListener("load",function(e){t.onFileDownloadComplete(o.response,o)},!1),o.addEventListener("error",i,!1)):"onreadystatechange"in o&&(o.onreadystatechange=function(){4===o.readyState?200===ajax.status?t.onFileDownloadComplete(o.response,o):t.onFileDownloadError({type:r.WEBIM_DOWNLOADFILE_ERROR,id:t.id,xhr:o}):(o.abort(),t.onFileDownloadError({type:r.WEBIM_DOWNLOADFILE_ERROR,id:t.id,xhr:o}))});var s=t.method||"GET",a=t.responseType||"blob",c=t.mimeType||"text/plain; charset=x-user-defined";o.open(s,t.url),"undefined"!==typeof Blob?o.responseType=a:o.overrideMimeType(c);var u={"X-Requested-With":"XMLHttpRequest",Accept:"application/octet-stream","share-secret":t.secret,Authorization:"Bearer "+n},l=t.headers||{};for(var d in l)u[d]=l[d];for(var p in u)u[p]&&o.setRequestHeader(p,u[p]);o.send(null)}else t.onFileDownloadComplete()}else t.onFileDownloadError({type:r.WEBIM_DOWNLOADFILE_NO_LOGIN,id:t.id})},parseTextMessage:function(e,t){if("string"!==typeof e)return!1;if("[object Object]"!==Object.prototype.toString.call(t))return{isemoji:!1,body:[{type:"txt",data:e}]};var n=e,r=[],o=/\[[^[\]]{2,3}\]/gm,i=n.match(o);if(!i||i.length<1)return{isemoji:!1,body:[{type:"txt",data:e}]};for(var s=!1,a=0;a<i.length;a++){var c=n.substring(0,n.indexOf(i[a])),u=t.map[i[a]];if(c&&r.push({type:"txt",data:c}),u){var l=t.map?u:null;l?(s=!0,r.push({type:"emoji",data:l})):r.push({type:"txt",data:i[a]});var d=n.indexOf(i[a])+i[a].length;n=n.substring(d)}else r.push({type:"txt",data:i[a]})}return n&&r.push({type:"txt",data:n}),s?{isemoji:s,body:r}:{isemoji:!1,body:[{type:"txt",data:e}]}},ajax:function(t){var n=t.success||e,r=t.error||e,o=t.type||"POST",i=t.data||null,s="";if("get"===o.toLowerCase()&&i){for(var a in i)i.hasOwnProperty(a)&&(s+=a+"="+i[a]+"&");s=s?s.slice(0,-1):s,t.url+=(t.url.indexOf("?")>0?"&":"?")+(s?s+"&":s)+"_v="+(new Date).getTime(),i=null,s=null}console.log("wx.request",t.url),wx.request({url:t.url,data:t.data,header:t.headers,method:o,success:function(e){console.log("wx.request.success",arguments),"200"==e.statusCode?n(e):r(e)},complete:function(){console.log("wx.request.complete",arguments)},fail:function(){console.log("wx.request.fail",arguments)}})},ts:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),r=e.getSeconds(),o=e.getMilliseconds();return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+(r<10?"0"+r:r)+":"+o+" "},getObjectKey:function(e,t){for(var n in e)if(e[n]==t)return n;return""}};t.utils=h})()}}]);