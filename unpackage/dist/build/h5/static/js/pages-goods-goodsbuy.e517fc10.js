(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-goodsbuy"],{1980:function(e,t,i){"use strict";i.r(t);var n=i("b66d"),a=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);t["default"]=a.a},2729:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"UniNumberBox",props:{value:{type:[Number,String],default:1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:0}},watch:{value:function(e){this.inputValue=+e},inputValue:function(e,t){+e!==+t&&this.$emit("change",e)}},created:function(){this.inputValue=+this.value},methods:{_calcValue:function(e){if(!this.disabled){var t=this._getDecimalScale(),i=this.inputValue*t,n=this.step*t;"minus"===e?i-=n:"plus"===e&&(i+=n),i<this.min||i>this.max||(this.inputValue=i/t)}},_getDecimalScale:function(){var e=1;return~~this.step!==this.step&&(e=Math.pow(10,(this.step+"").split(".")[1].length)),e},_onBlur:function(e){var t=e.detail.value;t?(t=+t,t>this.max?t=this.max:t<this.min&&(t=this.min),this.inputValue=t):this.inputValue=0}}};t.default=n},"61a2":function(e,t,i){"use strict";var n=i("a41e"),a=i.n(n);a.a},"6da0":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"goodsbuy ",staticStyle:{position:"fixed",width:"100%",height:"100%"},style:{paddingTop:e.system.statusBarHeight+"px"}},[i("v-uni-view",{staticClass:"cu-bar "},[i("v-uni-view",{staticClass:"action",on:{click:function(t){t=e.$handleEvent(t),e.back(t)}}},[i("v-uni-text",{staticClass:"cuIcon-back"})],1),i("v-uni-view",{staticClass:"content text-bold"},[e._v("下单支付")])],1),i("v-uni-scroll-view",{staticStyle:{width:"100%",height:"100%"},attrs:{"scroll-y":"true"}},[i("v-uni-form",[i("v-uni-view",{staticClass:"cu-form-group margin-top"},[i("v-uni-view",{staticClass:"title"},[e._v("收货人")]),i("v-uni-input",{attrs:{placeholder:"输入收货人姓名",name:"receiver"},model:{value:e.receiver,callback:function(t){e.receiver=t},expression:"receiver"}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("手机号")]),i("v-uni-input",{attrs:{placeholder:"输入收货人手机号",type:"tel",name:"phone"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("地址选择")]),i("v-uni-picker",{attrs:{mode:"multiSelector",value:e.regionIndex,range:e.regionArray},on:{change:function(t){t=e.$handleEvent(t),e.selectRegion(t)},columnchange:function(t){t=e.$handleEvent(t),e.regionChange(t)}}},[i("v-uni-view",{staticClass:"picker"},[e._v(e._s(e.region))])],1)],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-textarea",{attrs:{maxlength:"-1",placeholder:"请输入详细地址"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),i("v-uni-view",{staticClass:"cu-form-group align-start"},[i("v-uni-view",{staticClass:"title"},[e._v("备注")]),i("v-uni-textarea",{attrs:{maxlength:"-1",placeholder:"你想对卖家说什么"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("商品规格")]),i("v-uni-picker",{attrs:{mode:"selector",value:e.styleIndex,range:e.stylelist},on:{change:function(t){t=e.$handleEvent(t),e.selectStyle(t)}}},[i("v-uni-view",{staticClass:"picker"},[e._v(e._s(e.styleIndex>-1?e.goods.style[e.styleIndex].styleName:"请选择"))])],1)],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("商品价格")]),i("v-uni-text",{staticClass:"text-red text-bold text-xl"},[e._v(e._s(e.priceLabel))])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("购买数量")]),i("uni-number-box",{attrs:{min:1,max:10,value:e.count},on:{change:function(t){t=e.$handleEvent(t),e.countChange(t)}}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v("运费")]),i("v-uni-text",{staticClass:"text-red text-bold text-price text-xl"},[e._v(e._s(e.goods.post_fee))])],1),null!=e.goods.discount_amount?i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[e._v(e._s(e.goods.discount_label))]),i("v-uni-text",{staticClass:"text-red text-bold text-price text-xl"},[e._v(e._s(e.goods.discount_amount))])],1):e._e()],1)],1),i("v-uni-view",{staticClass:"cu-bar bg-white tabbar border shop fixed ",staticStyle:{top:"unset",bottom:"0","z-index":"100"}},[i("v-uni-view",{staticClass:"flex-treble bg-white submit text-price text-red",staticStyle:{flex:"1","font-size":"60upx"}},[e._v(e._s(e.price*e.count+e.goods.post_fee-(null!=e.goods.discount_amount?e.goods.discount_amount:0)))]),"wxpay"==e.paytype?i("v-uni-view",{staticClass:"flex-sub bg-green submit",on:{click:function(t){t=e.$handleEvent(t),e.wxpay(t)}}},[e._v("微信支付")]):e._e(),"alipay"==e.paytype?i("v-uni-view",{staticClass:"flex-sub bg-blue submit",on:{click:function(t){t=e.$handleEvent(t),e.alipay(t)}}},[e._v("支付宝支付")]):e._e(),"nopay"==e.paytype?i("v-uni-view",{staticClass:"flex-sub bg-grey submit"},[e._v("请使用客户端或小程序")]):e._e()],1)],1)},a=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a})},"78bf":function(e,t,i){"use strict";i.r(t);var n=i("2729"),a=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);t["default"]=a.a},"7a76":function(e,t,i){"use strict";i.r(t);var n=i("6da0"),a=i("1980");for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);var r=i("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"22924ff7",null);t["default"]=s.exports},"7b44":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"uni-numbox"},[i("v-uni-view",{staticClass:"uni-numbox__minus",class:{"uni-numbox--disabled":e.inputValue<=e.min||e.disabled},on:{click:function(t){t=e.$handleEvent(t),e._calcValue("minus")}}},[e._v("-")]),i("v-uni-input",{staticClass:"uni-numbox__value",attrs:{disabled:e.disabled,type:"number"},on:{blur:function(t){t=e.$handleEvent(t),e._onBlur(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),i("v-uni-view",{staticClass:"uni-numbox__plus",class:{"uni-numbox--disabled":e.inputValue>=e.max||e.disabled},on:{click:function(t){t=e.$handleEvent(t),e._calcValue("plus")}}},[e._v("+")])],1)},a=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a})},"886d":function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(t,i){e.exports=i(t)}(window,function(e,t){function i(t,i,n){e.WeixinJSBridge?WeixinJSBridge.invoke(t,o(i),function(e){s(t,e,n)}):l(t,n)}function a(t,i,n){e.WeixinJSBridge?WeixinJSBridge.on(t,function(e){n&&n.trigger&&n.trigger(e),s(t,e,i)}):l(t,n||i)}function o(e){return(e=e||{}).appId=C.appId,e.verifyAppId=C.appId,e.verifySignType="sha1",e.verifyTimestamp=C.timestamp+"",e.verifyNonceStr=C.nonceStr,e.verifySignature=C.signature,e}function r(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function s(e,t,i){"openEnterpriseChat"==e&&(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var n=t.errMsg;n||(n=t.err_msg,delete t.err_msg,n=function(e,t){var i=e,n=m[i];n&&(i=n);var a="ok";if(t){var o=t.indexOf(":");"confirm"==(a=t.substring(o+1))&&(a="ok"),"failed"==a&&(a="fail"),-1!=a.indexOf("failed_")&&(a=a.substring(7)),-1!=a.indexOf("fail_")&&(a=a.substring(5)),"access denied"!=(a=(a=a.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=a||(a="permission denied"),"config"==i&&"function not exist"==a&&(a="ok"),""==a&&(a="fail")}return i+":"+a}(e,n),t.errMsg=n),(i=i||{})._complete&&(i._complete(t),delete i._complete),n=t.errMsg||"",C.debug&&!i.isInnerInvoke&&alert(JSON.stringify(t));var a=n.indexOf(":");switch(n.substring(a+1)){case"ok":i.success&&i.success(t);break;case"cancel":i.cancel&&i.cancel(t);break;default:i.fail&&i.fail(t)}i.complete&&i.complete(t)}function c(e){if(e){for(var t=0,i=e.length;t<i;++t){var n=e[t],a=f[n];a&&(e[t]=a)}return e}}function l(e,t){if(!(!C.debug||t&&t.isInnerInvoke)){var i=m[e];i&&(e=i),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function u(){return(new Date).getTime()}function d(t){w&&(e.WeixinJSBridge?t():g.addEventListener&&g.addEventListener("WeixinJSBridgeReady",t,!1))}if(!e.jWeixin){var p,f={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},m=function(){var e={};for(var t in f)e[f[t]]=t;return e}(),g=e.document,h=g.title,v=navigator.userAgent.toLowerCase(),x=navigator.platform.toLowerCase(),y=!(!x.match("mac")&&!x.match("win")),b=-1!=v.indexOf("wxdebugger"),w=-1!=v.indexOf("micromessenger"),_=-1!=v.indexOf("android"),I=-1!=v.indexOf("iphone")||-1!=v.indexOf("ipad"),k=(B=v.match(/micromessenger\/(\d+\.\d+\.\d+)/)||v.match(/micromessenger\/(\d+\.\d+)/))?B[1]:"",S={initStartTime:u(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},T={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:I?1:_?2:-1,clientVersion:k,url:encodeURIComponent(location.href)},C={},A={_completes:[]},P={state:0,data:{}};d(function(){S.initEndTime=u()});var M=!1,V=[],L=(p={config:function(t){l("config",C=t);var n=!1!==C.check;d(function(){if(n)i(f.config,{verifyJsApiList:c(C.jsApiList)},function(){A._complete=function(e){S.preVerifyEndTime=u(),P.state=1,P.data=e},A.success=function(e){T.isPreVerifyOk=0},A.fail=function(e){A._fail?A._fail(e):P.state=-1};var e=A._completes;return e.push(function(){!function(e){if(!(y||b||C.debug||k<"6.0.2"||T.systemType<0)){var t=new Image;T.appId=C.appId,T.initTime=S.initEndTime-S.initStartTime,T.preVerifyTime=S.preVerifyEndTime-S.preVerifyStartTime,L.getNetworkType({isInnerInvoke:!0,success:function(e){T.networkType=e.networkType;var i="https://open.weixin.qq.com/sdk/report?v="+T.version+"&o="+T.isPreVerifyOk+"&s="+T.systemType+"&c="+T.clientVersion+"&a="+T.appId+"&n="+T.networkType+"&i="+T.initTime+"&p="+T.preVerifyTime+"&u="+T.url;t.src=i}})}}()}),A.complete=function(t){for(var i=0,n=e.length;i<n;++i)e[i]();A._completes=[]},A}()),S.preVerifyStartTime=u();else{P.state=1;for(var e=A._completes,t=0,a=e.length;t<a;++t)e[t]();A._completes=[]}}),L.invoke||(L.invoke=function(t,i,n){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,o(i),n)},L.on=function(t,i){e.WeixinJSBridge&&WeixinJSBridge.on(t,i)})},ready:function(e){0!=P.state?e():(A._completes.push(e),!w&&C.debug&&e())},error:function(e){k<"6.0.2"||(-1==P.state?e(P.data):A._fail=e)},checkJsApi:function(e){i("checkJsApi",{jsApiList:c(e.jsApiList)},(e._complete=function(e){if(_){var t=e.checkResult;t&&(e.checkResult=JSON.parse(t))}e=function(e){var t=e.checkResult;for(var i in t){var n=m[i];n&&(t[n]=t[i],delete t[i])}return e}(e)},e))},onMenuShareTimeline:function(e){a(f.onMenuShareTimeline,{complete:function(){i("shareTimeline",{title:e.title||h,desc:e.title||h,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){a(f.onMenuShareAppMessage,{complete:function(t){"favorite"===t.scene?i("sendAppMessage",{title:e.title||h,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}):i("sendAppMessage",{title:e.title||h,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){a(f.onMenuShareQQ,{complete:function(){i("shareQQ",{title:e.title||h,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){a(f.onMenuShareWeibo,{complete:function(){i("shareWeiboApp",{title:e.title||h,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){a(f.onMenuShareQZone,{complete:function(){i("shareQZone",{title:e.title||h,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},updateTimelineShareData:function(e){i("updateTimelineShareData",{title:e.title,link:e.link,imgUrl:e.imgUrl},e)},updateAppMessageShareData:function(e){i("updateAppMessageShareData",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},e)},startRecord:function(e){i("startRecord",{},e)},stopRecord:function(e){i("stopRecord",{},e)},onVoiceRecordEnd:function(e){a("onVoiceRecordEnd",e)},playVoice:function(e){i("playVoice",{localId:e.localId},e)},pauseVoice:function(e){i("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){i("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){a("onVoicePlayEnd",e)},uploadVoice:function(e){i("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){i("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){i("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){i("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(_){var t=e.localIds;try{t&&(e.localIds=JSON.parse(t))}catch(e){}}},e))},getLocation:function(e){},previewImage:function(e){i(f.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){i("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){i("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===M?(M=!0,i("getLocalImgData",{localId:e.localId},(e._complete=function(e){if(M=!1,0<V.length){var t=V.shift();wx.getLocalImgData(t)}},e))):V.push(e)},getNetworkType:function(e){i("getNetworkType",{},(e._complete=function(e){e=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var i=e.subtype;if(delete e.subtype,i)e.networkType=i;else{var n=t.indexOf(":"),a=t.substring(n+1);switch(a){case"wifi":case"edge":case"wwan":e.networkType=a;break;default:e.errMsg="getNetworkType:fail"}}return e}(e)},e))},openLocation:function(e){i("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)}},n(p,"getLocation",function(e){i(f.getLocation,{type:(e=e||{}).type||"wgs84"},(e._complete=function(e){delete e.type},e))}),n(p,"hideOptionMenu",function(e){i("hideOptionMenu",{},e)}),n(p,"showOptionMenu",function(e){i("showOptionMenu",{},e)}),n(p,"closeWindow",function(e){i("closeWindow",{},e=e||{})}),n(p,"hideMenuItems",function(e){i("hideMenuItems",{menuList:e.menuList},e)}),n(p,"showMenuItems",function(e){i("showMenuItems",{menuList:e.menuList},e)}),n(p,"hideAllNonBaseMenuItem",function(e){i("hideAllNonBaseMenuItem",{},e)}),n(p,"showAllNonBaseMenuItem",function(e){i("showAllNonBaseMenuItem",{},e)}),n(p,"scanQRCode",function(e){i("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){if(I){var t=e.resultStr;if(t){var i=JSON.parse(t);e.resultStr=i&&i.scan_code&&i.scan_code.scan_result}}},e))}),n(p,"openAddress",function(e){i(f.openAddress,{},(e._complete=function(e){var t;(t=e).postalCode=t.addressPostalCode,delete t.addressPostalCode,t.provinceName=t.proviceFirstStageName,delete t.proviceFirstStageName,t.cityName=t.addressCitySecondStageName,delete t.addressCitySecondStageName,t.countryName=t.addressCountiesThirdStageName,delete t.addressCountiesThirdStageName,t.detailInfo=t.addressDetailInfo,delete t.addressDetailInfo,e=t},e))}),n(p,"openProductSpecificView",function(e){i(f.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)}),n(p,"addCard",function(e){for(var t=e.cardList,n=[],a=0,o=t.length;a<o;++a){var r=t[a],s={card_id:r.cardId,card_ext:r.cardExt};n.push(s)}i(f.addCard,{card_list:n},(e._complete=function(e){var t=e.card_list;if(t){for(var i=0,n=(t=JSON.parse(t)).length;i<n;++i){var a=t[i];a.cardId=a.card_id,a.cardExt=a.card_ext,a.isSuccess=!!a.is_succ,delete a.card_id,delete a.card_ext,delete a.is_succ}e.cardList=t,delete e.card_list}},e))}),n(p,"chooseCard",function(e){i("chooseCard",{app_id:C.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))}),n(p,"openCard",function(e){for(var t=e.cardList,n=[],a=0,o=t.length;a<o;++a){var r=t[a],s={card_id:r.cardId,code:r.code};n.push(s)}i(f.openCard,{card_list:n},e)}),n(p,"consumeAndShareCard",function(e){i(f.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)}),n(p,"chooseWXPay",function(e){i(f.chooseWXPay,r(e),e)}),n(p,"openEnterpriseRedPacket",function(e){i(f.openEnterpriseRedPacket,r(e),e)}),n(p,"startSearchBeacons",function(e){i(f.startSearchBeacons,{ticket:e.ticket},e)}),n(p,"stopSearchBeacons",function(e){i(f.stopSearchBeacons,{},e)}),n(p,"onSearchBeacons",function(e){a(f.onSearchBeacons,e)}),n(p,"openEnterpriseChat",function(e){i("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)}),n(p,"launchMiniProgram",function(e){i("launchMiniProgram",{targetAppId:e.targetAppId,path:function(e){if("string"==typeof e&&0<e.length){var t=e.split("?")[0],i=e.split("?")[1];return t+=".html",void 0!==i?t+"?"+i:t}}(e.path),envVersion:e.envVersion},e)}),n(p,"miniProgram",{navigateBack:function(e){e=e||{},d(function(){i("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e)})},navigateTo:function(e){d(function(){i("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e)})},redirectTo:function(e){d(function(){i("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e)})},switchTab:function(e){d(function(){i("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e)})},reLaunch:function(e){d(function(){i("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e)})},postMessage:function(e){d(function(){i("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e)})},getEnv:function(t){d(function(){t({miniprogram:"miniprogram"===e.__wxjs_environment})})}}),p),D=1,E={};return g.addEventListener("error",function(e){if(!_){var t=e.target,i=t.tagName,n=t.src;if(("IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i)&&-1!=n.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var a=t["wx-id"];if(a||(a=D++,t["wx-id"]=a),E[a])return;E[a]=!0,wx.ready(function(){wx.getLocalImgData({localId:n,success:function(e){t.src=e.localData}})})}}},!0),g.addEventListener("load",function(e){if(!_){var t=e.target,i=t.tagName;if(t.src,"IMG"==i||"VIDEO"==i||"AUDIO"==i||"SOURCE"==i){var n=t["wx-id"];n&&(E[n]=!1)}}},!0),t&&(e.wx=e.jWeixin=L),L}var B})},a41e:function(e,t,i){var n=i("cf5a");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("2ef35940",n,!0,{sourceMap:!1,shadowMode:!1})},b253:function(e,t,i){"use strict";i.r(t);var n=i("7b44"),a=i("78bf");for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);i("61a2");var r=i("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"4b87da33",null);t["default"]=s.exports},b66d:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("b253"));function a(e){return e&&e.__esModule?e:{default:e}}var o={components:{uniNumberBox:n.default},data:function(){return{system:this.systemInfo(),goods:{},priceLabel:"",detaillist:[],stylelist:[],styleIndex:-1,promoteFlag:!1,promoteLabel:"",region:"",regionArray:[["请选择"],["请选择"],["请选择"]],regionIndex:[0,0,0],regionData:[],price:0,count:1,tobuy:!0,tobuyAnimation:{},paytype:"nopay",remark:"",address:"",receiver:this.getUserInfo().nick_name,phone:this.getUserInfo().phone}},onLoad:function(e){var t=this,i=e.goodsId,n=e.styleName;this.postJson({path:"/goods_new_detail.jsp",data:{goodsid:i},success:function(e){if(console.log(e.data),"ok"==e.data.status){t.$data.goods=e.data.data,t.promoteFlag=1==t.goods.promote,t.goods.price>t.goods.promote_price?t.priceLabel="¥"+t.goods.promote_price+" ~ ¥"+t.goods.max_price:t.priceLabel="¥"+t.goods.price+" ~ ¥"+t.goods.max_price,t.detaillist=t.goods.detail;var i=t.goods.style;for(var a in i){var o=i[a],r=o.styleName,s=o.goodsPrice,c=r+" ¥"+s,l=s;if(o.promotePrice){var u=o.promoteStarttime,d=o.promoteEndtime,p=Math.floor(Date().getTime()/1e3);p<u?(c=r+" ¥"+s,l=o.goodsPrice):p>d?(c=r+" ¥"+s,l=o.goodsPrice):(c=r+" ¥"+promotePrice,l=o.promotePrice)}else c=r+" ¥"+s,l=o.goodsPrice;t.stylelist.push(c),n==r&&(t.styleIndex=a,t.price=l,t.priceLabel="¥"+l)}}}});var a={multiArray:this.regionArray,multiIndex:this.regionIndex,multiData:this.regionData},o="100000";this.postJson({path:"/district.jsp",data:{code:o},success:function(e){if(console.log(e.data),"ok"==e.data.status){for(var i in a.multiData[0]=e.data.data,a.multiArray[0]=[],e.data.data){var n=e.data.data[i];a.multiArray[0].push(n.name)}a.multiIndex[1]=0,a.multiArray[1]=["请选择"],a.multiArray[2]=["请选择"],a.multiIndex[2]=0,t.regionArray=a.multiArray,t.regionIndex=a.multiIndex,t.regionData=a.multiData,t.region="xx省xx市xx县"}}}),uni.getProvider({service:"payment",success:function(e){console.log(e.provider),~e.provider.indexOf("wxpay")?t.paytype="wxpay":~e.provider.indexOf("alipay")&&(t.paytype="alipay")}})},methods:{selectStyle:function(e){console.log("选择商品规格为",e.target.value),this.styleIndex=e.target.value;var t=this.goods.style[this.styleIndex];if(t.promotePrice){this.promoteFlag=!0;var i=t.promoteStarttime,n=t.promoteEndtime,a=Math.floor(Date().getTime()/1e3);a<i?(this.priceLabel="¥"+t.goodsPrice,this.promoteLabel=new Date(1e3*i).toLocaleDateString()+"开始",this.price=t.goodsPrice):a>n?(this.priceLabel="¥"+t.goodsPrice,this.promoteLabel="已结束",this.price=t.goodsPrice):(this.priceLabel="¥"+t.promotePrice,this.promoteLabel=new Date(1e3*n).toLocaleDateString()+"截止",this.price=t.promotePrice)}else this.priceLabel="¥"+t.goodsPrice,this.promoteFlag=!1,this.price=t.goodsPrice},selectRegion:function(e){this.multiIndex=e.detail.value},regionChange:function(e){var t=this,i=this,n={multiArray:this.regionArray,multiIndex:this.regionIndex,multiData:this.regionData};switch(n.multiIndex[e.detail.column]=e.detail.value,e.detail.column){case 0:var a=n.multiData[0][n.multiIndex[0]].code;this.postJson({path:"/district.jsp",data:{code:a},success:function(e){if(console.log(e.data),"ok"==e.data.status){for(var i in n.multiData[1]=e.data.data,n.multiArray[1]=[],e.data.data){var a=e.data.data[i];n.multiArray[1].push(a.name)}n.multiIndex[1]=0,n.multiArray[2]=["请选择"],n.multiIndex[2]=0,t.regionArray=n.multiArray,t.regionIndex=n.multiIndex,t.regionData=n.multiData}t.region=n.multiArray[0][n.multiIndex[0]]+"xx市xx县"}});break;case 1:var o=n.multiData[1][n.multiIndex[1]].code;uni.request({url:"https://www.dpsoft.top/district.jsp",method:"POST",data:{code:o},header:{"Content-Type":"application/json"},success:function(e){if(console.log(e.data),"ok"==e.data.status){for(var a in n.multiData[2]=e.data.data,n.multiArray[2]=[],e.data.data){var o=e.data.data[a];n.multiArray[2].push(o.name)}n.multiIndex[2]=0,i.regionArray=n.multiArray,i.regionIndex=n.multiIndex,i.regionData=n.multiData}t.region=n.multiArray[0][n.multiIndex[0]]+n.multiArray[1][n.multiIndex[1]]+"xx县"}});break;case 2:this.region=n.multiArray[0][n.multiIndex[0]]+n.multiArray[1][n.multiIndex[1]]+n.multiArray[2][n.multiIndex[2]];break}},countChange:function(e){this.count=e},alipay:function(){},wxpay:function(){var e=this;if(this.receiver.trim().length<=0)uni.showToast({icon:"none",title:"请填写收货人姓名"});else{var t=/^[1][3,4,5,7,8,9][0-9]{9}$/;if(null!=this.phone&&this.phone.trim().length>0&&t.test(this.phone))if("请选择"!=this.regionArray[0][this.regionIndex[0]])if("请选择"!=this.regionArray[1][this.regionIndex[1]])if("请选择"!=this.regionArray[2][this.regionIndex[2]])if(this.address.trim().length<=0)uni.showToast({icon:"none",title:"请选填写收货详细地址"});else{var n={};n.goods_id=this.goods.id,n.number=this.count,n.remark=this.remark,n.receiver=this.receiver,n.phone=this.phone,n.address=this.regionArray[0][this.regionIndex[0]]+this.regionArray[1][this.regionIndex[1]]+this.regionArray[2][this.regionIndex[2]]+this.address,n.style=this.goods.style[this.styleIndex],n.tradeType="JSAPI",n.body="「好物短视频」"+this.goods.title,uni.showLoading({title:"加载中",mask:!0}),this.getOpenId(function(t){console.log(t),t&&(n.openId=t.data.data.openid),e.postJson({path:"/order_wxpay_init.jsp",data:n,success:function(e){if(uni.hideLoading(),"ok"==e.data.status){var t=e.data.data;t.success=function(e){uni.showToast({title:"支付成功"}),uni.redirectTo({url:"/pages/order/order?code"+t.code})},t.fail=function(e){uni.showToast({icon:"none",title:"支付失败"})};var n=i("886d");n.ready(function(){wx.chooseWXPay(t)})}else uni.showToast({icon:"none",title:e.data.msg})}})})}else uni.showToast({icon:"none",title:"请选择收货地址市县"});else uni.showToast({icon:"none",title:"请选择收货地址城市"});else uni.showToast({icon:"none",title:"请选择收货地址省份"});else uni.showToast({icon:"none",title:"请输入正确的收货人手机号"})}}}};t.default=o},cf5a:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-numbox[data-v-4b87da33]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;height:%?70?%;position:relative}.uni-numbox[data-v-4b87da33]:after{content:"";position:absolute;-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;top:-50%;left:-50%;right:-50%;bottom:-50%;border:1px solid #c8c7cc;border-radius:%?12?%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5)}.uni-numbox__minus[data-v-4b87da33],.uni-numbox__plus[data-v-4b87da33]{margin:0;background-color:#f8f8f8;width:%?70?%;font-size:%?40?%;height:100%;line-height:%?70?%;text-align:center;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#333;position:relative}.uni-numbox__value[data-v-4b87da33]{position:relative;background-color:#fff;width:%?80?%;height:100%;text-align:center;padding:0}.uni-numbox__value[data-v-4b87da33]:after{content:"";position:absolute;-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none;top:-50%;left:-50%;right:-50%;bottom:-50%;border-style:solid;border-color:#c8c7cc;border-left-width:1px;border-right-width:1px;border-top-width:0;border-bottom-width:0;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5)}.uni-numbox--disabled[data-v-4b87da33]{color:silver}',""])}}]);