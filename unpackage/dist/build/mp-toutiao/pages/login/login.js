(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0a63":function(t,e,o){"use strict";o.r(e);var i=o("a575"),n=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);e["default"]=n.a},"18ce":function(t,e,o){"use strict";o.r(e);var i=o("3886"),n=o("0a63");for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);var s=o("2877"),c=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},3886:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{staticClass:"bg-gradual-black",staticStyle:{position:"fixed",width:"100%",height:"100%"},style:{paddingTop:t.system.statusBarHeight+"px"},attrs:{_hid:0}},[o("view",{staticClass:"cu-bar text-gold-light",attrs:{_hid:1}},[o("view",{staticClass:"action",attrs:{_hid:2},on:{tap:t.close}},[o("text",{staticClass:"cuIcon-close",attrs:{_hid:3}})]),o("view",{staticClass:"content text-bold",attrs:{_hid:4}},[])]),o("form",{staticClass:"text-gold-light",attrs:{_hid:6}},[o("view",{staticClass:"cu-form-group",staticStyle:{"background-color":"rgba(0,0,0,0)",padding:"0 80rpx","margin-top":"20%"},attrs:{_hid:7}},[o("view",{staticClass:"title",attrs:{_hid:8}},[]),o("input",{directives:[{name:"model",rawName:"v-model:value",value:t.phone,expression:"phone",arg:"value"}],staticStyle:{color:"white"},attrs:{placeholder:"输入本人手机号",type:"number",_hid:10},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),o("view",{staticClass:"cu-form-group",staticStyle:{"background-color":"rgba(0,0,0,0)",padding:"0 80rpx"},attrs:{_hid:11}},[o("view",{staticClass:"title",attrs:{_hid:12}},[]),o("input",{directives:[{name:"model",rawName:"v-model:value",value:t.code,expression:"code",arg:"value"}],staticStyle:{color:"white"},attrs:{placeholder:"输入验证码",type:"number",name:"code",_hid:14},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),o("button",{staticClass:"cu-btn text-gold-light",staticStyle:{"background-color":"rgba(0,0,0,0)",border:"solid 1px #e3c77f"},attrs:{_hid:15},on:{tap:t.getcode}},[t._v(t._s(t.codeTime<=0?"获取":t.codeTime+"s"),16)])],1),o("view",{staticClass:"padding flex flex-direction",attrs:{_hid:17}},[o("button",{staticClass:"cu-btn bg-gold-light margin-tb-sm lg",staticStyle:{color:"#222"},attrs:{_hid:18},on:{tap:t.login}},[])],1)])],1)},n=[];o.d(e,"a",function(){return i}),o.d(e,"b",function(){return n})},a575:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o("5ff1")["default"],n={data:function(){return{system:this.systemInfo(),nextPage:"",codeTime:0,phone:this.lastUserInfo().phone,code:"",token:"",openId:""}},onLoad:function(t){var e=t.page;e=e?decodeURIComponent(e):"/pages/my/my",this.nextPage=e},methods:{codeTimer:function(){0>=this.codeTimer?this.codeTime=0:(this.codeTime--,setTimeout(this.codeTimer,1e3))},getcode:function(){var e=this,o=/^[1][3,4,5,7,8,9][0-9]{9}$/;if(null!=this.phone&&this.phone.trim().length>0&&o.test(this.phone)){var i={};i.phone=this.phone,i.type="uni_phone_login",t.showLoading({title:"加载中",mask:!0}),this.postJson({path:"/user_phone_getcode.jsp",data:i,success:function(o){console.log(o),"ok"==o.data.status?(e.token=o.data.data.token,e.codeTime=60,e.codeTimer()):t.showToast({icon:"none",title:o.msg})},fail:function(e){t.showToast({icon:"none",title:"请您稍后再试"})},complete:function(){t.hideLoading()}})}else t.showToast({icon:"none",title:"请输入正确的手机号"})},login:function(){if(null!=this.token&&this.token.trim().length>0){var e=/^[1][3,4,5,7,8,9][0-9]{9}$/;if(null!=this.phone&&this.phone.trim().length>0&&e.test(this.phone))if(null!=this.code&&this.code.trim().length>0){var o=this,n={};n.phone=this.phone,n.token=this.token,n.valicode=this.code,t.showLoading({title:"加载中",mask:!0}),this.postJson({path:"/user_login_do.jsp",data:n,success:function(e){if("ok"==e.data.status){var n=e.data.user;t.setStorage({key:"user",data:JSON.stringify(n),success:function(){console.log("success"),o.conn.open({apiUrl:i.config.apiURL,user:n.uid,pwd:"111111",grant_type:"password",appKey:i.config.appkey}),t.$emit("logon",{msg:""}),t.navigateBack({})}})}else t.showToast({icon:"none",title:e.msg})},fail:function(e){t.showToast({icon:"none",title:"请您稍后再试"})},complete:function(e){t.hideLoading()}})}else t.showToast({icon:"none",title:"请输入验证码"});else t.showToast({icon:"none",title:"请输入正确的手机号"})}else t.showToast({icon:"none",title:"请先获取验证码"})},close:function(){t.$emit("login_cancel",{msg:"取消登录"}),t.navigateBack({})}}};e.default=n}).call(this,o("f266")["default"])},b207:function(t,e,o){"use strict";o("719a");var i=a(o("18ce")),n=a(o("3a53"));function a(t){return t&&t.__esModule?t:{default:t}}i.default.mpType="page";var s=new n.default(i.default);s.$mount()}},[["b207","common/runtime","common/vendor"]]]);