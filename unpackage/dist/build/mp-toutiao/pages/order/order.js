(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{3526:function(t,s,a){"use strict";var e=a("f128"),i=a.n(e);i.a},"7a00":function(t,s,a){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a={data:function(){return{system:this.systemInfo(),user:this.getUserInfo(),order:{},goods:{},shipArray:["顺丰","申通","韵达","圆通","中通","天天","邮政","德邦","中铁","韵达"],modalName:"",reason:""}},onLoad:function(t){var s=this,a=t.code;this.postJson({path:"/order_detail.jsp",data:{code:a},success:function(t){"ok"==t.data.status&&(s.order=t.data.data.order,s.goods=t.data.data.goods,s.goods.stateLabel=s.getStateLabel(s.goods.status),s.refund=t.data.data.refund,s.order.createTimeLabel=new Date(s.order.create_time).toLocaleDateString())}})},methods:{getStateLabel:function(){if(!this.refund||1!=this.order.status&&2!=this.order.status){var t=["待支付","待发货","待确认","已完成","已退货","已取消"];return t[this.order.status]}return"退货申请中"},orderCancel:function(){var s=this;t.showLoading({title:"加载中"}),this.postJson({path:"/user_order_cancel.jsp",data:{code:this.order.code},success:function(a){t.hideLoading(),"ok"==a.data.status&&t.redirectTo({url:"/pages/order/order?code="+s.order.code})}})},orderSellerCancel:function(){var s=this;this.postJson({path:"/seller_order_cancel.jsp",data:{code:this.order.code},success:function(a){"ok"==a.data.status&&t.redirectTo({url:"/pages/order/order?code="+s.order.code})}})},confirm:function(){var s=this;t.showLoading({title:"加载中"}),this.postJson({path:"/user_order_confirm.jsp",data:{code:this.order.code},success:function(a){t.hideLoading(),"ok"==a.data.status&&t.redirectTo({url:"/pages/order/order?code="+s.order.code})}})},contactBuyer:function(){t.makePhoneCall({phoneNumber:this.order.phone})},contactSeller:function(){t.showLoading({title:"加载中",mask:!0}),this.postJson({path:"/seller_user.jsp",data:{sellerUid:this.goods.seller},success:function(s){if("ok"==s.data.status){var a=s.data.data;t.makePhoneCall({phoneNumber:a.phone})}else t.showToast({icon:"none",title:s.data.msg})},complete:function(){t.hideLoading()}})},orderRefund:function(){var s=this;!this.reason||this.reason.trim().length<=0?t.showToast({icon:"none",title:"请输入退货理由"}):(t.showLoading({title:"加载中"}),this.postJson({path:"/user_order_refund.jsp",data:{code:this.order.code,reason:this.reason},success:function(a){t.hideLoading(),"ok"==a.data.status&&t.redirectTo({url:"/pages/order/order?code="+s.order.code})}}))},refundPass:function(){var s=this;t.showLoading({title:"加载中"}),this.postJson({path:"/seller_order_refund_pass.jsp",data:{code:this.order.code},success:function(a){t.hideLoading(),"ok"==a.data.status&&t.redirectTo({url:"/pages/order/order?code="+s.order.code})}})},refundRefuse:function(){var s=this;!this.reason||this.reason.trim().length<=0?t.showToast({icon:"none",title:"请输入拒绝理由"}):(t.showLoading({title:"加载中"}),this.postJson({path:"/seller_order_refund_refuse.jsp",data:{code:this.order.code,reason:this.reason},success:function(a){t.hideLoading(),"ok"==a.data.status&&t.redirectTo({url:"/pages/order/order?code="+s.order.code})}}))},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=""}}};s.default=a}).call(this,a("f266")["default"])},8122:function(t,s,a){"use strict";a.r(s);var e=a("e8bf"),i=a("8678");for(var r in i)"default"!==r&&function(t){a.d(s,t,function(){return i[t]})}(r);a("3526");var o=a("2877"),d=Object(o["a"])(i["default"],e["a"],e["b"],!1,null,null,null);s["default"]=d.exports},8678:function(t,s,a){"use strict";a.r(s);var e=a("7a00"),i=a.n(e);for(var r in e)"default"!==r&&function(t){a.d(s,t,function(){return e[t]})}(r);s["default"]=i.a},e8bf:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("view",{staticClass:"order bg-gradual-pink",staticStyle:{position:"fixed",width:"100%",height:"100%"},style:{paddingTop:t.system.statusBarHeight+"px"},attrs:{_hid:0}},[a("view",{staticClass:"cu-bar ",staticStyle:{position:"fixed","z-index":"1",width:"100%","background-color":"rgba(224,57,151,0)"},attrs:{_hid:1}},[a("view",{staticClass:"action",attrs:{_hid:2},on:{tap:t.back}},[a("text",{staticClass:"cuIcon-back",attrs:{_hid:3}})]),a("view",{staticClass:"content text-bold",attrs:{_hid:4}},[])]),a("scroll-view",{staticStyle:{width:"100%",height:"100%","padding-top":"100rpx"},attrs:{"scroll-y":"true",_hid:6}},[a("view",{staticClass:"cu-list menu sm-borde bg-white",attrs:{_hid:7}},[a("view",{staticClass:"cu-item order",attrs:{_hid:8}},[a("view",{staticClass:"cu-avatar radius",style:{backgroundImage:"url("+t.goods.img_title+")"},attrs:{_hid:9}},[a("text",{staticClass:"goods-status",attrs:{_hid:10}},[t._v(t._s(t.goods.stateLabel),11)])]),a("view",{staticClass:"content",attrs:{_hid:12}},[a("view",{staticClass:"text-grey goods-title",attrs:{_hid:13}},[t._v(t._s(t.goods.title),14)]),a("view",{staticClass:"text-gray text-sm goods-seller",attrs:{_hid:15}},[a("text",{attrs:{_hid:16}},[a("text",{staticClass:"cuIcon-shop text-red  margin-right-xs",attrs:{_hid:17}}),t._v(t._s(t.goods.seller),18),a("text",{staticClass:"fr",attrs:{_hid:19}},[t._v(t._s(t.goods.area),20)])])]),a("view",{staticClass:"goods-action",attrs:{_hid:21}},[a("text",{staticClass:"text-price text-red text-lg",staticStyle:{"font-size":"40rpx"},attrs:{_hid:22}},[t._v(t._s(t.goods.price),23)])])])]),t._ri(!(null==t.order.ship_no),24)?a("view",{staticClass:"cu-item arrow",attrs:{_hid:24}},[a("view",{staticClass:"content",attrs:{_hid:25}},[a("text",{attrs:{_hid:26}},[t._v(t._s(t.shipArray[t.order.ship_type])+"运单号",27)])]),a("view",{staticClass:"action",attrs:{_hid:28}},[a("text",{staticClass:" text-sm",attrs:{_hid:29}},[t._v(t._s(t.order.ship_no),30)])])]):t._e(),a("view",{staticClass:"cu-item",attrs:{_hid:31}},[a("view",{staticClass:"content",attrs:{_hid:32}},[a("text",{attrs:{_hid:33}},[])]),a("view",{staticClass:"action",attrs:{_hid:35}},[a("text",{staticClass:" text-sm",attrs:{_hid:36}},[t._v(t._s(t.order.receiver),37)])])]),a("view",{staticClass:"cu-item",attrs:{_hid:38}},[a("view",{staticClass:"content",attrs:{_hid:39}},[a("text",{attrs:{_hid:40}},[])]),a("view",{staticClass:"action",attrs:{_hid:42}},[a("text",{staticClass:" text-sm",attrs:{_hid:43}},[t._v(t._s(t.order.phone),44)])])]),a("view",{staticClass:"cu-item",attrs:{_hid:45}},[a("view",{staticClass:"content",attrs:{_hid:46}},[a("text",{attrs:{_hid:47}},[])]),a("view",{staticClass:"action",attrs:{_hid:49}},[a("text",{staticClass:" text-sm",attrs:{_hid:50}},[t._v(t._s(t.order.address),51)])])]),a("view",{staticClass:"cu-item",attrs:{_hid:52}},[a("view",{staticClass:"content",attrs:{_hid:53}},[a("text",{attrs:{_hid:54}},[])]),a("view",{staticClass:"action",attrs:{_hid:56}},[a("text",{staticClass:" text-sm",attrs:{_hid:57}},[t._v(t._s(t.order.code),58)])])]),a("view",{staticClass:"cu-item",attrs:{_hid:59}},[a("view",{staticClass:"content",attrs:{_hid:60}},[a("text",{attrs:{_hid:61}},[])]),a("view",{staticClass:"action",attrs:{_hid:63}},[a("text",{staticClass:" text-sm",attrs:{_hid:64}},[t._v(t._s(t.order.createTimeLabel),65)])])]),a("view",{staticClass:"cu-item",attrs:{_hid:66}},[a("view",{staticClass:"content",attrs:{_hid:67}},[a("text",{attrs:{_hid:68}},[])]),a("view",{staticClass:"action",attrs:{_hid:70}},[a("text",{staticClass:" text-sm",attrs:{_hid:71}},[t._v(t._s(t.order.style),72)])])]),a("view",{staticClass:"cu-item",attrs:{_hid:73}},[a("view",{staticClass:"content",attrs:{_hid:74}},[a("text",{attrs:{_hid:75}},[])]),a("view",{staticClass:"action",attrs:{_hid:77}},[a("text",{staticClass:" text-price text-xl text-red",attrs:{_hid:78}},[t._v(t._s(t.order.goods_price),79)])])]),a("view",{staticClass:"cu-item",attrs:{_hid:80}},[a("view",{staticClass:"content",attrs:{_hid:81}},[a("text",{attrs:{_hid:82}},[])]),a("view",{staticClass:"action",attrs:{_hid:84}},[a("text",{staticClass:" text-xl",attrs:{_hid:85}},[t._v(t._s(t.order.number),86)])])]),t._ri(!!(t.order.take_type>0),87)?a("view",{staticClass:"cu-item",attrs:{_hid:87}},[a("view",{staticClass:"content",attrs:{_hid:88}},[a("text",{attrs:{_hid:89}},[])]),a("view",{staticClass:"action",attrs:{_hid:91}},[a("text",{staticClass:" text-price text-xl text-red",attrs:{_hid:92}},[t._v(t._s(t.order.post_fee),93)])])]):t._e(),t._ri(!(null==t.order.discount_label),94)?a("view",{staticClass:"cu-item",attrs:{_hid:94}},[a("view",{staticClass:"content",attrs:{_hid:95}},[a("text",{attrs:{_hid:96}},[t._v(t._s(t.order.discount_label),97)])]),a("view",{staticClass:"action",attrs:{_hid:98}},[a("text",{staticClass:" text-price text-xl text-red",attrs:{_hid:99}},[t._v(t._s(t.order.discount_amount),100)])])]):t._e(),a("view",{staticClass:"cu-item",attrs:{_hid:101}},[a("view",{staticClass:"content",attrs:{_hid:102}},[a("text",{attrs:{_hid:103}},[])]),a("view",{staticClass:"action",attrs:{_hid:105}},[a("text",{staticClass:" text-price text-xl text-red",attrs:{_hid:106}},[t._v(t._s(t.order.amount),107)])])]),a("view",{staticClass:"cu-item",attrs:{_hid:108}},[a("view",{staticClass:"content",attrs:{_hid:109}},[a("text",{attrs:{_hid:110}},[])]),a("view",{staticClass:"action",attrs:{_hid:112}},[a("text",{staticClass:" text-sm",attrs:{_hid:113}},[t._v(t._s(t.order.remark),114)])])]),t._ri(!(null==t.refund),115)?a("block",{attrs:{_hid:115}},[a("view",{staticClass:"cu-item",attrs:{_hid:116}},[a("view",{staticClass:"content",attrs:{_hid:117}},[a("text",{attrs:{_hid:118}},[])]),a("view",{staticClass:"action",attrs:{_hid:120}},[a("text",{staticClass:" text-sm",attrs:{_hid:121}},[t._v(t._s(t.refund.refund_code),122)])])]),a("view",{staticClass:"cu-item",attrs:{_hid:123}},[a("view",{staticClass:"content",attrs:{_hid:124}},[a("text",{attrs:{_hid:125}},[])]),a("view",{staticClass:"action",attrs:{_hid:127}},[a("text",{staticClass:" text-sm",attrs:{_hid:128}},[t._v(t._s(t.refund.reason),129)])])])]):t._e(),a("view",{staticClass:"padding flex flex-direction",attrs:{_hid:130}},[t._ri(!(t.user.uid!=t.order.uid),131)?a("block",{attrs:{_hid:131}},[a("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{_hid:132},on:{tap:t.contactSeller}},[]),t._ri(!(0!=t.order.status),134)?a("block",{attrs:{_hid:134}},[a("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{_hid:135},on:{tap:t.pay}},[]),a("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{_hid:137},on:{tap:t.orderCancel}},[])],1):t._e(),t._ri(!(1!=t.order.status),139)?a("block",{attrs:{_hid:139}},[a("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{"data-target":"申请退货",_hid:140},on:{tap:t.showModal}},[])],1):t._e(),t._ri(!(2!=t.order.status),142)?a("block",{attrs:{_hid:142}},[a("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{_hid:143},on:{tap:t.confirm}},[]),a("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{"data-target":"申请退货",_hid:145},on:{tap:t.showModal}},[])],1):t._e()],1):t._e(),t._ri(!(t.user.uid==t.order.uid),147)?a("block",{attrs:{_hid:147}},[a("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{_hid:148},on:{tap:t.contactBuyer}},[]),t._ri(!(1!=t.order.status),150)?a("block",{attrs:{_hid:150}},[a("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{"data-target":"同意退货",_hid:151},on:{tap:t.showModal}},[]),a("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{"data-target":"拒绝退货",_hid:153},on:{tap:t.showModal}},[])],1):t._e(),t._ri(!(2!=t.order.status),155)?a("block",{attrs:{_hid:155}},[a("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{_hid:156},on:{tap:t.orderSellerCancel}},[])],1):t._e()],1):t._e()],1)],1)]),t._ri(!("申请退货"!=t.modalName),158)?a("view",{staticClass:"cu-modal show",attrs:{_hid:158}},[a("view",{staticClass:"cu-dialog",attrs:{_hid:159}},[a("view",{staticClass:"cu-bar bg-white justify-end",attrs:{_hid:160}},[a("view",{staticClass:"content text-bold",attrs:{_hid:161}},[t._v(t._s(t.modalName),162)]),a("view",{staticClass:"action",attrs:{_hid:163},on:{tap:t.hideModal}},[a("text",{staticClass:"cuIcon-close text-red",attrs:{_hid:164}})])]),a("view",{staticClass:"padding",attrs:{_hid:165}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticClass:"text-xl text-black",staticStyle:{width:"100%",height:"200rpx"},attrs:{maxlength:"-1",placeholder:"请输入退货理由",_hid:166},domProps:{value:t.reason},on:{input:function(s){s.target.composing||(t.reason=s.target.value)}}})]),a("view",{staticClass:"cu-bar bg-white justify-end",attrs:{_hid:167}},[a("view",{staticClass:"action",attrs:{_hid:168}},[a("button",{staticClass:"cu-btn line-pink text-pink",attrs:{_hid:169},on:{tap:t.hideModal}},[]),a("button",{staticClass:"cu-btn bg-pink margin-left",attrs:{_hid:171},on:{tap:t.orderRefund}},[])],1)])])]):t._e(),t._ri(!("拒绝退货"!=t.modalName),173)?a("view",{staticClass:"cu-modal show",attrs:{_hid:173}},[a("view",{staticClass:"cu-dialog",attrs:{_hid:174}},[a("view",{staticClass:"cu-bar bg-white justify-end",attrs:{_hid:175}},[a("view",{staticClass:"content text-bold",attrs:{_hid:176}},[t._v(t._s(t.modalName),177)]),a("view",{staticClass:"action",attrs:{_hid:178},on:{tap:t.hideModal}},[a("text",{staticClass:"cuIcon-close text-red",attrs:{_hid:179}})])]),a("view",{staticClass:"padding",attrs:{_hid:180}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticClass:"text-xl text-black",staticStyle:{width:"100%",height:"200rpx"},attrs:{maxlength:"-1",placeholder:"请输入拒绝理由",_hid:181},domProps:{value:t.reason},on:{input:function(s){s.target.composing||(t.reason=s.target.value)}}})]),a("view",{staticClass:"cu-bar bg-white justify-end",attrs:{_hid:182}},[a("view",{staticClass:"action",attrs:{_hid:183}},[a("button",{staticClass:"cu-btn line-pink text-pink",attrs:{_hid:184},on:{tap:t.hideModal}},[]),a("button",{staticClass:"cu-btn bg-pink margin-left",attrs:{_hid:186},on:{tap:t.refundRefuse}},[])],1)])])]):t._e(),t._ri(!("同意退货"!=t.modalName),188)?a("view",{staticClass:"cu-modal show",attrs:{_hid:188}},[a("view",{staticClass:"cu-dialog",attrs:{_hid:189}},[a("view",{staticClass:"cu-bar bg-white justify-end",attrs:{_hid:190}},[a("view",{staticClass:"content text-bold",attrs:{_hid:191}},[t._v(t._s(t.modalName),192)]),a("view",{staticClass:"action",attrs:{_hid:193},on:{tap:t.hideModal}},[a("text",{staticClass:"cuIcon-close text-red",attrs:{_hid:194}})])]),a("view",{staticClass:"padding-xl text-black text-xl",attrs:{_hid:195}},[]),a("view",{staticClass:"cu-bar bg-white justify-end",attrs:{_hid:197}},[a("view",{staticClass:"action",attrs:{_hid:198}},[a("button",{staticClass:"cu-btn line-pink text-pink",attrs:{_hid:199},on:{tap:t.hideModal}},[]),a("button",{staticClass:"cu-btn bg-pink margin-left",attrs:{_hid:201},on:{tap:t.refundPass}},[])],1)])])]):t._e()],1)},i=[];a.d(s,"a",function(){return e}),a.d(s,"b",function(){return i})},ed66:function(t,s,a){"use strict";a("719a");var e=r(a("8122")),i=r(a("3a53"));function r(t){return t&&t.__esModule?t:{default:t}}e.default.mpType="page";var o=new i.default(e.default);o.$mount()},f128:function(t,s,a){}},[["ed66","common/runtime","common/vendor"]]]);