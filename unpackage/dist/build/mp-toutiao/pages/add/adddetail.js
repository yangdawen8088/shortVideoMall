(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/add/adddetail"],{1883:function(t,i,e){},"19cb":function(t,i,e){"use strict";var a=e("1883"),s=e.n(a);s.a},"741e":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={data:function(){return{system:this.systemInfo(),goodsImages:{},goodsImgHeightInit:300,detaillist:[],editIndex:-1}},onLoad:function(t){var i=t.detail;i&&(this.detaillist=JSON.parse(i))},methods:{adddetail:function(i){var e=this,a=i.currentTarget.dataset.index;t.showActionSheet({itemList:["图片","文本"],success:function(i){if(console.log("选中了第"+(i.tapIndex+1)+"个按钮"),0==i.tapIndex&&t.chooseImage({count:1,sizeType:["compressed"],sourceType:["album"],success:function(i){console.log(JSON.stringify(i.tempFilePaths)),t.showLoading({title:"加载中"}),e.loading=!0,t.uploadFile({url:"https://www.dpsoft.top/upload.jsp",filePath:i.tempFilePaths[0],name:"file",success:function(t){console.log(t.data);var i=JSON.parse(t.data);if("ok"==i.status){var s=i.data,d="http://www.dpsoft.top/"+s,n={type:"image"};n.value=d,null!=a?e.detaillist.splice(a,0,n):e.detaillist.push(n)}},complete:function(){t.hideLoading()}})}}),1==i.tapIndex){var s={type:"text",value:""};null!=a?e.detaillist.splice(a,0,s):e.detaillist.push(s)}},fail:function(t){console.log(t.errMsg)}})},editText:function(i){var e=this,a=i.currentTarget.dataset.index;this.editIndex!=a&&t.showActionSheet({itemList:["编辑","删除"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮"),0==t.tapIndex&&(e.editIndex=a),1==t.tapIndex&&e.detaillist.splice(a,1)}})},editFinish:function(){this.editIndex=-1},editImage:function(i){var e=this,a=i.currentTarget.dataset.index;t.showActionSheet({itemList:["删除"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮"),0==t.tapIndex&&e.detaillist.splice(a,1)}})},goodsImageLoad:function(t){var i=t.target.id,e=t.target.height,a=t.target.width,s=690*this.system.windowWidth/750,d=e*s/a;this.goodsImages[i]={width:s,height:d},this.goodsImgHeightInit=d},submit:function(){this.detaillist.length<=0?t.showToast({icon:"none",title:"您还没有添加详情"}):(t.setStorageSync("detail",JSON.stringify(this.detaillist)),t.navigateBack({}))}}};i.default=e}).call(this,e("f266")["default"])},7646:function(t,i,e){"use strict";e("719a");var a=d(e("ce8c")),s=d(e("3a53"));function d(t){return t&&t.__esModule?t:{default:t}}a.default.mpType="page";var n=new s.default(a.default);n.$mount()},ae82:function(t,i,e){"use strict";e.r(i);var a=e("741e"),s=e.n(a);for(var d in a)"default"!==d&&function(t){e.d(i,t,function(){return a[t]})}(d);i["default"]=s.a},ce8c:function(t,i,e){"use strict";e.r(i);var a=e("cfa4"),s=e("ae82");for(var d in s)"default"!==d&&function(t){e.d(i,t,function(){return s[t]})}(d);e("19cb");var n=e("2877"),o=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,null,null);i["default"]=o.exports},cfa4:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("view",{staticClass:"detail bg-gradual-pink",staticStyle:{position:"fixed",width:"100%",height:"100%"},style:{paddingTop:t.system.statusBarHeight+"px"},attrs:{_hid:0}},[e("view",{staticClass:"cu-bar ",staticStyle:{position:"fixed","z-index":"1",width:"100%"},attrs:{_hid:1}},[e("view",{staticClass:"action",attrs:{_hid:2},on:{tap:t.back}},[e("text",{staticClass:"cuIcon-back",attrs:{_hid:3}})]),e("view",{staticClass:"content text-bold",attrs:{_hid:4}},[])]),e("scroll-view",{staticClass:"scroll",staticStyle:{width:"100%",height:"100%",padding:"100rpx 0"},attrs:{"scroll-y":"true",_hid:6}},[t._l(t.detaillist,function(i,a,s){var d=void 0!==s?s:a;return e("block",{key:a,attrs:{_hid:7,_fid:d,_fk:"index"}},[e("view",{staticClass:"flex flex-direction solid-bottom bg-white",attrs:{_hid:8,_fid:d}},[e("button",{staticClass:"cu-btn block line-grey lg",attrs:{"data-index":a,_hid:9,_fid:d,_batrs:"data-index"},on:{tap:t.adddetail}},[e("text",{staticClass:"cuIcon-add",attrs:{_hid:10,_fid:d}})])],1),t._ri(!("image"!=i.type),12,void 0!==s?s:a)?e("view",{staticClass:" flex flex-direction solid-bottom",staticStyle:{padding:"0 30rpx","background-color":"white"},attrs:{_hid:12,_fid:d}},[e("image",{style:{height:(t.goodsImages["goodsimg"+a]?t.goodsImages["goodsimg"+a].height:t.goodsImgHeightInit)+"px"},attrs:{"data-index":a,src:i.value,id:"goodsimg"+a,_hid:13,_fid:d,_batrs:"data-index,src,id"},on:{tap:t.editImage,load:t.goodsImageLoad}})]):t._e(),t._ri(!("text"!=i.type),14,void 0!==s?s:a)?e("view",{staticClass:" flex flex-direction solid-bottom bg-white text-black",staticStyle:{padding:"0 30rpx"},attrs:{_hid:14,_fid:d}},[e("textarea",{attrs:{"data-index":a,maxlength:"-1",placeholder:"请输入商品描述",_hid:15,_fid:d,_batrs:"data-index"},on:{focus:t.editText,blur:t.editFinish}})]):t._e()])},7,t._self),e("view",{staticClass:" flex flex-direction bg-white",attrs:{_hid:16}},[e("button",{staticClass:"cu-btn block line-grey lg",attrs:{_hid:17},on:{tap:t.adddetail}},[e("text",{staticClass:"cuIcon-add",attrs:{_hid:18}})])],1)],1),e("view",{staticClass:"cu-bar bg-white tabbar border shop fixed ",staticStyle:{top:"unset",bottom:"0","z-index":"100"},attrs:{_hid:20}},[e("view",{staticClass:"flex-sub bg-pink submit",attrs:{_hid:21},on:{tap:t.submit}},[])])],1)},s=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return s})}},[["7646","common/runtime","common/vendor"]]]);