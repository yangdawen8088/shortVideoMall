(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/add/add"],{"0988":function(t,s,o){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o={data:function(){return{system:this.systemInfo(),location:{},locationName:"请选择",select:!1,videoPath:"",goods:{},videodesc:""}},onShow:function(){var s=t.getStorageSync("goods");s&&(this.goods=JSON.parse(s),t.removeStorage({key:"goods"}))},methods:{close:function(){t.switchTab({url:"/pages/video/main"})},chooseLocation:function(){var s=this;t.chooseLocation({success:function(t){console.log("位置名称："+t.name),console.log("详细地址："+t.address),console.log("纬度："+t.latitude),console.log("经度："+t.longitude),s.location=t,s.locationName=t.name}})},selectGoods:function(){this.select=!0},hideModal:function(){this.select=!1},selectVideo:function(){var s=this;t.chooseVideo({success:function(t){s.videoPath=t.tempFilePath}})},reselectVideo:function(){var s=this;t.showActionSheet({itemList:["重新选择"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮"),s.selectVideo()},fail:function(t){console.log(t.errMsg)}})},newgoods:function(){var s=this;t.navigateTo({url:"/pages/add/addform",success:function(){s.hideModal()}})},goodslist:function(s){var o=this,i=s.currentTarget.dataset.type;t.navigateTo({url:"/pages/add/goodslist?type="+i,success:function(){o.hideModal()}})},submit:function(){var s=this;this.goods.goodsTitle?this.videoPath.trim().length<=0?t.showToast({icon:"none",title:"请上传短视频"}):this.videodesc.trim().length<=0?t.showToast({icon:"none",title:"请填写推荐理由"}):this.location.name?(t.showLoading({title:"发布中",mask:!0}),t.uploadFile({url:"http://www.dpsoft.top/upload.jsp",filePath:this.videoPath,name:"file",success:function(o){console.log(o.data);var i=JSON.parse(o.data);if("ok"==i.status){var e=d.data,a="http://www.dpsoft.top/"+e,d={};d.videopath=a,d.goodsid=s.goods.goodsId,d.goodsimg=s.goods.goodsImg,d.goodsplatform=s.goods.platform,d.goodstitle=s.goods.goodsTitle,d.goodsprice=s.goods.goodsPrice,d.goodsnick=s.goods.goodsSeller,d.goodsarea=s.goods.goodsArea,d.goodsurl=s.goods.goodsUrl,d.videodesc=s.videodesc,d.locationname=s.location.name,d.locationaddr=s.location.address,d.locationlat=s.location.latitude,d.locationlng=s.location.longitude,d.coverImgUrl=s.goods.goodsImg,s.postJson({path:"video_publish.jsp",data:d,success:function(s){"ok"==s.data.status?t.navigateBack({}):t.showToast({icon:"none",title:d.msg})},complete:function(){t.hideLoading()}})}else t.hideLoading(),t.showToast({icon:"none",title:i.msg})},fail:function(s){t.hideLoading()}})):t.showToast({icon:"none",title:"请选择地理位置"}):t.showToast({icon:"none",title:"请选择商品"})}}};s.default=o}).call(this,o("f266")["default"])},1087:function(t,s,o){"use strict";o.r(s);var i=o("30a3"),e=o("73ba");for(var a in e)"default"!==a&&function(t){o.d(s,t,function(){return e[t]})}(a);o("474b");var d=o("2877"),c=Object(d["a"])(e["default"],i["a"],i["b"],!1,null,null,null);s["default"]=c.exports},"30a3":function(t,s,o){"use strict";var i=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("view",{staticClass:"bg-gradual-pink",staticStyle:{position:"fixed",width:"100%",height:"100%"},style:{paddingTop:t.system.statusBarHeight+"px"},attrs:{_hid:0}},[o("view",{staticClass:"cu-bar ",attrs:{_hid:1}},[o("view",{staticClass:"action",attrs:{_hid:2},on:{tap:t.close}},[o("text",{staticClass:"cuIcon-back",attrs:{_hid:3}})]),o("view",{staticClass:"content text-bold",attrs:{_hid:4}},[])]),o("view",{staticClass:"cu-list menu bg-white",attrs:{_hid:6}},[o("view",{staticClass:"grid text-center col-1",attrs:{_hid:7}},[t._ri(!(null!=t.goods.goodsTitle),8)?o("view",{staticClass:"padding-xl solids-bottom",attrs:{_hid:8},on:{tap:t.selectGoods}},[o("text",{staticClass:"cuIcon-add ",staticStyle:{"font-size":"140rpx",display:"block","line-height":"0.8"},attrs:{_hid:9}}),o("text",{attrs:{_hid:10}},[])]):t._e(),t._ri(!(null==t.goods.goodsTitle),12)?o("view",{staticClass:"cu-item order text-left",attrs:{_hid:12}},[o("view",{staticClass:"cu-avatar radius",style:{backgroundImage:"url("+t.goods.goodsImg+")"},attrs:{_hid:13}}),o("view",{staticClass:"content",attrs:{_hid:14}},[o("view",{staticClass:"text-grey goods-title",attrs:{_hid:15}},[t._v(t._s(t.goods.goodsTitle),16)]),o("view",{staticClass:"text-gray text-sm goods-seller",attrs:{_hid:17}},[o("text",{attrs:{_hid:18}},[o("text",{staticClass:"cuIcon-shop text-red  margin-right-xs",attrs:{_hid:19}}),t._v(t._s(t.goods.goodsSeller),20),o("text",{staticClass:"fr",attrs:{_hid:21}},[t._v(t._s(t.goods.goodsArea),22)])])]),o("view",{staticClass:"goods-action",attrs:{_hid:23}},[o("text",{staticClass:"text-price text-red text-lg",staticStyle:{"font-size":"40rpx"},attrs:{_hid:24}},[t._v(t._s(t.goods.goodsPrice),25)])])])]):t._e(),t._ri(!(""!=t.videoPath),26)?o("view",{staticClass:"padding-xl solids-bottom",attrs:{_hid:26},on:{tap:t.selectVideo}},[o("text",{staticClass:"cuIcon-add ",staticStyle:{"font-size":"140rpx",display:"block","line-height":"0.8"},attrs:{_hid:27}}),o("text",{attrs:{_hid:28}},[])]):t._e(),t._ri(!(""==t.videoPath),30)?o("view",{staticClass:"solids-bottom",attrs:{_hid:30}},[o("video",{staticStyle:{height:"500rpx",width:"100%"},attrs:{src:t.videoPath,objectFit:"contain",_hid:31,_batrs:"src"},on:{tap:t.reselectVideo}})]):t._e()]),o("view",{staticClass:"padding solid-bottom",attrs:{_hid:32}},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.videodesc,expression:"videodesc"}],staticClass:"text-xl",staticStyle:{height:"100rpx",width:"100%"},attrs:{maxlength:"-1",placeholder:"请输入推荐理由",_hid:33},domProps:{value:t.videodesc},on:{input:function(s){s.target.composing||(t.videodesc=s.target.value)}}})]),o("view",{staticClass:"cu-item arrow",attrs:{_hid:34},on:{tap:t.chooseLocation}},[t._m(0),o("view",{staticClass:"action",attrs:{_hid:38}},[o("text",{staticClass:" text-sm",attrs:{_hid:39}},[t._v(t._s(t.locationName),40)])])])]),o("view",{staticClass:"padding flex flex-direction",attrs:{_hid:41}},[o("view",{staticClass:"text-yellow text-sm",attrs:{_hid:42}},[]),o("button",{staticClass:"cu-btn bg-pink margin-tb-sm lg",attrs:{_hid:44},on:{tap:t.submit}},[])],1),t._ri(!!t.select,46)?o("view",{staticClass:"cu-modal bottom-modal show",attrs:{_hid:46}},[o("view",{staticStyle:{position:"absolute",width:"100%",height:"100%",top:"0"},attrs:{_hid:47},on:{tap:t.hideModal}}),o("view",{staticClass:"cu-dialog bg-gradual-pink",staticStyle:{padding:"40rpx 0"},attrs:{_hid:48}},[o("view",{staticClass:"cu-list grid col-4 no-border",staticStyle:{background:"none"},attrs:{_hid:49}},[o("view",{staticClass:"cu-item",attrs:{_hid:50},on:{tap:t.newgoods}},[o("view",{staticClass:"cuIcon-add",staticStyle:{"font-size":"80rpx"},attrs:{_hid:51}}),o("text",{staticClass:"text-white",staticStyle:{color:"white"},attrs:{_hid:52}},[])]),o("view",{staticClass:"cu-item",attrs:{"data-type":"2",_hid:54},on:{tap:t.goodslist}},[o("view",{staticClass:"cuIcon-apps",staticStyle:{"font-size":"80rpx"},attrs:{_hid:55}}),o("text",{staticStyle:{color:"white"},attrs:{_hid:56}},[])]),o("view",{staticClass:"cu-item",attrs:{"data-type":"3",_hid:58},on:{tap:t.goodslist}},[o("view",{staticClass:"cuIcon-order",staticStyle:{"font-size":"80rpx"},attrs:{_hid:59}}),o("text",{staticStyle:{color:"white"},attrs:{_hid:60}},[])]),o("view",{staticClass:"cu-item",attrs:{"data-type":"4",_hid:62},on:{tap:t.goodslist}},[o("view",{staticClass:"cuIcon-choiceness",staticStyle:{"font-size":"80rpx"},attrs:{_hid:63}}),o("text",{staticStyle:{color:"white"},attrs:{_hid:64}},[])])])])]):t._e()])},e=[function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("view",{staticClass:"content",attrs:{_hid:35}},[o("text",{attrs:{_hid:36}},[])])}];o.d(s,"a",function(){return i}),o.d(s,"b",function(){return e})},"474b":function(t,s,o){"use strict";var i=o("e746"),e=o.n(i);e.a},"630c":function(t,s,o){"use strict";o("719a");var i=a(o("1087")),e=a(o("3a53"));function a(t){return t&&t.__esModule?t:{default:t}}i.default.mpType="page";var d=new e.default(i.default);d.$mount()},"73ba":function(t,s,o){"use strict";o.r(s);var i=o("0988"),e=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(s,t,function(){return i[t]})}(a);s["default"]=e.a},e746:function(t,s,o){}},[["630c","common/runtime","common/vendor"]]]);