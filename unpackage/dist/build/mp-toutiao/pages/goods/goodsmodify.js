(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goodsmodify"],{3196:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"addform bg-gradual-pink",staticStyle:{position:"fixed",width:"100%",height:"100%"},style:{paddingTop:t.system.statusBarHeight+"px"},attrs:{_hid:0}},[a("view",{staticClass:"cu-bar ",staticStyle:{position:"fixed","z-index":"1",width:"100%"},attrs:{_hid:1}},[a("view",{staticClass:"action",attrs:{_hid:2},on:{tap:t.back}},[a("text",{staticClass:"cuIcon-back",attrs:{_hid:3}})]),a("view",{staticClass:"content text-bold",attrs:{_hid:4}},[])]),a("scroll-view",{staticStyle:{width:"100%",height:"100%","padding-top":"100rpx"},attrs:{"scroll-y":"true",_hid:6}},[a("view",{staticClass:"cu-list menu sm-border solid-bottom text-white",staticStyle:{"border-color":"white","margin-top":"0"},attrs:{_hid:7}},[a("view",{staticClass:"cu-item",attrs:{_hid:8}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticStyle:{height:"200rpx",width:"100%",color:"white","font-size":"40rpx"},attrs:{maxlength:"-1",placeholder:"请输入商品标题",_hid:9},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),a("view",{staticClass:"cu-item",attrs:{_hid:10}},[a("view",{staticClass:"content",attrs:{_hid:11}},[a("text",{staticClass:"text-white",attrs:{_hid:12}},[])]),a("view",{staticClass:"action",attrs:{_hid:14}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.seller,expression:"seller"}],staticStyle:{color:"white"},attrs:{placeholder:"输入店名/品牌",_hid:15},domProps:{value:t.seller},on:{input:function(e){e.target.composing||(t.seller=e.target.value)}}})])]),a("view",{staticClass:"cu-item arrow",attrs:{_hid:16}},[a("view",{staticClass:"content",attrs:{_hid:17}},[a("text",{staticClass:"text-white",attrs:{_hid:18}},[])]),a("view",{staticClass:"action",attrs:{_hid:20}},[a("picker",{attrs:{range:["门店消费","邮寄配送","免邮配送"],_hid:21,_batrs:"range"},on:{change:t.setTakeType},model:{value:t.takeType,callback:function(e){t.takeType=e},expression:"takeType"}},[a("view",{staticClass:"picker",attrs:{_hid:22}},[t._v(t._s(["门店消费","邮寄配送","免邮配送"][t.takeType]),23)])])],1)]),t._ri(!(1!=t.takeType),24)?a("view",{staticClass:"cu-item",attrs:{_hid:24}},[a("view",{staticClass:"content",attrs:{_hid:25}},[a("text",{staticClass:"text-white",attrs:{_hid:26}},[])]),a("view",{staticClass:"action",attrs:{_hid:28}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.postFee,expression:"postFee"}],staticStyle:{color:"white"},attrs:{placeholder:"输入邮寄费用",type:"digit",_hid:29},domProps:{value:t.postFee},on:{input:function(e){e.target.composing||(t.postFee=e.target.value)}}})])]):t._e(),a("view",{staticClass:"cu-item arrow",attrs:{_hid:30}},[a("view",{staticClass:"content",attrs:{_hid:31}},[a("text",{staticClass:"text-white",attrs:{_hid:32}},[])]),a("view",{staticClass:"action",attrs:{_hid:34}},[a("picker",{attrs:{mode:"multiSelector",value:t.categoryIndex,range:t.categoryArray,_hid:35,_batrs:"value,range"},on:{change:t.setCategory,columnchange:t.categoryChange}},[a("view",{staticClass:"picker",attrs:{_hid:36}},[t._v(t._s(t.categoryLabel),37)])])],1)]),t._l(t.stylelist,function(e,i,s){var o=void 0!==s?s:i;return a("view",{key:i,staticClass:"cu-item arrow",attrs:{"data-index":i,_hid:38,_fid:o,_batrs:"data-index",_fk:"index"},on:{tap:t.addStyle}},[a("view",{staticClass:"content",attrs:{_hid:39,_fid:o}},[a("text",{staticClass:"text-white",attrs:{_hid:40,_fid:o}},[t._v(t._s(e.styleName),41,o)])]),a("view",{staticClass:"action",attrs:{_hid:42,_fid:o}},[a("text",{staticClass:"text-white text-sm",attrs:{_hid:43,_fid:o}},[t._v(t._s(e.promotePrice?"促销¥"+e.promotePrice:"¥"+e.goodsPrice),44,o)])])])},38,t._self),a("view",{staticClass:"padding flex flex-direction",attrs:{_hid:45}},[a("button",{staticClass:"cu-btn block line-white lg",attrs:{_hid:46},on:{tap:t.addStyle}},[a("text",{staticClass:"cuIcon-add",attrs:{_hid:47}})])],1),a("view",{staticClass:"cu-item arrow",attrs:{_hid:49},on:{tap:t.chooseLocation}},[a("view",{staticClass:"content",attrs:{_hid:50}},[a("text",{staticClass:"text-white",attrs:{_hid:51}},[])]),a("view",{staticClass:"action",attrs:{_hid:53}},[a("text",{staticClass:"text-white text-sm",attrs:{_hid:54}},[t._v(t._s(t.locationName),55)])])]),a("view",{staticClass:"cu-item arrow",attrs:{_hid:56},on:{tap:t.addDetail}},[a("view",{staticClass:"content",attrs:{_hid:57}},[a("text",{staticClass:"text-white",attrs:{_hid:58}},[])]),a("view",{staticClass:"action",attrs:{_hid:60}},[a("text",{staticClass:"text-white text-sm",attrs:{_hid:61}},[t._v(t._s(t.detaillist.length>0?"已编辑":"未编辑"),62)])])]),a("view",{staticClass:"cu-item arrow",attrs:{_hid:63}},[a("view",{staticClass:"content",attrs:{_hid:64}},[a("text",{staticClass:"text-white",attrs:{_hid:65}},[])]),a("view",{staticClass:"action",attrs:{_hid:67}},[a("text",{staticClass:"text-white text-sm",attrs:{_hid:68}},[])])]),a("view",{staticClass:"padding flex flex-direction",attrs:{_hid:70}},[a("button",{staticClass:"cu-btn bg-red margin-tb-sm lg",attrs:{_hid:71},on:{tap:t.submit}},[]),a("button",{staticClass:"cu-btn bg-red margin-tb-sm lg",staticStyle:{"background-color":"red"},attrs:{_hid:73},on:{tap:t.del}},[])],1)],1)])],1)},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},"3fe5":function(t,e,a){"use strict";a.r(e);var i=a("3196"),s=a("d1ab");for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a("b40f");var r=a("2877"),l=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,null,null);e["default"]=l.exports},"69ff":function(t,e,a){"use strict";a("719a");var i=o(a("3fe5")),s=o(a("3a53"));function o(t){return t&&t.__esModule?t:{default:t}}i.default.mpType="page";var r=new s.default(i.default);r.$mount()},"83c9":function(t,e,a){},9778:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{system:this.systemInfo(),title:"",seller:"",takeType:2,categoryArray:[["请选择"],["请选择"]],categoryIndex:[0,0],categoryLabel:"请选择",categoryData:[],categoryCode:"",stylelist:[],detaillist:[],location:{},locationName:"请选择",postFee:0,goods:{}}},onLoad:function(t){var e=this,a=t.id;this.postJson({path:"/goods_new_detail.jsp",data:{goodsid:a},success:function(t){if("ok"==t.data.status){var a=t.data.data;if(e.goods=a,e.title=a.title,e.seller=a.seller,e.takeType=a.take_type,e.categoryCode=a.category,e.stylelist=a.style,e.detaillist=a.detail,e.location.longitude=a.lng,e.location.latitude=a.lat,e.location.name=a.location,e.location.address=a.location,e.locationName=a.location,e.postFee=a.post_fee,e.categoryData.length>0){var i=!1;for(var s in e.categoryData){var o=e.categoryData[s];for(var r in o.child){var l=o.child[r];if(l.key==e.categoryCode){e.categoryIndex=[s,r],e.categoryLabel=o.name+" - "+l.name,i=!0;break}}if(i)break}}}}}),this.postJson({path:"/goods_category_query.jsp",data:{},success:function(t){if("ok"==t.data.status){for(var a in e.categoryData=t.data.data,e.categoryArray[0]=[],t.data.data){var i=t.data.data[a];e.categoryArray[0].push(i.name)}for(var s in e.categoryArray[1]=[],t.data.data[0].child){var o=t.data.data[0].child[s];e.categoryArray[1].push(o.name)}if(e.categoryLabel=e.categoryArray[0][0]+" - "+e.categoryArray[1][0],e.categoryCode.length>0){var r=!1;for(var l in e.categoryData){var n=e.categoryData[l];for(var c in n.child){var d=n.child[c];if(d.key==e.categoryCode){e.categoryIndex=[l,c],e.categoryLabel=n.name+" - "+d.name,r=!0;break}}if(r)break}}}}})},onShow:function(){var e=t.getStorageSync("style");if(e){console.log(e);var a=JSON.parse(e),i=!1;for(var s in this.stylelist)if(this.stylelist[s].styleName==a.styleName){i=!0,a.delete?this.stylelist.splice(s,1):this.stylelist.splice(s,1,a);break}i||this.stylelist.push(a)}t.removeStorage({key:"style"});var o=t.getStorageSync("detail");o&&(console.log(o),this.detaillist=JSON.parse(o)),t.removeStorage({key:"detail"})},methods:{addStyle:function(e){var a=e.currentTarget.dataset.index,i="";if(null!=a){console.log(a),i+="?";var s=this.stylelist[a];i+="goodsPrice="+s.goodsPrice,i+="&styleName="+s.styleName,s.promotePrice&&(i+="&promotePrice="+s.promotePrice,i+="&promoteStarttime="+s.promoteStarttime,i+="&promoteEndtime="+s.promoteEndtime)}t.navigateTo({url:"/pages/add/addstyle"+i})},addDetail:function(){var e="";if(this.detaillist.length>0){var a=JSON.stringify(this.detaillist);console.log(a),e+="?detail="+a}t.navigateTo({url:"/pages/add/adddetail"+e})},chooseLocation:function(){var e=this;t.chooseLocation({success:function(t){console.log("位置名称："+t.name),console.log("详细地址："+t.address),console.log("纬度："+t.latitude),console.log("经度："+t.longitude),e.location=t,e.locationName=t.name}})},categoryChange:function(t){var e={multiArray:this.categoryArray,multiIndex:this.categoryIndex,multiData:this.categoryData};switch(e.multiIndex[t.detail.column]=t.detail.value,t.detail.column){case 0:var a=e.multiData[t.detail.value].child;for(var i in e.multiArray[1]=[],a){var s=a[i];e.multiArray[1].push(s.name)}this.categoryArray=e.multiArray,this.categoryLabel=this.categoryArray[0][this.categoryIndex[0]]+" - "+this.categoryArray[1][this.categoryIndex[1]];break;case 1:this.categoryLabel=this.categoryArray[0][this.categoryIndex[0]]+" - "+this.categoryArray[1][this.categoryIndex[1]];break}},setCategory:function(t){this.categoryIndex=t.detail.value},submit:function(){if(this.title.trim().length<=0)t.showToast({icon:"none",title:"请输入标题"});else if(this.seller.trim().length<=0)t.showToast({icon:"none",title:"请输入店名"});else if(this.seller.trim().length<=0)t.showToast({icon:"none",title:"请输入店名"});else if(this.stylelist.length<=0)t.showToast({icon:"none",title:"请添加商品规格"});else if(this.seller.trim().length<=0)t.showToast({icon:"none",title:"请输入店名"});else if(this.location.name)if(this.detaillist.length<=0)t.showToast({icon:"none",title:"请编辑商品详情"});else{var e={};e.title=this.title,e.seller=this.seller,e.location=this.location.longitude+","+this.location.latitude,e.takeType=this.takeType,e.category=this.categoryData[this.categoryIndex[0]].child[this.categoryIndex[1]].key,e.goodsDetail=this.detaillist,e.goodsStyle=this.stylelist,e.postFee=this.postFee,e.code=this.goods.code,t.showLoading({title:"加载中",mask:!0}),this.postJson({path:"/goods_new_modify.jsp",data:e,success:function(e){"ok"==e.data.status?t.navigateBack({}):t.showToast({icon:"none",title:e.data.msg})},complete:function(){t.hideLoading()}})}else t.showToast({icon:"none",title:"请选择地理位置"})},del:function(){t.showLoading({title:"加载中",mask:!0}),this.postJson({path:"/goods_new_delete.jsp",data:{code:this.goods.code},success:function(e){"ok"==e.data.status?t.navigateBack({}):t.showToast({icon:"none",title:e.data.msg})},complete:function(){t.hideLoading()}})}}};e.default=a}).call(this,a("f266")["default"])},b40f:function(t,e,a){"use strict";var i=a("83c9"),s=a.n(i);s.a},d1ab:function(t,e,a){"use strict";a.r(e);var i=a("9778"),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=s.a}},[["69ff","common/runtime","common/vendor"]]]);