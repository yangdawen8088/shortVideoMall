(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods"],{"0422":function(t,e,s){"use strict";var i=s("e764"),o=s.n(i);o.a},"2c3b":function(t,e,s){"use strict";s.r(e);var i=s("ced5"),o=s("3975");for(var a in o)"default"!==a&&function(t){s.d(e,t,function(){return o[t]})}(a);s("0422");var l=s("2877"),d=Object(l["a"])(o["default"],i["a"],i["b"],!1,null,null,null);e["default"]=d.exports},3975:function(t,e,s){"use strict";s.r(e);var i=s("de43"),o=s.n(i);for(var a in i)"default"!==a&&function(t){s.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},"7cdf":function(t,e,s){"use strict";s("719a");var i=a(s("2c3b")),o=a(s("3a53"));function a(t){return t&&t.__esModule?t:{default:t}}i.default.mpType="page";var l=new o.default(i.default);l.$mount()},ced5:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"bg-white",attrs:{_hid:0}},[s("view",{staticClass:"cuIcon-roundleftfill-copy",staticStyle:{position:"fixed",color:"rgba(100,100,100,0.7)",left:"30rpx","font-size":"70rpx","z-index":"99"},style:{top:t.system.statusBarHeight+"px"},attrs:{_hid:1},on:{tap:t.back}}),s("scroll-view",{staticClass:"padding bg-white solid-bottom",staticStyle:{"padding-top":"0","padding-bottom":"0"},style:{height:t.system.windowHeight+"px"},attrs:{"scroll-y":"true","scroll-into-view":t.scrollTo,"enable-back-to-top":"true",_hid:2,_batrs:"scroll-into-view"}},[s("view",{staticClass:"flex p-xs  mb-sm",style:{marginTop:t.system.statusBarHeight+30+"px"},attrs:{id:"title",_hid:3}},[s("view",{staticClass:"flex-sub text-black",staticStyle:{"font-size":"40rpx","font-weight":"bold"},attrs:{_hid:4}},[t._v(t._s(t.goods.title),5)])]),s("view",{staticClass:"flex justify-start",attrs:{_hid:6}},[s("view",{staticClass:"padding-sm text-gold-dark",staticStyle:{"font-size":"46rpx","font-weight":"bold",display:"table-cell","vertical-align":"middle"},attrs:{_hid:7}},[t._v(t._s(t.priceLabel),8)]),t._ri(!!t.promoteFlag,9)?s("view",{staticStyle:{display:"table-cell","vertical-align":"middle"},attrs:{_hid:9}},[s("text",{staticClass:"bg-gold-dark",staticStyle:{padding:"5rpx 10rpx",color:"white","border-radius":"10rpx"},attrs:{_hid:10}},[])]):t._e(),t._ri(!!t.promoteFlag,12)?s("view",{staticStyle:{display:"table-cell","vertical-align":"middle"},attrs:{_hid:12}},[s("text",{staticClass:"bg-gold-dark",staticStyle:{"font-size":"32rpx"},attrs:{_hid:13}},[t._v(t._s(t.promoteLabel),14)])]):t._e()]),t._ri(!(null==t.goods.discount_text),15)?s("view",{staticClass:"flex text-lg text-bold margin-bottom-sm",attrs:{_hid:15}},[s("view",{staticClass:"flex-sub",staticStyle:{"padding-left":"0"},attrs:{_hid:16}},[t._v(t._s(t.goods.discount_text),17)])]):t._e(),s("view",{staticClass:"flex text-lg text-bold margin-bottom-sm",attrs:{_hid:18}},[s("view",{staticClass:"flex-sub",staticStyle:{"padding-left":"0"},attrs:{_hid:19}},[]),s("view",{staticClass:"flex-treble",staticStyle:{"text-decoration":"underline"},attrs:{_hid:21}},[s("picker",{attrs:{mode:"selector",value:t.styleIndex,range:t.stylelist,_hid:22,_batrs:"value,range"},on:{change:t.selectStyle}},[t._v(t._s(t.styleIndex>-1?t.goods.style[t.styleIndex].styleName:"请选择"),23)])],1)]),s("view",{staticClass:"flex justify-start margin-bottom-sm align-center",attrs:{_hid:24}},[s("image",{staticStyle:{height:"34rpx",width:"34rpx","border-radius":"10rpx"},attrs:{src:"/static/img/dian_small.png",_hid:25}}),s("view",{staticClass:"text-lg text-bold text-gold-dark",staticStyle:{"margin-left":"10rpx"},attrs:{_hid:26}},[t._v(t._s(t.goods.seller),27)])]),s("view",{staticClass:"flex text-lg text-bold margin-bottom-sm",staticStyle:{display:"table","vertical-align":"middle"},attrs:{_hid:28}},[s("view",{staticStyle:{display:"table-cell","vertical-align":"middle",width:"30%"},attrs:{_hid:29}},[t._v(t._s(t.takeTypeArray[t.goods.take_type]),30),t._ri(!(2!=t.goods.take_type),31)?s("text",{staticClass:"text-price text-gold-dark",attrs:{_hid:31}},[t._v(t._s(t.goods.post_fee),32)]):t._e()]),s("view",{staticStyle:{display:"table-cell","vertical-align":"middle"},attrs:{_hid:33}},[s("image",{staticStyle:{height:"40rpx",width:"40rpx"},attrs:{src:"/static/img/small_location.png",_hid:34}})]),s("view",{staticStyle:{display:"table-cell","font-size":"26rpx","vertical-align":"middle"},attrs:{_hid:35}},[t._v(t._s(t.goods.location),36)])]),s("view",{staticStyle:{border:"solid 0.1rpx #666"},attrs:{_hid:37}}),s("view",{staticStyle:{margin:"20rpx 0","padding-bottom":"100rpx"},attrs:{_hid:38}},t._l(t.detaillist,function(e,i,o){var a=void 0!==o?o:i;return s("block",{key:i,attrs:{_hid:39,_fid:a,_fk:"index"}},[t._ri(!("text"!=e.type),40,void 0!==o?o:i)?s("text",{attrs:{_hid:40,_fid:a}},[t._v(t._s(e.value),41,a)]):t._e(),t._ri(!("image"!=e.type),42,void 0!==o?o:i)?s("image",{staticClass:"goods-img",staticStyle:{width:"100%"},style:{height:(t.goodsImages["goodsimg"+i]?t.goodsImages["goodsimg"+i].height:t.goodsImgHeightInit)+"px"},attrs:{id:"goodsimg"+i,src:e.value,_hid:42,_fid:a,_batrs:"id,src"},on:{load:t.goodsImageLoad}}):t._e()])},39,t._self))]),s("view",{staticClass:"cu-bar bg-white tabbar border shop fixed ",staticStyle:{top:"unset",bottom:"0","z-index":"100"},attrs:{_hid:43}},[s("view",{staticClass:"flex-sub submit cuIcon-messagefill text-white",staticStyle:{flex:"1","font-size":"60rpx","background-color":"#222222"},attrs:{_hid:44},on:{tap:t.contactSeller}}),s("view",{staticClass:"flex-treble bg-gold-dark submit text-white",attrs:{_hid:45},on:{tap:t.buy}},[])])],1)},o=[];s.d(e,"a",function(){return i}),s.d(e,"b",function(){return o})},de43:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={data:function(){return{system:this.systemInfo(),goodsImages:{},goodsImgHeightInit:300,scrollTo:"",goods:{},priceLabel:"",detaillist:[],stylelist:[],styleIndex:-1,promoteFlag:!1,promoteLabel:"",takeTypeArray:["门店消费","免邮","邮费"],price:0}},onLoad:function(e){var s=this,i=e.goodsId;this.init(i);var o=this.getUserInfo();o||t.$once("logon",function(t){s.init(i)})},methods:{init:function(t){var e=this;this.postJson({path:"/goods_new_detail.jsp",data:{goodsid:t},success:function(t){if(console.log(t.data),"ok"==t.data.status){e.$data.goods=t.data.data,e.promoteFlag=1==e.goods.promote,e.goods.price>e.goods.promote_price?e.priceLabel="¥"+e.goods.promote_price+" ~ ¥"+e.goods.max_price:e.priceLabel="¥"+e.goods.price+" ~ ¥"+e.goods.max_price,e.detaillist=e.goods.detail;var s=e.goods.style;for(var i in s){var o=s[i],a=o.styleName,l=o.goodsPrice,d=a+" ¥"+l,r=o.promotePrice;"undefined"!=typeof r&&null!=r&&(d=a+" ¥"+r),e.stylelist.push(d)}}}})},selectStyle:function(t){console.log("选择商品规格为",t.target.value),this.styleIndex=t.target.value;var e=this.goods.style[this.styleIndex];if(e.promotePrice){this.promoteFlag=!0;var s=e.promoteStarttime,i=e.promoteEndtime,o=Math.floor(Date().getTime()/1e3);o<s?(this.priceLabel="¥"+e.goodsPrice,this.promoteLabel=new Date(1e3*s).toLocaleDateString()+"开始",this.price=e.goodsPrice):o>i?(this.priceLabel="¥"+e.goodsPrice,this.promoteLabel="已结束",this.price=e.goodsPrice):(this.priceLabel="¥"+e.promotePrice,this.promoteLabel=new Date(1e3*i).toLocaleDateString()+"截止",this.price=e.promotePrice)}else this.priceLabel="¥"+e.goodsPrice,this.promoteFlag=!1,this.price=e.goodsPrice},buy:function(){var e=this;if(this.getUserInfo())this.styleIndex>-1?this.toPage("/pages/goods/goodsbuy?goodsId="+this.goods.id+"&styleName="+this.goods.style[this.styleIndex].styleName):(t.showToast({icon:"none",title:"请选择商品规格"}),this.scrollTo="title",setTimeout(function(){e.scrollTo=""},1e3));else{var s=encodeURIComponent("/pages/goods/goods?goodsId="+this.goods.id);this.toPage("/pages/login/login?page="+s)}},contactSeller:function(){var e=this;if(this.getUserInfo())t.showLoading({title:"加载中",mask:!0}),this.postJson({path:"/seller_user.jsp",data:{sellerUid:this.goods.uid,goods:this.goods},success:function(s){if("ok"==s.data.status){var i=s.data.data,o=e.getUserInfo(),a={myName:o.uid,your:e.goods.uid,sellerName:e.goods.seller,sellerHead:i.head_img,seller:i,me:o};t.navigateTo({url:"../chatroom/chatroom?username="+JSON.stringify(a)})}else t.showToast({icon:"none",title:s.data.msg})},complete:function(){t.hideLoading()}});else{var s=encodeURIComponent("/pages/goods/goods?goodsId="+this.goods.id);this.toPage("/pages/login/login?page="+s)}},goodsImageLoad:function(t){var e=t.target.id,s=t.target.height,i=t.target.width,o=690*this.system.windowWidth/750,a=s*o/i;this.goodsImages[e]={width:o,height:a},this.goodsImgHeightInit=a,console.log(goodsImages)}}};e.default=s}).call(this,s("f266")["default"])},e764:function(t,e,s){}},[["7cdf","common/runtime","common/vendor"]]]);