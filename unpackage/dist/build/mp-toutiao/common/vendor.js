(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/vendor"],{"0456":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={name:"UniNumberBox",props:{value:{type:[Number,String],default:1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:0}},watch:{value:function(e){this.inputValue=+e},inputValue:function(e,t){+e!==+t&&this.$emit("change",e)}},created:function(){this.inputValue=+this.value},methods:{_calcValue:function(e){if(!this.disabled){var t=this._getDecimalScale(),n=this.inputValue*t,r=this.step*t;"minus"===e?n-=r:"plus"===e&&(n+=r),n<this.min||n>this.max||(this.inputValue=n/t)}},_getDecimalScale:function(){var e=1;return~~this.step!==this.step&&(e=Math.pow(10,(this.step+"").split(".")[1].length)),e},_onBlur:function(e){var t=e.detail.value;t?(t=+t,t>this.max?t=this.max:t<this.min&&(t=this.min),this.inputValue=t):this.inputValue=0}}};t.default=r},"0fb0":function(e,t,n){"use strict";var r=n("939c"),o=n.n(r);o.a},1286:function(e,t,n){"use strict";(function(){function e(e){this.array=void 0===e?[]:new Array(e)}e.prototype={length:function(){return this.array.length},at:function(e){return this.array[e]},set:function(e,t){this.array[e]=t},push:function(e){return this.array.push(e)},slice:function(e,t){return this.array=this.array.slice(e,t),this.array},concat:function(e){this.array=this.array.concat(e)},remove:function(e,t){t=void 0===t?1:t,this.array.splice(e,t)},join:function(e){return this.array.join(e)},clear:function(){this.array.length=0}};var n=function(){this._array_h=new e};n.prototype={_index:0,push:function(e){this._array_h.push(e)},pop:function(){var e=null;return this._array_h.length()&&(e=this._array_h.at(this._index),2*++this._index>=this._array_h.length()&&(this._array_h.slice(this._index),this._index=0)),e},head:function(){var e=null,t=this._array_h.length();return t&&(e=this._array_h.at(t-1)),e},tail:function(){var e=null,t=this._array_h.length();return t&&(e=this._array_h.at(this._index)),e},length:function(){return this._array_h.length()-this._index},empty:function(){return 0===this._array_h.length()},clear:function(){this._array_h.clear()}},t.Queue=n})()},2877:function(e,t,n){"use strict";function r(e,t,n,r,o,i,a,s){var c,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):o&&(c=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",function(){return r})},"3a09":function(e,t,n){"use strict";var r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"·̀-ͯ\\u203F-⁀]"),i=new RegExp("^"+r.source+o.source+"*(?::"+r.source+o.source+"*)?$"),a=0,s=1,c=2,u=3,l=4,d=5,p=6,h=7;function f(){}function m(e,t,n,r,o){function i(e){if(e>65535){e-=65536;var t=55296+(e>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function a(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?i(parseInt(t.substr(1).replace("x","0x"))):(o.error("entity not found:"+e),e)}function s(t){if(t>m){var n=e.substring(m,t).replace(/&#?\w+;/g,a);p&&c(m),r.characters(n,0,t-m),m=t}}function c(t,n){while(t>=l&&(n=d.exec(e)))u=n.index,l=u+n[0].length,p.lineNumber++;p.columnNumber=t-u+1}var u=0,l=0,d=/.+(?:\r\n?|\n)|.*$/g,p=r.locator,h=[{currentNSMap:t}],f={},m=0;while(1){try{var E=e.indexOf("<",m);if(E<0){if(!e.substr(m).match(/^\s*$/)){var S=r.document,x=S.createTextNode(e.substr(m));S.appendChild(x),r.currentElement=x}return}switch(E>m&&s(E),e.charAt(E+1)){case"/":var I=e.indexOf(">",E+3),C=e.substring(E+2,I),w=h.pop(),A=w.localNSMap;if(w.tagName!=C&&o.fatalError("end tag name: "+C+" is not match the current start tagName:"+w.tagName),r.endElement(w.uri,w.localName,C),A)for(var R in A)r.endPrefixMapping(R);I++;break;case"?":p&&c(E),I=T(e,E,r);break;case"!":p&&c(E),I=N(e,E,r,o);break;default:p&&c(E);var M=new O,D=(I=g(e,E,M,a,o),M.length);if(p){if(D)for(var B=0;B<D;B++){var k=M[B];c(k.offset),k.offset=_(p,{})}c(I)}!M.closed&&b(e,I,M.tagName,f)&&(M.closed=!0,n.nbsp||o.warning("unclosed xml attribute")),v(M,r,h),"http://www.w3.org/1999/xhtml"!==M.uri||M.closed?I++:I=y(e,I,M.tagName,a,r)}}catch($){o.error("element parse error: "+$),I=-1}I>m?m=I:s(Math.max(E,m)+1)}}function _(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function g(e,t,n,r,o){var i,f=++t,m=a;while(1){var _=e.charAt(f);switch(_){case"=":if(m===s)i=e.slice(t,f),m=u;else{if(m!==c)throw new Error("attribute equal must after attrName");m=u}break;case"'":case'"':if(m===u){if(t=f+1,f=e.indexOf(_,t),!(f>0))throw new Error("attribute value no end '"+_+"' match");g=e.slice(t,f).replace(/&#?\w+;/g,r),n.add(i,g,t-1),m=d}else{if(m!=l)throw new Error('attribute value must after "="');g=e.slice(t,f).replace(/&#?\w+;/g,r),n.add(i,g,t),o.warning('attribute "'+i+'" missed start quot('+_+")!!"),t=f+1,m=d}break;case"/":switch(m){case a:n.setTagName(e.slice(t,f));case d:case p:case h:m=h,n.closed=!0;case l:case s:case c:break;default:throw new Error("attribute invalid close char('/')")}break;case"":o.error("unexpected end of input");case">":switch(m){case a:n.setTagName(e.slice(t,f));case d:case p:case h:break;case l:case s:g=e.slice(t,f),"/"===g.slice(-1)&&(n.closed=!0,g=g.slice(0,-1));case c:m===c&&(g=i),m==l?(o.warning('attribute "'+g+'" missed quot(")!!'),n.add(i,g.replace(/&#?\w+;/g,r),t)):(o.warning('attribute "'+g+'" missed value!! "'+g+'" instead!!'),n.add(g,g,t));break;case u:throw new Error("attribute value missed!!")}return f;case"":_=" ";default:if(_<=" ")switch(m){case a:n.setTagName(e.slice(t,f)),m=p;break;case s:i=e.slice(t,f),m=c;break;case l:var g=e.slice(t,f).replace(/&#?\w+;/g,r);o.warning('attribute "'+g+'" missed quot(")!!'),n.add(i,g,t);case d:m=p;break}else switch(m){case c:o.warning('attribute "'+i+'" missed value!! "'+i+'" instead!!'),n.add(i,i,t),t=f,m=s;break;case d:o.warning('attribute space is required"'+i+'"!!');case p:m=s,t=f;break;case u:m=l,t=f;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}f++}}function v(e,t,n){var r=e.tagName,o=null,i=n[n.length-1].currentNSMap,a=e.length;while(a--){var s=e[a],c=s.qName,u=s.value,l=c.indexOf(":");if(l>0)var d=s.prefix=c.slice(0,l),p=c.slice(l+1),h="xmlns"===d&&p;else p=c,d=null,h="xmlns"===c&&"";s.localName=p,!1!==h&&(null==o&&(o={},E(i,i={})),i[h]=o[h]=u,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(h,u))}a=e.length;while(a--){s=e[a];d=s.prefix;d&&("xml"===d&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==d&&(s.uri=i[d]))}l=r.indexOf(":");l>0?(d=e.prefix=r.slice(0,l),p=e.localName=r.slice(l+1)):(d=null,p=e.localName=r);var f=e.uri=i[d||""];if(t.startElement(f,p,r,e),e.closed){if(t.endElement(f,p,r),o)for(d in o)t.endPrefixMapping(d)}else e.currentNSMap=i,e.localNSMap=o,n.push(e)}function y(e,t,n,r,o){if(/^(?:script|textarea)$/i.test(n)){var i=e.indexOf("</"+n+">",t),a=e.substring(t+1,i);if(/[&<]/.test(a))return/^script$/i.test(n)?(o.characters(a,0,a.length),i):(a=a.replace(/&#?\w+;/g,r),o.characters(a,0,a.length),i)}return t+1}function b(e,t,n,r){var o=r[n];return null==o&&(o=r[n]=e.lastIndexOf("</"+n+">")),o<t}function E(e,t){for(var n in e)t[n]=e[n]}function N(e,t,n,r){var o=e.charAt(t+2);switch(o){case"-":if("-"===e.charAt(t+3)){var i=e.indexOf("--\x3e",t+4);return i>t?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==e.substr(t+3,6)){i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var a=x(e,t),s=a.length;if(s>1&&/!doctype/i.test(a[0][0])){var c=a[1][0],u=s>3&&/^public$/i.test(a[2][0])&&a[3][0],l=s>4&&a[4][0],d=a[s-1];return n.startDTD(c,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),d.index+d[0].length}}return-1}function T(e,t,n){var r=e.indexOf("?>",t);if(r){var o=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(o){o[0].length;return n.processingInstruction(o[1],o[2]),r+2}return-1}return-1}function O(e){}function S(e,t){return e.__proto__=t,e}function x(e,t){var n,r=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;o.lastIndex=t,o.exec(e);while(n=o.exec(e))if(r.push(n),n[1])return r}f.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),E(t,t={}),m(e,t,n,r,this.errorHandler),r.endDocument()}},O.prototype={setTagName:function(e){if(!i.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!i.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getOffset:function(e){return this[e].offset},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},S({},S.prototype)instanceof S||(S=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=f},"3a53":function(e,t,n){(function(t,n){try{t||(t={}),t.process=t.process||{},t.process.env=t.process.env||{},t.App=t.App||App,t.Page=t.Page||Page,t.Component=t.Component||Component,t.getApp=t.getApp||getApp}catch(r){}(function(t,n){e.exports=n()})(0,function(){"use strict";var e=Object.freeze({});function o(e){return void 0===e||null===e}function i(e){return void 0!==e&&null!==e}function a(e){return!0===e}function s(e){return!1===e}function c(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function u(e){return null!==e&&"object"===typeof e}var l=Object.prototype.toString;function d(e){return"[object Object]"===l.call(e)}function p(e){return"[object RegExp]"===l.call(e)}function h(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function f(e){return null==e?"":"object"===typeof e?JSON.stringify(e,null,2):String(e)}function m(e){var t=parseFloat(e);return isNaN(t)?e:t}function _(e,t){for(var n=Object.create(null),r=e.split(","),o=0;o<r.length;o++)n[r[o]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}_("slot,component",!0);var g=_("key,ref,slot,slot-scope,is");function v(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var y=Object.prototype.hasOwnProperty;function b(e,t){return y.call(e,t)}function E(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var N=/-(\w)/g,T=E(function(e){return e.replace(N,function(e,t){return t?t.toUpperCase():""})}),O=E(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),S=/\B([A-Z])/g,x=E(function(e){return e.replace(S,"-$1").toLowerCase()});function I(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function C(e,t){return e.bind(t)}var w=Function.prototype.bind?C:I;function A(e,t){t=t||0;var n=e.length-t,r=new Array(n);while(n--)r[n]=e[n+t];return r}function R(e,t){for(var n in t)e[n]=t[n];return e}function M(e){for(var t={},n=0;n<e.length;n++)e[n]&&R(t,e[n]);return t}function D(e,t,n){}var B=function(e,t,n){return!1},k=function(e){return e};function $(e,t){if(e===t)return!0;var n=u(e),o=u(t);if(!n||!o)return!n&&!o&&String(e)===String(t);try{var i=Array.isArray(e),a=Array.isArray(t);if(i&&a)return e.length===t.length&&e.every(function(e,n){return $(e,t[n])});if(i||a)return!1;var s=Object.keys(e),c=Object.keys(t);return s.length===c.length&&s.every(function(n){return $(e[n],t[n])})}catch(r){return!1}}function L(e,t){for(var n=0;n<e.length;n++)if($(e[n],t))return n;return-1}function j(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var F="data-server-rendered",U=["component","directive","filter"],q=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],P={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:B,isReservedAttr:B,isUnknownElement:B,getTagNamespace:D,parsePlatformTagName:k,mustUseProp:B,_lifecycleHooks:q};function H(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function W(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var G=/[^\w.$]/;function J(e){if(!G.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var V,z="__proto__"in{},X="undefined"!==typeof window&&window.navigator,Q="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,K=Q&&WXEnvironment.platform.toLowerCase(),Y=X&&window.navigator.userAgent.toLowerCase(),Z=(Y&&/msie|trident/.test(Y),Y&&Y.indexOf("msie 9.0"),Y&&Y.indexOf("edge/")>0),ee=(Y&&Y.indexOf("android"),Y&&/iphone|ipad|ipod|ios/.test(Y)||"ios"===K),te=(Y&&/chrome\/\d+/.test(Y),{}.watch);if(X)try{var ne={};Object.defineProperty(ne,"passive",{get:function(){}}),window.addEventListener("test-passive",null,ne)}catch(r){}var re=function(){return void 0===V&&(V=!X&&!Q&&"undefined"!==typeof t&&"server"===t["process"].env.VUE_ENV),V},oe=X&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ie(e){return"function"===typeof e&&/native code/.test(e.toString())}var ae,se="undefined"!==typeof Symbol&&ie(Symbol)&&"undefined"!==typeof Reflect&&ie(Reflect.ownKeys);ae="undefined"!==typeof Set&&ie(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ce=D,ue=0,le=function(){this.id=ue++,this.subs=[]};le.prototype.addSub=function(e){this.subs.push(e)},le.prototype.removeSub=function(e){v(this.subs,e)},le.prototype.depend=function(){le.target&&le.target.addDep(this)},le.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},le.target=null;var de=[];function pe(e){le.target&&de.push(le.target),le.target=e}function he(){le.target=de.pop()}var fe=function(e,t,n,r,o,i,a,s){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=o,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},me={child:{configurable:!0}};me.child.get=function(){return this.componentInstance},Object.defineProperties(fe.prototype,me);var _e=function(e){void 0===e&&(e="");var t=new fe;return t.text=e,t.isComment=!0,t};function ge(e){return new fe(void 0,void 0,void 0,String(e))}function ve(e){var t=new fe(e.tag,e.data,e.children,e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.isCloned=!0,t}var ye=Array.prototype,be=Object.create(ye),Ee=["push","pop","shift","unshift","splice","sort","reverse"];Ee.forEach(function(e){var t=ye[e];W(be,e,function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var o,i=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2);break}return o&&a.observeArray(o),a.dep.notify(),i})});var Ne=Object.getOwnPropertyNames(be),Te=!0;function Oe(e){Te=e}var Se=function(e){if(this.value=e,this.dep=new le,this.vmCount=0,W(e,"__ob__",this),Array.isArray(e)){var t=z?xe:Ie;t(e,be,Ne),this.observeArray(e)}else this.walk(e)};function xe(e,t,n){e.__proto__=t}function Ie(e,t,n){for(var r=0,o=n.length;r<o;r++){var i=n[r];W(e,i,t[i])}}function Ce(e,t){var n;if(u(e)&&!(e instanceof fe))return b(e,"__ob__")&&e.__ob__ instanceof Se?n=e.__ob__:Te&&!re()&&(Array.isArray(e)||d(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Se(e)),t&&n&&n.vmCount++,n}function we(e,t,n,r,o){var i=new le,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var s=a&&a.get;s||2!==arguments.length||(n=e[t]);var c=a&&a.set,u=!o&&Ce(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):n;return le.target&&(i.depend(),u&&(u.dep.depend(),Array.isArray(t)&&Me(t))),t},set:function(t){var r=s?s.call(e):n;t===r||t!==t&&r!==r||(c?c.call(e,t):n=t,u=!o&&Ce(t),i.notify())}})}}function Ae(e,t,n){if(Array.isArray(e)&&h(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var r=e.__ob__;return e._isVue||r&&r.vmCount?n:r?(we(r.value,t,n),r.dep.notify(),n):(e[t]=n,n)}function Re(e,t){if(Array.isArray(e)&&h(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||b(e,t)&&(delete e[t],n&&n.dep.notify())}}function Me(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Me(t)}Se.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)we(e,t[n])},Se.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Ce(e[t])};var De=P.optionMergeStrategies;function Be(e,t){if(!t)return e;for(var n,r,o,i=Object.keys(t),a=0;a<i.length;a++)n=i[a],r=e[n],o=t[n],b(e,n)?d(r)&&d(o)&&Be(r,o):Ae(e,n,o);return e}function ke(e,t,n){return n?function(){var r="function"===typeof t?t.call(n,n):t,o="function"===typeof e?e.call(n,n):e;return r?Be(r,o):o}:t?e?function(){return Be("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function $e(e,t){return t?e?e.concat(t):Array.isArray(t)?t:[t]:e}function Le(e,t,n,r){var o=Object.create(e||null);return t?R(o,t):o}De.data=function(e,t,n){return n?ke(e,t,n):t&&"function"!==typeof t?e:ke(e,t)},q.forEach(function(e){De[e]=$e}),U.forEach(function(e){De[e+"s"]=Le}),De.watch=function(e,t,n,r){if(e===te&&(e=void 0),t===te&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var o={};for(var i in R(o,e),t){var a=o[i],s=t[i];a&&!Array.isArray(a)&&(a=[a]),o[i]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},De.props=De.methods=De.inject=De.computed=function(e,t,n,r){if(!e)return t;var o=Object.create(null);return R(o,e),t&&R(o,t),o},De.provide=ke;var je=function(e,t){return void 0===t?e:t};function Fe(e,t){var n=e.props;if(n){var r,o,i,a={};if(Array.isArray(n)){r=n.length;while(r--)o=n[r],"string"===typeof o&&(i=T(o),a[i]={type:null})}else if(d(n))for(var s in n)o=n[s],i=T(s),a[i]=d(o)?o:{type:o};e.props=a}}function Ue(e,t){var n=e.inject;if(n){var r=e.inject={};if(Array.isArray(n))for(var o=0;o<n.length;o++)r[n[o]]={from:n[o]};else if(d(n))for(var i in n){var a=n[i];r[i]=d(a)?R({from:i},a):{from:a}}}}function qe(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"===typeof r&&(t[n]={bind:r,update:r})}}function Pe(e,t,n){"function"===typeof t&&(t=t.options),Fe(t,n),Ue(t,n),qe(t);var r=t.extends;if(r&&(e=Pe(e,r,n)),t.mixins)for(var o=0,i=t.mixins.length;o<i;o++)e=Pe(e,t.mixins[o],n);var a,s={};for(a in e)c(a);for(a in t)b(e,a)||c(a);function c(r){var o=De[r]||je;s[r]=o(e[r],t[r],n,r)}return s}function He(e,t,n,r){if("string"===typeof n){var o=e[t];if(b(o,n))return o[n];var i=T(n);if(b(o,i))return o[i];var a=O(i);if(b(o,a))return o[a];var s=o[n]||o[i]||o[a];return s}}function We(e,t,n,r){var o=t[e],i=!b(n,e),a=n[e],s=ze(Boolean,o.type);if(s>-1)if(i&&!b(o,"default"))a=!1;else if(""===a||a===x(e)){var c=ze(String,o.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=Ge(r,o,e);var u=Te;Oe(!0),Ce(a),Oe(u)}return a}function Ge(e,t,n){if(b(t,"default")){var r=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"===typeof r&&"Function"!==Je(t.type)?r.call(e):r}}function Je(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function Ve(e,t){return Je(e)===Je(t)}function ze(e,t){if(!Array.isArray(t))return Ve(t,e)?0:-1;for(var n=0,r=t.length;n<r;n++)if(Ve(t[n],e))return n;return-1}function Xe(e,t,n){if(t){var o=t;while(o=o.$parent){var i=o.$options.errorCaptured;if(i)for(var a=0;a<i.length;a++)try{var s=!1===i[a].call(o,e,t,n);if(s)return}catch(r){Qe(r,o,"errorCaptured hook")}}}Qe(e,t,n)}function Qe(e,t,n){if(P.errorHandler)try{return P.errorHandler.call(null,e,t,n)}catch(r){Ke(r,null,"config.errorHandler")}Ke(e,t,n)}function Ke(e,t,n){if(!X&&!Q||"undefined"===typeof console)throw e;console.error(e)}var Ye,Ze,et=[],nt=!1;function rt(){nt=!1;var e=et.slice(0);et.length=0;for(var t=0;t<e.length;t++)e[t]()}var ot=!1;if("undefined"===typeof MessageChannel||!ie(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())Ze=function(){setTimeout(rt,0)};else{var it=new MessageChannel,at=it.port2;it.port1.onmessage=rt,Ze=function(){at.postMessage(1)}}if("undefined"!==typeof Promise&&ie(Promise)){var st=Promise.resolve();Ye=function(){st.then(rt),ee&&setTimeout(D)}}else Ye=Ze;function ct(e,t){var n;if(et.push(function(){if(e)try{e.call(t)}catch(r){Xe(r,t,"nextTick")}else n&&n(t)}),nt||(nt=!0,ot?Ze():Ye()),!e&&"undefined"!==typeof Promise)return new Promise(function(e){n=e})}var ut=new ae;function lt(e){dt(e,ut),ut.clear()}function dt(e,t){var n,r,o=Array.isArray(e);if(!(!o&&!u(e)||Object.isFrozen(e)||e instanceof fe)){if(e.__ob__){var i=e.__ob__.dep.id;if(t.has(i))return;t.add(i)}if(o){n=e.length;while(n--)dt(e[n],t)}else{r=Object.keys(e),n=r.length;while(n--)dt(e[r[n]],t)}}}var pt,ht=E(function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var r="!"===e.charAt(0);return e=r?e.slice(1):e,{name:e,once:n,capture:r,passive:t}});function ft(e){function t(){var e=arguments,n=t.fns;if(!Array.isArray(n))return n.apply(null,arguments);for(var r=n.slice(),o=0;o<r.length;o++)r[o].apply(null,e)}return t.fns=e,t}function mt(e,t,n,r,i){var a,s,c,u;for(a in e)s=e[a],c=t[a],u=ht(a),o(s)||(o(c)?(o(s.fns)&&(s=e[a]=ft(s)),n(u.name,s,u.once,u.capture,u.passive,u.params)):s!==c&&(c.fns=s,e[a]=c));for(a in t)o(e[a])&&(u=ht(a),r(u.name,t[a],u.capture))}function _t(e,t,n){var r;e instanceof fe&&(e=e.data.hook||(e.data.hook={}));var s=e[t];function c(){n.apply(this,arguments),v(r.fns,c)}o(s)?r=ft([c]):i(s.fns)&&a(s.merged)?(r=s,r.fns.push(c)):r=ft([s,c]),r.merged=!0,e[t]=r}function gt(e,t,n){var r=t.options.props;if(!o(r)){var a={},s=e.attrs,c=e.props;if(i(s)||i(c))for(var u in r){var l=x(u);vt(a,c,u,l,!0)||vt(a,s,u,l,!1)}return a}}function vt(e,t,n,r,o){if(i(t)){if(b(t,n))return e[n]=t[n],o||delete t[n],!0;if(b(t,r))return e[n]=t[r],o||delete t[r],!0}return!1}function yt(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function bt(e){return c(e)?[ge(e)]:Array.isArray(e)?Nt(e):void 0}function Et(e){return i(e)&&i(e.text)&&s(e.isComment)}function Nt(e,t){var n,r,s,u,l=[];for(n=0;n<e.length;n++)r=e[n],o(r)||"boolean"===typeof r||(s=l.length-1,u=l[s],Array.isArray(r)?r.length>0&&(r=Nt(r,(t||"")+"_"+n),Et(r[0])&&Et(u)&&(l[s]=ge(u.text+r[0].text),r.shift()),l.push.apply(l,r)):c(r)?Et(u)?l[s]=ge(u.text+r):""!==r&&l.push(ge(r)):Et(r)&&Et(u)?l[s]=ge(u.text+r.text):(a(e._isVList)&&i(r.tag)&&o(r.key)&&i(t)&&(r.key="__vlist"+t+"_"+n+"__"),l.push(r)));return l}function Tt(e,t){return(e.__esModule||se&&"Module"===e[Symbol.toStringTag])&&(e=e.default),u(e)?t.extend(e):e}function Ot(e,t,n,r,o){var i=_e();return i.asyncFactory=e,i.asyncMeta={data:t,context:n,children:r,tag:o},i}function St(e,t,n){if(a(e.error)&&i(e.errorComp))return e.errorComp;if(i(e.resolved))return e.resolved;if(a(e.loading)&&i(e.loadingComp))return e.loadingComp;if(!i(e.contexts)){var r=e.contexts=[n],s=!0,c=function(){for(var e=0,t=r.length;e<t;e++)r[e].$forceUpdate()},l=j(function(n){e.resolved=Tt(n,t),s||c()}),d=j(function(t){i(e.errorComp)&&(e.error=!0,c())}),p=e(l,d);return u(p)&&("function"===typeof p.then?o(e.resolved)&&p.then(l,d):i(p.component)&&"function"===typeof p.component.then&&(p.component.then(l,d),i(p.error)&&(e.errorComp=Tt(p.error,t)),i(p.loading)&&(e.loadingComp=Tt(p.loading,t),0===p.delay?e.loading=!0:setTimeout(function(){o(e.resolved)&&o(e.error)&&(e.loading=!0,c())},p.delay||200)),i(p.timeout)&&setTimeout(function(){o(e.resolved)&&d(null)},p.timeout))),s=!1,e.loading?e.loadingComp:e.resolved}e.contexts.push(n)}function xt(e){return e.isComment&&e.asyncFactory}function It(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(i(n)&&(i(n.componentOptions)||xt(n)))return n}}function Ct(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Rt(e,t)}function wt(e,t,n){n?pt.$once(e,t):pt.$on(e,t)}function At(e,t){pt.$off(e,t)}function Rt(e,t,n){pt=e,mt(t,n||{},wt,At,e),pt=void 0}function Mt(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this,o=this;if(Array.isArray(e))for(var i=0,a=e.length;i<a;i++)r.$on(e[i],n);else(o._events[e]||(o._events[e]=[])).push(n),t.test(e)&&(o._hasHookEvent=!0);return o},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,t){var n=this,r=this;if(!arguments.length)return r._events=Object.create(null),r;if(Array.isArray(e)){for(var o=0,i=e.length;o<i;o++)n.$off(e[o],t);return r}var a=r._events[e];if(!a)return r;if(!t)return r._events[e]=null,r;if(t){var s,c=a.length;while(c--)if(s=a[c],s===t||s.fn===t){a.splice(c,1);break}}return r},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?A(n):n;for(var o=A(arguments,1),i=0,a=n.length;i<a;i++)try{n[i].apply(t,o)}catch(r){Xe(r,t,'event handler for "'+e+'"')}}return t}}function Dt(e,t){var n={};if(!e)return n;for(var r=0,o=e.length;r<o;r++){var i=e[r],a=i.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,i.context!==t&&i.fnContext!==t||!a||null==a.slot)(n.default||(n.default=[])).push(i);else{var s=a.slot,c=n[s]||(n[s]=[]);"template"===i.tag?c.push.apply(c,i.children||[]):c.push(i)}}for(var u in n)n[u].every(Bt)&&delete n[u];return n}function Bt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function kt(e,t){t=t||{};for(var n=0;n<e.length;n++)Array.isArray(e[n])?kt(e[n],t):t[e[n].key]=e[n].fn;return t}var $t=null;function Lt(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function jt(e){e.prototype._update=function(e,t){var n=this;n._isMounted&&Wt(n,"beforeUpdate");var r=n.$el,o=n._vnode,i=$t;$t=n,n._vnode=e,o?n.$el=n.__patch__(o,e):(n.$el=n.__patch__(n.$el,e,t,!1,n.$options._parentElm,n.$options._refElm),n.$options._parentElm=n.$options._refElm=null),$t=i,r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Wt(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||v(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Wt(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Ft(e,t,n){var r;return e.$el=t,e.$options.render||(e.$options.render=_e),Wt(e,"beforeMount"),r=function(){e._update(e._render(),n)},new on(e,r,D,null,!0),n=!1,null==e.$vnode&&(e._isMounted=!0,Wt(e,"mounted")),e}function Ut(t,n,r,o,i){var a=!!(i||t.$options._renderChildren||o.data.scopedSlots||t.$scopedSlots!==e);if(t.$options._parentVnode=o,t.$vnode=o,t._vnode&&(t._vnode.parent=o),t.$options._renderChildren=i,t.$attrs=o.data.attrs||e,t.$listeners=r||e,n&&t.$options.props){Oe(!1);for(var s=t._props,c=t.$options._propKeys||[],u=0;u<c.length;u++){var l=c[u],d=t.$options.props;s[l]=We(l,d,n,t)}Oe(!0),t.$options.propsData=n}r=r||e;var p=t.$options._parentListeners;t.$options._parentListeners=r,Rt(t,r,p),a&&(t.$slots=Dt(i,o.context),t.$forceUpdate())}function qt(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Pt(e,t){if(t){if(e._directInactive=!1,qt(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Pt(e.$children[n]);Wt(e,"activated")}}function Ht(e,t){if((!t||(e._directInactive=!0,!qt(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Ht(e.$children[n]);Wt(e,"deactivated")}}function Wt(e,t){pe();var n=e.$options[t];if(n)for(var o=0,i=n.length;o<i;o++)try{n[o].call(e)}catch(r){Xe(r,e,t+" hook")}e._hasHookEvent&&e.$emit("hook:"+t),he()}var Gt=[],Jt=[],Vt={},zt=!1,Xt=!1,Qt=0;function Kt(){Qt=Gt.length=Jt.length=0,Vt={},zt=Xt=!1}function Yt(){var e,t;for(Xt=!0,Gt.sort(function(e,t){return e.id-t.id}),Qt=0;Qt<Gt.length;Qt++)e=Gt[Qt],t=e.id,Vt[t]=null,e.run();var n=Jt.slice(),r=Gt.slice();Kt(),tn(n),Zt(r),oe&&P.devtools&&oe.emit("flush")}function Zt(e){var t=e.length;while(t--){var n=e[t],r=n.vm;r._watcher===n&&r._isMounted&&Wt(r,"updated")}}function en(e){e._inactive=!1,Jt.push(e)}function tn(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Pt(e[t],!0)}function nn(e){var t=e.id;if(null==Vt[t]){if(Vt[t]=!0,Xt){var n=Gt.length-1;while(n>Qt&&Gt[n].id>e.id)n--;Gt.splice(n+1,0,e)}else Gt.push(e);zt||(zt=!0,ct(Yt))}}var rn=0,on=function(e,t,n,r,o){this.vm=e,o&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++rn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ae,this.newDepIds=new ae,this.expression="","function"===typeof t?this.getter=t:(this.getter=J(t),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};on.prototype.get=function(){var e;pe(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(r){if(!this.user)throw r;Xe(r,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&lt(e),he(),this.cleanupDeps()}return e},on.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},on.prototype.cleanupDeps=function(){var e=this,t=this.deps.length;while(t--){var n=e.deps[t];e.newDepIds.has(n.id)||n.removeSub(e)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},on.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():nn(this)},on.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||u(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(r){Xe(r,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},on.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},on.prototype.depend=function(){var e=this,t=this.deps.length;while(t--)e.deps[t].depend()},on.prototype.teardown=function(){var e=this;if(this.active){this.vm._isBeingDestroyed||v(this.vm._watchers,this);var t=this.deps.length;while(t--)e.deps[t].removeSub(e);this.active=!1}};var an={enumerable:!0,configurable:!0,get:D,set:D};function sn(e,t,n){an.get=function(){return this[t][n]},an.set=function(e){this[t][n]=e},Object.defineProperty(e,n,an)}function cn(e){e._watchers=[];var t=e.$options;t.props&&un(e,t.props),t.methods&&_n(e,t.methods),t.data?ln(e):Ce(e._data={},!0),t.computed&&hn(e,t.computed),t.watch&&t.watch!==te&&gn(e,t.watch)}function un(e,t){var n=e.$options.propsData||{},r=e._props={},o=e.$options._propKeys=[],i=!e.$parent;i||Oe(!1);var a=function(i){o.push(i);var a=We(i,t,n,e);we(r,i,a),i in e||sn(e,"_props",i)};for(var s in t)a(s);Oe(!0)}function ln(e){var t=e.$options.data;t=e._data="function"===typeof t?dn(t,e):t||{},d(t)||(t={});var n=Object.keys(t),r=e.$options.props,o=(e.$options.methods,n.length);while(o--){var i=n[o];r&&b(r,i)||H(i)||sn(e,"_data",i)}Ce(t,!0)}function dn(e,t){pe();try{return e.call(t,t)}catch(r){return Xe(r,t,"data()"),{}}finally{he()}}var pn={lazy:!0};function hn(e,t){var n=e._computedWatchers=Object.create(null),r=re();for(var o in t){var i=t[o],a="function"===typeof i?i:i.get;r||(n[o]=new on(e,a||D,D,pn)),o in e||fn(e,o,i)}}function fn(e,t,n){var r=!re();"function"===typeof n?(an.get=r?mn(t):n,an.set=D):(an.get=n.get?r&&!1!==n.cache?mn(t):n.get:D,an.set=n.set?n.set:D),Object.defineProperty(e,t,an)}function mn(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),le.target&&t.depend(),t.value}}function _n(e,t){e.$options.props;for(var n in t)e[n]=null==t[n]?D:w(t[n],e)}function gn(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var o=0;o<r.length;o++)vn(e,n,r[o]);else vn(e,n,r)}}function vn(e,t,n,r){return d(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,r)}function yn(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Ae,e.prototype.$delete=Re,e.prototype.$watch=function(e,t,n){var r=this;if(d(t))return vn(r,e,t,n);n=n||{},n.user=!0;var o=new on(r,e,t,n);return n.immediate&&t.call(r,o.value),function(){o.teardown()}}}function bn(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function En(e){var t=Nn(e.$options.inject,e);t&&(Oe(!1),Object.keys(t).forEach(function(n){we(e,n,t[n])}),Oe(!0))}function Nn(e,t){if(e){for(var n=Object.create(null),r=se?Reflect.ownKeys(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}):Object.keys(e),o=0;o<r.length;o++){var i=r[o],a=e[i].from,s=t;while(s){if(s._provided&&b(s._provided,a)){n[i]=s._provided[a];break}s=s.$parent}if(!s&&"default"in e[i]){var c=e[i].default;n[i]="function"===typeof c?c.call(t):c}}return n}}function Tn(e,t){var n,r,o,a,s;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),r=0,o=e.length;r<o;r++)n[r]=t(e[r],r);else if("number"===typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(u(e))for(a=Object.keys(e),n=new Array(a.length),r=0,o=a.length;r<o;r++)s=a[r],n[r]=t(e[s],s,r);return i(n)&&(n._isVList=!0),n}function On(e,t,n,r){var o,i=this.$scopedSlots[e];if(i)n=n||{},r&&(n=R(R({},r),n)),o=i(n)||t;else{var a=this.$slots[e];a&&(a._rendered=!0),o=a||t}var s=n&&n.slot;return s?this.$createElement("template",{slot:s},o):o}function Sn(e){return He(this.$options,"filters",e,!0)||k}function xn(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function In(e,t,n,r,o){var i=P.keyCodes[t]||n;return o&&r&&!P.keyCodes[t]?xn(o,r):i?xn(i,e):r?x(r)!==t:void 0}function Cn(e,t,n,r,o){if(n)if(u(n)){var i;Array.isArray(n)&&(n=M(n));var a=function(a){if("class"===a||"style"===a||g(a))i=e;else{var s=e.attrs&&e.attrs.type;i=r||P.mustUseProp(t,s,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}if(!(a in i)&&(i[a]=n[a],o)){var c=e.on||(e.on={});c["update:"+a]=function(e){n[a]=e}}};for(var s in n)a(s)}else;return e}function wn(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t?r:(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),Rn(r,"__static__"+e,!1),r)}function An(e,t,n){return Rn(e,"__once__"+t+(n?"_"+n:""),!0),e}function Rn(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!==typeof e[r]&&Mn(e[r],t+"_"+r,n);else Mn(e,t,n)}function Mn(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function Dn(e,t){if(t)if(d(t)){var n=e.on=e.on?R({},e.on):{};for(var r in t){var o=n[r],i=t[r];n[r]=o?[].concat(o,i):i}}else;return e}function Bn(e){e._o=An,e._n=m,e._s=f,e._l=Tn,e._t=On,e._q=$,e._i=L,e._m=wn,e._f=Sn,e._k=In,e._b=Cn,e._v=ge,e._e=_e,e._u=kt,e._g=Dn}function kn(t,n,r,o,i){var s,c=i.options;b(o,"_uid")?(s=Object.create(o),s._original=o):(s=o,o=o._original);var u=a(c._compiled),l=!u;this.data=t,this.props=n,this.children=r,this.parent=o,this.listeners=t.on||e,this.injections=Nn(c.inject,o),this.slots=function(){return Dt(r,o)},u&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=t.scopedSlots||e),c._scopeId?this._c=function(e,t,n,r){var i=Vn(s,e,t,n,r,l);return i&&!Array.isArray(i)&&(i.fnScopeId=c._scopeId,i.fnContext=o),i}:this._c=function(e,t,n,r){return Vn(s,e,t,n,r,l)}}function $n(t,n,r,o,a){var s=t.options,c={},u=s.props;if(i(u))for(var l in u)c[l]=We(l,u,n||e);else i(r.attrs)&&jn(c,r.attrs),i(r.props)&&jn(c,r.props);var d=new kn(r,c,a,o,t),p=s.render.call(null,d._c,d);if(p instanceof fe)return Ln(p,r,d.parent,s);if(Array.isArray(p)){for(var h=bt(p)||[],f=new Array(h.length),m=0;m<h.length;m++)f[m]=Ln(h[m],r,d.parent,s);return f}}function Ln(e,t,n,r){var o=ve(e);return o.fnContext=n,o.fnOptions=r,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function jn(e,t){for(var n in t)e[T(n)]=t[n]}Bn(kn.prototype);var Fn={init:function(e,t,n,r){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var o=e;Fn.prepatch(o,o)}else{var i=e.componentInstance=Pn(e,$t,n,r);i.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,r=t.componentInstance=e.componentInstance;Ut(r,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,Wt(n,"mounted")),e.data.keepAlive&&(t._isMounted?en(n):Pt(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Ht(t,!0):t.$destroy())}},Un=Object.keys(Fn);function qn(e,t,n,r,s){if(!o(e)){var c=n.$options._base;if(u(e)&&(e=c.extend(e)),"function"===typeof e){var l;if(o(e.cid)&&(l=e,e=St(l,c,n),void 0===e))return Ot(l,t,n,r,s);t=t||{},nr(e),i(t.model)&&Wn(e.options,t);var d=gt(t,e,s);if(a(e.options.functional))return $n(e,d,t,n,r);var p=t.on;if(t.on=t.nativeOn,a(e.options.abstract)){var h=t.slot;t={},h&&(t.slot=h)}Hn(t);var f=e.options.name||s,m=new fe("vue-component-"+e.cid+(f?"-"+f:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:d,listeners:p,tag:s,children:r},l);return m}}}function Pn(e,t,n,r){var o={_isComponent:!0,parent:t,_parentVnode:e,_parentElm:n||null,_refElm:r||null},a=e.data.inlineTemplate;return i(a)&&(o.render=a.render,o.staticRenderFns=a.staticRenderFns),new e.componentOptions.Ctor(o)}function Hn(e){for(var t=e.hook||(e.hook={}),n=0;n<Un.length;n++){var r=Un[n];t[r]=Fn[r]}}function Wn(e,t){var n=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.props||(t.props={}))[n]=t.model.value;var o=t.on||(t.on={});i(o[r])?o[r]=[t.model.callback].concat(o[r]):o[r]=t.model.callback}var Gn=1,Jn=2;function Vn(e,t,n,r,o,i){return(Array.isArray(n)||c(n))&&(o=r,r=n,n=void 0),a(i)&&(o=Jn),zn(e,t,n,r,o)}function zn(e,t,n,r,o){if(i(n)&&i(n.__ob__))return _e();if(i(n)&&i(n.is)&&(t=n.is),!t)return _e();var a,s,c;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===Jn?r=bt(r):o===Gn&&(r=yt(r)),"string"===typeof t)?(s=e.$vnode&&e.$vnode.ns||P.getTagNamespace(t),a=P.isReservedTag(t)?new fe(P.parsePlatformTagName(t),n,r,void 0,void 0,e):i(c=He(e.$options,"components",t))?qn(c,n,e,r,t):new fe(t,n,r,void 0,void 0,e)):a=qn(t,n,e,r);return Array.isArray(a)?a:i(a)?(i(s)&&Xn(a,s),i(n)&&Qn(n),a):_e()}function Xn(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),i(e.children))for(var r=0,s=e.children.length;r<s;r++){var c=e.children[r];i(c.tag)&&(o(c.ns)||a(n)&&"svg"!==c.tag)&&Xn(c,t,n)}}function Qn(e){u(e.style)&&lt(e.style),u(e.class)&&lt(e.class)}function Kn(t){t._vnode=null,t._staticTrees=null;var n=t.$options,r=t.$vnode=n._parentVnode,o=r&&r.context;t.$slots=Dt(n._renderChildren,o),t.$scopedSlots=e,t._c=function(e,n,r,o){return Vn(t,e,n,r,o,!1)},t.$createElement=function(e,n,r,o){return Vn(t,e,n,r,o,!0)};var i=r&&r.data;we(t,"$attrs",i&&i.attrs||e,null,!0),we(t,"$listeners",n._parentListeners||e,null,!0)}function Yn(t){Bn(t.prototype),t.prototype.$nextTick=function(e){return ct(e,this)},t.prototype._render=function(){var t,n=this,o=n.$options,i=o.render,a=o._parentVnode;a&&(n.$scopedSlots=a.data.scopedSlots||e),n.$vnode=a;try{t=i.call(n._renderProxy,n.$createElement)}catch(r){Xe(r,n,"render"),t=n._vnode}return t instanceof fe||(t=_e()),t.parent=a,t}}var Zn=0;function er(e){e.prototype._init=function(e){var t=this;t._uid=Zn++,t._isVue=!0,e&&e._isComponent?tr(t,e):t.$options=Pe(nr(t.constructor),e||{},t),t._renderProxy=t,t._self=t,Lt(t),Ct(t),Kn(t),Wt(t,"beforeCreate"),En(t),cn(t),bn(t),Wt(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function tr(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r,n._parentElm=t._parentElm,n._refElm=t._refElm;var o=r.componentOptions;n.propsData=o.propsData,n._parentListeners=o.listeners,n._renderChildren=o.children,n._componentTag=o.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function nr(e){var t=e.options;if(e.super){var n=nr(e.super),r=e.superOptions;if(n!==r){e.superOptions=n;var o=rr(e);o&&R(e.extendOptions,o),t=e.options=Pe(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function rr(e){var t,n=e.options,r=e.extendOptions,o=e.sealedOptions;for(var i in n)n[i]!==o[i]&&(t||(t={}),t[i]=or(n[i],r[i],o[i]));return t}function or(e,t,n){if(Array.isArray(e)){var r=[];n=Array.isArray(n)?n:[n],t=Array.isArray(t)?t:[t];for(var o=0;o<e.length;o++)(t.indexOf(e[o])>=0||n.indexOf(e[o])<0)&&r.push(e[o]);return r}return e}function ir(e){this._init(e)}function ar(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=A(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}function sr(e){e.mixin=function(e){return this.options=Pe(this.options,e),this}}function cr(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,o=e._Ctor||(e._Ctor={});if(o[r])return o[r];var i=e.name||n.options.name,a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=Pe(n.options,e),a["super"]=n,a.options.props&&ur(a),a.options.computed&&lr(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,U.forEach(function(e){a[e]=n[e]}),i&&(a.options.components[i]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=R({},a.options),o[r]=a,a}}function ur(e){var t=e.options.props;for(var n in t)sn(e.prototype,"_props",n)}function lr(e){var t=e.options.computed;for(var n in t)fn(e.prototype,n,t[n])}function dr(e){U.forEach(function(t){e[t]=function(e,n){return n?("component"===t&&d(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}})}function pr(e){return e&&(e.Ctor.options.name||e.tag)}function hr(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!p(e)&&e.test(t)}function fr(e,t){var n=e.cache,r=e.keys,o=e._vnode;for(var i in n){var a=n[i];if(a){var s=pr(a.componentOptions);s&&!t(s)&&mr(n,i,r,o)}}}function mr(e,t,n,r){var o=e[t];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),e[t]=null,v(n,t)}er(ir),yn(ir),Mt(ir),jt(ir),Yn(ir);var _r=[String,RegExp,Array],gr={name:"keep-alive",abstract:!0,props:{include:_r,exclude:_r,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){var e=this;for(var t in e.cache)mr(e.cache,t,e.keys)},mounted:function(){var e=this;this.$watch("include",function(t){fr(e,function(e){return hr(t,e)})}),this.$watch("exclude",function(t){fr(e,function(e){return!hr(t,e)})})},render:function(){var e=this.$slots.default,t=It(e),n=t&&t.componentOptions;if(n){var r=pr(n),o=this,i=o.include,a=o.exclude;if(i&&(!r||!hr(i,r))||a&&r&&hr(a,r))return t;var s=this,c=s.cache,u=s.keys,l=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;c[l]?(t.componentInstance=c[l].componentInstance,v(u,l),u.push(l)):(c[l]=t,u.push(l),this.max&&u.length>parseInt(this.max)&&mr(c,u[0],u,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}},vr={KeepAlive:gr};function yr(e){var t={get:function(){return P}};Object.defineProperty(e,"config",t),e.util={warn:ce,extend:R,mergeOptions:Pe,defineReactive:we},e.set=Ae,e.delete=Re,e.nextTick=ct,e.options=Object.create(null),U.forEach(function(t){e.options[t+"s"]=Object.create(null)}),e.options._base=e,R(e.options.components,vr),ar(e),sr(e),cr(e),dr(e)}function br(e){var t=e.data;return Er(t.class)}function Er(e){return i(e)?Nr(Tr(e)):""}function Nr(e,t){return e?t?e+" "+t:e:t||""}function Tr(e){return Array.isArray(e)?Or(e):u(e)?Sr(e):"string"===typeof e?e:""}function Or(e){for(var t,n="",r=0,o=e.length;r<o;r++)i(t=Tr(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function Sr(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}function xr(e,t,n){var r,o,i;void 0===n&&(n={});var a=null,s=void 0!==n.leadingDelay&&n.leadingDelay,c=0,u=function(){c=!1===n.leading?0:+new Date,a=null,i=e.apply(r,o),a||(r=o=null)};return function(){var l=+new Date;c||!1!==n.leading||(c=l);var d=t-(l-c);return r=this,o=arguments,d<=0||d>t?(clearTimeout(a),a=null,c=l,!1===s?i=e.apply(r,o):setTimeout(function(){i=e.apply(r,o)},s),a||(r=o=null)):a||!1===n.trailing||(a=setTimeout(u,d)),i}}function Ir(e,t){void 0===t&&(t={});var n=t.before,r=t.after;return function(){var t=[],o=arguments.length;while(o--)t[o]=arguments[o];var i=this;n&&n.call.apply(n,[i,t].concat(t));var a=e.call.apply(e,[i].concat(t));return r&&r.call.apply(r,[i,a].concat(t,[a])),a}}yr(ir),Object.defineProperty(ir.prototype,"$isServer",{get:re}),Object.defineProperty(ir.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(ir,"FunctionalRenderContext",{value:kn}),ir.version="2.5.17";var Cr=function(){this.buff={}};function wr(){var e="";try{!e&&my&&(e="alipay")}catch(r){}try{!e&&swan&&(e="swan")}catch(r){}try{!e&&tt&&(e="tt")}catch(r){}try{!e&&n&&(e="wechat")}catch(r){}return e||"unknown"}Cr.prototype.push=function(e){Object.assign(this.buff,e)},Cr.prototype.pop=function(){var e=Object.assign({},this.buff);return this.buff={},e},Cr.prototype.isEqual=function(e,t){return void 0!==this.buff[e]&&this.buff[e]===t};var Ar="$root",Rr="h",Mr="c",Dr="cp",Br="v",kr="s",$r={swan:"_",wechat:"-",alipay:"-",tt:"-"},Lr={text:"t",vtext:"vt",if:"_if",for:"li",class:"cl",rootClass:"rcl",style:"st",value:"value",vhtml:"html",vshow:"vs",slot:"slot"},jr=function(e){return!!e},Fr=_("template,script,style,element,content,slot,link,meta,svg,view,a,div,img,image,text,span,richtext,input,switch,textarea,spinner,select,slider,slider-neighbor,indicator,trisition,trisition-group,canvas,list,cell,header,loading,loading-indicator,refresh,scrollable,scroller,video,web,embed,tabbar,tabheader,datepicker,timepicker,marquee,countdown",!0),Ur=_("style,class");_("web,spinner,switch,video,textarea,canvas,indicator,marquee,countdown",!0),_("embed,img,image,input,link,meta",!0);function qr(){}function Pr(){}function Hr(){}var Wr={tap:["tap","click"]};function Gr(e,t){void 0===e&&(e={}),void 0===t&&(t="");var n="string"===typeof t?t.split("."):t;return n.reduce(function(e,t){return e&&i(e)&&(e=e[t]),e},e)}function Jr(e,t){var n=typeof e,r=typeof t;if("object"!==n||"object"!==r||n!==r)return e===t||""===e&&void 0===t||void 0===e&&""===t;if(Array.isArray(e)&&e.length!==t.length)return!1;for(var o in e)if(!Jr(e[o],t[o]))return!1;return!0}function Vr(e,t){void 0===t&&(t={});var n=$r[e.$mp.platform]||$r.wechat,r=t.data;void 0===r&&(r={});var o=i(r._hid)?r._hid:r.attrs&&r.attrs._hid,a=i(r._fid)?r._fid:r.attrs&&r.attrs._fid;return i(a)?""+o+n+a:o}function zr(e,t){var n;if(void 0===e&&(e={}),Kr(e)===""+t)return e;for(var r=e.$children,o=0;o<r.length;++o)if(n=zr(r[o],t),n)return n}function Xr(e){var t=e.$vnode,n=t&&t.data&&t.data.attrs._cid;return n=n||"0",n}function Qr(e){var t=e.$vnode,n=t&&t.data&&t.data.attrs._fid;return n}function Kr(e){var t,n=$r[e.$mp.platform]||$r.wechat,r=[],o=e;while(o)o!==e&&Yr(o,t)||r.unshift(Xr(o)),t=o,o=o.$parent;var a=r.join(Br),s=Qr(e);return i(s)?""+a+n+s:a}function Yr(e,t){var n=t||{},r=n.$vnode;void 0===r&&(r={});var o=r._mpSlotParentUId;return i(o)&&o===e._uid}function Zr(e){return void 0===e&&(e={}),0===Object.keys(e).length}function eo(e){var t,n=$r[e.$mp.platform]||$r.wechat;e=e||this;var r=Kr(e),o=r.indexOf(n),i=o>-1?r.slice(0,o):r,a={cid:r,cpath:""+i+Br},s=Ar+"."+r;e.$mp._update((t={},t[s+"."+Mr]=a.cid,t[s+"."+Dr]=a.cpath,t))}function to(e,t){var n;e=e||this;var r=Kr(e),o=[Ar,r,kr],a=Gr(e.$mp.page.data,o),s=o.join(".");i(t)&&a!==t&&e.$mp._update((n={},n[s]=t,n))}function no(e,t,n){var r;void 0===e&&(e=Lr.text);var o=this,a=Kr(o),s=Vr(o,n),c=[Ar,a,Rr,s,e],u=c.join("."),l=Gr(o.$mp.page.data,c),d=Jr(l,t);i(s)&&("swan"===o.$mp.platform&&/[^A-Za-z0-9_]/.test(e)&&(u=u.replace(/\.[^\.]*$/,"['"+e+"']")),d&&o.$mp._isEqualToBuffer(u,t)||o.$mp._update((r={},r[u]=t,r)))}function ro(e,t,n,r){for(var o=n.split("."),i=o.length,a=t,s=i-1,c=0;c<i;c++){var u=o[c];if(c<s)if(a.hasOwnProperty(u))a=a[u];else{a=a[u]={};var l=o.slice(0,c).join(".");e[l]?e[l][u]={}:c>2?(l=o.slice(0,c-1).join("."),e[l]?e[l][o[c-1]][u]={}:e[o.slice(0,c+1).join(".")]={}):e[o.slice(0,c+1).join(".")]={}}}}function oo(e,t){var n={};for(var r in t)ro(n,e,r,t[r]);return n}function io(e){var t=new Cr;function n(){var n=t.pop();if(!Zr(n)&&e.setData)if("tt"===ir.prototype._mpPlatform){var r=oo(e.data,n);e.setData(r,function(){e.setData(n,function(){})})}else e.setData(n)}var r=xr(function(){n()},50,{leadingDelay:0});return{update:function(e){t.push(e),r()},instantUpdate:function(e){n()},isEqualToBuffer:function(e,n){return t.isEqual(e,n)}}}function ao(e,t,n){void 0===t&&(t=Lr.text);var r=e.context,o=e.slotContext,i=o||r;i&&i.$updateMPData(t,n,e),i||console.warn("update text with no context",t,n,e)}var so="";function co(e,t){var n=e.data;void 0===n&&(n={});var r=n.attrs;void 0===r&&(r={});var o=r._hid,a=r._fid,s=i(a)?""+o+so+a:o;return""+s===""+t}function uo(e){if("form"===e.tag)return e;var t=e.children;if(t&&t.length)for(var n=0;n<t.length;n++){var r=t[n],o=uo(r);if(o)return o}}function lo(e){if(!e)return[];var t=uo(e);if(t.data&&t.data.on&&t.data.on.reset){var n=[];return"function"===typeof t.data.on.reset?n.push(t.data.on.reset):n=t.data.on.reset,n}return[]}function po(e,t){so||(so=$r[e.$mp.platform]||$r.wechat);var n="alipay"===e.$mp.platform&&"function"===typeof t;n&&(t={type:"reset",detail:{},currentTarget:{},target:{},dataset:{}}),t.currentTarget||(t.currentTarget={}),t.target||(t.target={});var r=t.type,o=t.detail;void 0===o&&(o={});var i=t.currentTarget||t.target,a=i.dataset;void 0===a&&(a={});var s=a.cid,c=a.hid,u=[];if(n)u=lo(e._vnode);else{var l=zr(e,s);u=fo(l,r,c)}var d=Object.assign({},t);Object.assign(t.target,{value:o.value}),d.mp=t,u.forEach(function(e){e(d)})}function ho(e,t){void 0===e&&(e={});var n=e.componentInstance,r=e.children;if(void 0===r&&(r=[]),co(e,t))return e;if(n){var o=n.$slots;void 0===o&&(o={}),r=Object.keys(o).reduce(function(e,t){var n=o[t];return n._rendered&&(e=e.concat(n)),e},[])}for(var i=0,a=r.length;i<a;++i){var s=ho(r[i],t);if(s)return s}}function fo(e,t,n){var r=t.toLowerCase(),o=[],i=Wr[r]||[r];if(r!==t&&i.push(t),!e)return o;var a=ho(e._vnode,n);if(!a)return o;var s=a.elm,c=s.on;return void 0===c&&(c={}),co(a,n)?(o=i.reduce(function(e,t){var n=c[t];return"function"===typeof n?e.push(n):Array.isArray(n)&&(e=e.concat(n)),e},[]),o):o}function mo(e,t,n,r,o){var a=r._fid;if(e&&e.tag&&(e=[e]),e&&e.length){var s=go(e),c=s.context;if(c!==this){var u=Kr(c);to(this,u)}vo(e,this._uid)}var l=this.$scopedSlots[t];return l&&i(a)&&_o(e,"-"+a),e}function _o(e,t){void 0===e&&(e=[]),e.forEach(function(e){e.data&&e.data._hid?e.data._hid+=t:e&&e.data&&e.data.attrs&&e.data.attrs._hid&&(e.data.attrs._hid+=t),_o(e.children||[],t)})}function go(e){var t=e;while(t&&Array.isArray(t))t=t[0];return t}function vo(e,t){void 0===e&&(e=[]),e.forEach(function(e){var n=e.componentOptions;n&&(e._mpSlotParentUId=t),vo(e.children,t)})}function yo(e,t,n){var r={context:this,data:{attrs:{_hid:t,_fid:n}}};return ao(r,Lr.if,e),e}function bo(e,t,n,r,o){Eo(e,t,r,o)}function Eo(e,t,n,r){void 0===e&&(e=[]);var o,i=e[0],a=[];if(i){if(Array.isArray(i))o=i.map(function(e){var t=e.data||{},n=t.attrs;void 0===n&&(n={});var r=n._fk;return void 0===r&&(r=""),r});else{var s=i.data||{},c=s.attrs;void 0===c&&(c={});var l=c._fk;void 0===l&&(l=""),o=[l]}o=o.filter(function(e){return e});var d=[];if(Array.isArray(t)||"string"===typeof t){d=new Array(t.length);for(var p=0,h=t.length;p<h;p++)d[p]=t[p]}else if("number"===typeof t){d=new Array(t);for(var f=0;f<t;f++)d[f]=f}else u(t)&&(d=Object.keys(t).map(function(e,t){return t}));a=d.map(function(e,n){return 0===o.length?n:o.reduce(function(e,r){return e[r.replace(/\./g,"_")]=Gr(t[n],r),e},{})})}var m={context:r,data:{attrs:{_hid:n}}};i&&!i.fn&&e.forEach(function(e){Array.isArray(e)?e.forEach(function(e){e.key&&(e.key=void 0)}):e.key&&(e.key=void 0)}),ao(m,Lr.for,a)}var No=null;function To(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var r=t.options,o=t.Component,i=t.platform,a=r.mpType,s=n,c=io(e),u=c.update,l=c.instantUpdate,d=c.isEqualToBuffer,p={platform:i,status:"load",query:s,options:s,_update:u,_instantUpdate:l,_isEqualToBuffer:d};"app"===a?(No=e,Object.assign(p,{app:No})):Object.assign(p,{page:e,app:No}),Object.assign(r,{$mp:p});var h=new o(r);return h}function Oo(e,t){return{on:{}}}function So(e,t){return{}}function xo(e,t){return ao(t,Lr.text,e),{text:e}}function Io(e){return{text:e}}function Co(e,t,n){}function wo(e,t){}function Ao(e,t){}function Ro(e){return{}}function Mo(e){return{}}function Do(e){return"#"}function Bo(e,t,n){return ao(n,Lr.text,t),{}}function ko(e,t,n){return{}}function $o(e,t,n,r){return{}}var Lo=Object.freeze({createElement:Oo,createElementNS:So,createTextNode:xo,createComment:Io,insertBefore:Co,removeChild:wo,appendChild:Ao,parentNode:Ro,nextSibling:Mo,tagName:Do,setTextContent:Bo,setStyleScope:ko,setAttribute:$o}),jo={create:function(e,t){Fo(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Fo(e,!0),Fo(t))},destroy:function(e){Fo(e,!0)}};function Fo(e,t){var n=e.data.ref;if(i(n)){var r=e.context,o=e.componentInstance||e.elm,a=r.$refs;t?Array.isArray(a[n])?v(a[n],o):a[n]===o&&(a[n]=void 0):e.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}var Uo=new fe("",{},[]),qo=["create","activate","update","remove","destroy"];function Po(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&i(e.data)===i(t.data)&&Ho(e,t)||a(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&o(t.asyncFactory.error))}function Ho(e,t){if("input"!==e.tag)return!0;var n,r=i(n=e.data)&&i(n=n.attrs)&&n.type,o=i(n=t.data)&&i(n=n.attrs)&&n.type;return r===o}function Wo(e,t,n){var r,o,a={};for(r=t;r<=n;++r)o=e[r].key,i(o)&&(a[o]=r);return a}function Go(e){var t,n,r={},s=e.modules,u=e.nodeOps;for(t=0;t<qo.length;++t)for(r[qo[t]]=[],n=0;n<s.length;++n)i(s[n][qo[t]])&&r[qo[t]].push(s[n][qo[t]]);function l(e){return new fe(u.tagName(e).toLowerCase(),{},[],void 0,e)}function d(e,t){function n(){0===--n.listeners&&p(e)}return n.listeners=t,n}function p(e){var t=u.parentNode(e);i(t)&&u.removeChild(t,e)}function h(e,t,n,r,o){if(e.isRootInsert=!o,!f(e,t,n,r)){var s=e.data,c=e.children,l=e.tag;i(l)?(e.elm=e.ns?u.createElementNS(e.ns,l):u.createElement(l,e),N(e),y(e,c,t),i(s)&&E(e,t),v(n,e.elm,r)):a(e.isComment)?(e.elm=u.createComment(e.text),v(n,e.elm,r)):(e.elm=u.createTextNode(e.text,e),v(n,e.elm,r))}}function f(e,t,n,r){var o=e.data;if(i(o)){var s=i(e.componentInstance)&&o.keepAlive;if(i(o=o.hook)&&i(o=o.init)&&o(e,!1,n,r),i(e.componentInstance))return m(e,t),a(s)&&g(e,t,n,r),!0}}function m(e,t){i(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,b(e)?(E(e,t),N(e)):(Fo(e),t.push(e))}function g(e,t,n,o){var a,s=e;while(s.componentInstance)if(s=s.componentInstance._vnode,i(a=s.data)&&i(a=a.transition)){for(a=0;a<r.activate.length;++a)r.activate[a](Uo,s);t.push(s);break}v(n,e.elm,o)}function v(e,t,n){i(e)&&(i(n)?n.parentNode===e&&u.insertBefore(e,t,n):u.appendChild(e,t))}function y(e,t,n){if(Array.isArray(t))for(var r=0;r<t.length;++r)h(t[r],n,e.elm,null,!0);else c(e.text)&&u.appendChild(e.elm,u.createTextNode(e.text,e))}function b(e){while(e.componentInstance)e=e.componentInstance._vnode;return i(e.tag)}function E(e,n){for(var o=0;o<r.create.length;++o)r.create[o](Uo,e);t=e.data.hook,i(t)&&(i(t.create)&&t.create(Uo,e),i(t.insert)&&n.push(e))}function N(e){var t,n=e;while(n)i(t=n.context)&&i(t=t.$options._scopeId)&&u.setAttribute(e.elm,t,"",e),n=n.parent;i(t=$t)&&t!==e.context&&i(t=t.$options._scopeId)&&u.setAttribute(e.elm,t,"",e)}function T(e,t,n,r,o,i){for(;r<=o;++r)h(n[r],i,e,t)}function O(e){var t,n,o=e.data;if(i(o))for(i(t=o.hook)&&i(t=t.destroy)&&t(e),t=0;t<r.destroy.length;++t)r.destroy[t](e);if(i(t=e.children))for(n=0;n<e.children.length;++n)O(e.children[n])}function S(e,t,n,r){for(;n<=r;++n){var o=t[n];i(o)&&(i(o.tag)?(x(o),O(o)):p(o.elm))}}function x(e,t){if(i(t)||i(e.data)){var n,o=r.remove.length+1;for(i(t)?t.listeners+=o:t=d(e.elm,o),i(n=e.componentInstance)&&i(n=n._vnode)&&i(n.data)&&x(n,t),n=0;n<r.remove.length;++n)r.remove[n](e,t);i(n=e.data.hook)&&i(n=n.remove)?n(e,t):t()}else p(e.elm)}function I(e,t,n,r,a){var s,c,l,d,p=0,f=0,m=t.length-1,_=t[0],g=t[m],v=n.length-1,y=n[0],b=n[v],E=!a;while(p<=m&&f<=v)o(_)?_=t[++p]:o(g)?g=t[--m]:Po(_,y)?(C(_,y,r),_=t[++p],y=n[++f]):Po(g,b)?(C(g,b,r),g=t[--m],b=n[--v]):Po(_,b)?(C(_,b,r),E&&u.insertBefore(e,_.elm,u.nextSibling(g.elm)),_=t[++p],b=n[--v]):Po(g,y)?(C(g,y,r),E&&u.insertBefore(e,g.elm,_.elm),g=t[--m],y=n[++f]):(o(s)&&(s=Wo(t,p,m)),c=i(y.key)?s[y.key]:null,o(c)?(h(y,r,e,_.elm),y=n[++f]):(l=t[c],Po(l,y)?(C(l,y,r),t[c]=void 0,E&&u.insertBefore(e,l.elm,_.elm),y=n[++f]):(h(y,r,e,_.elm),y=n[++f])));p>m?(d=o(n[v+1])?null:n[v+1].elm,T(e,d,n,f,v,r)):f>v&&S(e,t,p,m)}function C(e,t,n,s){if(e!==t){var c=t.elm=e.elm;if(a(e.isAsyncPlaceholder))i(t.asyncFactory.resolved)?R(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(a(t.isStatic)&&a(e.isStatic)&&t.key===e.key&&(a(t.isCloned)||a(t.isOnce)))t.componentInstance=e.componentInstance;else{var l,d=t.data;i(d)&&i(l=d.hook)&&i(l=l.prepatch)&&l(e,t);var p=e.children,h=t.children;if(i(d)&&b(t)){for(l=0;l<r.update.length;++l)r.update[l](e,t);i(l=d.hook)&&i(l=l.update)&&l(e,t)}o(t.text)?i(p)&&i(h)?p!==h&&I(c,p,h,n,s):i(h)?(i(e.text)&&u.setTextContent(c,"",t),T(c,null,h,0,h.length-1,n)):i(p)?S(c,p,0,p.length-1):i(e.text)&&u.setTextContent(c,"",t):(e.text!==t.text||e.data&&t.data&&e.data._hid!==t.data._hid)&&u.setTextContent(c,t.text,t),i(d)&&i(l=d.hook)&&i(l=l.postpatch)&&l(e,t)}}}function w(e,t,n){if(a(n)&&i(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var A=_("attrs,style,class,staticClass,staticStyle,key");function R(e,n,r){if(a(n.isComment)&&i(n.asyncFactory))return n.elm=e,n.isAsyncPlaceholder=!0,!0;n.elm=e;var o=n.tag,s=n.data,c=n.children;if(i(s)&&(i(t=s.hook)&&i(t=t.init)&&t(n,!0),i(t=n.componentInstance)))return m(n,r),!0;if(i(o)){if(i(c))if(e.hasChildNodes()){for(var u=!0,l=e.firstChild,d=0;d<c.length;d++){if(!l||!R(l,c[d],r)){u=!1;break}l=l.nextSibling}if(!u||l)return!1}else y(n,c,r);if(i(s))for(var p in s)if(!A(p)){E(n,r);break}}else e.data!==n.text&&(e.data=n.text);return!0}return function(e,t,n,s,c,d){if(!o(t)){var p=!1,f=[];if(o(e))p=!0,h(t,f,c,d);else{var m=i(e.nodeType);if(!m&&Po(e,t))C(e,t,f,s);else{if(m){if(1===e.nodeType&&e.hasAttribute(F)&&(e.removeAttribute(F),n=!0),a(n)&&R(e,t,f))return w(t,f,!0),e;e=l(e)}var _=e.elm,g=u.parentNode(_);if(h(t,f,_._leaveCb?null:g,u.nextSibling(_)),i(t.parent)){var v=t.parent;while(v)v.elm=t.elm,v=v.parent;if(b(t))for(var y=0;y<r.create.length;++y)r.create[y](Uo,t.parent)}i(g)?S(g,[e],0,0):i(e.tag)&&O(e)}}return w(t,f,p),t.elm}i(e)&&O(e)}}function Jo(e,t,n){var r=new fe(void 0,{_hid:t,_fid:n},void 0,String(e),void 0,this);return r}function Vo(e,t,n,r,o,i,a){var s=3;(Array.isArray(r)||c(r))&&(s=2,o,o=r,r=void 0),e[s]=zo(o)}function zo(e){void 0===e&&(e=[]);for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];Array.isArray(o)?t=t.concat(zo(o)):o&&t.push(o)}return t}_("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),_("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),_("text,number,password,search,email,tel,url");var Xo=new fe("",{},[]),Qo={create:Ko,update:Ko,destroy:function(e){Ko(e,Xo)}};function Ko(e,t){(e.data.directives||t.data.directives)&&Yo(e,t)}function Yo(e,t){var n,r,o,i=e===Xo,a=t===Xo,s=ei(e.data.directives,e.context),c=ei(t.data.directives,t.context),u=[],l=[];for(n in c)r=s[n],o=c[n],r?(o.oldValue=r.value,ni(o,"update",t,e),o.def&&o.def.componentUpdated&&l.push(o)):(ni(o,"bind",t,e),o.def&&o.def.inserted&&u.push(o));if(u.length){var d=function(){for(var n=0;n<u.length;n++)ni(u[n],"inserted",t,e)};i?_t(t,"insert",d):d()}if(l.length&&_t(t,"postpatch",function(){for(var n=0;n<l.length;n++)ni(l[n],"componentUpdated",t,e)}),!i)for(n in s)c[n]||ni(s[n],"unbind",e,e,a)}var Zo=Object.create(null);function ei(e,t){var n,r,o=Object.create(null);if(!e)return o;for(n=0;n<e.length;n++)r=e[n],r.modifiers||(r.modifiers=Zo),o[ti(r)]=r,r.def=He(t.$options,"directives",r.name,!0);return o}function ti(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function ni(e,t,n,o,i){var a=e.def&&e.def[t];if(a)try{a(n.elm,e,n,o,i)}catch(r){Xe(r,n.context,"directive "+e.name+" "+t+" hook")}}var ri=[jo,Qo],oi=["_hid","_fk","_cid","_batrs"];function ii(e){return oi.indexOf(e)>-1||/^_if_/.test(e)}function ai(e,t){var n=t.componentOptions;if((!i(n)||!1!==n.Ctor.options.inheritAttrs)&&(!o(e.data.attrs)||!o(t.data.attrs))){var r,a,s,c=e.data.attrs||{},u=t.data.attrs||{},l=(u._batrs||"").split(",");for(r in i(u.__ob__)&&(u=t.data.attrs=R({},u)),u)ii(r)||(a=u[r],s=c[r],s!==a&&(l.indexOf(r)>-1||"slot"===r)&&ao(t,r,a))}}var si={create:ai,update:ai};function ci(e,t){var n=t.data,r=e.data;if(!(o(n.staticClass)&&o(n.class)&&(o(r)||o(r.staticClass)&&o(r.class)))){var a=br(t),s=null,c=null;if(i(a)&&i(t.componentInstance)){var u=t.data,l=u.staticClass;void 0===l&&(l="");var d=a.split(/\s+/).concat(l.split(/\s+/));c=t.componentInstance._vnode,s=d.join(" "),a=void 0}i(a)&&(t.elm.class=a,ao(t,Lr.class,a)),i(s)&&ao(c,Lr.rootClass,s)}}var ui={create:ci,update:ci};function li(e,t){if(!o(e.data.domProps)||!o(t.data.domProps)){var n,r,a=t.elm,s=e.data.domProps||{},c=t.data.domProps||{};for(n in i(c.__ob__)&&(c=t.data.domProps=R({},c)),s)o(c[n])&&(a[n]="");for(n in c){if(r=c[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),r===s[n])continue;if("innerHTML"===n){var u=t.context,l=u.$htmlParse;if(l){var d=l(r);ao(t,Lr.vhtml,d)}else ao(t,Lr.vhtml,r);return}if("textContent"===n)return void ao(t,Lr.vtext,r)}if("value"===n){a._value=r;var p=o(r)?"":String(r);di(a,p)&&a.value!==p&&(a.value=p,ao(t,n,p))}else a[n]!==r&&(a[n]=r,ao(t,n,r))}}}function di(e,t){return!e.composing&&("OPTION"===e.tagName||pi(e,t)||hi(e,t))}function pi(e,t){var n=!0;try{n=document.activeElement!==e}catch(r){}return n&&e.value!==t}function hi(e,t){var n=e.value,r=e._vModifiers;if(i(r)){if(r.lazy)return!1;if(r.number)return m(n)!==m(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}var fi={create:li,update:li},mi=E(function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach(function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t});function _i(e){var t=gi(e.style);return t}function gi(e){return Array.isArray(e)?M(e):"string"===typeof e?mi(e):e}function vi(e,t){var n,r={};if(t){var o=e;while(o.componentInstance)o=o.componentInstance._vnode,o&&o.data&&(n=_i(o.data))&&R(r,n)}(n=_i(e.data))&&R(r,n);var i=e;while(i=i.parent)i.data&&(n=_i(i.data))&&R(r,n);return r}var yi=/^--/,bi=/\s*!important$/,Ei=E(function(e){return void 0===e&&(e=""),e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})});function Ni(e,t){var n=t.data,r=e.data;if(!(o(n.staticStyle)&&o(n.style)&&o(r.staticStyle)&&o(r.style))){var a=gi(t.data.style)||{};t.data.normalizedStyle=i(a.__ob__)?R({},a):a;var s=vi(t,!0),c=[],u=Object.keys(s).reduce(function(e,t){var n=s[t],r=Ei(t);if(void 0===n||null===n||!1===n)return e;if(yi.test(t))e.push(t+": "+n);else if(bi.test(n))e.push(r+": "+n);else if(Array.isArray(n))for(var o=0,i=n.length;o<i;o++)e.push(r+": "+n[o]);else e.push(r+": "+n);return e},c).filter(jr).join("; ");ao(t,Lr.style,u)}}var Ti,Oi={create:Ni,update:Ni};function Si(e,t,n){var r=Ti;return function o(){var i=e.apply(null,arguments);null!==i&&Ii(t,o,n,r)}}function xi(e,t,n,r,o){n&&(t=Si(t,e,r)),Ti.on[e]||(Ti.on[e]=[]),Ti.on[e].push(t)}function Ii(e,t,n,r){if(t){var o=r||Ti,i=t._withTask||t;if(o.on[e]){var a=o.on[e].indexOf(i);a>-1&&o.on[e].splice(a,1)}}}function Ci(e,t){if(!o(e.data.on)||!o(t.data.on)){var n=t.data.on||{},r=e.data.on||{};Ti=t.elm,mt(n,r,xi,Ii,t.context),Ti=void 0}}var wi={create:Ci,update:Ci},Ai=[si,ui,fi,Oi,wi],Ri=Ai.concat(ri),Mi=Go({nodeOps:Lo,modules:Ri});function Di(e,t,n){var r;void 0===n&&(n={});var o=n.bottomToTop;if(void 0===o&&(o=!1),o||(r=t(e)),e.$children)for(var i=e.$children.length-1;i>=0;i--){var a=e.$children[i];r=Di(a,t,n)||r}return o&&(r=t(e)),r}function Bi(e,t,n){if(e){var r;if(r="onReady"===t?Di(e,function(e){var r=e.$options[t];r&&r.call(e,n)},{bottomToTop:!0}):Di(e,function(e){var r=e.$options[t];return r&&r.call(e,n)}),"onUnload"===t){var o=e.$root;o.$destroy()}return r}}var ki={init:function(e){var t;Page({data:(t={},t[Ar]={},t),onLoad:function(t){var n=this.rootVM=To(this,e,t);Bi(n,"onLoad",t),n.$mount(),n.$mp._instantUpdate()},onReady:function(e){var t=this.rootVM,n=t.$mp;n.status="ready",Bi(t,"onReady",e)},onShow:function(e){var t=this.rootVM,n=t.$mp;n.status="show",Bi(t,"onShow",e)},onHide:function(e){var t=this.rootVM,n=t.$mp;n.status="hide",Bi(t,"onHide",e)},onUnload:function(e){var t=this.rootVM,n=t.$mp;n.status="unload",Bi(t,"onUnload",e)},onPullDownRefresh:function(e){var t=this.rootVM;Bi(t,"onPullDownRefresh",e)},onReachBottom:function(e){var t=this.rootVM;Bi(t,"onReachBottom",e)},onShareAppMessage:function(e){var t=this.rootVM;return e.currentTarget&&(e.target=e.currentTarget),Bi(t,"onShareAppMessage",e)},onPageScroll:function(e){var t=this.rootVM;Bi(t,"onPageScroll",e)},onTabItemTap:function(e){var t=this.rootVM;Bi(t,"onTabItemTap",e)},onTitleClick:function(){var e=this.rootVM;Bi(e,"onTitleClick")},_pe:function(e){this.proxyEvent(e)},proxyEvent:function(e){var t=this.rootVM;po(t,e)}})}},$i={};function Li(e,t){var n=t.mpType;void 0===n&&(n="page");var r=e._mpPlatform;"app"===n?$i.init({Component:e.constructor,options:t,platform:r}):"page"===n&&ki.init({Component:e.constructor,options:t,platform:r})}$i.init=function(e){var t,n;try{n=App}catch(r){n=my.__megalo.App}n({data:(t={},t[Ar]={},t),onLaunch:function(t){void 0===t&&(t={});var n=this.rootVM=To(this,e,t.query),r=n.$options,o=r.globalData;void 0===o&&(o=function(){}),this.globalData=o&&("function"===typeof o?o.call(n,t):o)||{},n.globalData=this.globalData,n.$mount(),Bi(n,"onLaunch",t)},onShow:function(e){var t=this.rootVM;Bi(t,"onShow",e)},onHide:function(){var e=this.rootVM;Bi(e,"onHide")},onError:function(e){var t=this.rootVM;Bi(t,"onError",e)},onPageNotFound:function(e){var t=this.rootVM;Bi(t,"onPageNotFound",e)},globalData:{}})};var ji={update:function(e,t,n){var r=t.value,o=t.oldValue;o!==r&&ao(n,Lr.value,r)},inserted:function(e,t,n,r){},componentUpdated:function(e,t,n){}},Fi={bind:function(e,t,n){var r=t.value,o=t.oldValue;r!==o&&ao(n,Lr.vshow,!r)},update:function(e,t,n){var r=t.value,o=t.oldValue;r!==o&&ao(n,Lr.vshow,!r)},unbind:function(e,t,n,r,o){}},Ui={model:ji,show:Fi};ir.config.mustUseProp=qr,ir.config.isReservedTag=Fr,ir.config.isReservedAttr=Ur,ir.config.getTagNamespace=Pr,ir.config.isUnknownElement=Hr,R(ir.options.directives,Ui),ir.prototype.__patch__=Mi,ir.prototype._v=Jo,ir.prototype._ri=yo,ir.prototype.$updateMPData=no,ir.prototype._l=Ir(ir.prototype._l,{after:bo});var qi=ir.prototype._init;return ir.prototype._init=function(e){void 0===e&&(e={}),ir.prototype._mpPlatform||(ir.prototype._mpPlatform=wr());var t=e.$mp,n=e.parent;void 0===n&&(n={});var r=e.mpType;if(void 0===r&&(r=""),!r&&this.constructor.extendOptions&&this.constructor.extendOptions.mpType&&(e=this.constructor.extendOptions,r=e.mpType),t=t||n.$mp,t||!r)return t?(delete e.$mp,this.$mp=t,qi.call(this,e),this._t=Ir(this._t,{after:mo}),this._c=Ir(this._c,{before:Vo}),this):(qi.call(this,e),this);Li(this,e)},ir.prototype.$mount=function(e,t){if(this.$mp){var n=Ft(this,void 0,void 0);return eo(n),n}},ir})}).call(this,n("c8ba"),n("f266")["default"])},4345:function(e,t,n){"use strict";(function(){var e=0;t.code={WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR:e++,WEBIM_CONNCTION_OPEN_ERROR:e++,WEBIM_CONNCTION_AUTH_ERROR:e++,WEBIM_CONNCTION_OPEN_USERGRID_ERROR:e++,WEBIM_CONNCTION_ATTACH_ERROR:e++,WEBIM_CONNCTION_ATTACH_USERGRID_ERROR:e++,WEBIM_CONNCTION_REOPEN_ERROR:e++,WEBIM_CONNCTION_SERVER_CLOSE_ERROR:e++,WEBIM_CONNCTION_SERVER_ERROR:e++,WEBIM_CONNCTION_IQ_ERROR:e++,WEBIM_CONNCTION_PING_ERROR:e++,WEBIM_CONNCTION_NOTIFYVERSION_ERROR:e++,WEBIM_CONNCTION_GETROSTER_ERROR:e++,WEBIM_CONNCTION_CROSSDOMAIN_ERROR:e++,WEBIM_CONNCTION_LISTENING_OUTOF_MAXRETRIES:e++,WEBIM_CONNCTION_RECEIVEMSG_CONTENTERROR:e++,WEBIM_CONNCTION_DISCONNECTED:e++,WEBIM_CONNCTION_AJAX_ERROR:e++,WEBIM_CONNCTION_JOINROOM_ERROR:e++,WEBIM_CONNCTION_GETROOM_ERROR:e++,WEBIM_CONNCTION_GETROOMINFO_ERROR:e++,WEBIM_CONNCTION_GETROOMMEMBER_ERROR:e++,WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR:e++,WEBIM_CONNCTION_LOAD_CHATROOM_ERROR:e++,WEBIM_CONNCTION_NOT_SUPPORT_CHATROOM_ERROR:e++,WEBIM_CONNCTION_JOINCHATROOM_ERROR:e++,WEBIM_CONNCTION_QUITCHATROOM_ERROR:e++,WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR:e++,WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR:e++,WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR:e++,WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR:e++,WEBIM_CONNCTION_CALLBACK_INNER_ERROR:e++,WEBIM_CONNCTION_CLIENT_OFFLINE:e++,WEBIM_CONNCTION_CLIENT_LOGOUT:e++,WEBIM_UPLOADFILE_BROWSER_ERROR:100,WEBIM_UPLOADFILE_ERROR:101,WEBIM_UPLOADFILE_NO_LOGIN:102,WEBIM_UPLOADFILE_NO_FILE:103,WEBIM_DOWNLOADFILE_ERROR:200,WEBIM_DOWNLOADFILE_NO_LOGIN:201,WEBIM_DOWNLOADFILE_BROWSER_ERROR:202,WEBIM_MESSAGE_REC_TEXT:300,WEBIM_MESSAGE_REC_TEXT_ERROR:301,WEBIM_MESSAGE_REC_EMOTION:302,WEBIM_MESSAGE_REC_PHOTO:303,WEBIM_MESSAGE_REC_AUDIO:304,WEBIM_MESSAGE_REC_AUDIO_FILE:305,WEBIM_MESSAGE_REC_VEDIO:306,WEBIM_MESSAGE_REC_VEDIO_FILE:307,WEBIM_MESSAGE_REC_FILE:308,WEBIM_MESSAGE_SED_TEXT:309,WEBIM_MESSAGE_SED_EMOTION:310,WEBIM_MESSAGE_SED_PHOTO:311,WEBIM_MESSAGE_SED_AUDIO:312,WEBIM_MESSAGE_SED_AUDIO_FILE:313,WEBIM_MESSAGE_SED_VEDIO:314,WEBIM_MESSAGE_SED_VEDIO_FILE:315,WEBIM_MESSAGE_SED_FILE:316,STATUS_INIT:400,STATUS_DOLOGIN_USERGRID:401,STATUS_DOLOGIN_IM:402,STATUS_OPENED:403,STATUS_CLOSING:404,STATUS_CLOSED:405,STATUS_ERROR:406}})()},"4df4":function(e,t,n){"use strict";var r=n("c1a0");e.exports=new r},"518f":function(e,t,n){"use strict";var r=n("9f3c");(function(){var e=n("fe52").utils,o=function e(t,n){return this instanceof e?(this._msg={},"function"===typeof e[t]&&(e[t].prototype.setGroup=this.setGroup,this._msg=new e[t](n)),this._msg):new e(t)};function i(e){if(!(this instanceof i))return new i(e);this.msg=e}o.prototype.setGroup=function(e){this.body.group=e},o.read=function(e){this.id=e,this.type="read"},o.read.prototype.set=function(e){this.body={ackId:e.id,to:e.to}},o.txt=function(e){this.id=e,this.type="txt",this.body={}},o.txt.prototype.set=function(e){this.value=e.msg,this.body={id:this.id,from:e.from,to:e.to,msg:this.value,type:this.type,roomType:e.roomType,chatType:e.chatType,ext:e.ext||{},success:e.success,fail:e.fail},!e.roomType&&delete this.body.roomType},o.cmd=function(e){this.id=e,this.type="cmd",this.body={}},o.cmd.prototype.set=function(e){this.value="",this.body={to:e.to,from:e.from,action:e.action,msg:this.value,type:this.type,roomType:e.roomType,ext:e.ext||{}},!e.roomType&&delete this.body.roomType},o.location=function(e){this.id=e,this.type="loc",this.body={}},o.location.prototype.set=function(e){this.body={to:e.to,from:e.from,type:this.type,roomType:e.roomType,addr:e.addr,lat:e.lat,lng:e.lng,chatType:e.chatType,ext:e.ext||{}}},o.img=function(e){this.id=e,this.type="img",this.body={}},o.img.prototype.set=function(e){this.value=e.file,this.body={id:this.id,file:this.value,apiUrl:e.apiUrl,to:e.to,from:e.from,type:this.type,ext:e.ext||{},roomType:e.roomType,onFileUploadError:e.onFileUploadError,onFileUploadComplete:e.onFileUploadComplete,success:e.success,fail:e.fail,flashUpload:e.flashUpload,width:e.width,height:e.height,body:e.body},!e.roomType&&delete this.body.roomType},o.audio=function(e){this.id=e,this.type="audio",this.body={}},o.audio.prototype.set=function(t){t.file=t.file||e.getFileUrl(t.fileInputId),this.value=t.file,this.filename=t.filename||this.value.filename,this.body={id:this.id,file:this.value,filename:this.filename,apiUrl:t.apiUrl,accessToken:t.accessToken,to:t.to,from:t.from,type:this.type,ext:t.ext||{},length:t.length||0,roomType:t.roomType,file_length:t.file_length,onFileUploadError:t.onFileUploadError,onFileUploadComplete:t.onFileUploadComplete,success:t.success,fail:t.fail,flashUpload:t.flashUpload,body:t.body},!t.roomType&&delete this.body.roomType},o.file=function(e){this.id=e,this.type="file",this.body={}},o.file.prototype.set=function(t){t.file=t.file||e.getFileUrl(t.fileInputId),this.value=t.file,this.filename=t.filename||this.value.filename,this.body={id:this.id,file:this.value,filename:this.filename,apiUrl:t.apiUrl,to:t.to,from:t.from,type:this.type,ext:t.ext||{},roomType:t.roomType,onFileUploadError:t.onFileUploadError,onFileUploadComplete:t.onFileUploadComplete,success:t.success,fail:t.fail,flashUpload:t.flashUpload,body:t.body},!t.roomType&&delete this.body.roomType},o.video=function(e){this.id=e,this.type="file",this.body={}},o.video.prototype.set=function(t){t.file=t.file||e.getFileUrl(t.fileInputId),this.value=t.file,this.filename=t.filename||this.value.filename,this.body={id:this.id,file:this.value,filename:this.filename,apiUrl:t.apiUrl,to:t.to,from:t.from,type:this.type,ext:t.ext||{},roomType:t.roomType,onFileUploadError:t.onFileUploadError,onFileUploadComplete:t.onFileUploadComplete,success:t.success,fail:t.fail,flashUpload:t.flashUpload,body:t.body},!t.roomType&&delete this.body.roomType},i.prototype.send=function(t){var n=this,o=function(n){n.ext=n.ext||{},n.ext.weichat=n.ext.weichat||{},n.ext.weichat.originType=n.ext.weichat.originType||"webim";var o={from:t.context.userId||"",to:n.to,bodies:[n.body],ext:n.ext||{}},i=e.stringify(o),a=r.$msg({type:n.group||"chat",to:n.toJid,id:n.id,xmlns:"jabber:client"}).c("body").t(i);if(n.roomType&&a.up().c("roomtype",{xmlns:"easemob:x:roomtype",type:"chatroom"}),n.bodyId){a=r.$msg({from:t.context.jid||"",to:n.toJid,id:n.id,xmlns:"jabber:client"}).c("body").t(n.bodyId);var s={xmlns:"urn:xmpp:receipts",id:n.bodyId};a.up().c("delivery",s)}if(n.ackId){if(t.context.jid.indexOf(n.toJid)>=0)return;a=r.$msg({from:t.context.jid||"",to:n.toJid,id:n.id,xmlns:"jabber:client"}).c("body").t(n.ackId);var c={xmlns:"urn:xmpp:receipts",id:n.ackId};a.up().c("acked",c)}t.sendCommand(a.tree(),n.id)};if(n.msg.file){if(n.msg.body&&n.msg.body.url)return void o(n.msg);var i=n.msg.onFileUploadComplete,a=function(e){if(e.entities[0]["file-metadata"]){var t=e.entities[0]["file-metadata"]["content-length"];n.msg.file_length=t,n.msg.filetype=e.entities[0]["file-metadata"]["content-type"],t>204800&&(n.msg.thumbnail=!0)}n.msg.body={type:n.msg.type||"file",url:e.uri+"/"+e.entities[0].uuid,secret:e.entities[0]["share-secret"],filename:n.msg.file.filename||n.msg.filename,size:{width:n.msg.width||0,height:n.msg.height||0},length:n.msg.length||0,file_length:n.msg.file_length||0,filetype:n.msg.filetype},o(n.msg),i instanceof Function&&i(e,n.msg.id)};n.msg.onFileUploadComplete=a,e.uploadFile.call(t,n.msg)}else"img"===n.msg.type?o(n.msg):(n.msg.body={type:"chat"===n.msg.type?"txt":n.msg.type,msg:n.msg.msg},"cmd"===n.msg.type?n.msg.body.action=n.msg.action:"loc"===n.msg.type&&(n.msg.body.addr=n.msg.addr,n.msg.body.lat=n.msg.lat,n.msg.body.lng=n.msg.lng),o(n.msg))},t._msg=i,t.message=o})()},"5d90":function(e,t,n){"use strict";function r(e){this.options=e||{locator:{}}}function o(e,t,n){if(!e){if(t instanceof i)return t;e=t}var r={},o=e instanceof Function;function a(t){var i=e[t];!i&&o&&(i=2==e.length?function(n){e(t,n)}:e),r[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+s(n))}||function(){}}return n=n||{},a("warning"),a("error"),a("fatalError"),r}function i(){this.cdata=!1}function a(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function s(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function c(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function u(e,t){e.currentElement?e.currentElement.appendChild(t):e.document.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new l,a=n.domBuilder||new i,s=n.errorHandler,c=n.locator,u=n.xmlns||{},d={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return c&&a.setDocumentLocator(c),r.errorHandler=o(s,a,c),r.domBuilder=n.domBuilder||a,/\/x?html?$/.test(t)&&(d.nbsp=" ",d.copy="©",u[""]="http://www.w3.org/1999/xhtml"),u.xml=u.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,u,d):r.errorHandler.error("invalid document source"),a.document},i.prototype={startDocument:function(){this.document=(new d).createDocument(null,null,null),this.locator&&(this.document.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var o=this.document,i=o.createElementNS(e,n||t),s=r.length;u(this,i),this.currentElement=i,this.locator&&a(this.locator,i);for(var c=0;c<s;c++){e=r.getURI(c);var l=r.getValue(c),d=(n=r.getQName(c),o.createAttributeNS(e,n));d.getOffset&&a(d.getOffset(1),d),d.value=d.nodeValue=l,i.setAttributeNode(d)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.document.createProcessingInstruction(e,t);this.locator&&a(this.locator,n),u(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=c.apply(this,arguments),this.currentElement&&e){if(this.cdata){var r=this.document.createCDATASection(e);this.currentElement.appendChild(r)}else{r=this.document.createTextNode(e);this.currentElement.appendChild(r)}this.locator&&a(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=c.apply(this,arguments);var r=this.document.createComment(e);this.locator&&a(this.locator,r),u(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.document.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(e,t,n);this.locator&&a(this.locator,o),u(this,o)}},warning:function(e){},error:function(e){},fatalError:function(e){throw e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){i.prototype[e]=function(){return null}});var l=n("3a09").XMLReader,d=t.DOMImplementation=n("e31c").DOMImplementation,p=t.XMLSerializer=n("e31c").XMLSerializer;t.DOMParser=r;var r={DOMImplementation:d,XMLSerializer:p,DOMParser:r};e.exports=r},"5ff1":function(e,t,n){"use strict";var r=a(n("9f3c")),o=a(n("e928")),i=a(n("83bd"));function a(e){return e&&e.__esModule?e:{default:e}}console.group=console.group||{},console.groupEnd=console.groupEnd||{};var s={},c=s.WebIM=o.default;s.WebIM.config=i.default,c.isDebug=function(e){function t(e){function t(){var e=new Date,t=e.getHours(),n=e.getMinutes(),r=e.getSeconds();return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+(r<10?"0"+r:r)+" "}r.default.Strophe.log=function(e,t){},r.default.Strophe.Connection.prototype.rawOutput=e?function(e){try{console.group("%csend # "+t(),"color: blue; font-size: large"),console.log("%c"+e,"color: blue"),console.groupEnd()}catch(n){console.log(n)}}:function(){}}e&&(c.config.isDebug=e.isDebug,t(c.config.isDebug))},c.config.autoSignIn=!1,c.config.autoSignIn&&(c.config.autoSignInName="lwz2",c.config.autoSignInPwd="1"),c.parseEmoji=function(e){if("undefined"===typeof c.Emoji||"undefined"===typeof c.Emoji.map)return e;var t=c.Emoji,n=null,r=[],o=[];for(var i in t.map)if(t.map.hasOwnProperty(i))while(e.indexOf(i)>-1)e=e.replace(i,"^"+t.map[i]+"^");for(var a=e.split("^"),s=(n=/^e.*g$/,0);s<a.length;s++)""!=a[s]&&r.push(a[s]);for(s=0;s<r.length;s++)if(n.test(r[s])){var u={};u.data=r[s],u.type="emoji",o.push(u)}else{u={};u.data=r[s],u.type="txt",o.push(u)}return o},c.time=function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),r=e.getSeconds(),o=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+(r<10?"0"+r:r);return o},c.Emoji={path:"/static/images/faces/",map:{"[):]":"ee_1.png","[:D]":"ee_2.png","[;)]":"ee_3.png","[:-o]":"ee_4.png","[:p]":"ee_5.png","[(H)]":"ee_6.png","[:@]":"ee_7.png","[:s]":"ee_8.png","[:$]":"ee_9.png","[:(]":"ee_10.png","[:'(]":"ee_11.png","[<o)]":"ee_12.png","[(a)]":"ee_13.png","[8o|]":"ee_14.png","[8-|]":"ee_15.png","[+o(]":"ee_16.png","[|-)]":"ee_17.png","[:|]":"ee_18.png","[*-)]":"ee_19.png","[:-#]":"ee_20.png","[^o)]":"ee_21.png","[:-*]":"ee_22.png","[8-)]":"ee_23.png","[del]":"btn_del.png","[(|)]":"ee_24.png","[(u)]":"ee_25.png","[(S)]":"ee_26.png","[(*)]":"ee_27.png","[(#)]":"ee_28.png","[(R)]":"ee_29.png","[({)]":"ee_30.png","[(})]":"ee_31.png","[(k)]":"ee_32.png","[(F)]":"ee_33.png","[(W)]":"ee_34.png","[(D)]":"ee_35.png"}},c.EmojiObj={path:"/static/images/faces/",map1:{"[):]":"ee_1.png","[:D]":"ee_2.png","[;)]":"ee_3.png","[:-o]":"ee_4.png","[:p]":"ee_5.png","[(H)]":"ee_6.png","[:@]":"ee_7.png"},map2:{"[:s]":"ee_8.png","[:$]":"ee_9.png","[:(]":"ee_10.png","[:'(]":"ee_11.png","[<o)]":"ee_12.png","[(a)]":"ee_13.png","[8o|]":"ee_14.png"},map3:{"[8-|]":"ee_15.png","[+o(]":"ee_16.png","[|-)]":"ee_17.png","[:|]":"ee_18.png","[*-)]":"ee_19.png","[:-#]":"ee_20.png","[del]":"del.png"},map4:{"[^o)]":"ee_21.png","[:-*]":"ee_22.png","[8-)]":"ee_23.png","[(|)]":"ee_24.png","[(u)]":"ee_25.png","[(S)]":"ee_26.png","[(*)]":"ee_27.png"},map5:{"[(#)]":"ee_28.png","[(R)]":"ee_29.png","[({)]":"ee_30.png","[(})]":"ee_31.png","[(k)]":"ee_32.png","[(F)]":"ee_33.png","[(W)]":"ee_34.png","[(D)]":"ee_35.png"},map6:{"[del]":"del.png"}},c.conn=new c.connection({isMultiLoginSessions:c.config.isMultiLoginSessions,https:"boolean"===typeof c.config.https?c.config.https:"https:"===location.protocol,url:c.config.xmppURL,apiUrl:c.config.apiURL,isAutoLogin:!0,heartBeatWait:c.config.heartBeatWait,autoReconnectNumMax:c.config.autoReconnectNumMax,autoReconnectInterval:c.config.autoReconnectInterval}),e.exports={default:c}},"719a":function(e,t,n){},"78bf":function(e,t,n){"use strict";n.r(t);var r=n("0456"),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);t["default"]=o.a},"83bd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={xmppURL:"wss://im-api.easemob.com/ws/",apiURL:"https://a1.easemob.com",appkey:"1109181216065516#gsv",https:!1,isMultiLoginSessions:!1,isWindowSDK:!1,isSandBox:!1,isDebug:!1,autoReconnectNumMax:15,autoReconnectInterval:2,isWebRTC:!1,isAutoLogin:!0},o=r;t.default=o},"939c":function(e,t,n){},"9f3c":function(e,t,n){"use strict";(function(r){var o,i,a,s,c,u,l,d,p,h,f,m,_,g,v=!1,y=n("5d90"),b=y.DOMParser,E=(new b).parseFromString("<?xml version='1.0'?>\n","text/xml"),N=N||{};N.DOMParser=b;(function(y){if(function(e,t){i={id:"strophe-base64",exports:{},loaded:!1},o=function(){return t()}.call(i.exports,n,i.exports,i),i.loaded=!0,void 0!==o||(o=i.exports)}(0,function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t={encode:function(t){var n,r,o,i,a,s,c,u="",l=0;do{n=t.charCodeAt(l++),r=t.charCodeAt(l++),o=t.charCodeAt(l++),i=n>>2,a=(3&n)<<4|r>>4,s=(15&r)<<2|o>>6,c=63&o,isNaN(r)?(a=(3&n)<<4,s=c=64):isNaN(o)&&(c=64),u=u+e.charAt(i)+e.charAt(a)+e.charAt(s)+e.charAt(c)}while(l<t.length);return u},decode:function(t){var n,r,o,i,a,s,c,u="",l=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{i=e.indexOf(t.charAt(l++)),a=e.indexOf(t.charAt(l++)),s=e.indexOf(t.charAt(l++)),c=e.indexOf(t.charAt(l++)),n=i<<2|a>>4,r=(15&a)<<4|s>>2,o=(3&s)<<6|c,u+=String.fromCharCode(n),64!=s&&(u+=String.fromCharCode(r)),64!=c&&(u+=String.fromCharCode(o))}while(l<t.length);return u}};return t}),function(e,t){s={id:"strophe-sha1",exports:{},loaded:!1},a=function(){return t()}.call(s.exports,n,s.exports,s),s.loaded=!0,void 0!==a||(a=s.exports)}(0,function(){function e(e,r){e[r>>5]|=128<<24-r%32,e[15+(r+64>>9<<4)]=r;var a,s,c,u,l,d,p,h,f=new Array(80),m=1732584193,_=-271733879,g=-1732584194,v=271733878,y=-1009589776;for(a=0;a<e.length;a+=16){for(u=m,l=_,d=g,p=v,h=y,s=0;s<80;s++)f[s]=s<16?e[a+s]:i(f[s-3]^f[s-8]^f[s-14]^f[s-16],1),c=o(o(i(m,5),t(s,_,g,v)),o(o(y,f[s]),n(s))),y=v,v=g,g=i(_,30),_=m,m=c;m=o(m,u),_=o(_,l),g=o(g,d),v=o(v,p),y=o(y,h)}return[m,_,g,v,y]}function t(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function n(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function r(t,n){var r=a(t);r.length>16&&(r=e(r,8*t.length));for(var o=new Array(16),i=new Array(16),s=0;s<16;s++)o[s]=909522486^r[s],i[s]=1549556828^r[s];var c=e(o.concat(a(n)),512+8*n.length);return e(i.concat(c),672)}function o(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function i(e,t){return e<<t|e>>>32-t}function a(e){for(var t=[],n=255,r=0;r<8*e.length;r+=8)t[r>>5]|=(e.charCodeAt(r/8)&n)<<24-r%32;return t}function s(e){for(var t="",n=255,r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>24-r%32&n);return t}function c(e){for(var t,n,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",i=0;i<4*e.length;i+=3)for(t=(e[i>>2]>>8*(3-i%4)&255)<<16|(e[i+1>>2]>>8*(3-(i+1)%4)&255)<<8|e[i+2>>2]>>8*(3-(i+2)%4)&255,n=0;n<4;n++)8*i+6*n>32*e.length?o+="=":o+=r.charAt(t>>6*(3-n)&63);return o}return{b64_hmac_sha1:function(e,t){return c(r(e,t))},b64_sha1:function(t){return c(e(a(t),8*t.length))},binb2str:s,core_hmac_sha1:r,str_hmac_sha1:function(e,t){return s(r(e,t))},str_sha1:function(t){return s(e(a(t),8*t.length))}}}),function(e,t){u={id:"strophe-md5",exports:{},loaded:!1},c=function(){return t()}.call(u.exports,n,u.exports,u),u.loaded=!0,void 0!==c||(c=u.exports)}(0,function(e){var t=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n},n=function(e,t){return e<<t|e>>>32-t},r=function(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},o=function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t},i=function(e){for(var t="0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n},a=function(e,r,o,i,a,s){return t(n(t(t(r,e),t(i,s)),a),o)},s=function(e,t,n,r,o,i,s){return a(t&n|~t&r,e,t,o,i,s)},c=function(e,t,n,r,o,i,s){return a(t&r|n&~r,e,t,o,i,s)},u=function(e,t,n,r,o,i,s){return a(t^n^r,e,t,o,i,s)},l=function(e,t,n,r,o,i,s){return a(n^(t|~r),e,t,o,i,s)},d=function(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;for(var r,o,i,a,d=1732584193,p=-271733879,h=-1732584194,f=271733878,m=0;m<e.length;m+=16)r=d,o=p,i=h,a=f,d=s(d,p,h,f,e[m+0],7,-680876936),f=s(f,d,p,h,e[m+1],12,-389564586),h=s(h,f,d,p,e[m+2],17,606105819),p=s(p,h,f,d,e[m+3],22,-1044525330),d=s(d,p,h,f,e[m+4],7,-176418897),f=s(f,d,p,h,e[m+5],12,1200080426),h=s(h,f,d,p,e[m+6],17,-1473231341),p=s(p,h,f,d,e[m+7],22,-45705983),d=s(d,p,h,f,e[m+8],7,1770035416),f=s(f,d,p,h,e[m+9],12,-1958414417),h=s(h,f,d,p,e[m+10],17,-42063),p=s(p,h,f,d,e[m+11],22,-1990404162),d=s(d,p,h,f,e[m+12],7,1804603682),f=s(f,d,p,h,e[m+13],12,-40341101),h=s(h,f,d,p,e[m+14],17,-1502002290),p=s(p,h,f,d,e[m+15],22,1236535329),d=c(d,p,h,f,e[m+1],5,-165796510),f=c(f,d,p,h,e[m+6],9,-1069501632),h=c(h,f,d,p,e[m+11],14,643717713),p=c(p,h,f,d,e[m+0],20,-373897302),d=c(d,p,h,f,e[m+5],5,-701558691),f=c(f,d,p,h,e[m+10],9,38016083),h=c(h,f,d,p,e[m+15],14,-660478335),p=c(p,h,f,d,e[m+4],20,-405537848),d=c(d,p,h,f,e[m+9],5,568446438),f=c(f,d,p,h,e[m+14],9,-1019803690),h=c(h,f,d,p,e[m+3],14,-187363961),p=c(p,h,f,d,e[m+8],20,1163531501),d=c(d,p,h,f,e[m+13],5,-1444681467),f=c(f,d,p,h,e[m+2],9,-51403784),h=c(h,f,d,p,e[m+7],14,1735328473),p=c(p,h,f,d,e[m+12],20,-1926607734),d=u(d,p,h,f,e[m+5],4,-378558),f=u(f,d,p,h,e[m+8],11,-2022574463),h=u(h,f,d,p,e[m+11],16,1839030562),p=u(p,h,f,d,e[m+14],23,-35309556),d=u(d,p,h,f,e[m+1],4,-1530992060),f=u(f,d,p,h,e[m+4],11,1272893353),h=u(h,f,d,p,e[m+7],16,-155497632),p=u(p,h,f,d,e[m+10],23,-1094730640),d=u(d,p,h,f,e[m+13],4,681279174),f=u(f,d,p,h,e[m+0],11,-358537222),h=u(h,f,d,p,e[m+3],16,-722521979),p=u(p,h,f,d,e[m+6],23,76029189),d=u(d,p,h,f,e[m+9],4,-640364487),f=u(f,d,p,h,e[m+12],11,-421815835),h=u(h,f,d,p,e[m+15],16,530742520),p=u(p,h,f,d,e[m+2],23,-995338651),d=l(d,p,h,f,e[m+0],6,-198630844),f=l(f,d,p,h,e[m+7],10,1126891415),h=l(h,f,d,p,e[m+14],15,-1416354905),p=l(p,h,f,d,e[m+5],21,-57434055),d=l(d,p,h,f,e[m+12],6,1700485571),f=l(f,d,p,h,e[m+3],10,-1894986606),h=l(h,f,d,p,e[m+10],15,-1051523),p=l(p,h,f,d,e[m+1],21,-2054922799),d=l(d,p,h,f,e[m+8],6,1873313359),f=l(f,d,p,h,e[m+15],10,-30611744),h=l(h,f,d,p,e[m+6],15,-1560198380),p=l(p,h,f,d,e[m+13],21,1309151649),d=l(d,p,h,f,e[m+4],6,-145523070),f=l(f,d,p,h,e[m+11],10,-1120210379),h=l(h,f,d,p,e[m+2],15,718787259),p=l(p,h,f,d,e[m+9],21,-343485551),d=t(d,r),p=t(p,o),h=t(h,i),f=t(f,a);return[d,p,h,f]},p={hexdigest:function(e){return i(d(r(e),8*e.length))},hash:function(e){return o(d(r(e),8*e.length))}};return p}),function(e,t){d={id:"strophe-utils",exports:{},loaded:!1},l=function(){return t()}.call(d.exports,n,d.exports,d),d.loaded=!0,void 0!==l||(l=d.exports)}(0,function(){var e={utf16to8:function(e){var t,n,r="",o=e.length;for(t=0;t<o;t++)n=e.charCodeAt(t),n>=0&&n<=127?r+=e.charAt(t):n>2047?(r+=String.fromCharCode(224|n>>12&15),r+=String.fromCharCode(128|n>>6&63),r+=String.fromCharCode(128|n>>0&63)):(r+=String.fromCharCode(192|n>>6&31),r+=String.fromCharCode(128|n>>0&63));return r},addCookies:function(e){var t,n,r,o,i,a,s;for(t in e||{})i="",a="",s="",n=e[t],r="object"==typeof n,o=escape(unescape(r?n.value:n)),r&&(i=n.expires?";expires="+n.expires:"",a=n.domain?";domain="+n.domain:"",s=n.path?";path="+n.path:""),E.cookie=t+"="+o+i+a+s}};return e}),function(e,n){_=[],p=function(){return n()}.apply(t,_)}(0,function(){Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice,r=Array.prototype.concat,o=n.call(arguments,1);return function(){return t.apply(e||this,r.call(o,n.call(arguments,0)))}}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1})}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(null===this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!==typeof e)throw new TypeError(e+" is not a function");arguments.length>1&&(n=t),r=0;while(r<i){var a;r in o&&(a=o[r],e.call(n,a,r,o)),r++}}),function(e,n){_=[a,o,c,l,p],h=function(){return n.apply(this,arguments)}.apply(t,_)}(0,function(e,t,n,r,o){function i(e,t){return new o.Builder(e,t)}function a(e){return new o.Builder("message",e)}function s(e){return new o.Builder("iq",e)}function c(e){return new o.Builder("presence",e)}return o={VERSION:"1.2.9",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(e){for(var t=0;t<o.XHTML.tags.length;t++)if(e==o.XHTML.tags[t])return!0;return!1},validAttribute:function(e,t){if("undefined"!==typeof o.XHTML.attributes[e]&&o.XHTML.attributes[e].length>0)for(var n=0;n<o.XHTML.attributes[e].length;n++)if(t==o.XHTML.attributes[e][n])return!0;return!1},validCSS:function(e){for(var t=0;t<o.XHTML.css.length;t++)if(e==o.XHTML.css[t])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(e,t){o.NS[e]=t},forEachChild:function(e,t,n){var r,i;for(r=0;r<e.childNodes.length;r++)i=e.childNodes[r],i.nodeType!=o.ElementType.NORMAL||t&&!this.isTagEqual(i,t)||n(i)},isTagEqual:function(e,t){return e.tagName==t},_xmlGenerator:null,_makeGenerator:function(){var e;return void 0===E.implementation.createDocument||E.implementation.createDocument&&E.documentMode&&E.documentMode<10?(e=this._getIEXmlDom(),e.appendChild(e.createElement("strophe"))):e=E.implementation.createDocument("jabber:client","strophe",null),e},xmlGenerator:function(){return o._xmlGenerator||(o._xmlGenerator=o._makeGenerator()),o._xmlGenerator},_getIEXmlDom:function(){for(var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<t.length;n++){if(null!==e)break;try{e=new ActiveXObject(t[n])}catch(r){e=null}}return e},xmlElement:function(e){if(!e)return null;var t,n,r,i=o.xmlGenerator().createElement(e);for(t=1;t<arguments.length;t++){var a=arguments[t];if(a)if("string"==typeof a||"number"==typeof a)i.appendChild(o.xmlTextNode(a));else if("object"==typeof a&&"function"==typeof a.sort)for(n=0;n<a.length;n++){var s=a[n];"object"==typeof s&&"function"==typeof s.sort&&void 0!==s[1]&&null!==s[1]&&i.setAttribute(s[0],s[1])}else if("object"==typeof a)for(r in a)a.hasOwnProperty(r)&&void 0!==a[r]&&null!==a[r]&&i.setAttribute(r,a[r])}return i},xmlescape:function(e){return e=e.replace(/\&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/'/g,"&apos;"),e=e.replace(/"/g,"&quot;"),e},xmlunescape:function(e){return e=e.replace(/\&amp;/g,"&"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&apos;/g,"'"),e=e.replace(/&quot;/g,'"'),e},xmlTextNode:function(e){return o.xmlGenerator().createTextNode(e)},xmlHtmlNode:function(e){var t;if(N.DOMParser){var n=new b;t=n.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t},getText:function(e){if(!e)return null;var t="";0===e.childNodes.length&&e.nodeType==o.ElementType.TEXT&&(t+=e.nodeValue);for(var n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeType==o.ElementType.TEXT&&(t+=e.childNodes[n].nodeValue);return o.xmlescape(t)},copyElement:function(e){var t,n;if(e.nodeType==o.ElementType.NORMAL){for(n=o.xmlElement(e.tagName),t=0;t<e.attributes.length;t++)n.setAttribute(e.attributes[t].nodeName,e.attributes[t].value);for(t=0;t<e.childNodes.length;t++)n.appendChild(o.copyElement(e.childNodes[t]))}else e.nodeType==o.ElementType.TEXT&&(n=o.xmlGenerator().createTextNode(e.nodeValue));return n},createHtml:function(e){var t,n,r,i,a,s,c,u,l,d,p;if(e.nodeType==o.ElementType.NORMAL)if(i=e.nodeName.toLowerCase(),o.XHTML.validTag(i))try{for(n=o.xmlElement(i),t=0;t<o.XHTML.attributes[i].length;t++)if(a=o.XHTML.attributes[i][t],s=e.getAttribute(a),"undefined"!=typeof s&&null!==s&&""!==s&&!1!==s&&0!==s)if("style"==a&&"object"==typeof s&&"undefined"!=typeof s.cssText&&(s=s.cssText),"style"==a){for(c=[],u=s.split(";"),r=0;r<u.length;r++)l=u[r].split(":"),d=l[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase(),o.XHTML.validCSS(d)&&(p=l[1].replace(/^\s*/,"").replace(/\s*$/,""),c.push(d+": "+p));c.length>0&&(s=c.join("; "),n.setAttribute(a,s))}else n.setAttribute(a,s);for(t=0;t<e.childNodes.length;t++)n.appendChild(o.createHtml(e.childNodes[t]))}catch(h){n=o.xmlTextNode("")}else for(n=o.xmlGenerator().createDocumentFragment(),t=0;t<e.childNodes.length;t++)n.appendChild(o.createHtml(e.childNodes[t]));else if(e.nodeType==o.ElementType.FRAGMENT)for(n=o.xmlGenerator().createDocumentFragment(),t=0;t<e.childNodes.length;t++)n.appendChild(o.createHtml(e.childNodes[t]));else e.nodeType==o.ElementType.TEXT&&(n=o.xmlTextNode(e.nodeValue));return n},escapeNode:function(e){return"string"!==typeof e?e:e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return"string"!==typeof e?e:e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(e){return e.indexOf("@")<0?null:e.split("@")[0]},getDomainFromJid:function(e){var t=o.getBareJidFromJid(e);if(t.indexOf("@")<0)return t;var n=t.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(e){var t=e.split("/");return t.length<2?null:(t.splice(0,1),t.join("/"))},getBareJidFromJid:function(e){return e?e.split("/")[0]:null},_handleError:function(e){"undefined"!==typeof e.stack&&o.fatal(e.stack),e.sourceURL?o.fatal("error: "+this.handler+" "+e.sourceURL+":"+e.line+" - "+e.name+": "+e.message):e.fileName?o.fatal("error: "+this.handler+" "+e.fileName+":"+e.lineNumber+" - "+e.name+": "+e.message):o.fatal("error: "+e.message)},log:function(e,t){},debug:function(e){this.log(this.LogLevel.DEBUG,e)},info:function(e){this.log(this.LogLevel.INFO,e)},warn:function(e){this.log(this.LogLevel.WARN,e)},error:function(e){this.log(this.LogLevel.ERROR,e)},fatal:function(e){this.log(this.LogLevel.FATAL,e)},serialize:function(e){var t;if(!e)return null;"function"===typeof e.tree&&(e=e.tree());var n,r,i=e.nodeName;for(e.getAttribute("_realname")&&(i=e.getAttribute("_realname")),t="<"+i,n=0;n<e.attributes.length;n++)"_realname"!=e.attributes[n].nodeName&&(t+=" "+e.attributes[n].nodeName+"='"+o.xmlescape(e.attributes[n].value)+"'");if(e.childNodes.length>0){for(t+=">",n=0;n<e.childNodes.length;n++)switch(r=e.childNodes[n],r.nodeType){case o.ElementType.NORMAL:t+=o.serialize(r);break;case o.ElementType.TEXT:t+=o.xmlescape(r.nodeValue);break;case o.ElementType.CDATA:t+="<![CDATA["+r.nodeValue+"]]>"}t+="</"+i+">"}else t+="/>";return t},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(e,t){o._connectionPlugins[e]=t}},o.Builder=function(e,t){"presence"!=e&&"message"!=e&&"iq"!=e||(t&&!t.xmlns?t.xmlns=o.NS.CLIENT:t||(t={xmlns:o.NS.CLIENT})),this.nodeTree=o.xmlElement(e,t),this.node=this.nodeTree},o.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return o.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},root:function(){return this.node=this.nodeTree,this},attrs:function(e){for(var t in e)e.hasOwnProperty(t)&&(void 0===e[t]?this.node.removeAttribute(t):this.node.setAttribute(t,e[t]));return this},c:function(e,t,n){var r=o.xmlElement(e,t,n);return this.node.appendChild(r),"string"!==typeof n&&"number"!==typeof n&&(this.node=r),this},cnode:function(e){var t,n=o.xmlGenerator();try{t=void 0!==n.importNode}catch(i){t=!1}var r=t?n.importNode(e,!0):o.copyElement(e);return this.node.appendChild(r),this.node=r,this},t:function(e){var t=o.xmlTextNode(e);return this.node.appendChild(t),this},h:function(e){var t=E.createElement("body");t.innerHTML=e;var n=o.createHtml(t);while(n.childNodes.length>0)this.node.appendChild(n.childNodes[0]);return this}},o.Handler=function(e,t,n,r,i,a,s){this.handler=e,this.ns=t,this.name=n,this.type=r,this.id=i,this.options=s||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBare&&(o.warn('The "matchBare" option is deprecated, use "matchBareFromJid" instead.'),this.options.matchBareFromJid=this.options.matchBare,delete this.options.matchBare),this.options.matchBareFromJid?this.from=a?o.getBareJidFromJid(a):null:this.from=a,this.user=!0},o.Handler.prototype={getNamespace:function(e){var t=e.getAttribute("xmlns");return t&&this.options.ignoreNamespaceFragment&&(t=t.split("#")[0]),t},namespaceMatch:function(e){var t=!1;if(!this.ns)return!0;var n=this;return o.forEachChild(e,null,function(e){n.getNamespace(e)===n.ns&&(t=!0)}),t=t||this.getNamespace(e)===this.ns,t},isMatch:function(e){var t=e.getAttribute("from");this.options.matchBareFromJid&&(t=o.getBareJidFromJid(t));var n=e.getAttribute("type");return!(!this.namespaceMatch(e)||this.name&&!o.isTagEqual(e,this.name)||this.type&&(Array.isArray(this.type)?-1==this.type.indexOf(n):n!=this.type)||this.id&&e.getAttribute("id")!=this.id||this.from&&t!=this.from)},run:function(e){var t=null;try{t=this.handler(e)}catch(n){throw o._handleError(n),n}return t},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},o.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},o.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},o.Connection=function(e,t){this.service=e,this.options=t||{};var n=this.options.protocol||"";for(var i in 0===e.indexOf("ws:")||0===e.indexOf("wss:")||0===n.indexOf("ws")?this._proto=new o.Websocket(this):this._proto=new o.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100),r.addCookies(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms),o._connectionPlugins)if(o._connectionPlugins.hasOwnProperty(i)){var a=o._connectionPlugins[i],s=function(){};s.prototype=a,this[i]=new s,this[i].init(this)}},o.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)});return"string"==typeof e||"number"==typeof e?t+":"+e:t+""},addProtocolErrorHandler:function(e,t,n){this.protocolErrorHandlers[e][t]=n},connect:function(e,t,n,r,i,a,s){this.jid=e,this.authzid=o.getBareJidFromJid(this.jid),this.authcid=s||o.getNodeFromJid(this.jid),this.pass=t,this.servtype="xmpp",this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=o.getDomainFromJid(this.jid),this._changeConnectStatus(o.Status.CONNECTING,null),this._proto._connect(r,i,a)},attach:function(e,t,n,r,i,a,s){if(!(this._proto instanceof o.Bosh))throw{name:"StropheSessionError",message:'The "attach" method can only be used with a BOSH connection.'};this._proto._attach(e,t,n,r,i,a,s)},restore:function(e,t,n,r,o){if(!this._sessionCachingSupported())throw{name:"StropheSessionError",message:'The "restore" method can only be used with a BOSH connection.'};this._proto._restore(e,t,n,r,o)},_sessionCachingSupported:function(){if(this._proto instanceof o.Bosh){if(!JSON)return!1;try{N.sessionStorage.setItem("_strophe_","_strophe_"),N.sessionStorage.removeItem("_strophe_")}catch(e){return!1}return!0}return!1},xmlInput:function(e){},xmlOutput:function(e){},rawInput:function(e){},rawOutput:function(e){},nextValidRid:function(e){},send:function(e,t){if(null!==e){if("function"===typeof e.sort)for(var n=0;n<e.length;n++)this._queueData(e[n]);else"function"===typeof e.tree?this._queueData(e.tree()):this._queueData(e);this._proto._send(t)}},flush:function(e){clearTimeout(this._idleTimeout),this._onIdle(e)},sendIQ:function(e,t,n,r){var i=null,a=this;"function"===typeof e.tree&&(e=e.tree());var s=e.getAttribute("id");s||(s=this.getUniqueId("sendIQ"),e.setAttribute("id",s));var c=e.getAttribute("to"),u=this.jid,l=this.addHandler(function(e){i&&a.deleteTimedHandler(i);var r=!1,s=e.getAttribute("from");if(s!==c&&(c||s!==o.getBareJidFromJid(u)&&s!==o.getDomainFromJid(u)&&s!==u)||(r=!0),!r)throw{name:"StropheError",message:"Got answer to IQ from wrong jid:"+s+"\nExpected jid: "+c};var l=e.getAttribute("type");if("result"==l)t&&t(e);else{if("error"!=l)throw{name:"StropheError",message:"Got bad IQ type of "+l};n&&n(e)}},null,"iq",["error","result"],s);return r&&(i=this.addTimedHandler(r,function(){return a.deleteHandler(l),n&&n(null),!1})),this.send(e),s},_queueData:function(e){if(null===e||!e.tagName||!e.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(e)},_sendRestart:function(){this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(function(){this._onIdle()}.bind(this),100)},addTimedHandler:function(e,t){var n=new o.TimedHandler(e,t);return this.addTimeds.push(n),n},deleteTimedHandler:function(e){this.removeTimeds.push(e)},addHandler:function(e,t,n,r,i,a,s){var c=new o.Handler(e,t,n,r,i,a,s);return this.addHandlers.push(c),c},deleteHandler:function(e){this.removeHandlers.push(e);var t=this.addHandlers.indexOf(e);t>=0&&this.addHandlers.splice(t,1)},registerSASLMechanisms:function(e){this.mechanisms={},e=e||[o.SASLAnonymous,o.SASLExternal,o.SASLMD5,o.SASLOAuthBearer,o.SASLPlain,o.SASLSHA1],e.forEach(this.registerSASLMechanism.bind(this))},registerSASLMechanism:function(e){this.mechanisms[e.prototype.name]=e},disconnect:function(e){if(this._changeConnectStatus(o.Status.DISCONNECTING,e),o.info("Disconnect was called because: "+e),this.connected){var t=!1;this.disconnecting=!0,this.authenticated&&(t=c({xmlns:o.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(t)}else o.info("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests()},_changeConnectStatus:function(e,t){for(var n in o._connectionPlugins)if(o._connectionPlugins.hasOwnProperty(n)){var r=this[n];if(r.statusChanged)try{r.statusChanged(e,t)}catch(i){o.error(n+" plugin caused an exception changing status: "+i)}}if(this.connect_callback)try{this.connect_callback(e,t)}catch(a){o._handleError(a),o.error("User connection callback caused an exception: "+a)}},_doDisconnect:function(e){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),o.info("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(o.Status.DISCONNECTED,e),this.connected=!1},_dataRecv:function(e,t){o.info("_dataRecv called");var n=this._proto._reqToData(e);if(null!==n){var r,i;this.xmlInput!==o.Connection.prototype.xmlInput&&(n.nodeName===this._proto.strip&&n.childNodes.length?this.xmlInput(n.childNodes[0]):this.xmlInput(n)),this.rawInput!==o.Connection.prototype.rawInput&&(t?this.rawInput(t):this.rawInput(o.serialize(n)));while(this.removeHandlers.length>0)i=this.removeHandlers.pop(),r=this.handlers.indexOf(i),r>=0&&this.handlers.splice(r,1);while(this.addHandlers.length>0)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())this._doDisconnect();else{var a,s,c=n.getAttribute("type");if(null!==c&&"terminate"==c){if(this.disconnecting)return;return a=n.getAttribute("condition"),s=n.getElementsByTagName("conflict"),null!==a?("remote-stream-error"==a&&s.length>0&&(a="conflict"),this._changeConnectStatus(o.Status.CONNFAIL,a)):this._changeConnectStatus(o.Status.CONNFAIL,"unknown"),void this._doDisconnect(a)}var u=this;o.forEachChild(n,null,function(e){var t,n;for(n=u.handlers,u.handlers=[],t=0;t<n.length;t++){var r=n[t];try{!r.isMatch(e)||!u.authenticated&&r.user?u.handlers.push(r):r.run(e)&&u.handlers.push(r)}catch(i){o.warn("Removing Strophe handlers due to uncaught exception: "+i.message)}}})}}},mechanisms:{},_connect_cb:function(e,t,n){var r;o.info("_connect_cb was called"),this.connected=!0;try{r=this._proto._reqToData(e)}catch(d){if("badformat"!=d)throw d;this._changeConnectStatus(o.Status.CONNFAIL,"bad-format"),this._doDisconnect("bad-format")}if(r){this.xmlInput!==o.Connection.prototype.xmlInput&&(r.nodeName===this._proto.strip&&r.childNodes.length?this.xmlInput(r.childNodes[0]):this.xmlInput(r)),this.rawInput!==o.Connection.prototype.rawInput&&(n?this.rawInput(n):this.rawInput(o.serialize(r)));var i,a=this._proto._connect_cb(r);if(a!==o.Status.CONNFAIL)if(i=r.getElementsByTagNameNS?r.getElementsByTagNameNS(o.NS.STREAM,"features").length>0:r.getElementsByTagName("stream:features").length>0||r.getElementsByTagName("features").length>0,i){var s,c,u=[],l=r.getElementsByTagName("mechanism");if(l.length>0)for(s=0;s<l.length;s++)c=o.getText(l[s]),this.mechanisms[c]&&u.push(this.mechanisms[c]);0!==u.length||0!==r.getElementsByTagName("auth").length?!1!==this.do_authentication&&this.authenticate(u):this._proto._no_auth_received(t)}else try{this._proto._no_auth_received(t)}catch(d){}}},sortMechanismsByPriority:function(e){var t,n,r,o;for(t=0;t<e.length-1;++t){for(r=t,n=t+1;n<e.length;++n)e[n].prototype.priority>e[r].prototype.priority&&(r=n);r!=t&&(o=e[t],e[t]=e[r],e[r]=o)}return e},_attemptSASLAuth:function(e){e=this.sortMechanismsByPriority(e||[]);var n=0,r=!1;for(n=0;n<e.length;++n)if(e[n].prototype.test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new e[n],this._sasl_mechanism.onStart(this);var a=i("auth",{xmlns:o.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var s=this._sasl_mechanism.onChallenge(this,null);a.t(t.encode(s))}this.send(a.tree()),r=!0;break}return r},_attemptLegacyAuth:function(){null===o.getNodeFromJid(this.jid)?(this._changeConnectStatus(o.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect("x-strophe-bad-non-anon-jid")):(this._changeConnectStatus(o.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(s({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:o.NS.AUTH}).c("username",{}).t(o.getNodeFromJid(this.jid)).tree()))},authenticate:function(e){this._attemptSASLAuth(e)||this._attemptLegacyAuth()},_sasl_challenge_cb:function(e){var n=t.decode(o.getText(e)),r=this._sasl_mechanism.onChallenge(this,n),a=i("response",{xmlns:o.NS.SASL});return""!==r&&a.t(t.encode(r)),this.send(a.tree()),!0},_auth1_cb:function(e){var t=s({type:"set",id:"_auth_2"}).c("query",{xmlns:o.NS.AUTH}).c("username",{}).t(o.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return o.getResourceFromJid(this.jid)||(this.jid=o.getBareJidFromJid(this.jid)+"/strophe"),t.up().c("resource",{}).t(o.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(t.tree()),!1},_sasl_success_cb:function(e){if(this._sasl_data["server-signature"]){var n,r=t.decode(o.getText(e)),i=/([a-z]+)=([^,]+)(,|$)/,a=r.match(i);if("v"==a[1]&&(n=a[2]),n!=this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}o.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var s=[],c=function(e,t){while(e.length)this.deleteHandler(e.pop());return this._sasl_auth1_cb.bind(this)(t),!1};return s.push(this._addSysHandler(function(e){c.bind(this)(s,e)}.bind(this),null,"stream:features",null,null)),s.push(this._addSysHandler(function(e){c.bind(this)(s,e)}.bind(this),o.NS.STREAM,"features",null,null)),this._sendRestart(),!1},_sasl_auth1_cb:function(e){var t,n;for(this.features=e,t=0;t<e.childNodes.length;t++)n=e.childNodes[t],"bind"==n.nodeName&&(this.do_bind=!0),"session"==n.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(o.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var r=o.getResourceFromJid(this.jid);return r?this.send(s({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:o.NS.BIND}).c("resource",{}).t(r).tree()):this.send(s({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:o.NS.BIND}).tree()),!1},_sasl_bind_cb:function(e){if("error"==e.getAttribute("type")){o.info("SASL binding failed.");var t,n=e.getElementsByTagName("conflict");return n.length>0&&(t="conflict"),this._changeConnectStatus(o.Status.AUTHFAIL,t),!1}var r,i=e.getElementsByTagName("bind");if(!(i.length>0))return o.info("SASL binding failed."),this._changeConnectStatus(o.Status.AUTHFAIL,null),!1;r=i[0].getElementsByTagName("jid"),r.length>0&&(this.jid=o.getText(r[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(s({type:"set",id:"_session_auth_2"}).c("session",{xmlns:o.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(o.Status.CONNECTED,null)))},_sasl_session_cb:function(e){if("result"==e.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(o.Status.CONNECTED,null);else if("error"==e.getAttribute("type"))return o.info("Session creation failed."),this._changeConnectStatus(o.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(e){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(o.Status.AUTHFAIL,null),!1},_auth2_cb:function(e){return"result"==e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(o.Status.CONNECTED,null)):"error"==e.getAttribute("type")&&(this._changeConnectStatus(o.Status.AUTHFAIL,null),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(e,t){var n=new o.TimedHandler(e,t);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(e,t,n,r,i){var a=new o.Handler(e,t,n,r,i);return a.user=!1,this.addHandlers.push(a),a},_onDisconnectTimeout:function(){return o.info("_onDisconnectTimeout was called"),this._changeConnectStatus(o.Status.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(e){var t,n,r,o;while(this.addTimeds.length>0)this.timedHandlers.push(this.addTimeds.pop());while(this.removeTimeds.length>0)n=this.removeTimeds.pop(),t=this.timedHandlers.indexOf(n),t>=0&&this.timedHandlers.splice(t,1);var i=(new Date).getTime();for(o=[],t=0;t<this.timedHandlers.length;t++)n=this.timedHandlers[t],!this.authenticated&&n.user||(r=n.lastCalled+n.period,r-i<=0?n.run()&&o.push(n):o.push(n));this.timedHandlers=o,clearTimeout(this._idleTimeout),this._proto._onIdle(e),this.connected&&(this._idleTimeout=setTimeout(function(){this._onIdle(e)}.bind(this),100))}},o.SASLMechanism=function(e,t,n){this.name=e,this.isClientFirst=t,this.priority=n},o.SASLMechanism.prototype={test:function(e){return!0},onStart:function(e){this._connection=e},onChallenge:function(e,t){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},o.SASLAnonymous=function(){},o.SASLAnonymous.prototype=new o.SASLMechanism("ANONYMOUS",!1,10),o.SASLAnonymous.prototype.test=function(e){return null===e.authcid},o.SASLPlain=function(){},o.SASLPlain.prototype=new o.SASLMechanism("PLAIN",!0,20),o.SASLPlain.prototype.test=function(e){return null!==e.authcid},o.SASLPlain.prototype.onChallenge=function(e){var t=e.authzid;return t+="\0",t+=e.authcid,t+="\0",t+=e.pass,r.utf16to8(t)},o.SASLSHA1=function(){},o.SASLSHA1.prototype=new o.SASLMechanism("SCRAM-SHA-1",!0,40),o.SASLSHA1.prototype.test=function(e){return null!==e.authcid},o.SASLSHA1.prototype.onChallenge=function(o,i,a){var s=a||n.hexdigest(1234567890*Math.random()),c="n="+r.utf16to8(o.authcid);return c+=",r=",c+=s,o._sasl_data.cnonce=s,o._sasl_data["client-first-message-bare"]=c,c="n,,"+c,this.onChallenge=function(n,o){var i,a,s,c,u,l,d,p,h,f,m,_,g="c=biws,",v=n._sasl_data["client-first-message-bare"]+","+o+",",y=n._sasl_data.cnonce,b=/([a-z]+)=([^,]+)(,|$)/;while(o.match(b)){var E=o.match(b);switch(o=o.replace(E[0],""),E[1]){case"r":i=E[2];break;case"s":a=E[2];break;case"i":s=E[2];break}}if(i.substr(0,y.length)!==y)return n._sasl_data={},n._sasl_failure_cb();for(g+="r="+i,v+=g,a=t.decode(a),a+="\0\0\0",h=r.utf16to8(n.pass),c=l=e.core_hmac_sha1(h,a),d=1;d<s;d++){for(u=e.core_hmac_sha1(h,e.binb2str(l)),p=0;p<5;p++)c[p]^=u[p];l=u}for(c=e.binb2str(c),f=e.core_hmac_sha1(c,"Client Key"),m=e.str_hmac_sha1(c,"Server Key"),_=e.core_hmac_sha1(e.str_sha1(e.binb2str(f)),v),n._sasl_data["server-signature"]=e.b64_hmac_sha1(m,v),p=0;p<5;p++)f[p]^=_[p];return g+=",p="+t.encode(e.binb2str(f)),g}.bind(this),c},o.SASLMD5=function(){},o.SASLMD5.prototype=new o.SASLMechanism("DIGEST-MD5",!1,30),o.SASLMD5.prototype.test=function(e){return null!==e.authcid},o.SASLMD5.prototype._quote=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},o.SASLMD5.prototype.onChallenge=function(e,t,o){var i,a=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,s=o||n.hexdigest(""+1234567890*Math.random()),c="",u=null,l="";while(t.match(a))switch(i=t.match(a),t=t.replace(i[0],""),i[2]=i[2].replace(/^"(.+)"$/,"$1"),i[1]){case"realm":c=i[2];break;case"nonce":l=i[2];break;case"qop":i[2];break;case"host":u=i[2];break}var d=e.servtype+"/"+e.domain;null!==u&&(d=d+"/"+u);var p=r.utf16to8(e.authcid+":"+c+":"+this._connection.pass),h=n.hash(p)+":"+l+":"+s,f="AUTHENTICATE:"+d,m="";return m+="charset=utf-8,",m+="username="+this._quote(r.utf16to8(e.authcid))+",",m+="realm="+this._quote(c)+",",m+="nonce="+this._quote(l)+",",m+="nc=00000001,",m+="cnonce="+this._quote(s)+",",m+="digest-uri="+this._quote(d)+",",m+="response="+n.hexdigest(n.hexdigest(h)+":"+l+":00000001:"+s+":auth:"+n.hexdigest(f))+",",m+="qop=auth",this.onChallenge=function(){return""},m},o.SASLOAuthBearer=function(){},o.SASLOAuthBearer.prototype=new o.SASLMechanism("OAUTHBEARER",!0,50),o.SASLOAuthBearer.prototype.test=function(e){return null!==e.authcid},o.SASLOAuthBearer.prototype.onChallenge=function(e){var t="n,a=";return t+=e.authzid,t+=",",t+="",t+="auth=Bearer ",t+=e.pass,t+="",t+="",r.utf16to8(t)},o.SASLExternal=function(){},o.SASLExternal.prototype=new o.SASLMechanism("EXTERNAL",!0,60),o.SASLExternal.prototype.onChallenge=function(e){return e.authcid===e.authzid?"":e.authzid},{Strophe:o,$build:i,$msg:a,$iq:s,$pres:c,SHA1:e,Base64:t,MD5:n}}),function(e,n){_=[h],f=function(e){return n(e.Strophe,e.$build)}.apply(t,_)}(0,function(e,t){return e.Request=function(t,n,r,o){this.id=++e._requestId,this.xmlData=t,this.data=e.serialize(t),this.origFunc=n,this.func=n,this.rid=r,this.date=NaN,this.sends=o||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var e=new Date;return(e-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var e=new Date;return(e-this.dead)/1e3},this.xhr=this._newXHR()},e.Request.prototype={getResponse:function(){var t=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(t=this.xhr.responseXML.documentElement,"parsererror"==t.tagName)throw e.error("invalid response received"),e.error("responseText: "+this.xhr.responseText),e.error("responseXML: "+e.serialize(this.xhr.responseXML)),"parsererror"}else if(this.xhr.responseText)throw e.error("invalid response received"),e.error("responseText: "+this.xhr.responseText),"badformat";return t},_newXHR:function(){var e=null;return N.XMLHttpRequest?(e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml; charset=utf-8")):N.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}},e.Bosh=function(e){this._conn=e,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this._requests=[]},e.Bosh.prototype={strip:null,_buildBody:function(){var n=t("body",{rid:this.rid++,xmlns:e.NS.HTTPBIND});return null!==this.sid&&n.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),n},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&N.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_connect:function(t,n,r){this.wait=t||this.wait,this.hold=n||this.hold,this.errors=0;var o=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":e.NS.BOSH});r&&o.attrs({route:r});var i=this._conn._connect_cb;this._requests.push(new e.Request(o.tree(),this._onRequestStateChange.bind(this,i.bind(this._conn)),o.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(t,n,r,o,i,a,s){this._conn.jid=t,this.sid=n,this.rid=r,this._conn.connect_callback=o,this._conn.domain=e.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=i||this.wait,this.hold=a||this.hold,this.window=s||this.window,this._conn._changeConnectStatus(e.Status.ATTACHED,null)},_restore:function(t,n,r,o,i){var a=JSON.parse(N.sessionStorage.getItem("strophe-bosh-session"));if(!("undefined"!==typeof a&&null!==a&&a.rid&&a.sid&&a.jid)||"undefined"!==typeof t&&null!==t&&e.getBareJidFromJid(a.jid)!=e.getBareJidFromJid(t))throw{name:"StropheSessionError",message:"_restore: no restoreable session."};this._conn.restored=!0,this._attach(a.jid,a.sid,a.rid,n,r,o,i)},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&N.sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):N.sessionStorage.removeItem("strophe-bosh-session")},_connect_cb:function(t){var n,r,o=t.getAttribute("type");if(null!==o&&"terminate"==o)return n=t.getAttribute("condition"),e.error("BOSH-Connection failed: "+n),r=t.getElementsByTagName("conflict"),null!==n?("remote-stream-error"==n&&r.length>0&&(n="conflict"),this._conn._changeConnectStatus(e.Status.CONNFAIL,n)):this._conn._changeConnectStatus(e.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(n),e.Status.CONNFAIL;this.sid||(this.sid=t.getAttribute("sid"));var i=t.getAttribute("requests");i&&(this.window=parseInt(i,10));var a=t.getAttribute("hold");a&&(this.hold=parseInt(a,10));var s=t.getAttribute("wait");s&&(this.wait=parseInt(s,10))},_disconnect:function(e){this._sendTerminate(e)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&N.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_emptyQueue:function(){return 0===this._requests.length},_callProtocolErrorHandlers:function(e){var t,n=this._getRequestStatus(e);t=this._conn.protocolErrorHandlers.HTTP[n],t&&t.call(this,n)},_hitError:function(t){this.errors++,e.warn("request errored, status: "+t+", number of errors: "+this.errors),this.errors>4&&this._conn._onDisconnectTimeout()},_no_auth_received:function(t){t=t?t.bind(this._conn):this._conn._connect_cb.bind(this._conn);var n=this._buildBody();this._requests.push(new e.Request(n.tree(),this._onRequestStateChange.bind(this,t.bind(this._conn)),n.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){var e;while(this._requests.length>0)e=this._requests.pop(),e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){}},_onIdle:function(){var t=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===t.length&&!this._conn.disconnecting&&(e.info("no requests during idle cycle, sending blank request"),t.push(null)),!this._conn.paused){if(this._requests.length<2&&t.length>0){for(var n=this._buildBody(),r=0;r<t.length;r++)null!==t[r]&&("restart"===t[r]?n.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":e.NS.BOSH}):n.cnode(t[r]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new e.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"))),this._throttledRequestHandler()}if(this._requests.length>0){var o=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(e.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),o>Math.floor(e.TIMEOUT*this.wait)&&(e.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(e.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}},_getRequestStatus:function(t,n){var r;if(4==t.xhr.readyState)try{r=t.xhr.status}catch(o){e.error("Caught an error while retrieving a request's status, reqStatus: "+r)}return"undefined"==typeof r&&(r="number"===typeof n?n:0),r},_onRequestStateChange:function(t,n){if(e.debug("request id "+n.id+"."+n.sends+" state changed to "+n.xhr.readyState),n.abort)n.abort=!1;else if(4===n.xhr.readyState){var r=this._getRequestStatus(n);if(this.disconnecting&&r>=400)return this._hitError(r),void this._callProtocolErrorHandlers(n);if((r>0&&r<500||n.sends>5)&&(this._removeRequest(n),e.debug("request id "+n.id+" should now be removed")),200==r){var o=this._requests[0]==n,i=this._requests[1]==n;(i||o&&this._requests.length>0&&this._requests[0].age()>Math.floor(e.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(Number(n.rid)+1),e.debug("request id "+n.id+"."+n.sends+" got 200"),t(n),this.errors=0}else 0===r||r>=400&&r<600||r>=12e3?(e.error("request id "+n.id+"."+n.sends+" error "+r+" happened"),this._hitError(r),this._callProtocolErrorHandlers(n),r>=400&&r<500&&(this._conn._changeConnectStatus(e.Status.DISCONNECTING,null),this._conn._doDisconnect())):e.error("request id "+n.id+"."+n.sends+" error "+r+" happened");r>0&&r<500&&!(n.sends>5)||this._throttledRequestHandler()}},_processRequest:function(t){var n=this,r=this._requests[t],o=this._getRequestStatus(r,-1);if(r.sends>this._conn.maxRetries)this._conn._onDisconnectTimeout();else{var i=r.age(),a=!isNaN(i)&&i>Math.floor(e.TIMEOUT*this.wait),s=null!==r.dead&&r.timeDead()>Math.floor(e.SECONDARY_TIMEOUT*this.wait),c=4==r.xhr.readyState&&(o<1||o>=500);if((a||s||c)&&(s&&e.error("Request "+this._requests[t].id+" timed out (secondary), restarting"),r.abort=!0,r.xhr.abort(),r.xhr.onreadystatechange=function(){},this._requests[t]=new e.Request(r.xmlData,r.origFunc,r.rid,r.sends),r=this._requests[t]),0===r.xhr.readyState){e.debug("request id "+r.id+"."+r.sends+" posting");try{var u=this._conn.options.contentType||"text/xml; charset=utf-8";r.xhr.open("POST",this._conn.service,!this._conn.options.sync),"undefined"!==typeof r.xhr.setRequestHeader&&r.xhr.setRequestHeader("Content-Type",u),this._conn.options.withCredentials&&(r.xhr.withCredentials=!0)}catch(p){return e.error("XHR open failed."),this._conn.connected||this._conn._changeConnectStatus(e.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var l=function(){if(r.date=new Date,n._conn.options.customHeaders){var e=n._conn.options.customHeaders;for(var t in e)e.hasOwnProperty(t)&&r.xhr.setRequestHeader(t,e[t])}r.xhr.send(r.data)};if(r.sends>1){var d=1e3*Math.min(Math.floor(e.TIMEOUT*this.wait),Math.pow(r.sends,3));setTimeout(function(){l()},d)}else l();r.sends++,this._conn.xmlOutput!==e.Connection.prototype.xmlOutput&&(r.xmlData.nodeName===this.strip&&r.xmlData.childNodes.length?this._conn.xmlOutput(r.xmlData.childNodes[0]):this._conn.xmlOutput(r.xmlData)),this._conn.rawOutput!==e.Connection.prototype.rawOutput&&this._conn.rawOutput(r.data)}else e.debug("_processRequest: "+(0===t?"first":"second")+" request has readyState of "+r.xhr.readyState)}},_removeRequest:function(t){var n;for(e.debug("removing request"),n=this._requests.length-1;n>=0;n--)t==this._requests[n]&&this._requests.splice(n,1);t.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(e){var t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)},_reqToData:function(e){try{return e.getResponse()}catch(t){if("parsererror"!=t)throw t;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(t){e.info("_sendTerminate was called");var n=this._buildBody().attrs({type:"terminate"});t&&n.cnode(t.tree());var r=new e.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"));this._requests.push(r),this._throttledRequestHandler()},_send:function(e){clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(function(){this._onIdle(e)}.bind(this._conn),100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?e.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):e.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}},e}),function(e,n){_=[h],m=function(e){return n(e.Strophe,e.$build)}.apply(t,_)}(0,function(e,t){var n=void 0;return e.Websocket=function(e){this._conn=e,this.strip="wrapper";var t=e.service;if(0!==t.indexOf("ws:")&&0!==t.indexOf("wss:")){var n="";"ws"===e.options.protocol&&"https:"!==N.location.protocol?n+="ws":n+="wss",n+="://"+N.location.host,0!==t.indexOf("/")?n+=N.location.pathname+t:n+=t,e.service=n}},e.Websocket.prototype={_buildStream:function(){return t("open",{xmlns:e.NS.FRAMING,to:this._conn.domain,version:"1.0"})},_check_streamerror:function(t,n){var r;if(r=t.getElementsByTagNameNS?t.getElementsByTagNameNS(e.NS.STREAM,"error"):t.getElementsByTagName("stream:error"),0===r.length)return!1;for(var o=r[0],i="",a="",s="urn:ietf:params:xml:ns:xmpp-streams",c=0;c<o.childNodes.length;c++){var u=o.childNodes[c];if(u.getAttribute("xmlns")!==s)break;"text"===u.nodeName?a=u.textContent:i=u.nodeName}var l="WebSocket stream error: ";return l+=i||"unknown",a&&(l+=" - "+i),e.error(l),this._conn._changeConnectStatus(n,i),this._conn._doDisconnect(),!0},_reset:function(){},_connect:function(){var e=!1,t=r.getSystemInfoSync();"devtools"==t.platform?e=!1:"ios"==t.platform?e=!1:"android"==t.platform&&(e=!0);var o=this;function i(){n&&(console.log("有sockettask了。。。"),n.close(),n=void 0),setTimeout(function(){var t=r.connectSocket({url:o._conn.service,fail:function(e){console.log("连接失败",e),-1!=e.errMsg.indexOf("suspend")&&i()},success:function(e){console.log("连接成功",e)}});n=t,n.onOpen(function(e){console.log("WebSocket 连接已打开！"),v=!0,o.socket.onopen.call(o)}),n.onMessage(function(e){o.socket.onmessage.call(o,e)}),n.onClose(function(e){console.log("WebSocket 连接已经关闭！"),v=!1,o._conn.connected=!0,o.socket.onclose.call(o),o._onSocketClose&&o._onSocketClose(e)}),n.onError(function(t){console.log("出错了 出错了"),e?(console.log("安卓"),v=!1,o._conn.connected=!0,o.socket.onclose.call(o),o._onSocketClose&&o._onSocketClose(t)):o.socket.onclose.call(o)})},1e3)}this.socket={onopen:this._onOpen,onmessage:this._connect_cb_wrapper,onerror:this._onError,onclose:this._onClose,send:function(e){r.sendSocketMessage({data:e})}},i()},_connect_cb:function(t){var n=this._check_streamerror(t,e.Status.CONNFAIL);if(n)return e.Status.CONNFAIL},_handleStreamStart:function(t){var n=!1,r=t.getAttribute("xmlns");"string"!==typeof r?n="Missing xmlns in <open />":r!==e.NS.FRAMING&&(n="Wrong xmlns in <open />: "+r);var o=t.getAttribute("version");return"string"!==typeof o?n="Missing version in <open />":"1.0"!==o&&(n="Wrong version in <open />: "+o),!n||(this._conn._changeConnectStatus(e.Status.CONNFAIL,n),this._conn._doDisconnect(),!1)},_connect_cb_wrapper:function(t){if(0===t.data.indexOf("<open ")||0===t.data.indexOf("<?xml")){var n=t.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===n)return;var r=(new b).parseFromString(n,"text/xml").documentElement;this._conn.xmlInput(r),this._conn.rawInput(t.data),this._handleStreamStart(r)&&this._connect_cb(r)}else if(0===t.data.indexOf("<close ")){this._conn.rawInput(t.data),this._conn.xmlInput(t);var o=t.getAttribute("see-other-uri");o?(this._conn._changeConnectStatus(e.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=o,this._connect()):(this._conn._changeConnectStatus(e.Status.CONNFAIL,"Received closing stream"),this._conn._doDisconnect())}else{var i=this._streamWrap(t.data),a=(new b).parseFromString(i,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(a,null,t.data)}},_disconnect:function(n){if(console.log("_disconnect",this.socket.readyState,!!this.socket),this.socket){n&&this._conn.send(n);var r=t("close",{xmlns:e.NS.FRAMING});this._conn.xmlOutput(r);var o=e.serialize(r);this._conn.rawOutput(o);try{this.socket.send(o)}catch(i){e.info("Couldn't send <close /> tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){e.info("WebSockets _doDisconnect was called"),this._closeSocket&&this._closeSocket()},_streamWrap:function(e){return"<wrapper>"+e+"</wrapper>"},_emptyQueue:function(){return!0},_onClose:function(){this._conn.connected&&!this._conn.disconnecting?(e.error("Websocket closed unexpectedly"),this._conn._doDisconnect()):e.info("Websocket closed")},_no_auth_received:function(t){e.error("Server did not send any auth methods"),this._conn._changeConnectStatus(e.Status.CONNFAIL,"Server did not send any auth methods"),t&&(t=t.bind(this._conn),t()),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_abortAllRequests:function(){},_onError:function(e){r.onSocketError(function(e){})},_onIdle:function(t){var n=this._conn._data;if(n.length>0&&!this._conn.paused){for(var o=0;o<n.length;o++){var i,a;if(null!==n[o])i="restart"===n[o]?this._buildStream().tree():n[o],a=e.serialize(i),this._conn.xmlOutput(i),this._conn.rawOutput(a),v?r.sendSocketMessage({data:a,fail:function(){console.log("socjet发送失败"),t&&t("socket error")},success:function(){}}):(v=!1,t&&t("socket disconnnected"))}this._conn._data=[]}},_onMessage:function(t){var n,r,o='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(t.data===o)return this._conn.rawInput(o),this._conn.xmlInput(t),void(this._conn.disconnecting||this._conn._doDisconnect());if(0===t.data.search("<open ")){if(n=(new b).parseFromString(t.data,"text/xml").documentElement,!this._handleStreamStart(n))return}else r=this._streamWrap(t.data),n=(new b).parseFromString(r,"text/xml").documentElement;return this._check_streamerror(n,e.Status.ERROR)?void 0:this._conn.disconnecting&&"presence"===n.firstChild.nodeName&&"unavailable"===n.firstChild.getAttribute("type")?(this._conn.xmlInput(n),void this._conn.rawInput(e.serialize(n))):void this._conn._dataRecv(n,t.data)},_onOpen:function(){e.info("Websocket open");var t=this._buildStream();this._conn.xmlOutput(t.tree());var n=e.serialize(t);this._conn.rawOutput(n),r.sendSocketMessage({data:n})},_reqToData:function(e){return e},_send:function(e){this._conn.flush(e)},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}},e}),function(n){_=[h,f,m],g=function(e){return e}.apply(t,_),void 0===g||(e.exports=g)}(),y){var T=y;"function"===typeof requirejs?requirejs(["./strophe"],function(e){T(e.Strophe,e.$build,e.$msg,e.$iq,e.$pres)}):Promise.resolve().then(function(){var e=[n("9f3c")];(function(e){T(e.Strophe,e.$build,e.$msg,e.$iq,e.$pres)}).apply(null,e)}).catch(n.oe)}}).bind(N)(function(e,t,n,r,o){})}).call(this,n("f266")["default"])},b253:function(e,t,n){"use strict";n.r(t);var r=n("badb"),o=n("78bf");for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);n("0fb0");var a=n("2877"),s=Object(a["a"])(o["default"],r["a"],r["b"],!1,null,null,null);t["default"]=s.exports},b428:function(e,t,n){"use strict";e.exports={IMAGE:"img",TEXT:"txt",LOCATION:"location",VIDEO:"video",AUDIO:"audio",EMOJI:"emoji",FILE:"chat",chatType:{SINGLE_CHAT:"singleChat",CHAT_ROOM:"chatRoom"}}},badb:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:"uni-numbox",attrs:{_hid:0}},[n("view",{staticClass:"uni-numbox__minus",class:{"uni-numbox--disabled":e.inputValue<=e.min||e.disabled},attrs:{_hid:1},on:{click:function(t){e._calcValue("minus")}}},[]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"uni-numbox__value",attrs:{disabled:e.disabled,type:"number",_hid:3,_batrs:"disabled"},domProps:{value:e.inputValue},on:{blur:e._onBlur,input:function(t){t.target.composing||(e.inputValue=t.target.value)}}}),n("view",{staticClass:"uni-numbox__plus",class:{"uni-numbox--disabled":e.inputValue>=e.max||e.disabled},attrs:{_hid:4},on:{click:function(t){e._calcValue("plus")}}},[])])},o=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},c1a0:function(e,t,n){"use strict";var r=[],o=[];function i(){o.push(this),r.push({})}i.prototype={on:function(e,t){var n=r[o.indexOf(this)],i=n[e]=n[e]||[];~i.indexOf(t)||i.push(t)},off:function(e,t){var n=r[o.indexOf(this)],i=n[e]=n[e]||[],a=i.indexOf(t);~a&&i.splice(a,1)},fire:function(e){for(var t=r[o.indexOf(this)],n=t[e]=t[e]||[],i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];for(var c=0;c<n.length;c++)n[c].apply(null,a)}},e.exports=i},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},d04d:function(e,t,n){"use strict";(function(t){var r=n("c1a0"),o=n("fbbc"),i=n("b428"),a=new r,s=n("4df4");a.saveReceiveMsg=function(e,t){var n;if(t==i.IMAGE)n={id:e.id,type:t,body:{id:e.id,from:e.from,to:e.to,type:e.type,ext:e.ext,chatType:e.type,toJid:"",body:{type:t,url:e.url,filename:e.filename,filetype:e.filetype,size:{width:e.width,height:e.height}}}};else if(t==i.TEXT||t==i.EMOJI)n={id:e.id,type:t,body:{id:e.id,from:e.from,to:e.to,type:e.type,ext:e.ext,chatType:e.type,toJid:"",body:{type:t,msg:e.data}},value:e.data};else if(t==i.FILE)n={id:e.id,type:t,body:{id:e.id,length:e.file_length,from:e.from,to:e.to,type:e.type,ext:e.ext,chatType:e.type,toJid:"",body:{type:t,url:e.url,filename:e.filename,msg:"当前不支持此格式消息展示"}},value:e.data};else{if(t!=i.AUDIO)return;n={id:e.id,type:t,accessToken:e.token||e.accessToken,body:{id:e.id,length:e.length,from:e.from,to:e.to,type:e.type,ext:e.ext,chatType:t,toJid:"",body:{type:t,url:e.url,filename:e.filename,filetype:e.filetype,from:e.from,to:e.to}}}}this.saveMsg(n,t,e)},a.saveMsg=function(e,n,r){var a,c=this,u=t.getStorageSync("myUsername");a=r&&"groupchat"==r.type?r.to+u:e.body.from==u?e.body.to+u:e.body.from+u;var l=t.getStorageSync(a)||[],d=o(e,n,u);function p(){t.setStorage({key:a,data:l,success:function(){n!=i.AUDIO&&n!=i.VIDEO||s.fire("em.chat.audio.fileLoaded"),c.fire("newChatMsg",d,n,l,a)}})}n==i.AUDIO&&(d.msg.length=e.body.length,d.msg.token=e.accessToken),l.push(d),n==i.AUDIO&&(d.msg.token=e.accessToken),p()},e.exports=a}).call(this,n("f266")["default"])},e31c:function(e,t,n){"use strict";function r(e,t){for(var n in e)t[n]=e[n]}function o(e,t){var n=e.prototype;if(Object.create){var o=Object.create(t.prototype);n.__proto__=o}if(!(n instanceof t)){var i=function(){};i.prototype=t.prototype,i=new i,r(n,i),e.prototype=n=i}n.constructor!=e&&(n.constructor=e)}var i="http://www.w3.org/1999/xhtml",a={},s=a.ELEMENT_NODE=1,c=a.ATTRIBUTE_NODE=2,u=a.TEXT_NODE=3,l=a.CDATA_SECTION_NODE=4,d=a.ENTITY_REFERENCE_NODE=5,p=a.ENTITY_NODE=6,h=a.PROCESSING_INSTRUCTION_NODE=7,f=a.COMMENT_NODE=8,m=a.DOCUMENT_NODE=9,_=a.DOCUMENT_TYPE_NODE=10,g=a.DOCUMENT_FRAGMENT_NODE=11,v=a.NOTATION_NODE=12,y={},b={},E=(y.INDEX_SIZE_ERR=(b[1]="Index size error",1),y.DOMSTRING_SIZE_ERR=(b[2]="DOMString size error",2),y.HIERARCHY_REQUEST_ERR=(b[3]="Hierarchy request error",3),y.WRONG_DOCUMENT_ERR=(b[4]="Wrong document",4),y.INVALID_CHARACTER_ERR=(b[5]="Invalid character",5),y.NO_DATA_ALLOWED_ERR=(b[6]="No data allowed",6),y.NO_MODIFICATION_ALLOWED_ERR=(b[7]="No modification allowed",7),y.NOT_FOUND_ERR=(b[8]="Not found",8)),N=(y.NOT_SUPPORTED_ERR=(b[9]="Not supported",9),y.INUSE_ATTRIBUTE_ERR=(b[10]="Attribute in use",10));y.INVALID_STATE_ERR=(b[11]="Invalid state",11),y.SYNTAX_ERR=(b[12]="Syntax error",12),y.INVALID_MODIFICATION_ERR=(b[13]="Invalid modification",13),y.NAMESPACE_ERR=(b[14]="Invalid namespace",14),y.INVALID_ACCESS_ERR=(b[15]="Invalid access",15);function T(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,b[e]),this.message=b[e],Error.captureStackTrace&&Error.captureStackTrace(this,T);return n.code=e,t&&(this.message=this.message+": "+t),n}function O(){}function S(e,t){this._node=e,this._refresh=t,x(this)}function x(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);oe(e,"length",n.length),r(n,e),e._inc=t}}function I(){}function C(e,t){var n=e.length;while(n--)if(e[n]===t)return n}function w(e,t,n,r){if(r?t[C(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var o=e.ownerDocument;o&&(r&&L(o,e,r),$(o,e,n))}}function A(e,t,n){var r=C(t,n);if(!(r>=0))throw T(E,new Error);var o=t.length-1;while(r<o)t[r]=t[++r];if(t.length=o,e){var i=e.ownerDocument;i&&(L(i,e,n),n.ownerElement=null)}}function R(e){if(this._features={},e)for(var t in e)this._features=e[t]}function M(){}function D(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function B(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(B(e,t))return!0}while(e=e.nextSibling)}function k(){}function $(e,t,n){e&&e._inc++;var r=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==r&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function L(e,t,n,r){e&&e._inc++;var o=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==o&&delete t._nsMap[n.prefix?n.localName:""]}function j(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{var o=t.firstChild,i=0;while(o)r[i++]=o,o=o.nextSibling;r.length=i}}}function F(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,j(e.ownerDocument,e),t}function U(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===g){var o=t.firstChild;if(null==o)return t;var i=t.lastChild}else o=i=t;var a=n?n.previousSibling:e.lastChild;o.previousSibling=a,i.nextSibling=n,a?a.nextSibling=o:e.firstChild=o,null==n?e.lastChild=i:n.previousSibling=i;do{o.parentNode=e}while(o!==i&&(o=o.nextSibling));return j(e.ownerDocument||e,e),t.nodeType==g&&(t.firstChild=t.lastChild=null),t}function q(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t);r=e.lastChild}r=e.lastChild;return t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,j(e.ownerDocument,e,t),t}function P(){this._nsMap={}}function H(){}function W(){}function G(){}function J(){}function V(){}function z(){}function X(){}function Q(){}function K(){}function Y(){}function Z(){}function ee(){}function te(e,t,n,r){switch(e.nodeType){case s:var o=e.attributes,a=o.length,p=e.firstChild,v=e.tagName;r=i===e.namespaceURI||r,t.push("<",v),n&&t.sort.apply(o,n);for(var y=0;y<a;y++)te(o.item(y),t,n,r);if(p||r&&!/^(?:meta|link|img|br|hr|input|button)$/i.test(v)){if(t.push(">"),r&&/^script$/i.test(v))p&&t.push(p.data);else while(p)te(p,t,n,r),p=p.nextSibling;t.push("</",v,">")}else t.push("/>");return;case m:case g:p=e.firstChild;while(p)te(p,t,n,r),p=p.nextSibling;return;case c:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,D),'"');case u:return t.push(e.data.replace(/[<&]/g,D));case l:return t.push("<![CDATA[",e.data,"]]>");case f:return t.push("\x3c!--",e.data,"--\x3e");case _:var b=e.publicId,E=e.systemId;if(t.push("<!DOCTYPE ",e.name),b)t.push(' PUBLIC "',b),E&&"."!=E&&t.push('" "',E),t.push('">');else if(E&&"."!=E)t.push(' SYSTEM "',E,'">');else{var N=e.internalSubset;N&&t.push(" [",N,"]"),t.push(">")}return;case h:return t.push("<?",e.target," ",e.data,"?>");case d:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ne(e,t,n){var r;switch(t.nodeType){case s:r=t.cloneNode(!1),r.ownerDocument=e;case g:break;case c:n=!0;break}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,n){var o=t.firstChild;while(o)r.appendChild(ne(e,o,n)),o=o.nextSibling}return r}function re(e,t,n){var r=new t.constructor;for(var o in t){var i=t[o];"object"!=typeof i&&i!=r[o]&&(r[o]=i)}switch(t.childNodes&&(r.childNodes=new O),r.ownerDocument=e,r.nodeType){case s:var a=t.attributes,u=r.attributes=new I,l=a.length;u._ownerElement=r;for(var d=0;d<l;d++)r.setAttributeNode(re(e,a.item(d),!0));break;case c:n=!0}if(n){var p=t.firstChild;while(p)r.appendChild(re(e,p,n)),p=p.nextSibling}return r}function oe(e,t,n){e[t]=n}T.prototype=Error.prototype,r(y,T),O.prototype={length:0,item:function(e){return this[e]||null},toString:function(){for(var e=[],t=0;t<this.length;t++)te(this[t],e);return e.join("")}},S.prototype.item=function(e){return x(this),this[e]},o(S,O),I.prototype={length:0,item:O.prototype.item,getNamedItem:function(e){var t=this.length;while(t--){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new T(N);var n=this.getNamedItem(e.nodeName);return w(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new T(N);return t=this.getNamedItemNS(e.namespaceURI,e.localName),w(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return A(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return A(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){var n=this.length;while(n--){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},R.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new k;if(r.implementation=this,r.childNodes=new O,r.doctype=n,n&&r.appendChild(n),t){var o=r.createElementNS(e,t);r.appendChild(o)}return r},createDocumentType:function(e,t,n){var r=new z;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},M.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return U(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return F(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return re(this.ownerDocument||this,this,e)},normalize:function(){var e=this.firstChild;while(e){var t=e.nextSibling;t&&t.nodeType==u&&e.nodeType==u?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){var t=this;while(t){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){var t=this;while(t){var n=t._nsMap;if(n&&e in n)return n[e];t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},r(a,M),r(a,M.prototype),k.prototype={nodeName:"#document",nodeType:m,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==g){var n=e.firstChild;while(n){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&1==e.nodeType&&(this.documentElement=e),U(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),F(this,e)},importNode:function(e,t){return ne(this,e,t)},getElementById:function(e){var t=null;return B(this.documentElement,function(n){if(1==n.nodeType&&n.getAttribute("id")==e)return t=n,!0}),t},createElement:function(e){var t=new P;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new O;var n=t.attributes=new I;return n._ownerElement=t,t},createDocumentFragment:function(){var e=new Y;return e.ownerDocument=this,e.childNodes=new O,e},createTextNode:function(e){var t=new G;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new J;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new V;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new Z;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new H;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new K;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new P,r=t.split(":"),o=n.attributes=new I;return n.childNodes=new O,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,o._ownerElement=n,n},createAttributeNS:function(e,t){var n=new H,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},o(k,M),P.prototype={nodeType:s,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===g?this.insertBefore(e,null):q(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new S(this,function(t){var n=[];return B(t,function(r){r===t||r.nodeType!=s||"*"!==e&&r.tagName!=e||n.push(r)}),n})},getElementsByTagNameNS:function(e,t){return new S(this,function(n){var r=[];return B(n,function(o){o===n||o.nodeType!==s||"*"!==e&&o.namespaceURI!==e||"*"!==t&&o.localName!=t||r.push(o)}),r})}},k.prototype.getElementsByTagName=P.prototype.getElementsByTagName,k.prototype.getElementsByTagNameNS=P.prototype.getElementsByTagNameNS,o(P,M),H.prototype.nodeType=c,o(H,M),W.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(b[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var r=this.data.substring(0,e),o=this.data.substring(e+t);n=r+n+o,this.nodeValue=this.data=n,this.length=n.length}},o(W,M),G.prototype={nodeName:"#text",nodeType:u,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},o(G,W),J.prototype={nodeName:"#comment",nodeType:f},o(J,W),V.prototype={nodeName:"#cdata-section",nodeType:l},o(V,W),z.prototype.nodeType=_,o(z,M),X.prototype.nodeType=v,o(X,M),Q.prototype.nodeType=p,o(Q,M),K.prototype.nodeType=d,o(K,M),Y.prototype.nodeName="#document-fragment",Y.prototype.nodeType=g,o(Y,M),Z.prototype.nodeType=h,o(Z,M),ee.prototype.serializeToString=function(e,t){return e.toString(t)},M.prototype.toString=function(e){var t=[];return te(this,t,e),t.join("")};try{if(Object.defineProperty){var ie=function e(t){switch(t.nodeType){case 1:case 11:var n=[];t=t.firstChild;while(t)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}};Object.defineProperty(S.prototype,"length",{get:function(){return x(this),this.$$length}}),Object.defineProperty(M.prototype,"textContent",{get:function(){return ie(this)},set:function(e){switch(this.nodeType){case 1:case 11:while(this.firstChild)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=value,this.nodeValue=e}}}),oe=function(e,t,n){e["$$"+t]=n}}}catch(ae){}t.DOMImplementation=R,t.XMLSerializer=ee},e928:function(module,exports,__webpack_require__){"use strict";(function(wx){var _strophe=_interopRequireDefault(__webpack_require__("9f3c"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var WebIM={},Strophe=_strophe.default.Strophe;Strophe.log=function(e,t){};var xmldom=__webpack_require__("5d90"),DOMParser=xmldom.DOMParser,window={},_version="1.1.3",_code=__webpack_require__("4345").code,_utils=__webpack_require__("fe52").utils,_msg=__webpack_require__("518f"),_message=_msg._msg,_msgHash={},Queue=__webpack_require__("1286").Queue,location=window.location||{protocol:"https:"};function _listenNetwork(e,t){window.addEventListener?(window.addEventListener("online",e),window.addEventListener("offline",t)):window.attachEvent&&(document.body?(document.body.attachEvent("ononline",e),document.body.attachEvent("onoffline",t)):window.attachEvent("load",function(){document.body.attachEvent("ononline",e),document.body.attachEvent("onoffline",t)}))}function _parseRoom(e){var t=[],n=e.getElementsByTagName("item");if(n)for(var r=0;r<n.length;r++){var o=n[r],i=o.getAttribute("jid"),a=i.split("@")[0],s={jid:i,name:o.getAttribute("name"),roomId:a.split("_")[1]};t.push(s)}return t}function _parseRoomOccupants(e){var t=[],n=e.getElementsByTagName("item");if(n)for(var r=0;r<n.length;r++){var o=n[r],i={jid:o.getAttribute("jid"),name:o.getAttribute("name")};t.push(i)}return t}function _parseResponseMessage(msginfo){var parseMsgData={errorMsg:!0,data:[]},msgBodies=msginfo.getElementsByTagName("body");if(msgBodies){for(var i=0;i<msgBodies.length;i++){var msgBody=msgBodies[i],childNodes=msgBody.childNodes;if(childNodes&&childNodes.length>0){var childNode=msgBody.childNodes[0];if(childNode.nodeType==Strophe.ElementType.TEXT){var jsondata=childNode.wholeText||childNode.nodeValue;jsondata=jsondata.replace("\n","<br>");try{var data=JSON.parse(jsondata);parseMsgData.errorMsg=!1,parseMsgData.data=[data]}catch(e){}}}}var delayTags=msginfo.getElementsByTagName("delay");if(delayTags&&delayTags.length>0){var delayTag=delayTags[0],delayMsgTime=delayTag.getAttribute("stamp");delayMsgTime&&(parseMsgData.delayTimeStamp=delayMsgTime)}}else{var childrens=msginfo.childNodes;if(childrens&&childrens.length>0){var child=msginfo.childNodes[0];if(child.nodeType==Strophe.ElementType.TEXT)try{var _data=eval("("+child.nodeValue+")");parseMsgData.errorMsg=!1,parseMsgData.data=[_data]}catch(e){}}}return parseMsgData}function _parseNameFromJidFn(e,t){var n=e,r=n.indexOf("_");t=t||"",-1!==r&&(n=n.substring(r+1));var o=n.indexOf("@"+t);return-1!==o&&(n=n.substring(0,o)),n}function _parseFriend(e,t,n){var r=[],o=e.getElementsByTagName("item");if(o)for(var i=function(e){var n=[],i=o[e],a=i.getAttribute("jid");if(!a)return"continue";var s=i.getAttribute("subscription"),c={subscription:s,jid:a},u=i.getAttribute("ask");u&&(c.ask=u);var l=i.getAttribute("name");c.name=l||_parseNameFromJidFn(a),Strophe.forEachChild(i,"group",function(e){n.push(Strophe.getText(e))}),c.groups=n,r.push(c),t&&"from"==s&&t.subscribe({toJid:a}),t&&"to"==s&&t.subscribed({toJid:a})},a=0;a<o.length;a++)i(a);return r}function _parseMessageType(e){var t="normal",n=e.getElementsByTagName("received");if(n&&n.length>0&&"urn:xmpp:receipts"===n[0].namespaceURI)t="received";else{var r=e.getElementsByTagName("invite");r&&r.length>0&&(t="invite")}return t}function _handleMessageQueue(e){for(var t in _msgHash)Object.hasOwnProperty.call(_msgHash,t)&&_msgHash[t].send(e)}function _loginCallback(e,t,n){var r,o="conflict"===t;if(e==Strophe.Status.CONNFAIL)r={type:_code.WEBIM_CONNCTION_SERVER_CLOSE_ERROR,msg:t},o&&(r.conflict=!0),n.onError(r);else if(e==Strophe.Status.ATTACHED||e==Strophe.Status.CONNECTED){n.autoReconnectNumTotal=0,n.intervalId=setInterval(function(){n.handelSendQueue()},200);var i=function(e){var t=_parseMessageType(e);return"received"===t?(n.handleReceivedMessage(e),!0):"invite"===t?(n.handleInviteMessage(e),!0):(n.handleMessage(e),!0)},a=function(e){return n.handlePresence(e),!0},s=function(e){return n.handleIqRoster(e),!0},c=function(e){return n.handleIqPrivacy(e),!0},u=function(e){return n.handleIq(e),!0};n.addHandler(i,null,"message",null,null,null),n.addHandler(a,null,"presence",null,null,null),n.addHandler(s,"jabber:iq:roster","iq","set",null,null),n.addHandler(c,"jabber:iq:privacy","iq","set",null,null),n.addHandler(u,null,"iq",null,null,null),n.context.status=_code.STATUS_OPENED;var l=[_code.WEBIM_MESSAGE_REC_TEXT,_code.WEBIM_MESSAGE_REC_EMOJI],d=[_code.WEBIM_MESSAGE_SED_TEXT];_utils.isCanDownLoadFile&&(l.push(_code.WEBIM_MESSAGE_REC_PHOTO),l.push(_code.WEBIM_MESSAGE_REC_AUDIO_FILE)),_utils.isCanUploadFile&&(d.push(_code.WEBIM_MESSAGE_REC_PHOTO),d.push(_code.WEBIM_MESSAGE_REC_AUDIO_FILE)),n.notifyVersion(),n.retry&&_handleMessageQueue(n),n.heartBeat(),n.isAutoLogin&&n.setPresence(),n.onOpened({canReceive:l,canSend:d,accessToken:n.context.accessToken}),n.onSocketConnected()}else if(e==Strophe.Status.DISCONNECTING){if(n.isOpened()){if(n.autoReconnectNumTotal<n.autoReconnectNumMax)return 0==n.autoReconnectNumTotal&&n.onReconnect(),void n.reconnect();n.autoReconnectNumTotal==n.autoReconnectNumMax&&(console.log("Err 3"),r={type:_code.WEBIM_CONNCTION_DISCONNECTED},n.onError(r),n.context.status=_code.STATUS_CLOSED,n.clear(),n.onClosed()),n.stopHeartBeat()}n.context.status=_code.STATUS_CLOSING}else if(e==Strophe.Status.DISCONNECTED){if(n.isOpened()){if(n.autoReconnectNumTotal<n.autoReconnectNumMax)return 0==n.autoReconnectNumTotal&&n.onReconnect(),void n.reconnect();n.autoReconnectNumTotal==n.autoReconnectNumMax&&(n.context.status=_code.STATUS_CLOSED,n.clear(),n.onClosed(),n.stopHeartBeat()),console.log("Err 4"),r={type:_code.WEBIM_CONNCTION_DISCONNECTED},n.onError(r)}n.context.status=_code.STATUS_CLOSED}else e==Strophe.Status.AUTHFAIL?(r={type:_code.WEBIM_CONNCTION_AUTH_ERROR},o&&(r.conflict=!0),n.onError(r),n.clear(),n.stopHeartBeat(),wx.closeSocket()):e==Strophe.Status.ERROR&&(n.context.status=_code.STATUS_ERROR,r={type:_code.WEBIM_CONNCTION_SERVER_ERROR},o&&(r.conflict=!0),n.onError(r),n.stopHeartBeat())}function _login(e,t){var n=null,r=e.access_token||"";function o(e,n){console.log("connection stat change",e,n),_loginCallback(e,n,t)}""!=r?(t.context.accessToken=e.access_token,t.context.accessTokenExpires=e.expires_in,n=new Strophe.Connection(t.url,{inactivity:t.inactivity,maxRetries:t.maxRetries,pollingTime:t.pollingTime}),t.context.stropheConn=n,t.route?n.connect(t.context.jid,"$t$"+r,o,t.wait,t.hold,t.route):n.connect(t.context.jid,"$t$"+r,o,t.wait,t.hold)):t.onError({type:_code.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,data:e})}function _getJid(e,t){var n=e.toJid||"";if(""===n){var r=t.context.appKey||"",o=r+"_"+e.to+"@"+t.domain;e.resource&&(o=o+"/"+e.resource),n=o}return n}function _getJidByName(e,t){return _getJid({to:e},t)}function _validCheck(e,t){if(e=e||{},""==e.user)return t.onError({type:_code.WEBIM_CONNCTION_USER_NOT_ASSIGN_ERROR}),!1;var n=e.user+""||"",r=e.appKey||"",o=r.split("#");if(2!==o.length)return t.onError({type:_code.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR}),!1;var i=o[0],a=o[1];if(!i)return t.onError({type:_code.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR}),!1;if(!a)return t.onError({type:_code.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR}),!1;var s=r+"_"+n.toLowerCase()+"@"+t.domain,c=e.resource||"webim";return t.isMultiLoginSessions&&(c+=n+(new Date).getTime()+Math.floor(1e6*Math.random().toFixed(6))),t.context.jid=s+"/"+c,t.context.userId=n,t.context.appKey=r,t.context.appName=a,t.context.orgName=i,!0}function _getXmppUrl(e,t){if(/^(ws|http)s?:\/\/?/.test(e))return e;var n={prefix:"http",base:"://"+e,suffix:"/http-bind/"};return t&&_utils.isSupportWss?(n.prefix="wss",n.suffix="/ws/"):t?n.prefix="https":window.WebSocket&&(n.prefix="ws",n.suffix="/ws/"),n.prefix+n.base+n.suffix}function connection(e){if(!(this instanceof connection))return new connection(e);e=e||{},this.isMultiLoginSessions=e.isMultiLoginSessions||!1,this.wait=e.wait||30,this.retry=e.retry||!1,this.https=e.https||"https:"===location.protocol,this.url=_getXmppUrl(e.url,this.https),this.hold=e.hold||1,this.route=e.route||null,this.domain=e.domain||"easemob.com",this.inactivity=e.inactivity||30,this.heartBeatWait=e.heartBeatWait||4500,this.maxRetries=e.maxRetries||5,this.isAutoLogin=!1!==e.isAutoLogin,this.pollingTime=e.pollingTime||800,this.stropheConn=!1,this.autoReconnectNumMax=e.autoReconnectNumMax||0,this.autoReconnectNumTotal=0,this.autoReconnectInterval=e.autoReconnectInterval||0,this.context={status:_code.STATUS_INIT},this.apiUrl=e.apiUrl||"",this.sendQueue=new Queue,this.intervalId=null,this.orgName="",this.appName="",this.token=""}function _parsePrivacy(e){var t=[],n=e.getElementsByTagName("item");if(n)for(var r=0;r<n.length;r++){var o=n[r],i=o.getAttribute("value"),a=o.getAttribute("order"),s=o.getAttribute("type");if(i){var c=_parseNameFromJidFn(i);t[c]={type:s,order:a,jid:i,name:c}}}return t}window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,window.XDomainRequest&&(XDomainRequest.prototype.oldsend=XDomainRequest.prototype.send,XDomainRequest.prototype.send=function(){XDomainRequest.prototype.oldsend.apply(this,arguments),this.readyState=2}),Strophe.Request.prototype._newXHR=function(){var e=_utils.xmlrequest(!0);return e.overrideMimeType&&e.overrideMimeType("text/xml"),e.onreadystatechange=this.func.bind(null,this),e},Strophe.Websocket.prototype._onSocketClose=function(e){},Strophe.Websocket.prototype._onMessage=function(e){var t,n;try{WebIM&&WebIM.config.isDebug&&(console.group("%crecv # ","color: green; font-size: large"),console.log("%c"+e.data,"color: green"),console.groupEnd())}catch(o){}if(0!==e.data.indexOf("<close ")){if(0===e.data.search("<open ")){if(t=(new DOMParser).parseFromString(e.data,"text/xml").documentElement,!this._handleStreamStart(t))return}else n=this._streamWrap(e.data),t=(new DOMParser).parseFromString(n,"text/xml").documentElement;if(!this._check_streamerror(t,Strophe.Status.ERROR))return this._conn.disconnecting&&"presence"===t.firstChild.nodeName&&"unavailable"===t.firstChild.getAttribute("type")?(this._conn.xmlInput(t),void this._conn.rawInput(Strophe.serialize(t))):void this._conn._dataRecv(t,e.data)}else{t=(new DOMParser).parseFromString(e.data,"text/xml").documentElement;var r=t.getAttribute("see-other-uri");r?(this._conn._changeConnectStatus(Strophe.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=r,this._connect()):this._conn._doDisconnect("receive <close> from server")}},connection.prototype.handelSendQueue=function(){var e=this.sendQueue.pop();null!==e&&this.sendReceiptsMessage(e)},connection.prototype.listen=function(e){e.url&&(this.url=_getXmppUrl(e.url,this.https)),this.onOpened=e.onOpened||_utils.emptyfn,this.onClosed=e.onClosed||_utils.emptyfn,this.onReconnect=e.onReconnect||_utils.emptyfn,this.onSocketConnected=e.onSocketConnected||_utils.emptyfn,this.onTextMessage=e.onTextMessage||_utils.emptyfn,this.onEmojiMessage=e.onEmojiMessage||_utils.emptyfn,this.onPictureMessage=e.onPictureMessage||_utils.emptyfn,this.onAudioMessage=e.onAudioMessage||_utils.emptyfn,this.onVideoMessage=e.onVideoMessage||_utils.emptyfn,this.onFileMessage=e.onFileMessage||_utils.emptyfn,this.onLocationMessage=e.onLocationMessage||_utils.emptyfn,this.onCmdMessage=e.onCmdMessage||_utils.emptyfn,this.onPresence=e.onPresence||_utils.emptyfn,this.onRoster=e.onRoster||_utils.emptyfn,this.onError=e.onError||_utils.emptyfn,this.onReceivedMessage=e.onReceivedMessage||_utils.emptyfn,this.onInviteMessage=e.onInviteMessage||_utils.emptyfn,this.onOffline=e.onOffline||_utils.emptyfn,this.onOnline=e.onOnline||_utils.emptyfn,this.onConfirmPop=e.onConfirmPop||_utils.emptyfn,this.onCreateGroup=e.onCreateGroup||_utils.emptyfn,this.onUpdateMyGroupList=e.onUpdateMyGroupList||_utils.emptyfn,this.onUpdateMyRoster=e.onUpdateMyRoster||_utils.emptyfn,this.onBlacklistUpdate=e.onBlacklistUpdate||_utils.emptyfn,_listenNetwork(this.onOnline,this.onOffline)},connection.prototype.heartBeatID=0,connection.prototype.heartBeat=function(){var e=this;this.stopHeartBeat(),this.heartBeatID=setInterval(function(){e.ping({toJid:e.domain,type:"normal"})},this.heartBeatWait)},connection.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatID)},connection.prototype.sendReceiptsMessage=function(e){var t=_strophe.default.$msg({from:this.context.jid||"",to:this.domain,id:e.id||""}).c("received",{xmlns:"urn:xmpp:receipts",id:e.id||""});this.sendCommand(t.tree())},connection.prototype.cacheReceiptsMessage=function(e){this.sendQueue.push(e)},connection.prototype.open=function(e){var t=this;if(console.log("open",this.isOpening()),this.isOpening()||this.isOpened())console.log("can't open [1]");else if(_validCheck(e,this))if(e.accessToken)e.access_token=e.accessToken,this.token=e.access_token,_login(e,t);else{var n=e.apiUrl,r=e.user,o=e.pwd||"",i=e.appKey,a=i.split("#"),s=a[0],c=a[1];this.orgName=s,this.appName=c,this.context.status=_code.STATUS_DOLOGIN_USERGRID;var u={grant_type:"password",username:r,password:o,timestamp:+new Date},l=_utils.stringify(u);_utils.ajax({url:n+"/"+s+"/"+c+"/token",data:l,success:d||_utils.emptyfn,error:p||_utils.emptyfn})}else console.log("can't open [2]");function d(e,n,r){t.context.status=_code.STATUS_DOLOGIN_IM,t.context.restTokenData=e,"404"!=e.statusCode&&"400"!=e.statusCode?_login(e.data,t):p({})}function p(e,n,r){t.clear(),e.error&&e.error_description?t.onError({type:_code.WEBIM_CONNCTION_OPEN_USERGRID_ERROR,data:e,xhr:n}):t.onError({type:_code.WEBIM_CONNCTION_OPEN_ERROR,data:e,xhr:n})}},connection.prototype.attach=function(e){var t=this,n=_validCheck(e,this);if(n){e=e||{};var r=e.accessToken||"";if(""!=r){var o=e.sid||"";if(""!==o){var i=e.rid||"";if(""!==i){var a=new Strophe.Connection(this.url,{inactivity:this.inactivity,maxRetries:this.maxRetries,pollingTime:this.pollingTime,heartBeatWait:this.heartBeatWait});this.context.accessToken=r,this.context.stropheConn=a,this.context.status=_code.STATUS_DOLOGIN_IM;var s=function(e,n){_loginCallback(e,n,t)},c=this.context.jid,u=this.wait,l=this.hold,d=this.wind||5;a.attach(c,o,i,s,u,l,d)}else this.onError({type:_code.WEBIM_CONNCTION_RID_NOT_ASSIGN_ERROR})}else this.onError({type:_code.WEBIM_CONNCTION_SESSIONID_NOT_ASSIGN_ERROR})}else this.onError({type:_code.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR})}},connection.prototype.close=function(e){this.stopHeartBeat();var t=this.context.status;t!=_code.STATUS_INIT&&(this.isClosed()||this.isClosing()||(this.context.status=_code.STATUS_CLOSING,this.context.stropheConn.disconnect(e)))},connection.prototype.addHandler=function(e,t,n,r,o,i,a){this.context.stropheConn.addHandler(e,t,n,r,o,i,a)},connection.prototype.notifyVersion=function(e,t){var n=_strophe.default.$iq({from:this.context.jid||"",to:this.domain,type:"result"}).c("query",{xmlns:"jabber:iq:version"}).c("name").t("easemob").up().c("version").t(_version).up().c("os").t("webim");e=e||_utils.emptyfn;var r=t||this.onError,o=function(e){r({type:_code.WEBIM_CONNCTION_NOTIFYVERSION_ERROR,data:e})};this.context.stropheConn.sendIQ(n.tree(),e,o)},connection.prototype.handlePresence=function(e){if(!this.isClosed()){var t=e.getAttribute("from")||"",n=e.getAttribute("to")||"",r=e.getAttribute("type")||"",o=e.getAttribute("presence_type")||"",i=_parseNameFromJidFn(t),a=_parseNameFromJidFn(n),s=!1,c=!1,u=!1,l=!1,d={from:i,to:a,fromJid:t,toJid:n,type:r,chatroom:!!e.getElementsByTagName("roomtype").length},p=e.getElementsByTagName("show");if(p&&p.length>0){var h=p[0];d.show=Strophe.getText(h)}var f=e.getElementsByTagName("status");if(f&&f.length>0){var m=f[0];d.status=Strophe.getText(m),d.code=m.getAttribute("code")}var _=e.getElementsByTagName("priority");if(_&&_.length>0){var g=_[0];d.priority=Strophe.getText(g)}var v=e.getElementsByTagName("error");v&&v.length>0&&(v=v[0],d.error={code:v.getAttribute("code")});var y=e.getElementsByTagName("destroy");if(y&&y.length>0){y=y[0],d.destroy=!0;var b=y.getElementsByTagName("reason");b&&b.length>0&&(d.reason=Strophe.getText(b[0]))}var E=e.getElementsByTagName("item");if(E&&E.length>0){var N=E[0],T=N.getAttribute("role"),O=N.getAttribute("jid"),S=N.getAttribute("affiliation");if("none"==T&&O){var x=_parseNameFromJidFn(O),I=N.getElementsByTagName("actor")[0],C=I.getAttribute("nick");d.actor=C,d.kicked=x}"moderator"==T&&"201"==d.code&&"owner"===S&&(d.type="createGroupACK",s=!0)}var w=e.getElementsByTagName("x");if(w&&w.length>0){var A=w[0].getElementsByTagName("apply"),R=w[0].getElementsByTagName("accept"),M=w[0].getElementsByTagName("item"),D=w[0].getElementsByTagName("decline"),B=w[0].getElementsByTagName("add_admin"),k=w[0].getElementsByTagName("remove_admin"),$=w[0].getElementsByTagName("add_mute"),L=w[0].getElementsByTagName("remove_mute");if(A&&A.length>0){l=!0,d.toNick=A[0].getAttribute("toNick"),d.type="joinGroupNotifications";var j=A[0].getAttribute("to"),F=j.split("@")[0].split("_");F=F[F.length-1],d.gid=F}else if(R&&R.length>0)d.type="joinPublicGroupSuccess";else if(M&&M.length>0){var U=M[0].getAttribute("affiliation"),q=M[0].getAttribute("role");if("member"==U||"participant"==q){c=!0,d.mid=d.fromJid.split("/"),d.mid=d.mid[d.mid.length-1],d.type="memberJoinPublicGroupSuccess";var P=e.getElementsByTagName("roomtype");if(P&&P.length>0){var H=P[0].getAttribute("type");"chatroom"==H&&(d.type="memberJoinChatRoomSuccess")}}else if("none"==U||"none"==q){var W=e.getElementsByTagName("roomtype");if(W&&W.length>0){var G=W[0].getAttribute("type");"chatroom"==G&&(d.type="memberLeaveChatRoomSuccess")}}}else if(D&&D.length){u=!0;var J=D[0].getAttribute("fromNick"),V=_parseNameFromJidFn(D[0].getAttribute("from"));d.type="joinPublicGroupDeclined",d.owner=V,d.gid=J}else if(B&&B.length>0){var z=_parseNameFromJidFn(B[0].getAttribute("mucjid")),X=_parseNameFromJidFn(B[0].getAttribute("from"));d.owner=X,d.gid=z,d.type="addAdmin"}else if(k&&k.length>0){var Q=_parseNameFromJidFn(k[0].getAttribute("mucjid")),K=_parseNameFromJidFn(k[0].getAttribute("from"));d.owner=K,d.gid=Q,d.type="removeAdmin"}else if($&&$.length>0){var Y=_parseNameFromJidFn($[0].getAttribute("mucjid")),Z=_parseNameFromJidFn($[0].getAttribute("from"));d.owner=Z,d.gid=Y,d.type="addMute"}else if(L&&L.length>0){var ee=_parseNameFromJidFn(L[0].getAttribute("mucjid")),te=_parseNameFromJidFn(L[0].getAttribute("from"));d.owner=te,d.gid=ee,d.type="removeMute"}}if(d.chatroom){d.presence_type=o,d.original_type=d.type;var ne=t.slice(t.lastIndexOf("/")+1);ne===this.context.userId&&(""!==d.type||d.code?"unavailable"!==o&&"unavailable"!==d.type||(d.status?110==d.code?d.type="leaveChatRoom":d.error&&406==d.error.code&&(d.type="reachChatRoomCapacity"):d.type="leaveChatRoom"):d.type="joinChatRoomSuccess")}else if(d.presence_type=o,d.original_type=r,/subscribe/.test(d.type));else if(""!=r||d.status||d.error||s||l||c||u){if("unavailable"===o||"unavailable"===r)if(d.destroy)d.type="deleteGroupChat";else if(307==d.code||321==d.code){var re=e.getAttribute("nick");d.type=re?"removedFromGroup":"leaveGroup"}}else;"subscribe"==d.type&&d.from==d.to||this.onPresence(d,e)}},connection.prototype.handleIq=function(e){return!0},connection.prototype.handleIqPrivacy=function(e){var t=e.getElementsByTagName("list");0!=t.length&&this.getBlacklist()},connection.prototype.handleIqRoster=function(e){var t=e.getAttribute("id"),n=e.getAttribute("from")||"",r=this.context.jid,o=_strophe.default.$iq({type:"result",id:t,from:r});this.sendCommand(o.tree());var i=e.getElementsByTagName("query");if(i&&i.length>0){var a=i[0],s=_parseFriend(a,this,n);this.onRoster(s)}return!0},connection.prototype.handleMessage=function(e){if(!this.isClosed()){var t=e.getAttribute("id")||"";this.cacheReceiptsMessage({id:t});var n=_parseResponseMessage(e);if(n.errorMsg)this.handlePresence(e);else{var r=e.getElementsByTagName("error"),o="",i="",a=!1;if(r.length>0){a=!0,o=r[0].getAttribute("code");var s=r[0].getElementsByTagName("text");i=s[0].textContent||s[0].text}var c=n.data;for(var u in c)if(Object.hasOwnProperty.call(c,u)){var l=c[u];if(l.from&&l.to){var d=(l.from+"").toLowerCase(),p=(l.to+"").toLowerCase(),h=l.ext||{},f="",m=e.getElementsByTagName("roomtype");f=m.length?m[0].getAttribute("type")||"chat":e.getAttribute("type")||"chat";var _=l.bodies;if(_&&0!=_.length){var g=l.bodies[0],v=g.type;try{switch(v){case"txt":var y=g.msg,b=_utils.parseTextMessage(y,WebIM.Emoji);if(b.isemoji){var E={id:t,type:f,from:d,to:p,delay:n.delayTimeStamp,data:b.body,ext:h};!E.delay&&delete E.delay,E.error=a,E.errorText=i,E.errorCode=o,this.onEmojiMessage(E)}else{var N={id:t,type:f,from:d,to:p,delay:n.delayTimeStamp,data:y,ext:h};!N.delay&&delete N.delay,N.error=a,N.errorText=i,N.errorCode=o,this.onTextMessage(N)}break;case"img":var T=0,O=0;g.size&&(T=g.size.width,O=g.size.height);var S={id:t,type:f,from:d,to:p,url:g.url,secret:g.secret,filename:g.filename,thumb:g.thumb,thumb_secret:g.thumb_secret,file_length:g.file_length||"",width:T,height:O,filetype:g.filetype||"",accessToken:this.context.accessToken||"",ext:h,delay:n.delayTimeStamp};!S.delay&&delete S.delay,S.error=a,S.errorText=i,S.errorCode=o,this.onPictureMessage(S);break;case"audio":S={id:t,type:f,from:d,to:p,url:g.url,secret:g.secret,filename:g.filename,length:g.length||"",file_length:g.file_length||"",filetype:g.filetype||"",accessToken:this.context.accessToken||"",ext:h,delay:n.delayTimeStamp},!S.delay&&delete S.delay,S.error=a,S.errorText=i,S.errorCode=o,this.onAudioMessage(S);break;case"file":S={id:t,type:f,from:d,to:p,url:g.url,secret:g.secret,filename:g.filename,file_length:g.file_length,accessToken:this.context.accessToken||"",ext:h,delay:n.delayTimeStamp},!S.delay&&delete S.delay,S.error=a,S.errorText=i,S.errorCode=o,this.onFileMessage(S);break;case"loc":S={id:t,type:f,from:d,to:p,addr:g.addr,lat:g.lat,lng:g.lng,ext:h,delay:n.delayTimeStamp},!S.delay&&delete S.delay,S.error=a,S.errorText=i,S.errorCode=o,this.onLocationMessage(S);break;case"video":S={id:t,type:f,from:d,to:p,url:g.url,secret:g.secret,filename:g.filename,file_length:g.file_length,accessToken:this.context.accessToken||"",ext:h,delay:n.delayTimeStamp},!S.delay&&delete S.delay,S.error=a,S.errorText=i,S.errorCode=o,this.onVideoMessage(S);break;case"cmd":S={id:t,from:d,to:p,action:g.action,ext:h,delay:n.delayTimeStamp},!S.delay&&delete S.delay,S.error=a,S.errorText=i,S.errorCode=o,this.onCmdMessage(S);break;default:break}}catch(x){this.onError({type:_code.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:x})}}}}}}},connection.prototype.handleReceivedMessage=function(e){try{this.onReceivedMessage(e)}catch(o){this.onError({type:_code.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:o})}var t,n,r=e.getElementsByTagName("received");if(r.length>0&&(t=r[0].childNodes&&r[0].childNodes.length>0?r[0].childNodes[0].nodeValue:r[0].innerHTML||r[0].innerText,n=r[0].getAttribute("mid")),_msgHash[t]){try{_msgHash[t].msg.success instanceof Function&&_msgHash[t].msg.success(t,n)}catch(o){this.onError({type:_code.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:o})}delete _msgHash[t]}},connection.prototype.handleInviteMessage=function(e){var t=null,n=e.getElementsByTagName("invite"),r=e.getElementsByTagName("reason")[0],o=r.textContent,i=e.getAttribute("id")||"";if(this.sendReceiptsMessage({id:i}),n&&n.length>0){var a=n[0].getAttribute("from");t=_parseNameFromJidFn(a)}var s=e.getElementsByTagName("x"),c=null;if(s&&s.length>0)for(var u=0;u<s.length;u++)if("jabber:x:conference"===s[u].namespaceURI){var l=s[u].getAttribute("jid");c=_parseNameFromJidFn(l)}this.onInviteMessage({type:"invite",from:t,roomid:c,reason:o})},connection.prototype.sendCommand=function(e,t){var n=this;if(this.isOpened()){var r=function(e){var r={};r.mid=t,r.reason=e,n.onError({type:"socket_error",data:r})};this.context.stropheConn.send(e,r)}else console.log("Err 5"),this.onError({type:_code.WEBIM_CONNCTION_DISCONNECTED})},connection.prototype.getUniqueId=function(e){var t=new Date,n=new Date(2010,1,1),r=t.getTime()-n.getTime(),o=parseInt(r).toString(16);return"string"===typeof e||"number"===typeof e?e+"_"+o:"WEBIM_"+o},connection.prototype.send=function(e){if(WebIM.config.isWindowSDK)WebIM.doQuery(JSON.stringify({type:"sendMessage",to:e.to,message_type:e.type,msg:encodeURI(e.msg),chatType:e.chatType}),function(e){},function(e,t){});else if("[object Object]"===Object.prototype.toString.call(e)){var t=this.context.appKey||"",n=t+"_"+e.to+"@"+this.domain;e.group&&(n=t+"_"+e.to+"@conference."+this.domain),e.resource&&(n=n+"/"+e.resource),e.toJid=n,e.id=e.id||this.getUniqueId(),_msgHash[e.id]=new _message(e);try{_msgHash[e.id].send(this)}catch(r){console.log("发送失败")}}else"string"===typeof e&&_msgHash[e]&&_msgHash[e].send(this)},connection.prototype.addRoster=function(e){var t=_getJid(e,this),n=e.name||"",r=e.groups||"",o=_strophe.default.$iq({type:"set"});if(o.c("query",{xmlns:"jabber:iq:roster"}),o.c("item",{jid:t,name:n}),r)for(var i=0;i<r.length;i++)o.c("group").t(r[i]).up();var a=e.success||_utils.emptyfn,s=e.error||_utils.emptyfn;this.context.stropheConn.sendIQ(o.tree(),a,s)},connection.prototype.removeRoster=function(e){var t=_getJid(e,this),n=_strophe.default.$iq({type:"set"}).c("query",{xmlns:"jabber:iq:roster"}).c("item",{jid:t,subscription:"remove"}),r=e.success||_utils.emptyfn,o=e.error||_utils.emptyfn;this.context.stropheConn.sendIQ(n,r,o)},connection.prototype.getRoster=function(e){var t=_strophe.default.$iq({type:"get"}).c("query",{xmlns:"jabber:iq:roster"});e=e||{};var n=e.success||this.onRoster,r=e.error||this.onError;this.isOpened()?this.context.stropheConn.sendIQ(t.tree(),function(e){var t=[],r=e.getElementsByTagName("query");if(r&&r.length>0){var o=r[0];t=_parseFriend(o)}n(t,e)},function(e){r({type:_code.WEBIM_CONNCTION_GETROSTER_ERROR,data:e})}):r({type:_code.WEBIM_CONNCTION_DISCONNECTED})},connection.prototype.subscribe=function(e){var t=_getJid(e,this),n=_strophe.default.$pres({to:t,type:"subscribe"});e.message&&n.c("status").t(e.message).up(),e.nick&&n.c("nick",{xmlns:"http://jabber.org/protocol/nick"}).t(e.nick),this.sendCommand(n.tree())},connection.prototype.subscribed=function(e){var t=_getJid(e,this),n=_strophe.default.$pres({to:t,type:"subscribed"});e.message&&n.c("status").t(e.message).up(),this.sendCommand(n.tree())},connection.prototype.unsubscribe=function(e){var t=_getJid(e,this),n=_strophe.default.$pres({to:t,type:"unsubscribe"});e.message&&n.c("status").t(e.message),this.sendCommand(n.tree())},connection.prototype.unsubscribed=function(e){var t=_getJid(e,this),n=_strophe.default.$pres({to:t,type:"unsubscribed"});e.message&&n.c("status").t(e.message).up(),this.sendCommand(n.tree())},connection.prototype.createRoom=function(e){var t,n=e.success||_utils.emptyfn,r=e.error||_utils.emptyfn;return t=_strophe.default.$iq({to:e.roomName,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"}),this.context.stropheConn.sendIQ(t.tree(),n,r)},connection.prototype.listRooms=function(e){var t=_strophe.default.$iq({to:e.server||"conference."+this.domain,from:this.context.jid,type:"get"}).c("query",{xmlns:Strophe.NS.DISCO_ITEMS}),n=e.success||_utils.emptyfn,r=e.error||this.onError,o=function(e){var t=[];t=_parseRoom(e);try{n(t)}catch(o){r({type:_code.WEBIM_CONNCTION_GETROOM_ERROR,data:o})}},i=e.error||_utils.emptyfn,a=function(e){i({type:_code.WEBIM_CONNCTION_GETROOM_ERROR,data:e})};this.context.stropheConn.sendIQ(t.tree(),o,a)},connection.prototype.queryRoomMember=function(e){var t=[],n=_strophe.default.$iq({to:this.context.appKey+"_"+e.roomId+"@conference."+this.domain,type:"get"}).c("query",{xmlns:Strophe.NS.MUC+"#admin"}).c("item",{affiliation:"member"}),r=e.success||_utils.emptyfn,o=function(e){var n=e.getElementsByTagName("item");if(n)for(var o=0;o<n.length;o++){var i=n[o],a={jid:i.getAttribute("jid"),affiliation:"member"};t.push(a)}r(t)},i=e.error||_utils.emptyfn,a=function(e){i({type:_code.WEBIM_CONNCTION_GETROOMMEMBER_ERROR,data:e})};this.context.stropheConn.sendIQ(n.tree(),o,a)},connection.prototype.queryRoomInfo=function(e){var t=this.domain,n=_strophe.default.$iq({to:this.context.appKey+"_"+e.roomId+"@conference."+t,type:"get"}).c("query",{xmlns:Strophe.NS.DISCO_INFO}),r=e.success||_utils.emptyfn,o=[],i=function(e){var n="",i=e.getElementsByTagName("feature");switch(i&&(n=i[1].getAttribute("var")+"|"+i[3].getAttribute("var")+"|"+i[4].getAttribute("var")),n){case"muc_public|muc_membersonly|muc_notallowinvites":n="PUBLIC_JOIN_APPROVAL";break;case"muc_public|muc_open|muc_notallowinvites":n="PUBLIC_JOIN_OPEN";break;case"muc_hidden|muc_membersonly|muc_allowinvites":n="PRIVATE_MEMBER_INVITE";break;case"muc_hidden|muc_membersonly|muc_notallowinvites":n="PRIVATE_OWNER_INVITE";break;default:break}var a=e.getElementsByTagName("field"),s={};if(a){for(var c=0;c<a.length;c++){var u=a[c],l=u.getAttribute("var"),d=l.split("_")[1];switch(l){case"muc#roominfo_occupants":case"muc#roominfo_maxusers":case"muc#roominfo_affiliations":case"muc#roominfo_description":s[d]=u.textContent||u.text||"";break;case"muc#roominfo_owner":var p={jid:(u.textContent||u.text)+"@"+t,affiliation:"owner"};o.push(p),s[d]=u.textContent||u.text;break;default:break}}s.name=e.getElementsByTagName("identity")[0].getAttribute("name")}r(n,o,s)},a=e.error||_utils.emptyfn,s=function(e){a({type:_code.WEBIM_CONNCTION_GETROOMINFO_ERROR,data:e})};this.context.stropheConn.sendIQ(n.tree(),i,s)},connection.prototype.queryRoomOccupants=function(e){var t=e.success||_utils.emptyfn,n=function(e){var n=[];n=_parseRoomOccupants(e),t(n)},r=e.error||_utils.emptyfn,o=function(e){r({type:_code.WEBIM_CONNCTION_GETROOMOCCUPANTS_ERROR,data:e})},i={xmlns:Strophe.NS.DISCO_ITEMS},a=_strophe.default.$iq({from:this.context.jid,to:this.context.appKey+"_"+e.roomId+"@conference."+this.domain,type:"get"}).c("query",i);this.context.stropheConn.sendIQ(a.tree(),n,o)},connection.prototype.setUserSig=function(e){var t=_strophe.default.$pres({xmlns:"jabber:client"});e=e||"",t.c("status").t(e),this.sendCommand(t.tree())},connection.prototype.setPresence=function(e,t){var n=_strophe.default.$pres({xmlns:"jabber:client"});e&&(t?(n.c("show").t(e),n.up().c("status").t(t)):n.c("show").t(e)),this.sendCommand(n.tree())},connection.prototype.getPresence=function(){var e=_strophe.default.$pres({xmlns:"jabber:client"});this.sendCommand(e.tree())},connection.prototype.ping=function(e){e=e||{};var t=_getJid(e,this),n=_strophe.default.$iq({from:this.context.jid||"",to:t,type:"get"}).c("ping",{xmlns:"urn:xmpp:ping"}),r=e.success||_utils.emptyfn,o=e.error||this.onError,i=function(e){o({type:_code.WEBIM_CONNCTION_PING_ERROR,data:e})};this.isOpened()?this.context.stropheConn.sendIQ(n.tree(),r,i):o({type:_code.WEBIM_CONNCTION_DISCONNECTED})},connection.prototype.isOpened=function(){return this.context.status==_code.STATUS_OPENED},connection.prototype.isOpening=function(){var e=this.context.status;return e==_code.STATUS_DOLOGIN_USERGRID||e==_code.STATUS_DOLOGIN_IM},connection.prototype.isClosing=function(){return this.context.status==_code.STATUS_CLOSING},connection.prototype.isClosed=function(){return this.context.status==_code.STATUS_CLOSED},connection.prototype.clear=function(){var e=this.context.appKey;this.errorType!=WebIM.statusCode.WEBIM_CONNCTION_DISCONNECTED&&(this.context={status:_code.STATUS_INIT,appKey:e}),this.intervalId&&clearInterval(this.intervalId),this.errorType==WebIM.statusCode.WEBIM_CONNCTION_CLIENT_LOGOUT||this.errorType},connection.prototype.getChatRooms=function(e){var t=this,n=e.accessToken||this.context.accessToken;if(n){var r=this.apiUrl,o=this.context.appName,i=this.context.orgName;if(!o||!i)return void t.onError({type:_code.WEBIM_CONNCTION_AUTH_ERROR});var a=function(t,n){"function"===typeof e.success&&e.success(t)},s=function(e,n,r){e.error&&e.error_description&&t.onError({type:_code.WEBIM_CONNCTION_LOAD_CHATROOM_ERROR,msg:e.error_description,data:e,xhr:n})},c={pagenum:parseInt(e.pagenum)||1,pagesize:parseInt(e.pagesize)||20},u={url:r+"/"+i+"/"+o+"/chatrooms",dataType:"json",type:"GET",header:{Authorization:"Bearer "+n},data:c,success:a||_utils.emptyfn,fail:s||_utils.emptyfn};wx.request(u)}else t.onError({type:_code.WEBIM_CONNCTION_TOKEN_NOT_ASSIGN_ERROR})},connection.prototype.joinChatRoom=function(e){var t=this.context.appKey+"_"+e.roomId+"@conference."+this.domain,n=t+"/"+this.context.userId,r=e.success||_utils.emptyfn,o=e.error||_utils.emptyfn,i=function(e){o({type:_code.WEBIM_CONNCTION_JOINCHATROOM_ERROR,data:e})},a=_strophe.default.$pres({from:this.context.jid,to:n});a.c("x",{xmlns:Strophe.NS.MUC+"#user"}).c("item",{affiliation:"member",role:"participant"}).up().up().c("roomtype",{xmlns:"easemob:x:roomtype",type:"chatroom"}),this.context.stropheConn.sendIQ(a.tree(),r,i)},connection.prototype.quitChatRoom=function(e){var t=this.context.appKey+"_"+e.roomId+"@conference."+this.domain,n=t+"/"+this.context.userId,r=e.success||_utils.emptyfn,o=e.error||_utils.emptyfn,i=function(e){o({type:_code.WEBIM_CONNCTION_QUITCHATROOM_ERROR,data:e})},a=_strophe.default.$pres({from:this.context.jid,to:n,type:"unavailable"});a.c("x",{xmlns:Strophe.NS.MUC+"#user"}).c("item",{affiliation:"none",role:"none"}).up().up().c("roomtype",{xmlns:"easemob:x:roomtype",type:"chatroom"}),this.context.stropheConn.sendIQ(a.tree(),r,i)},connection.prototype._onUpdateMyGroupList=function(e){this.onUpdateMyGroupList(e)},connection.prototype._onUpdateMyRoster=function(e){this.onUpdateMyRoster(e)},connection.prototype.reconnect=function(){var e=this;setTimeout(function(){_login(e.context.restTokenData&&e.context.restTokenData.data,e)},1e3*(0==this.autoReconnectNumTotal?0:this.autoReconnectInterval)),this.autoReconnectNumTotal++},connection.prototype.closed=function(){IM.api.init()},connection.prototype.listGroupMember=function(e){if(isNaN(e.pageNum)||e.pageNum<=0)throw new Error('The parameter "pageNum" should be a positive number');if(isNaN(e.pageSize)||e.pageSize<=0)throw new Error('The parameter "pageSize" should be a positive number');if(null===e.groupId&&"undefined"===typeof e.groupId)throw new Error('The parameter "groupId" should be added');var t=[],n=e.groupId;t.pagenum=e.pageNum,t.pagesize=e.pageSize;var r={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+n+"/users",dataType:"json",type:"GET",data:t,headers:{Authorization:"Bearer "+this.context.accessToken,"Content-Type":"application/json"}};r.success=e.success||_utils.emptyfn,r.error=e.error||_utils.emptyfn,WebIM.utils.ajax(r)},connection.prototype.createGroupNew=function(e){e.data.invite_need_confirm=!1;var t={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups",dataType:"json",type:"POST",data:JSON.stringify(e.data),headers:{Authorization:"Bearer "+this.context.accessToken,"Content-Type":"application/json"}};t.success=function(t){e.success(t),this.onCreateGroup(t)}.bind(this),t.error=e.error||_utils.emptyfn,WebIM.utils.ajax(t)},connection.prototype.getGroupInfo=function(e){var t={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+e.groupId,type:"GET",dataType:"json",headers:{Authorization:"Bearer "+this.context.accessToken,"Content-Type":"application/json"}};t.success=e.success||_utils.emptyfn,t.error=e.error||_utils.emptyfn,WebIM.utils.ajax(t)},connection.prototype.dissolveGroup=function(e){var t=e.groupId,n={url:this.apiUrl+"/"+this.orgName+"/"+this.appName+"/chatgroups/"+t+"?version=v3",type:"DELETE",dataType:"json",headers:{Authorization:"Bearer "+this.context.accessToken,"Content-Type":"application/json"}};n.success=e.success||_utils.emptyfn,n.error=e.error||_utils.emptyfn,WebIM.utils.ajax(n)},connection.prototype.getBlacklist=function(e){e=e||{};var t=_strophe.default.$iq({type:"get"}),n=e.success||_utils.emptyfn,r=e.error||_utils.emptyfn,o=this;t.c("query",{xmlns:"jabber:iq:privacy"}).c("list",{name:"special"}),this.context.stropheConn.sendIQ(t.tree(),function(e){o.onBlacklistUpdate(_parsePrivacy(e)),n()},function(){o.onBlacklistUpdate([]),r()})},connection.prototype.addToBlackList=function(e){for(var t=_strophe.default.$iq({type:"set"}),n=e.list||{},r=e.success||_utils.emptyfn,o=e.error||_utils.emptyfn,i=t.c("query",{xmlns:"jabber:iq:privacy"}).c("list",{name:"special"}),a=Object.keys(n),s=a.length,c=2,u=0;u<s;u++){var l=n[a[u]],d=l.type||"jid",p=l.jid;i=i.c("item",{action:"deny",order:c++,type:d,value:p}).c("message"),u!==s-1&&(i=i.up().up())}this.context.stropheConn.sendIQ(i.tree(),r,o)},connection.prototype.removeFromBlackList=function(e){for(var t=_strophe.default.$iq({type:"set"}),n=e.list||{},r=e.success||_utils.emptyfn,o=e.error||_utils.emptyfn,i=t.c("query",{xmlns:"jabber:iq:privacy"}).c("list",{name:"special"}),a=Object.keys(n),s=a.length,c=0;c<s;c++){var u=n[a[c]],l=u.type||"jid",d=u.jid,p=u.order;i=i.c("item",{action:"deny",order:p,type:l,value:d}).c("message"),c!==s-1&&(i=i.up().up())}this.context.stropheConn.sendIQ(i.tree(),r,o)},connection.prototype._getGroupJid=function(e){var t=this.context.appKey||"";return t+"_"+e+"@conference."+this.domain},connection.prototype.addToGroupBlackList=function(e){var t=e.success||_utils.emptyfn,n=e.error||_utils.emptyfn,r=_getJid(e,this),o="admin",i=this._getGroupJid(e.roomId),a=_strophe.default.$iq({type:"set",to:i});a.c("query",{xmlns:"http://jabber.org/protocol/muc#"+o}).c("item",{affiliation:"outcast",jid:r}),this.context.stropheConn.sendIQ(a.tree(),t,n)},connection.prototype.getGroupBlacklist=function(e){var t=e.success||_utils.emptyfn,n=e.error||_utils.emptyfn,r="admin",o=this._getGroupJid(e.roomId),i=_strophe.default.$iq({type:"get",to:o});function a(e){var t={},n=e.getElementsByTagName("item");if(n)for(var r=0;r<n.length;r++){var o=n[r],i=o.getAttribute("jid"),a=o.getAttribute("affiliation"),s=o.getAttribute("nick");if(i){var c=_parseNameFromJidFn(i);t[c]={jid:i,affiliation:a,nick:s,name:c}}}return t}i.c("query",{xmlns:"http://jabber.org/protocol/muc#"+r}).c("item",{affiliation:"outcast"}),this.context.stropheConn.sendIQ(i.tree(),function(e){t(a(e))},function(){n()})},connection.prototype.removeGroupMemberFromBlacklist=function(e){var t=e.success||_utils.emptyfn,n=e.error||_utils.emptyfn,r=_getJid(e,this),o="admin",i=this._getGroupJid(e.roomId),a=_strophe.default.$iq({type:"set",to:i});a.c("query",{xmlns:"http://jabber.org/protocol/muc#"+o}).c("item",{affiliation:"member",jid:r}),this.context.stropheConn.sendIQ(a.tree(),function(e){t()},function(){n()})},connection.prototype.changeGroupSubject=function(e){var t=e.success||_utils.emptyfn,n=e.error||_utils.emptyfn,r="owner",o=this._getGroupJid(e.roomId),i=_strophe.default.$iq({type:"set",to:o});i.c("query",{xmlns:"http://jabber.org/protocol/muc#"+r}).c("x",{type:"submit",xmlns:"jabber:x:data"}).c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up().c("field",{var:"muc#roomconfig_roomname"}).c("value").t(e.subject).up().up().c("field",{var:"muc#roomconfig_roomdesc"}).c("value").t(e.description),this.context.stropheConn.sendIQ(i.tree(),function(e){t()},function(){n()})},connection.prototype.destroyGroup=function(e){var t=e.success||_utils.emptyfn,n=e.error||_utils.emptyfn,r="owner",o=this._getGroupJid(e.roomId),i=_strophe.default.$iq({type:"set",to:o});i.c("query",{xmlns:"http://jabber.org/protocol/muc#"+r}).c("destroy"),this.context.stropheConn.sendIQ(i.tree(),function(e){t()},function(){n()})},connection.prototype.leaveGroupBySelf=function(e){var t=this,n=e.success||_utils.emptyfn,r=e.error||_utils.emptyfn,o=_getJid(e,this),i="admin",a=this._getGroupJid(e.roomId),s=_strophe.default.$iq({type:"set",to:a});s.c("query",{xmlns:"http://jabber.org/protocol/muc#"+i}).c("item",{affiliation:"none",jid:o}),this.context.stropheConn.sendIQ(s.tree(),function(e){n(e);var r=_strophe.default.$pres({type:"unavailable",to:a+"/"+t.context.userId});t.sendCommand(r.tree())},function(e){r(e)})},connection.prototype.addGroupMembers=function(e){for(var t=e.success||_utils.emptyfn,n=e.error||_utils.emptyfn,r=e.list||[],o="admin",i=this._getGroupJid(e.roomId),a=_strophe.default.$iq({type:"set",to:i}),s=a.c("query",{xmlns:"http://jabber.org/protocol/muc#"+o}),c=r.length,u=0;u<c;u++){var l=r[u],d=_getJidByName(l,this);s=s.c("item",{affiliation:"member",jid:d}).up();var p=_strophe.default.$msg({to:i}).c("x",{xmlns:"http://jabber.org/protocol/muc#user"}).c("invite",{to:d}).c("reason").t(e.reason||"");this.sendCommand(p.tree())}this.context.stropheConn.sendIQ(a.tree(),function(e){t(e)},function(e){n(e)})},connection.prototype.acceptInviteFromGroup=function(e){e.success=function(){},this.addGroupMembers(e)},connection.prototype.rejectInviteFromGroup=function(e){},WebIM.connection=connection,WebIM.utils=_utils,WebIM.statusCode=_code,WebIM.message=_msg.message,WebIM.doQuery=function(e,t,n){"undefined"!==typeof window.cefQuery&&window.cefQuery({request:e,persistent:!1,onSuccess:t,onFailure:n})},module.exports=WebIM}).call(this,__webpack_require__("f266")["default"])},f266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createApp=We,t.createPage=Qe,t.createComponent=Ke,t.default=void 0;var r=o(n("3a53"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return c(e)||s(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),t&&n.length===t)break}catch(c){o=!0,i=c}finally{try{r||null==s["return"]||s["return"]()}finally{if(o)throw i}}return n}function c(e){if(Array.isArray(e))return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=Object.prototype.toString,d=Object.prototype.hasOwnProperty;function p(e){return"function"===typeof e}function h(e){return"string"===typeof e}function f(e){return"[object Object]"===l.call(e)}function m(e,t){return d.call(e,t)}function _(){}function g(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var v=/-(\w)/g,y=g(function(e){return e.replace(v,function(e,t){return t?t.toUpperCase():""})}),b=/^\$|getSubNVueById|requireNativePlugin|upx2px|hideKeyboard|canIUse|^create|Sync$|Manager$|base64ToArrayBuffer|arrayBufferToBase64/,E=/^create|Manager$/,N=/^on/;function T(e){return E.test(e)}function O(e){return b.test(e)}function S(e){return N.test(e)}function x(e){return e.then(function(e){return[null,e]}).catch(function(e){return[e]})}function I(e){return!(T(e)||O(e)||S(e))}function C(e,t){return I(e)?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return p(e.success)||p(e.fail)||p(e.complete)?t.apply(void 0,[e].concat(r)):x(new Promise(function(n,o){t.apply(void 0,[Object.assign({},e,{success:n,fail:o})].concat(r)),Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})})}))}:t}var w=1e-4,A=750,R=!1,M=0,D=0;function B(){var e=tt.getSystemInfoSync(),t=e.platform,n=e.pixelRatio,r=e.windowWidth;M=r,D=n,R="ios"===t}function k(e,t){if(0===M&&B(),e=Number(e),0===e)return 0;var n=e/A*(t||M);return n<0&&(n=-n),n=Math.floor(n+w),0===n?1!==D&&R?.5:1:e<0?-n:n}var $={args:function(e){var t=parseInt(e.current);if(!isNaN(t)){var n=e.urls;if(Array.isArray(n)){var r=n.length;if(r)return t<0?t=0:t>=r&&(t=r-1),t>0?(e.current=n[t],e.urls=n.filter(function(e,r){return!(r<t)||e!==n[t]})):e.current=n[0],{indicator:!1,loop:!1}}}}},L=["hideKeyboard","onSocketOpen","onSocketError","sendSocketMessage","onSocketMessage","closeSocket","onSocketClose","getImageInfo","getBackgroundAudioManager","createVideoContext","createCameraContext","createLivePlayerContext","getSavedFileList","getSavedFileInfo","removeSavedFile","getFileInfo","openDocument","chooseLocation","createMapContext","canIUse","onMemoryWarning","onGyroscopeChange","startGyroscope","stopGyroscope","setScreenBrightness","getScreenBrightness","onUserCaptureScreen","addPhoneContact","openBluetoothAdapter","startBluetoothDevicesDiscovery","onBluetoothDeviceFound","stopBluetoothDevicesDiscovery","onBluetoothAdapterStateChange","getConnectedBluetoothDevices","getBluetoothDevices","getBluetoothAdapterState","closeBluetoothAdapter","writeBLECharacteristicValue","readBLECharacteristicValue","onBLEConnectionStateChange","onBLECharacteristicValueChange","notifyBLECharacteristicValueChange","getBLEDeviceServices","getBLEDeviceCharacteristics","createBLEConnection","closeBLEConnection","onBeaconServiceChange","onBeaconUpdate","getBeacons","startBeaconDiscovery","stopBeaconDiscovery","setNavigationBarColor","showNavigationBarLoading","hideNavigationBarLoading","setTabBarItem","setTabBarStyle","hideTabBar","showTabBar","setTabBarBadge","removeTabBarBadge","showTabBarRedDot","hideTabBarRedDot","setBackgroundColor","setBackgroundTextStyle","createIntersectionObserver","chooseInvoiceTitle","navigateToMiniProgram","navigateBackMiniProgram","addTemplate","deleteTemplate","getTemplateLibraryById","getTemplateLibraryList","getTemplateList","sendTemplateMessage","setEnableDebug","getExtConfig","getExtConfigSync","onWindowResize","offWindowResize"],j=[],F={chooseImage:{args:{sizeType:!1}},previewImage:$,connectSocket:{args:{method:!1}},chooseVideo:{args:{maxDuration:!1}},scanCode:{args:{onlyFromCamera:!1,scanType:!1}},startAccelerometer:{args:{interval:!1}},showToast:{args:{image:!1,mask:!1}},showLoading:{args:{mask:!1}},showModal:{args:{cancelColor:!1,confirmColor:!1}},showActionSheet:{args:{itemColor:!1}},login:{args:{scopes:!1,timeout:!1}},getUserInfo:{args:{lang:!1,timeout:!1}},requestPayment:{orderInfo:"data"}},U=["success","fail","cancel","complete"];function q(e,t,n){return function(r){return t(H(e,r,n))}}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(f(t)){var i=!0===o?t:{};for(var a in p(n)&&(n=n(t,i)||{}),t)if(m(n,a)){var s=n[a];p(s)&&(s=s(t[a],t,i)),s?h(s)?i[s]=t[a]:f(s)&&(i[s.name?s.name:a]=s.value):console.warn("头条小程序 ".concat(e,"暂不支持").concat(a))}else-1!==U.indexOf(a)?i[a]=q(e,t[a],r):o||(i[a]=t[a]);return i}return p(t)&&(t=q(e,t,r)),t}function H(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return p(F.returnValue)&&(t=F.returnValue(e,t)),P(e,t,n,{},r)}function W(e,t){if(m(F,e)){var n=F[e];return n?function(t,r){var o=n;p(n)&&(o=n(t)),t=P(e,t,o.args,o.returnValue);var i=[t];"undefined"!==typeof r&&i.push(r);var a=tt[o.name||e].apply(tt,i);return O(e)?H(e,a,o.returnValue,T(e)):a}:function(){console.error("头条小程序 暂不支持".concat(e))}}return t}var G=Object.create(null),J=["subscribePush","unsubscribePush","onPush","offPush","share"];function V(e){return function(t){var n=t.fail,r=t.complete,o={errMsg:"".concat(e,":fail:暂不支持 ").concat(e," 方法")};p(n)&&n(o),p(r)&&r(o)}}J.forEach(function(e){G[e]=V(e)});var z={oauth:["toutiao"],share:["toutiao"],payment:["toutiao"],push:["toutiao"]};function X(e){var t=e.service,n=e.success,r=e.fail,o=e.complete,i=!1;z[t]?(i={errMsg:"getProvider:ok",service:t,provider:z[t]},p(n)&&n(i)):(i={errMsg:"getProvider:fail:服务["+t+"]不存在"},p(r)&&r(i)),p(o)&&o(i)}var Q=Object.freeze({getProvider:X}),K=function(){return"function"===typeof getUniEmitter?getUniEmitter:function(){return e||(e=new r.default),e};var e}();function Y(e,t,n){return e[t].apply(e,n)}function Z(){return Y(K(),"$on",Array.prototype.slice.call(arguments))}function ee(){return Y(K(),"$off",Array.prototype.slice.call(arguments))}function te(){return Y(K(),"$once",Array.prototype.slice.call(arguments))}function ne(){return Y(K(),"$emit",Array.prototype.slice.call(arguments))}var re=Object.freeze({$on:Z,$off:ee,$once:te,$emit:ne}),oe=Object.freeze({}),ie=Page,ae=Component,se=/:/g,ce=g(function(e){return y(e.replace(se,"-"))});function ue(e){var t=e.triggerEvent;e.triggerEvent=function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.apply(e,[ce(n)].concat(o))}}function le(e,t){var n=t[e];t[e]=n?function(){ue(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(this,t)}:function(){ue(this)}}Page=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return le("onLoad",e),ie(e)},Component=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return le("created",e),ae(e)};var de=["onPullDownRefresh","onReachBottom","onShareAppMessage","onPageScroll","onResize","onTabItemTap"];function pe(e,t){var n=e.$mp[e.mpType];t.forEach(function(t){m(n,t)&&(e[t]=n[t])})}function he(e,t){t.forEach(function(t){e[t]=function(e){return this.$vm&&this.$vm.__call_hook(t,e)}})}function fe(e,t){var n;return t=t.default||t,p(t)?(n=t,t=n.extendOptions):n=e.extend(t),[n,t]}function me(e,t){if(Array.isArray(t)&&t.length){var n=Object.create(null);t.forEach(function(e){n[e]=!0}),e.$scopedSlots=e.$slots=n}}function _e(e,t){e=(e||"").split(",");var n=e.length;1===n?t._$vueId=e[0]:2===n&&(t._$vueId=e[0],t._$vuePid=e[1])}function ge(e,t){var n=e.data||{},r=e.methods||{};if("function"===typeof n)try{n=n.call(t)}catch(o){Object({NODE_ENV:"production",VUE_APP_PLATFORM:"mp-toutiao",BASE_URL:"/"}).VUE_APP_DEBUG&&console.warn("根据 Vue 的 data 函数初始化小程序 data 失败，请尽量确保 data 函数中不访问 vm 对象，否则可能影响首次数据渲染速度。",n)}else try{n=JSON.parse(JSON.stringify(n))}catch(o){}return f(n)||(n={}),Object.keys(r).forEach(function(e){-1!==t.__lifecycle_hooks__.indexOf(e)||m(n,e)||(n[e]=r[e])}),n}var ve=[String,Number,Boolean,Object,Array,null];function ye(e){return function(t,n){this.$vm&&(this.$vm[e]=t)}}function be(e,t){var n=e["behaviors"],r=e["extends"],o=e["mixins"],i=e["props"];i||(e["props"]=i=[]);var a=[];return Array.isArray(n)&&n.forEach(function(e){a.push(e.replace("uni://","tt".concat("://"))),"uni://form-field"===e&&(Array.isArray(i)?(i.push("name"),i.push("value")):(i["name"]=String,i["value"]=null))}),f(r)&&r.props&&a.push(t({properties:Ne(r.props,!0)})),Array.isArray(o)&&o.forEach(function(e){f(e)&&e.props&&a.push(t({properties:Ne(e.props,!0)}))}),a}function Ee(e,t,n,r){return Array.isArray(t)&&1===t.length?t[0]:t}function Ne(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r={};return t||(r.vueId={type:String,value:""},r.vueSlots={type:null,value:[],observer:function(e,t){var n=Object.create(null);e.forEach(function(e){n[e]=!0}),this.setData({$slots:n})}}),Array.isArray(e)?e.forEach(function(e){r[e]={type:null,observer:ye(e)}}):f(e)&&Object.keys(e).forEach(function(t){var o=e[t];if(f(o)){var i=o["default"];p(i)&&(i=i()),o.type=Ee(t,o.type,i,n),r[t]={type:-1!==ve.indexOf(o.type)?o.type:null,value:i,observer:ye(t)}}else{var a=Ee(t,o,null,n);r[t]={type:-1!==ve.indexOf(a)?a:null,observer:ye(t)}}}),r}function Te(e){try{e.mp=JSON.parse(JSON.stringify(e))}catch(t){}return e.stopPropagation=_,e.preventDefault=_,e.target=e.target||{},m(e,"detail")||(e.detail={}),f(e.detail)&&(e.target=Object.assign({},e.target,e.detail)),e}function Oe(e,t){var n=e;return t.forEach(function(t){var r=t[0],o=t[2];if(r||"undefined"!==typeof o){var i=t[1],a=t[3],s=r?e.__get_value(r,n):n;Number.isInteger(s)?n=o:i?Array.isArray(s)?n=s.find(function(t){return e.__get_value(i,t)===o}):f(s)?n=Object.keys(s).find(function(t){return e.__get_value(i,s[t])===o}):console.error("v-for 暂不支持循环数据：",s):n=s[o],a&&(n=e.__get_value(a,n))}}),n}function Se(e,t,n){var r={};return Array.isArray(t)&&t.length&&t.forEach(function(t,o){"string"===typeof t?t?"$event"===t?r["$"+o]=n:0===t.indexOf("$event.")?r["$"+o]=e.__get_value(t.replace("$event.",""),n):r["$"+o]=e.__get_value(t):r["$"+o]=e:r["$"+o]=Oe(e,t)}),r}function xe(e){for(var t={},n=1;n<e.length;n++){var r=e[n];t[r[0]]=r[1]}return t}function Ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=!1;if(o&&(a=t.currentTarget&&t.currentTarget.dataset&&"wx"===t.currentTarget.dataset.comType,!n.length))return a?[t]:t.detail.__args__||t.detail;var s=Se(e,r,t),c=[];return n.forEach(function(e){"$event"===e?"__set_model"!==i||o?o&&!a?c.push(t.detail.__args__[0]):c.push(t):c.push(t.target.value):Array.isArray(e)&&"o"===e[0]?c.push(xe(e)):"string"===typeof e&&m(s,e)?c.push(s[e]):c.push(e)}),c}var Ce="~",we="^";function Ae(e,t){return e===t||"regionchange"===t&&("begin"===e||"end"===e)}function Re(e){var t=this;e=Te(e);var n=(e.currentTarget||e.target).dataset.eventOpts;if(!n)return console.warn("事件信息不存在");var r=e.type;n.forEach(function(n){var o=n[0],i=n[1],a=o.charAt(0)===we;o=a?o.slice(1):o;var s=o.charAt(0)===Ce;o=s?o.slice(1):o,i&&Ae(r,o)&&i.forEach(function(n){var r=n[0];if(r){var o=t.$vm;o.$options.generic&&o.$parent&&o.$parent.$parent&&(o=o.$parent.$parent);var i=o[r];if(!p(i))throw new Error(" _vm.".concat(r," is not a function"));if(s){if(i.once)return;i.once=!0}i.apply(o,Ie(t.$vm,e,n[1],n[2],a,r))}})})}var Me=["onShow","onHide","onError","onPageNotFound"];function De(e,t){var n=t.mocks,o=t.initRefs;r.default.prototype.mpHost="mp-toutiao",r.default.mixin({beforeCreate:function(){this.$options.mpType&&(this.mpType=this.$options.mpType,this.$mp=u({data:{}},this.mpType,this.$options.mpInstance),this.$scope=this.$options.mpInstance,delete this.$options.mpType,delete this.$options.mpInstance,"app"!==this.mpType&&(o(this),pe(this,n)))}});var i={onLaunch:function(t){this.$vm=e,this.$vm.$mp={app:this},this.$vm.$scope=this,this.$vm._isMounted=!0,this.$vm.__call_hook("mounted",t),this.$vm.__call_hook("onLaunch",t)}};return i.globalData=e.$options.globalData||{},he(i,Me),i}function Be(e,t){var n=e.$children,r=n.find(function(e){return e.$scope._$vueId===t});if(r)return r;for(var o=n.length-1;o>=0;o--)if(r=Be(n[o],t),r)return r}function ke(e){return Behavior(e)}function $e(e){var t,n=e.detail||e.value,r=n.vuePid,o=n.vueOptions;r&&(t=Be(this.$vm,r)),t||(t=this.$vm),o.parent=t}var Le=["__route__","__webviewId__","__nodeid__","__nodeId__"];function je(){return 0===this.__nodeid__||0===this.__nodeId__}function Fe(e){var t=e.$scope;t.selectAllComponents(".vue-ref",function(t){t.forEach(function(t){var n=t.dataset.ref;e.$refs[n]=t.$vm||t})}),t.selectAllComponents(".vue-ref-in-for",function(t){t.forEach(function(t){var n=t.dataset.ref;e.$refs[n]||(e.$refs[n]=[]),e.$refs[n].push(t.$vm||t)})})}var Ue=Object.create(null);function qe(e){var t=e.vuePid,n=e.mpInstance,r=(n.__nodeId__||n.__nodeid__)+"",o=n.__webviewId__+"";Ue[o+"_"+r]=n.$vm,this.triggerEvent("__l",{vuePid:t,nodeId:r,webviewId:o})}function Pe(e){var t,n=e.detail,r=n.vuePid,o=n.nodeId,i=n.webviewId,a=Ue[i+"_"+o];a&&(r&&(t=Be(this.$vm,r)),t||(t=this.$vm),a.$parent=t,a.$root=t.$root,t.$children.push(a),a.__call_hook("created"),a.__call_hook("beforeMount"),a._isMounted=!0,a.__call_hook("mounted"),a.__call_hook("onReady"))}function He(e){return r.default.prototype._$fallback=!0,r.default.mixin({created:function(){"app"!==this.mpType&&(Fe(this),this.__init_injections(this),this.__init_provide(this))}}),De(e,{mocks:Le,initRefs:function(){}})}function We(e){return App(He(e)),e}function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isPage,o=t.initRelation,a=fe(r.default,e),s=i(a,2),c=s[0],u=s[1],l={options:{multipleSlots:!0,addGlobalClass:!0},data:ge(u,r.default.prototype),behaviors:be(u,ke),properties:Ne(u.props,!1,u.__file),lifetimes:{attached:function(){var e=this.properties,t={mpType:n.call(this)?"page":"component",mpInstance:this,propsData:e};_e(e.vueId,this),o.call(this,{vuePid:this._$vuePid,vueOptions:t}),this.$vm=new c(t),me(this.$vm,e.vueSlots),this.$vm.$mount()},ready:function(){this.$vm&&(this.$vm._isMounted=!0,this.$vm.__call_hook("mounted"),this.$vm.__call_hook("onReady"))},detached:function(){this.$vm.$destroy()}},pageLifetimes:{show:function(e){this.$vm&&this.$vm.__call_hook("onPageShow",e)},hide:function(){this.$vm&&this.$vm.__call_hook("onPageHide")},resize:function(e){this.$vm&&this.$vm.__call_hook("onPageResize",e)}},methods:{__l:$e,__e:Re}};return n?l:[l,c]}function Je(e){var t=Ge(e),n=i(t,2),r=n[0],o=n[1];return r.lifetimes.attached=function(){var e=this.properties,t={mpType:je.call(this)?"page":"component",mpInstance:this,propsData:e};_e(e.vueId,this),this.$vm=new o(t),me(this.$vm,e.vueSlots),qe.call(this,{vuePid:this._$vuePid,mpInstance:this}),this.$vm.$mount()},delete r.lifetimes.ready,r.methods.__l=Pe,r}var Ve=["onShow","onHide","onUnload"];function ze(e,t){var n=t.isPage,r=t.initRelation,o=Je(e,{isPage:n,initRelation:r});return he(o.methods,Ve),o.methods.onLoad=function(e){this.$vm.$mp.query=e,this.$vm.__call_hook("onLoad",e)},o}function Xe(e){var t=ze(e,{isPage:je,initRelation:qe});return t.lifetimes.ready=function(){this.$vm&&"page"===this.$vm.mpType?(this.$vm.__call_hook("created"),this.$vm.__call_hook("beforeMount"),this.$vm._isMounted=!0,this.$vm.__call_hook("mounted"),this.$vm.__call_hook("onReady")):this.is&&console.warn(this.is+" is not ready")},t}function Qe(e){return Component(Xe(e))}function Ke(e){return Component(Je(e))}Ve.push.apply(Ve,de),L.forEach(function(e){F[e]=!1}),j.forEach(function(e){var t=F[e]&&F[e].name?F[e].name:e;tt.canIUse(t)||(F[e]=!1)});var Ye={};"undefined"!==typeof Proxy?Ye=new Proxy({},{get:function(e,t){return"upx2px"===t?k:oe[t]?C(t,oe[t]):Q[t]?C(t,Q[t]):G[t]?C(t,G[t]):re[t]?re[t]:m(tt,t)||m(F,t)?C(t,W(t,tt[t])):void 0}}):(Ye.upx2px=k,Object.keys(G).forEach(function(e){Ye[e]=C(e,G[e])}),Object.keys(Q).forEach(function(e){Ye[e]=C(e,G[e])}),Object.keys(re).forEach(function(e){Ye[e]=re[e]}),Object.keys(oe).forEach(function(e){Ye[e]=C(e,oe[e])}),Object.keys(tt).forEach(function(e){(m(tt,e)||m(F,e))&&(Ye[e]=C(e,W(e,tt[e])))})),tt.createApp=We,tt.createPage=Qe,tt.createComponent=Ke;var Ze=Ye,et=Ze;t.default=et},fbbc:function(e,t,n){"use strict";var r=n("5ff1")["default"],o=n("b428");e.exports=function(e,t,n){var i=r.time(),a={info:{from:e.body.from,to:e.body.to},username:e.body.from==n?e.body.to:e.body.from,yourname:e.body.from,msg:{type:t,url:e.body.body.url,data:s(e,t)},style:e.body.from==n?"self":"",time:i,mid:e.type+e.id,chatType:e.body.chatType};return t==o.IMAGE?a.msg.size={width:e.body.body.size.width,height:e.body.body.size.height}:t==o.AUDIO?a.msg.length=e.body.length:t==o.FILE&&(a.msg.data=[{data:"[当前不支持此格式消息展示]",type:"txt"}],a.msg.type="txt"),a;function s(e,t){return t==o.TEXT?r.parseEmoji(e.value.replace(/\n/gm,"")):t==o.EMOJI?e.value:t==o.IMAGE||t==o.VIDEO||t==o.AUDIO?e.body.body.url:t==o.FILE?e.body.body.msg:""}}},fe52:function(e,t,n){"use strict";(function(e){(function(){var r=function(){},o=n("4345").code,i=10485760,a=!1,s="undefined"!==typeof FormData,c="undefined"!==typeof Blob,u=a.setRequestHeader||!1,l=a.overrideMimeType||!1,d=u&&s,p=d||!1,h=u&&(c||l);Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!==typeof o&&("function"!==typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,a,s=[];for(i in o)e.call(o,i)&&s.push(i);if(t)for(a=0;a<r;a++)e.call(o,n[a])&&s.push(n[a]);return s}}());var f={hasFormData:s,hasBlob:c,emptyfn:r,isCanSetRequestHeader:u,hasOverrideMimeType:l,isCanUploadFileAsync:d,isCanUploadFile:p,isCanDownLoadFile:h,isSupportWss:!0,hasFlash:!1,xmlrequest:!1,stringify:function(e){if("undefined"!==typeof JSON&&JSON.stringify)return JSON.stringify(e);var t="",n=[];return r(e);function r(e){var o=!1;for(var i in"[object Array]"===Object.prototype.toString.call(e)?(n.push("]","["),o=!0):"[object Object]"===Object.prototype.toString.call(e)&&n.push("}","{"),e)"[object Null]"===Object.prototype.toString.call(e[i])?e[i]="null":"[object Undefined]"===Object.prototype.toString.call(e[i])&&(e[i]="undefined"),e[i]&&"object"===typeof e[i]?t+=","+(o?"":'"'+i+'":'+(o?'"':""))+r(e[i]):t+=',"'+(o?"":i+'":"')+e[i]+'"';return""!=t&&(t=t.slice(1)),n.pop()+t+n.pop()}},registerUser:function(e){var t=e.orgName||"",n=e.appName||"",i=e.appKey||"",a=e.success||r,s=e.error||r;if(!t&&!n&&i){var c=i.split("#");2===c.length&&(t=c[0],n=c[1])}if(!t&&!n)return s({type:o.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR}),!1;var u=e.apiUrl,l=u+"/"+t+"/"+n+"/users",d={username:e.username,password:e.password,nickname:e.nickname||""},p=f.stringify(d);return e={url:l,data:p,success:a,error:s},f.ajax(e)},login:function(e){e=e||{};var t=e.success||r,n=e.error||r,i=e.appKey||"",a=i.split("#");if(2!==a.length)return n({type:o.WEBIM_CONNCTION_APPKEY_NOT_ASSIGN_ERROR}),!1;var s=a[0],c=a[1],u=e.user||"",l=e.pwd||"",d=e.apiUrl,p={grant_type:"password",username:u,password:l,timestamp:+new Date},h=f.stringify(p);return e={url:d+"/"+s+"/"+c+"/token",data:h,success:t,error:n},f.ajax(e)},getFileUrl:function(e){var t={url:"",filename:"",filetype:"",data:""},n="string"===typeof e?document.getElementById(e):e;if(!f.isCanUploadFileAsync||!n)return t;try{if(window.URL.createObjectURL){var r=n.files;if(r.length>0){var o=r.item(0);t.data=o,t.url=window.URL.createObjectURL(o),t.filename=o.name||""}}var i=t.filename.lastIndexOf(".");return-1!=i&&(t.filetype=t.filename.substring(i+1).toLowerCase()),t}catch(a){throw a}},getFileSize:function(e){var t=document.getElementById(e),n=0;return t&&t.files&&t.files.length>0&&(n=t.files[0].size),n},trim:function(e){return e="string"===typeof e?e:"",e.trim?e.trim():e.replace(/^\s|\s$/g,"")},parseEmoji:function(e){if("undefined"===typeof WebIM.Emoji||"undefined"===typeof WebIM.Emoji.map)return e;var t=WebIM.Emoji;for(var n in t.map)if(t.map.hasOwnProperty(n))while(e.indexOf(n)>-1)e=e.replace(n,'<image class="emoji" src="'+t.path+t.map[n]+'" /></image>');return e},parseLink:function(e){var t=/(https?:\/\/|www\.)([a-zA-Z0-9-]+(\.[a-zA-Z0-9]+)+)(:[0-9]{2,4})?\/?((\.[:_0-9a-zA-Z-]+)|[:_0-9a-zA-Z-]*\/?)*\??[:_#@*&%0-9a-zA-Z-\/=]*/gm;return e=e.replace(t,function(e){var t=/^https?/gm.test(e);return"<a href='"+(t?e:"//"+e)+"' target='_blank'>"+e+"</a>"}),e},parseJSON:function(e){if(window.JSON&&window.JSON.parse)return window.JSON.parse(e+"");var t,n=null,r=f.trim(e+"");return r&&!f.trim(r.replace(/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g,function(e,r,o,i){return t&&r&&(n=0),0===n?e:(t=o||r,n+=!i-!o,"")}))?Function("return "+r)():Function("Invalid JSON: "+e)()},parseUploadResponse:function(e){return e.indexOf("callback")>-1?e.slice(9,-1):e},parseDownloadResponse:function(e){return e&&e.type&&"application/json"===e.type||Object.prototype.toString.call(e).indexOf("Blob")<0?this.url+"?token=":window.URL.createObjectURL(e)},uploadFile:function(e){e=e||{},e.onFileUploadProgress=e.onFileUploadProgress||r,e.onFileUploadComplete=e.onFileUploadComplete||r,e.onFileUploadError=e.onFileUploadError||r,e.onFileUploadCanceled=e.onFileUploadCanceled||r;var t=e.accessToken||this.context.accessToken;if(t){var n,a,s,c=e.appKey||this.context.appKey||"";if(c&&(s=c.split("#"),n=s[0],a=s[1]),n||a){var u=e.apiUrl,l=u+"/"+n+"/"+a+"/chatfiles";if(f.isCanUploadFileAsync){var d=e.file.data?e.file.data.size:void 0;if(d>i)e.onFileUploadError({type:o.WEBIM_UPLOADFILE_ERROR,id:e.id});else if(d<=0)e.onFileUploadError({type:o.WEBIM_UPLOADFILE_ERROR,id:e.id});else{var p=f.xmlrequest(),h=function(t){e.onFileUploadError({type:o.WEBIM_UPLOADFILE_ERROR,id:e.id,xhr:p})};p.upload&&p.upload.addEventListener("progress",e.onFileUploadProgress,!1),p.addEventListener?(p.addEventListener("abort",e.onFileUploadCanceled,!1),p.addEventListener("load",function(t){try{var n=f.parseJSON(p.responseText);try{e.onFileUploadComplete(n)}catch(t){e.onFileUploadError({type:o.WEBIM_CONNCTION_CALLBACK_INNER_ERROR,data:t})}}catch(t){e.onFileUploadError({type:o.WEBIM_UPLOADFILE_ERROR,data:p.responseText,id:e.id,xhr:p})}},!1),p.addEventListener("error",h,!1)):p.onreadystatechange&&(p.onreadystatechange=function(){if(4===p.readyState)if(200===ajax.status)try{var t=f.parseJSON(p.responseText);e.onFileUploadComplete(t)}catch(n){e.onFileUploadError({type:o.WEBIM_UPLOADFILE_ERROR,data:p.responseText,id:e.id,xhr:p})}else e.onFileUploadError({type:o.WEBIM_UPLOADFILE_ERROR,data:p.responseText,id:e.id,xhr:p});else p.abort(),e.onFileUploadCanceled()}),p.open("POST",l),p.setRequestHeader("restrict-access","true"),p.setRequestHeader("Accept","*/*"),p.setRequestHeader("Authorization","Bearer "+t);var m=new FormData;m.append("file",e.file.data),p.send(m)}}else f.hasFlash&&"function"===typeof e.flashUpload?e.flashUpload&&e.flashUpload(l,e):e.onFileUploadError({type:o.WEBIM_UPLOADFILE_BROWSER_ERROR,id:e.id})}else e.onFileUploadError({type:o.WEBIM_UPLOADFILE_ERROR,id:e.id})}else e.onFileUploadError({type:o.WEBIM_UPLOADFILE_NO_LOGIN,id:e.id})},download:function(e){e.onFileDownloadComplete=e.onFileDownloadComplete||r,e.onFileDownloadError=e.onFileDownloadError||r;var t=e.accessToken||this.context.accessToken,n=f.xmlrequest();if(t){var i=function(t){e.onFileDownloadError({type:o.WEBIM_DOWNLOADFILE_ERROR,id:e.id,xhr:n})};if(f.isCanDownLoadFile){"addEventListener"in n?(n.addEventListener("load",function(t){e.onFileDownloadComplete(n.response,n)},!1),n.addEventListener("error",i,!1)):"onreadystatechange"in n&&(n.onreadystatechange=function(){4===n.readyState?200===ajax.status?e.onFileDownloadComplete(n.response,n):e.onFileDownloadError({type:o.WEBIM_DOWNLOADFILE_ERROR,id:e.id,xhr:n}):(n.abort(),e.onFileDownloadError({type:o.WEBIM_DOWNLOADFILE_ERROR,id:e.id,xhr:n}))});var a=e.method||"GET",s=e.responseType||"blob",c=e.mimeType||"text/plain; charset=x-user-defined";n.open(a,e.url),"undefined"!==typeof Blob?n.responseType=s:n.overrideMimeType(c);var u={"X-Requested-With":"XMLHttpRequest",Accept:"application/octet-stream","share-secret":e.secret,Authorization:"Bearer "+t},l=e.headers||{};for(var d in l)u[d]=l[d];for(var p in u)u[p]&&n.setRequestHeader(p,u[p]);n.send(null)}else e.onFileDownloadComplete()}else e.onFileDownloadError({type:o.WEBIM_DOWNLOADFILE_NO_LOGIN,id:e.id})},parseTextMessage:function(e,t){if("string"!==typeof e)return!1;if("[object Object]"!==Object.prototype.toString.call(t))return{isemoji:!1,body:[{type:"txt",data:e}]};var n=e,r=[],o=/\[[^[\]]{2,3}\]/gm,i=n.match(o);if(!i||i.length<1)return{isemoji:!1,body:[{type:"txt",data:e}]};for(var a=!1,s=0;s<i.length;s++){var c=n.substring(0,n.indexOf(i[s])),u=t.map[i[s]];if(c&&r.push({type:"txt",data:c}),u){var l=t.map?u:null;l?(a=!0,r.push({type:"emoji",data:l})):r.push({type:"txt",data:i[s]});var d=n.indexOf(i[s])+i[s].length;n=n.substring(d)}else r.push({type:"txt",data:i[s]})}return n&&r.push({type:"txt",data:n}),a?{isemoji:a,body:r}:{isemoji:!1,body:[{type:"txt",data:e}]}},ajax:function(t){var n=t.success||r,o=t.error||r,i=t.type||"POST",a=t.data||null,s="";if("get"===i.toLowerCase()&&a){for(var c in a)a.hasOwnProperty(c)&&(s+=c+"="+a[c]+"&");s=s?s.slice(0,-1):s,t.url+=(t.url.indexOf("?")>0?"&":"?")+(s?s+"&":s)+"_v="+(new Date).getTime(),a=null,s=null}console.log("wx.request",t.url),e.request({url:t.url,data:t.data,header:t.headers,method:i,success:function(e){console.log("wx.request.success",arguments),"200"==e.statusCode?n(e):o(e)},complete:function(){console.log("wx.request.complete",arguments)},fail:function(){console.log("wx.request.fail",arguments)}})},ts:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),r=e.getSeconds(),o=e.getMilliseconds();return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+(r<10?"0"+r:r)+":"+o+" "},getObjectKey:function(e,t){for(var n in e)if(e[n]==t)return n;return""}};t.utils=f})()}).call(this,n("f266")["default"])}}]);